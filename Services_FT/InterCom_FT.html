<html>
<head>
<title>InterCom_FT.thy</title>
</head>
<body bgcolor="#b4cdb4">



<pre><font color="#333333"><span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">   1 </font></span><font color="#cc0000">(*</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">   2 </font></span><font color="#cc0000">The Interpartition Communication services for ARINC 653 P1-5 are first created by </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">   3 </font></span><font color="#cc0000">  GAO Lijie from Zhejiang University.</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">   4 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">   5 </font></span><font color="#cc0000">And this part is reviewed and corrected by ZHANG Feng from Nanyang Technological University.</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">   6 </font></span><font color="#cc0000">*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">   7 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">   8 </font></span><font color="#006699"><strong>section</strong></font><font color="#6600cc">&lsaquo;</font><font color="#6600cc">C</font><font color="#6600cc">o</font><font color="#6600cc">n</font><font color="#6600cc">f</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">m</font><font color="#6600cc">i</font><font color="#6600cc">t</font><font color="#6600cc">y</font><font color="#6600cc"> </font><font color="#6600cc">P</font><font color="#6600cc">r</font><font color="#6600cc">o</font><font color="#6600cc">o</font><font color="#6600cc">f</font><font color="#6600cc"> </font><font color="#6600cc">o</font><font color="#6600cc">f</font><font color="#6600cc"> </font><font color="#6600cc">I</font><font color="#6600cc">n</font><font color="#6600cc">t</font><font color="#6600cc">e</font><font color="#6600cc">r</font><font color="#6600cc">P</font><font color="#6600cc">a</font><font color="#6600cc">r</font><font color="#6600cc">t</font><font color="#6600cc">i</font><font color="#6600cc">t</font><font color="#6600cc">i</font><font color="#6600cc">o</font><font color="#6600cc">n</font><font color="#6600cc"> </font><font color="#6600cc">C</font><font color="#6600cc">o</font><font color="#6600cc">m</font><font color="#6600cc">m</font><font color="#6600cc">u</font><font color="#6600cc">n</font><font color="#6600cc">i</font><font color="#6600cc">c</font><font color="#6600cc">a</font><font color="#6600cc">t</font><font color="#6600cc">i</font><font color="#6600cc">o</font><font color="#6600cc">n</font><font color="#6600cc">s</font><font color="#6600cc">&rsaquo;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">   9 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  10 </font></span><font color="#006699"><strong>theory</strong></font> InterCom_FT
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  11 </font></span><font color="#009966"><strong>imports</strong></font> <font color="#ff00cc">&quot;../Services_R/InterCom&quot;</font> BasicLems 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  12 </font></span><font color="#009966"><strong>begin</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  13 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  14 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  15 </font></span><font color="#cc0000">(*========Lemma========*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  16 </font></span><font color="#cc0000">(*setProcSta WAITING*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  17 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  18 </font></span><font color="#cc0000">(*=== common with ProcessLemma===*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  19 </font></span><font color="#006699"><strong>lemma</strong></font> getSta_set_Waiting<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcSta (setProcSta s pp WAITING) pp = Some WAITING&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  20 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getProcSta_def setProcSta_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  21 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  22 </font></span><font color="#006699"><strong>lemma</strong></font> getSta_setCterRsc<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcSta (setCterRsc s pp stddl) pp = getProcSta s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  23 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getProcSta_def setCterRsc_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  24 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  25 </font></span><font color="#cc0000">(*unique lemmas*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  26 </font></span><font color="#006699"><strong>lemma</strong></font> getSta_setWaitDiff <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcSta (setWaitDiff s pp tout) pp = getProcSta s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  27 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getProcSta_def setWaitDiff_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  28 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  29 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  30 </font></span><font color="#006699"><strong>lemma</strong></font> getSta_procAlone <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcSta (procAlone s pp) pp1 = getProcSta s pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  31 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  32 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getProcSta (procAlone s pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  33 </font></span><font color="#ff00cc">    (procSta (procs_' (let proc_id_sta = procSta (procs_' s) pp in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  34 </font></span><font color="#ff00cc">    case proc_id_sta of </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  35 </font></span><font color="#ff00cc">      Some READY &rArr; readyDel_s_D s (fst pp) (snd pp) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  36 </font></span><font color="#ff00cc">      Some WAITING &rArr; if isInWaitQ s pp then waitDel_D s pp</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  37 </font></span><font color="#ff00cc">                      else s |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  38 </font></span><font color="#ff00cc">      _ &rArr; s)))pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  39 </font></span>    <font color="#006699"><strong>unfolding</strong></font> getProcSta_def procAlone_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  40 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getProcSta (procAlone s pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  41 </font></span><font color="#ff00cc">    (procSta (procs_' (let proc_id_sta = procSta (procs_' s) pp in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  42 </font></span><font color="#ff00cc">    case proc_id_sta of </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  43 </font></span><font color="#ff00cc">      Some READY &rArr; (let ll = the ((readyQue(partitions_' s)) (fst pp)); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  44 </font></span><font color="#ff00cc">      proc_priority = the((curPriority(procs_' s)) ((fst pp),  (snd pp))) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  45 </font></span><font color="#ff00cc">  s&#10631;partitions_' := (partitions_' s)&#10631;readyQue := readyDel_D (readyQue(partitions_' s)) (fst pp) proc_priority  (snd pp)&#10632;&#10632;)  |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  46 </font></span><font color="#ff00cc">      Some WAITING &rArr; if isInWaitQ s pp then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  47 </font></span><font color="#ff00cc">        (let cid = the (procBlngCore pp); vpwl = waitQue (cores_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  48 </font></span><font color="#ff00cc">    pd = waitDiff(rscPendProcs_' s); new_vp_pd = waitQ_SuspQDel vpwl pd cid pp  in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  49 </font></span><font color="#ff00cc">  s&#10631;cores_' := (cores_' s)&#10631;waitQue := fst new_vp_pd&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  50 </font></span><font color="#ff00cc">    rscPendProcs_' := (rscPendProcs_' s)&#10631;waitDiff := snd new_vp_pd&#10632;&#10632;)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  51 </font></span><font color="#ff00cc">                      else s |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  52 </font></span><font color="#ff00cc">      _ &rArr; s)))pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  53 </font></span>    <font color="#006699"><strong>unfolding</strong></font> readyDel_s_D_def waitDel_D_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  54 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  55 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getProcSta (procAlone s pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  56 </font></span><font color="#ff00cc">     (let proc_id_sta = procSta (procs_' s) pp in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  57 </font></span><font color="#ff00cc">    case proc_id_sta of </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  58 </font></span><font color="#ff00cc">      Some READY &rArr; (procSta (procs_' s))  |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  59 </font></span><font color="#ff00cc">      Some WAITING &rArr; if isInWaitQ s pp then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  60 </font></span><font color="#ff00cc">        (procSta (procs_' s))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  61 </font></span><font color="#ff00cc">                      else (procSta (procs_' s)) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  62 </font></span><font color="#ff00cc">      _ &rArr; (procSta (procs_' s)))pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  63 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>verit<font color="#000000"><strong>,</strong></font> ccfv_SIG<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.case<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.case<font color="#000000"><strong>(</strong></font>4<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.exhaust PROC_STATE_TYPE.simps<font color="#000000"><strong>(</strong></font>22<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.simps<font color="#000000"><strong>(</strong></font>23<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.simps<font color="#000000"><strong>(</strong></font>25<font color="#000000"><strong>)</strong></font> StaPart_Sched.simps<font color="#000000"><strong>(</strong></font>5<font color="#000000"><strong>)</strong></font> StaProc.simps<font color="#000000"><strong>(</strong></font>7<font color="#000000"><strong>)</strong></font> StaProc.surjective StaProc.update_convs<font color="#000000"><strong>(</strong></font>2<font color="#000000"><strong>)</strong></font> StaProc_sched.simps<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> getProcSta_def option.case_eq_if procAlone_def readyDel_s_D_def waitDel_D_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  64 </font></span>  
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  65 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getProcSta (procAlone s pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  66 </font></span><font color="#ff00cc">       (procSta (procs_' s)) pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  67 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.exhaust PROC_STATE_TYPE.simps<font color="#000000"><strong>(</strong></font>21<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.simps<font color="#000000"><strong>(</strong></font>22<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.simps<font color="#000000"><strong>(</strong></font>23<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.simps<font color="#000000"><strong>(</strong></font>24<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.simps<font color="#000000"><strong>(</strong></font>25<font color="#000000"><strong>)</strong></font> option.case_eq_if<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  68 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  69 </font></span>  <font color="#0099ff"><strong>thus</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  70 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis getProcSta_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  71 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  72 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  73 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  74 </font></span><font color="#006699"><strong>lemma</strong></font> getSta_waitAdd_D <font color="#000000"><strong>:</strong></font>  <font color="#ff00cc">&quot;getProcSta (waitAdd_D s pp) pp1 = getProcSta s pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  75 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  76 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getProcSta (waitAdd_D s pp) pp1 = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  77 </font></span><font color="#ff00cc">   (procSta (procs_' </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  78 </font></span><font color="#ff00cc">    (let cid = the (procBlngCore pp); tq = waitQue(cores_' s); wait_diff = waitDiff(rscPendProcs_' s);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  79 </font></span><font color="#ff00cc">      tq_wd = waitQ_SuspQAdd tq wait_diff cid pp  in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  80 </font></span><font color="#ff00cc">     if the(wait_diff pp) &gt; 0 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  81 </font></span><font color="#ff00cc">        s&#10631;cores_' := (cores_' s)&#10631;waitQue := fst tq_wd&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  82 </font></span><font color="#ff00cc">          rscPendProcs_' := (rscPendProcs_' s)&#10631;waitDiff := snd tq_wd&#10632;&#10632;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  83 </font></span><font color="#ff00cc">     else s</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  84 </font></span><font color="#ff00cc">   ))) pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  85 </font></span>    <font color="#006699"><strong>unfolding</strong></font> getProcSta_def waitAdd_D_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  86 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getProcSta (waitAdd_D s pp) pp1 =  </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  87 </font></span><font color="#ff00cc">    (let cid = the (procBlngCore pp); tq = waitQue(cores_' s); wait_diff = waitDiff(rscPendProcs_' s);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  88 </font></span><font color="#ff00cc">      tq_wd = waitQ_SuspQAdd tq wait_diff cid pp  in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  89 </font></span><font color="#ff00cc">     if the(wait_diff pp) &gt; 0 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  90 </font></span><font color="#ff00cc">        (procSta (procs_' (s&#10631;cores_' := (cores_' s)&#10631;waitQue := fst tq_wd&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  91 </font></span><font color="#ff00cc">          rscPendProcs_' := (rscPendProcs_' s)&#10631;waitDiff := snd tq_wd&#10632;&#10632;)))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  92 </font></span><font color="#ff00cc">     else (procSta (procs_' s))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  93 </font></span><font color="#ff00cc">    ) pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  94 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  95 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getProcSta (waitAdd_D s pp) pp1 =  </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  96 </font></span><font color="#ff00cc">    (let cid = the (procBlngCore pp); tq = waitQue(cores_' s); wait_diff = waitDiff(rscPendProcs_' s);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  97 </font></span><font color="#ff00cc">      tq_wd = waitQ_SuspQAdd tq wait_diff cid pp  in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  98 </font></span><font color="#ff00cc">     if the(wait_diff pp) &gt; 0 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  99 </font></span><font color="#ff00cc">        (procSta (procs_' (s&#10631;cores_' := (cores_' s)&#10631;waitQue := fst tq_wd&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 100 </font></span><font color="#ff00cc">          rscPendProcs_' := (rscPendProcs_' s)&#10631;waitDiff := snd tq_wd&#10632;&#10632;))) pp1</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 101 </font></span><font color="#ff00cc">     else (procSta (procs_' s)) pp1</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 102 </font></span><font color="#ff00cc">    ) &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 103 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 104 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getProcSta (waitAdd_D s pp) pp1 = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 105 </font></span><font color="#ff00cc">        (procSta (procs_' s)) pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 106 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> StaProc.simps<font color="#000000"><strong>(</strong></font>7<font color="#000000"><strong>)</strong></font> StaProc.surjective StaProc.update_convs<font color="#000000"><strong>(</strong></font>2<font color="#000000"><strong>)</strong></font> StaProc_sched.simps<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 107 </font></span>  <font color="#0099ff"><strong>thus</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 108 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis getProcSta_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 109 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 110 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 111 </font></span><font color="#006699"><strong>lemma</strong></font> getSta_rscQPush <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcSta (rscQPush s rsc pp) pp1 = getProcSta s pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 112 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 113 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getProcSta (rscQPush s rsc pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 114 </font></span><font color="#ff00cc">    (procSta (procs_' (let f_rscPendProcs_' = rscPendProcs_' s; f_rscQue = rscQue f_rscPendProcs_'; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 115 </font></span><font color="#ff00cc">      f_curPriority = curPriority (procs_' s);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 116 </font></span><font color="#ff00cc">      rsc_id_que = rscQue f_rscPendProcs_' rsc; disp = getRscQDis s rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 117 </font></span><font color="#ff00cc">    case rsc of</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 118 </font></span><font color="#ff00cc">      bbd _ &rArr; s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO f_rscQue rsc pp&#10632;&#10632; |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 119 </font></span><font color="#ff00cc">      evt _ &rArr; s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO f_rscQue rsc pp&#10632;&#10632; |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 120 </font></span><font color="#ff00cc">   interC _ &rArr; s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO_Prio f_rscQue f_curPriority rsc pp disp&#10632;&#10632; |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 121 </font></span><font color="#ff00cc">      buf _ &rArr; s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO_Prio f_rscQue f_curPriority rsc pp disp&#10632;&#10632; |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 122 </font></span><font color="#ff00cc">     sema _ &rArr; s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO_Prio f_rscQue f_curPriority rsc pp disp&#10632;&#10632; |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 123 </font></span><font color="#ff00cc">  userPlMtx _ &rArr; s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO_Prio f_rscQue f_curPriority rsc pp disp&#10632;&#10632;)))pp1</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 124 </font></span><font color="#ff00cc">   &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 125 </font></span>    <font color="#006699"><strong>unfolding</strong></font> getProcSta_def rscQPush_def <font color="#006699"><strong>by</strong></font> auto 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 126 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 127 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getProcSta (rscQPush s rsc pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 128 </font></span><font color="#ff00cc">    (let f_rscPendProcs_' = rscPendProcs_' s; f_rscQue = rscQue f_rscPendProcs_'; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 129 </font></span><font color="#ff00cc">      f_curPriority = curPriority (procs_' s);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 130 </font></span><font color="#ff00cc">      rsc_id_que = rscQue f_rscPendProcs_' rsc; disp = getRscQDis s rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 131 </font></span><font color="#ff00cc">    case rsc of</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 132 </font></span><font color="#ff00cc">      bbd _ &rArr; (procSta (procs_' (s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO f_rscQue rsc pp&#10632;&#10632;))) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 133 </font></span><font color="#ff00cc">      evt _ &rArr; (procSta (procs_' (s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO f_rscQue rsc pp&#10632;&#10632;))) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 134 </font></span><font color="#ff00cc">   interC _ &rArr; (procSta (procs_' (s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO_Prio f_rscQue f_curPriority rsc pp disp&#10632;&#10632;))) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 135 </font></span><font color="#ff00cc">      buf _ &rArr; (procSta (procs_' (s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO_Prio f_rscQue f_curPriority rsc pp disp&#10632;&#10632;))) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 136 </font></span><font color="#ff00cc">     sema _ &rArr; (procSta (procs_' (s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO_Prio f_rscQue f_curPriority rsc pp disp&#10632;&#10632;))) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 137 </font></span><font color="#ff00cc">  userPlMtx _ &rArr; (procSta (procs_' (s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO_Prio f_rscQue f_curPriority rsc pp disp&#10632;&#10632;)))) pp1</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 138 </font></span><font color="#ff00cc">   &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 139 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.exhaust RESRC_ID_TYPE.simps<font color="#000000"><strong>(</strong></font>37<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.simps<font color="#000000"><strong>(</strong></font>38<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.simps<font color="#000000"><strong>(</strong></font>39<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.simps<font color="#000000"><strong>(</strong></font>40<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.simps<font color="#000000"><strong>(</strong></font>41<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.simps<font color="#000000"><strong>(</strong></font>42<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 140 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 141 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getProcSta (rscQPush s rsc pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 142 </font></span><font color="#ff00cc">    (let f_rscPendProcs_' = rscPendProcs_' s; f_rscQue = rscQue f_rscPendProcs_'; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 143 </font></span><font color="#ff00cc">      f_curPriority = curPriority (procs_' s);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 144 </font></span><font color="#ff00cc">      rsc_id_que = rscQue f_rscPendProcs_' rsc; disp = getRscQDis s rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 145 </font></span><font color="#ff00cc">    case rsc of</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 146 </font></span><font color="#ff00cc">      bbd _ &rArr; (procSta (procs_' (s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO f_rscQue rsc pp&#10632;&#10632;))) pp1 |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 147 </font></span><font color="#ff00cc">      evt _ &rArr; (procSta (procs_' (s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO f_rscQue rsc pp&#10632;&#10632;))) pp1 |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 148 </font></span><font color="#ff00cc">   interC _ &rArr; (procSta (procs_' (s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO_Prio f_rscQue f_curPriority rsc pp disp&#10632;&#10632;))) pp1 |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 149 </font></span><font color="#ff00cc">      buf _ &rArr; (procSta (procs_' (s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO_Prio f_rscQue f_curPriority rsc pp disp&#10632;&#10632;))) pp1 |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 150 </font></span><font color="#ff00cc">     sema _ &rArr; (procSta (procs_' (s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO_Prio f_rscQue f_curPriority rsc pp disp&#10632;&#10632;))) pp1 |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 151 </font></span><font color="#ff00cc">  userPlMtx _ &rArr; (procSta (procs_' (s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO_Prio f_rscQue f_curPriority rsc pp disp&#10632;&#10632;))) pp1) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 152 </font></span><font color="#ff00cc">   &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 153 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.exhaust RESRC_ID_TYPE.simps<font color="#000000"><strong>(</strong></font>37<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.simps<font color="#000000"><strong>(</strong></font>38<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.simps<font color="#000000"><strong>(</strong></font>39<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.simps<font color="#000000"><strong>(</strong></font>40<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.simps<font color="#000000"><strong>(</strong></font>41<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.simps<font color="#000000"><strong>(</strong></font>42<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 154 </font></span>  
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 155 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getProcSta (rscQPush s rsc pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 156 </font></span><font color="#ff00cc">    (let f_rscPendProcs_' = rscPendProcs_' s; f_rscQue = rscQue f_rscPendProcs_'; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 157 </font></span><font color="#ff00cc">      f_curPriority = curPriority (procs_' s);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 158 </font></span><font color="#ff00cc">      rsc_id_que = rscQue f_rscPendProcs_' rsc; disp = getRscQDis s rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 159 </font></span><font color="#ff00cc">    case rsc of</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 160 </font></span><font color="#ff00cc">      bbd _ &rArr; (procSta (procs_' s)) pp1 |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 161 </font></span><font color="#ff00cc">      evt _ &rArr; (procSta (procs_' s)) pp1 |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 162 </font></span><font color="#ff00cc">   interC _ &rArr; (procSta (procs_' s)) pp1 |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 163 </font></span><font color="#ff00cc">      buf _ &rArr; (procSta (procs_' s)) pp1 |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 164 </font></span><font color="#ff00cc">     sema _ &rArr; (procSta (procs_' s)) pp1 |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 165 </font></span><font color="#ff00cc">  userPlMtx _ &rArr; (procSta (procs_' s)) pp1) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 166 </font></span><font color="#ff00cc">  &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 167 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis StaProc.simps<font color="#000000"><strong>(</strong></font>7<font color="#000000"><strong>)</strong></font> StaProc.surjective StaProc_sched.simps<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 168 </font></span>  
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 169 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getProcSta (rscQPush s rsc pp) pp1 = getProcSta s pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 170 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.exhaust RESRC_ID_TYPE.simps<font color="#000000"><strong>(</strong></font>37<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.simps<font color="#000000"><strong>(</strong></font>38<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.simps<font color="#000000"><strong>(</strong></font>39<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.simps<font color="#000000"><strong>(</strong></font>40<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.simps<font color="#000000"><strong>(</strong></font>41<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.simps<font color="#000000"><strong>(</strong></font>42<font color="#000000"><strong>)</strong></font> getProcSta_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 171 </font></span> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 172 </font></span>  <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> metis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 173 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 174 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 175 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 176 </font></span><font color="#006699"><strong>lemma</strong></font> getSta_setCntxt <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcSta (setCntxt s pp ctx) pp = getProcSta s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 177 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getProcSta_def setCntxt_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 178 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 179 </font></span><font color="#cc0000">(*===lemma===*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 180 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 181 </font></span><font color="#006699"><strong>lemma</strong></font> readSamPortMsg_NotNone<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;readSamPortMsg (writeSamPortMsg s pp msg) pp &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 182 </font></span>      <font color="#006699"><strong>unfolding</strong></font> readSamPortMsg_def writeSamPortMsg_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 183 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 184 </font></span>            
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 185 </font></span><font color="#006699"><strong>lemma</strong></font> readMsg_NotNone<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;readSamPortMsg (writeSamPortMsg s pp msg) pp= Some msg&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 186 </font></span>  <font color="#006699"><strong>proof</strong></font>- 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 187 </font></span>    <font color="#006699"><strong>let</strong></font> ?s_write <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;writeSamPortMsg s pp msg&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 188 </font></span>    <font color="#006699"><strong>have</strong></font> a10<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?s_write = s&#10631;interCom_' := (interCom_' s)&#10631;samPortMsg := (samPortMsg (interCom_' s))(pp := Some msg)&#10632;&#10632;&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 189 </font></span>      <font color="#006699"><strong>unfolding</strong></font> writeSamPortMsg_def <font color="#006699"><strong>by</strong></font> metis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 190 </font></span>    <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;readSamPortMsg ?s_write pp = samPortMsg(interCom_' ?s_write)pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 191 </font></span>      <font color="#006699"><strong>unfolding</strong></font> readSamPortMsg_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 192 </font></span>    <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>using</strong></font> a10 <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 193 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 194 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 195 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 196 </font></span><font color="#006699"><strong>lemma</strong></font> getAttr_NotNone <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getPortAttrByID (createPort s (part_id0, port_id0) port_attr) (part_id0, port_id0) &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 197 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getPortAttrByID_def createPort_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 198 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 199 </font></span><font color="#006699"><strong>lemma</strong></font> getAttr_set_NotNone <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getPortAttrByID (createPort s (the cur_part_id, port_id) port_attr) (the cur_part_id, port_id) &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 200 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getPortAttrByID_def createPort_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 201 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 202 </font></span><font color="#006699"><strong>lemma</strong></font> emptyQueMsg_isEmpty <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;quePortEmpty (emptyQueMsgL s (part_id0, port_id0)) (part_id0, port_id0) = True&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 203 </font></span>  <font color="#006699"><strong>unfolding</strong></font> quePortEmpty_def emptyQueMsgL_def Let_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 204 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 205 </font></span><font color="#cc0000">(*should proof in the list*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 206 </font></span><font color="#006699"><strong>lemma</strong></font> insert_NotNone <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getQueMsgL (insertQueMsg s (part_id0, port_id0) msg) (part_id0, port_id0) &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 207 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getQueMsgL_def insertQueMsg_def Let_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 208 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 209 </font></span><font color="#cc0000">(*SEND_QUEUING_MESSAGE*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 210 </font></span><font color="#006699"><strong>lemma</strong></font> getProcSta_setProc_Waiting <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcSta (setProcSta s (part_id0, port_id0) WAITING) (part_id0, port_id0) = Some WAITING&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 211 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getProcSta_def setProcSta_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 212 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 213 </font></span><font color="#006699"><strong>lemma</strong></font> getProcSta_setCterRsc <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcSta (setCterRsc s pp ctddl) pp = getProcSta s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 214 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getProcSta_def setCterRsc_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 215 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 216 </font></span><font color="#006699"><strong>lemma</strong></font> getProcSta_setWaitDiff <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcSta (setWaitDiff s pp tout) pp = getProcSta s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 217 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getProcSta_def setWaitDiff_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 218 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 219 </font></span><font color="#006699"><strong>lemma</strong></font> getProcSta_setCntxt <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcSta (setCntxt s pp ctx) pp = getProcSta s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 220 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getProcSta_def setCntxt_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 221 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 222 </font></span><font color="#cc0000">(*glj tCounterRsc*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 223 </font></span><font color="#006699"><strong>lemma</strong></font> getCterRsc_set_NotNone<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getCterRsc (setCterRsc s pp ddl) pp  &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 224 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getCterRsc_def setCterRsc_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 225 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 226 </font></span><font color="#006699"><strong>lemma</strong></font> getCterRsc_setWaitDiff <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getCterRsc (setWaitDiff s pp tout) pp = getCterRsc s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 227 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getCterRsc_def setWaitDiff_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 228 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 229 </font></span><font color="#006699"><strong>lemma</strong></font> getCterRsc_procAlone <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getCterRsc (procAlone s pp) pp1 = getCterRsc s pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 230 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 231 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getCterRsc (procAlone s pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 232 </font></span><font color="#ff00cc">    (tCounterRsc(rscPendProcs_' (let proc_id_sta = procSta (procs_' s) pp in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 233 </font></span><font color="#ff00cc">    case proc_id_sta of </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 234 </font></span><font color="#ff00cc">        Some READY &rArr; readyDel_s_D s (fst pp) (snd pp) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 235 </font></span><font color="#ff00cc">        Some WAITING &rArr; if isInWaitQ s pp then waitDel_D s pp</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 236 </font></span><font color="#ff00cc">                        else s |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 237 </font></span><font color="#ff00cc">        _ &rArr; s))) pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 238 </font></span>    <font color="#006699"><strong>unfolding</strong></font> getCterRsc_def procAlone_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 239 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getCterRsc (procAlone s pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 240 </font></span><font color="#ff00cc">    (tCounterRsc(rscPendProcs_' (let proc_id_sta = procSta (procs_' s) pp in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 241 </font></span><font color="#ff00cc">    case proc_id_sta of </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 242 </font></span><font color="#ff00cc">        Some READY &rArr; (let ll = the ((readyQue(partitions_' s)) (fst pp)); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 243 </font></span><font color="#ff00cc">            proc_priority = the((curPriority(procs_' s)) ((fst pp), (snd pp))) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 244 </font></span><font color="#ff00cc">          s&#10631;partitions_' := (partitions_' s)&#10631;readyQue := readyDel_D (readyQue(partitions_' s)) (fst pp) proc_priority (snd pp)&#10632;&#10632;) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 245 </font></span><font color="#ff00cc">        Some WAITING &rArr; if isInWaitQ s pp then </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 246 </font></span><font color="#ff00cc">            (let cid = the (procBlngCore pp); vpwl = waitQue (cores_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 247 </font></span><font color="#ff00cc">                pd = waitDiff(rscPendProcs_' s); new_vp_pd = waitQ_SuspQDel vpwl pd cid pp  in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 248 </font></span><font color="#ff00cc">              s&#10631;cores_' := (cores_' s)&#10631;waitQue := fst new_vp_pd&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 249 </font></span><font color="#ff00cc">                  rscPendProcs_' := (rscPendProcs_' s)&#10631;waitDiff := snd new_vp_pd&#10632;&#10632;)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 250 </font></span><font color="#ff00cc">                        else s |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 251 </font></span><font color="#ff00cc">        _ &rArr; s))) pp1&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 252 </font></span>      <font color="#006699"><strong>unfolding</strong></font> readyDel_s_D_def waitDel_D_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 253 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 254 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getCterRsc (procAlone s pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 255 </font></span><font color="#ff00cc">     (let proc_id_sta = procSta (procs_' s) pp in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 256 </font></span><font color="#ff00cc">    case proc_id_sta of </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 257 </font></span><font color="#ff00cc">        Some READY &rArr; (let ll = the ((readyQue(partitions_' s)) (fst pp)); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 258 </font></span><font color="#ff00cc">            proc_priority = the((curPriority(procs_' s)) ((fst pp), (snd pp))) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 259 </font></span><font color="#ff00cc">         (tCounterRsc(rscPendProcs_' (s&#10631;partitions_' := (partitions_' s)&#10631;readyQue := readyDel_D (readyQue(partitions_' s)) (fst pp) proc_priority (snd pp)&#10632;&#10632;)))) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 260 </font></span><font color="#ff00cc">        Some WAITING &rArr; if isInWaitQ s pp then </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 261 </font></span><font color="#ff00cc">            (let cid = the (procBlngCore pp); vpwl = waitQue (cores_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 262 </font></span><font color="#ff00cc">                pd = waitDiff(rscPendProcs_' s); new_vp_pd = waitQ_SuspQDel vpwl pd cid pp  in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 263 </font></span><font color="#ff00cc">              (tCounterRsc(rscPendProcs_' (s&#10631;cores_' := (cores_' s)&#10631;waitQue := fst new_vp_pd&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 264 </font></span><font color="#ff00cc">                  rscPendProcs_' := (rscPendProcs_' s)&#10631;waitDiff := snd new_vp_pd&#10632;&#10632;))))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 265 </font></span><font color="#ff00cc">                        else (tCounterRsc(rscPendProcs_' s)) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 266 </font></span><font color="#ff00cc">        _ &rArr; (tCounterRsc(rscPendProcs_' s))) pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 267 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.case<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.case<font color="#000000"><strong>(</strong></font>2<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.case<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.case<font color="#000000"><strong>(</strong></font>4<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.case<font color="#000000"><strong>(</strong></font>5<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.exhaust option.case_eq_if<font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 268 </font></span>      
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 269 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getCterRsc (procAlone s pp) pp1 = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 270 </font></span><font color="#ff00cc">    (let proc_id_sta = procSta (procs_' s) pp in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 271 </font></span><font color="#ff00cc">    case proc_id_sta of </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 272 </font></span><font color="#ff00cc">        Some READY &rArr;  (tCounterRsc(rscPendProcs_'  s)) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 273 </font></span><font color="#ff00cc">        Some WAITING &rArr; if isInWaitQ s pp then </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 274 </font></span><font color="#ff00cc">            (tCounterRsc(rscPendProcs_' s)) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 275 </font></span><font color="#ff00cc">                    else (tCounterRsc(rscPendProcs_' s)) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 276 </font></span><font color="#ff00cc">        _ &rArr; (tCounterRsc(rscPendProcs_' s))) pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 277 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> PROCS_STATE_PENDING_TYPE.simps<font color="#000000"><strong>(</strong></font>11<font color="#000000"><strong>)</strong></font> PROCS_STATE_PENDING_TYPE.simps<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font> PROCS_STATE_PENDING_TYPE.surjective StaPart_Sched.simps<font color="#000000"><strong>(</strong></font>5<font color="#000000"><strong>)</strong></font> StaProc.simps<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font> StaProc.simps<font color="#000000"><strong>(</strong></font>7<font color="#000000"><strong>)</strong></font> StaProc.surjective<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 278 </font></span>  
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 279 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getCterRsc (procAlone s pp) pp1 = (tCounterRsc(rscPendProcs_'  s)) pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 280 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.case<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.case<font color="#000000"><strong>(</strong></font>2<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.case<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.case<font color="#000000"><strong>(</strong></font>4<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.exhaust PROC_STATE_TYPE.simps<font color="#000000"><strong>(</strong></font>25<font color="#000000"><strong>)</strong></font> option.case_eq_if<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 281 </font></span>  <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>unfolding</strong></font> getCterRsc_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 282 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 283 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 284 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 285 </font></span><font color="#006699"><strong>lemma</strong></font> getCterRsc_waitAdd_D <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getCterRsc (waitAdd_D s pp) pp1 = getCterRsc s pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 286 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 287 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getCterRsc (waitAdd_D s pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 288 </font></span><font color="#ff00cc">    tCounterRsc(rscPendProcs_' (let cid = the (procBlngCore pp); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 289 </font></span><font color="#ff00cc">      tq = waitQue(cores_' s); wait_diff = waitDiff(rscPendProcs_' s);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 290 </font></span><font color="#ff00cc">      tq_wd = waitQ_SuspQAdd tq wait_diff cid pp  in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 291 </font></span><font color="#ff00cc">    if the(wait_diff pp) &gt; 0 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 292 </font></span><font color="#ff00cc">      s&#10631;cores_' := (cores_' s)&#10631;waitQue := fst tq_wd&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 293 </font></span><font color="#ff00cc">        rscPendProcs_' := (rscPendProcs_' s)&#10631;waitDiff := snd tq_wd&#10632;&#10632;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 294 </font></span><font color="#ff00cc">    else s )) pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 295 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getCterRsc_def waitAdd_D_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 296 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getCterRsc (waitAdd_D s pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 297 </font></span><font color="#ff00cc">    (let cid = the (procBlngCore pp); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 298 </font></span><font color="#ff00cc">      tq = waitQue(cores_' s); wait_diff = waitDiff(rscPendProcs_' s);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 299 </font></span><font color="#ff00cc">      tq_wd = waitQ_SuspQAdd tq wait_diff cid pp  in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 300 </font></span><font color="#ff00cc">    if the(wait_diff pp) &gt; 0 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 301 </font></span><font color="#ff00cc">      tCounterRsc(rscPendProcs_' (s&#10631;cores_' := (cores_' s)&#10631;waitQue := fst tq_wd&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 302 </font></span><font color="#ff00cc">        rscPendProcs_' := (rscPendProcs_' s)&#10631;waitDiff := snd tq_wd&#10632;&#10632;))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 303 </font></span><font color="#ff00cc">    else tCounterRsc(rscPendProcs_' s)) pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 304 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 305 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getCterRsc (waitAdd_D s pp) pp1 = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 306 </font></span><font color="#ff00cc">      (let cid = the (procBlngCore pp); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 307 </font></span><font color="#ff00cc">      tq = waitQue(cores_' s); wait_diff = waitDiff(rscPendProcs_' s);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 308 </font></span><font color="#ff00cc">      tq_wd = waitQ_SuspQAdd tq wait_diff cid pp  in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 309 </font></span><font color="#ff00cc">    if the(wait_diff pp) &gt; 0 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 310 </font></span><font color="#ff00cc">      tCounterRsc(rscPendProcs_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 311 </font></span><font color="#ff00cc">    else tCounterRsc(rscPendProcs_' s)) pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 312 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> PROCS_STATE_PENDING_TYPE.simps<font color="#000000"><strong>(</strong></font>11<font color="#000000"><strong>)</strong></font> PROCS_STATE_PENDING_TYPE.simps<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font> PROCS_STATE_PENDING_TYPE.surjective StaProc.simps<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font> StaProc.simps<font color="#000000"><strong>(</strong></font>7<font color="#000000"><strong>)</strong></font> StaProc.surjective<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 313 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getCterRsc (waitAdd_D s pp) pp1 = tCounterRsc(rscPendProcs_' s) pp1&quot;</font> <font color="#006699"><strong>by</strong></font> metis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 314 </font></span>  <font color="#0099ff"><strong>thus</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 315 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> getCterRsc_def<font color="#000000"><strong>)</strong></font>  
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 316 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 317 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 318 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 319 </font></span><font color="#006699"><strong>lemma</strong></font> getCterRsc_rscQPush_l1 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;(tCounterRsc(rscPendProcs_' (s&#10631;rscPendProcs_' := (rscPendProcs_' s)&#10631;rscQue := </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 320 </font></span><font color="#ff00cc">                                     (let rsc_id_que = (rscQue (rscPendProcs_' s)) rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 321 </font></span><font color="#ff00cc">                                        case rsc_id_que of None &rArr; (rscQue (rscPendProcs_' s))(rsc := Some [pp]) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 322 </font></span><font color="#ff00cc">                                                              _ &rArr; (rscQue (rscPendProcs_' s))(rsc := Some (the rsc_id_que @ [pp])))&#10632;&#10632;))) pp1 = (tCounterRsc(rscPendProcs_' s)) pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 323 </font></span>  <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> PROCS_STATE_PENDING_TYPE.simps<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font> PROCS_STATE_PENDING_TYPE.surjective PROCS_STATE_PENDING_TYPE.update_convs<font color="#000000"><strong>(</strong></font>2<font color="#000000"><strong>)</strong></font> StaProc.simps<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font> StaProc.simps<font color="#000000"><strong>(</strong></font>7<font color="#000000"><strong>)</strong></font> StaProc.surjective<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 324 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 325 </font></span><font color="#006699"><strong>lemma</strong></font> getCterRsc_rscQPush_l2 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 326 </font></span><font color="#ff00cc">    (tCounterRsc(rscPendProcs_' (s&#10631;rscPendProcs_' := (rscPendProcs_' s)&#10631;rscQue := </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 327 </font></span><font color="#ff00cc">                                       (case (getRscQDis s rsc) of  FIFO &rArr;  (let rsc_id_que = (rscQue (rscPendProcs_' s)) rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 328 </font></span><font color="#ff00cc">                                                                case rsc_id_que of None &rArr; (rscQue (rscPendProcs_' s))(rsc := Some [pp]) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 329 </font></span><font color="#ff00cc">                                                                                      _ &rArr; (rscQue (rscPendProcs_' s))(rsc := Some (the rsc_id_que @ [pp]))) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 330 </font></span><font color="#ff00cc">                                                  PRIORITY &rArr;  (let rsc_id_que = (rscQue (rscPendProcs_' s)) rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 331 </font></span><font color="#ff00cc">                                                                case rsc_id_que of None &rArr; (rscQue (rscPendProcs_' s))(rsc := Some [pp]) |                      </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 332 </font></span><font color="#ff00cc">                                                                                      _ &rArr; (rscQue (rscPendProcs_' s))(rsc := Some (addList_Prio' (the rsc_id_que) (curPriority (procs_' s)) pp))) )&#10632;&#10632;))) pp1 = (tCounterRsc(rscPendProcs_' s)) pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 333 </font></span>  <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> PROCS_STATE_PENDING_TYPE.simps<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font> PROCS_STATE_PENDING_TYPE.surjective PROCS_STATE_PENDING_TYPE.update_convs<font color="#000000"><strong>(</strong></font>2<font color="#000000"><strong>)</strong></font> StaProc.simps<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font> StaProc.simps<font color="#000000"><strong>(</strong></font>7<font color="#000000"><strong>)</strong></font> StaProc.surjective<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 334 </font></span>  
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 335 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 336 </font></span><font color="#006699"><strong>lemma</strong></font> getCterRsc_rscQPush <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getCterRsc (rscQPush s rsc pp) pp1 = getCterRsc s pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 337 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 338 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getCterRsc (rscQPush s rsc pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 339 </font></span><font color="#ff00cc">    (tCounterRsc(rscPendProcs_' (let f_rscPendProcs_' = rscPendProcs_' s; f_rscQue = rscQue f_rscPendProcs_'; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 340 </font></span><font color="#ff00cc">      f_curPriority = curPriority (procs_' s);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 341 </font></span><font color="#ff00cc">      rsc_id_que = rscQue f_rscPendProcs_' rsc; disp = getRscQDis s rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 342 </font></span><font color="#ff00cc">  case rsc of</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 343 </font></span><font color="#ff00cc">    bbd _ &rArr; s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO f_rscQue rsc pp&#10632;&#10632; |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 344 </font></span><font color="#ff00cc">    evt _ &rArr; s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO f_rscQue rsc pp&#10632;&#10632; |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 345 </font></span><font color="#ff00cc"> interC _ &rArr; s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO_Prio f_rscQue f_curPriority rsc pp disp&#10632;&#10632; |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 346 </font></span><font color="#ff00cc">    buf _ &rArr; s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO_Prio f_rscQue f_curPriority rsc pp disp&#10632;&#10632; |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 347 </font></span><font color="#ff00cc">   sema _ &rArr; s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO_Prio f_rscQue f_curPriority rsc pp disp&#10632;&#10632; |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 348 </font></span><font color="#ff00cc">userPlMtx _ &rArr; s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO_Prio f_rscQue f_curPriority rsc pp disp&#10632;&#10632;))) pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 349 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getCterRsc_def rscQPush_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 350 </font></span>   <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getCterRsc (rscQPush s rsc pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 351 </font></span><font color="#ff00cc">    (tCounterRsc (let f_rscPendProcs_' = rscPendProcs_' s; f_rscQue = rscQue f_rscPendProcs_'; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 352 </font></span><font color="#ff00cc">      f_curPriority = curPriority (procs_' s);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 353 </font></span><font color="#ff00cc">      rsc_id_que = rscQue f_rscPendProcs_' rsc; disp = getRscQDis s rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 354 </font></span><font color="#ff00cc">  case rsc of</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 355 </font></span><font color="#ff00cc">    bbd _ &rArr; (rscPendProcs_' (s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO f_rscQue rsc pp&#10632;&#10632;)) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 356 </font></span><font color="#ff00cc">    evt _ &rArr; (rscPendProcs_' (s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO f_rscQue rsc pp&#10632;&#10632;)) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 357 </font></span><font color="#ff00cc"> interC _ &rArr; (rscPendProcs_' (s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO_Prio f_rscQue f_curPriority rsc pp disp&#10632;&#10632;)) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 358 </font></span><font color="#ff00cc">    buf _ &rArr; (rscPendProcs_' (s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO_Prio f_rscQue f_curPriority rsc pp disp&#10632;&#10632;)) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 359 </font></span><font color="#ff00cc">   sema _ &rArr; (rscPendProcs_' (s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO_Prio f_rscQue f_curPriority rsc pp disp&#10632;&#10632;)) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 360 </font></span><font color="#ff00cc">userPlMtx _ &rArr; (rscPendProcs_' (s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO_Prio f_rscQue f_curPriority rsc pp disp&#10632;&#10632;)))) pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 361 </font></span>     <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.exhaust RESRC_ID_TYPE.simps<font color="#000000"><strong>(</strong></font>37<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.simps<font color="#000000"><strong>(</strong></font>38<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.simps<font color="#000000"><strong>(</strong></font>39<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.simps<font color="#000000"><strong>(</strong></font>40<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.simps<font color="#000000"><strong>(</strong></font>41<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.simps<font color="#000000"><strong>(</strong></font>42<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 362 </font></span>    
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 363 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getCterRsc (rscQPush s rsc pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 364 </font></span><font color="#ff00cc">    (let f_rscPendProcs_' = rscPendProcs_' s; f_rscQue = rscQue f_rscPendProcs_'; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 365 </font></span><font color="#ff00cc">      f_curPriority = curPriority (procs_' s);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 366 </font></span><font color="#ff00cc">      rsc_id_que = rscQue f_rscPendProcs_' rsc; disp = getRscQDis s rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 367 </font></span><font color="#ff00cc">  case rsc of</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 368 </font></span><font color="#ff00cc">    bbd _ &rArr; (tCounterRsc(rscPendProcs_' (s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO f_rscQue rsc pp&#10632;&#10632;))) pp1 |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 369 </font></span><font color="#ff00cc">    evt _ &rArr; (tCounterRsc(rscPendProcs_' (s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO f_rscQue rsc pp&#10632;&#10632;))) pp1 |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 370 </font></span><font color="#ff00cc"> interC _ &rArr; (tCounterRsc(rscPendProcs_' (s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO_Prio f_rscQue f_curPriority rsc pp disp&#10632;&#10632;))) pp1 |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 371 </font></span><font color="#ff00cc">    buf _ &rArr; (tCounterRsc(rscPendProcs_' (s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO_Prio f_rscQue f_curPriority rsc pp disp&#10632;&#10632;))) pp1 |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 372 </font></span><font color="#ff00cc">   sema _ &rArr; (tCounterRsc(rscPendProcs_' (s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO_Prio f_rscQue f_curPriority rsc pp disp&#10632;&#10632;))) pp1 |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 373 </font></span><font color="#ff00cc">userPlMtx _ &rArr; (tCounterRsc(rscPendProcs_' (s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO_Prio f_rscQue f_curPriority rsc pp disp&#10632;&#10632;))) pp1)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 374 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.exhaust RESRC_ID_TYPE.simps<font color="#000000"><strong>(</strong></font>37<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.simps<font color="#000000"><strong>(</strong></font>38<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.simps<font color="#000000"><strong>(</strong></font>39<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.simps<font color="#000000"><strong>(</strong></font>40<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.simps<font color="#000000"><strong>(</strong></font>41<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.simps<font color="#000000"><strong>(</strong></font>42<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 375 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 376 </font></span>    <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getCterRsc (rscQPush s rsc pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 377 </font></span><font color="#ff00cc">    (let f_rscPendProcs_' = rscPendProcs_' s; f_rscQue = rscQue f_rscPendProcs_'; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 378 </font></span><font color="#ff00cc">      f_curPriority = curPriority (procs_' s);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 379 </font></span><font color="#ff00cc">      rsc_id_que = rscQue f_rscPendProcs_' rsc; disp = getRscQDis s rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 380 </font></span><font color="#ff00cc">  case rsc of</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 381 </font></span><font color="#ff00cc">    bbd _ &rArr; (tCounterRsc(rscPendProcs_' (s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 382 </font></span><font color="#ff00cc">                                     (let rsc_id_que = f_rscQue rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 383 </font></span><font color="#ff00cc">                                        case rsc_id_que of None &rArr; f_rscQue(rsc := Some [pp]) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 384 </font></span><font color="#ff00cc">                                                              _ &rArr; f_rscQue(rsc := Some (the rsc_id_que @ [pp])))&#10632;&#10632;))) pp1 |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 385 </font></span><font color="#ff00cc">    evt _ &rArr; (tCounterRsc(rscPendProcs_' (s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 386 </font></span><font color="#ff00cc">                                     (let rsc_id_que = f_rscQue rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 387 </font></span><font color="#ff00cc">                                        case rsc_id_que of None &rArr; f_rscQue(rsc := Some [pp]) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 388 </font></span><font color="#ff00cc">                                                              _ &rArr; f_rscQue(rsc := Some (the rsc_id_que @ [pp])))&#10632;&#10632;))) pp1 |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 389 </font></span><font color="#ff00cc"> interC _ &rArr; (tCounterRsc(rscPendProcs_' (s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 390 </font></span><font color="#ff00cc">                                       (case disp of  FIFO &rArr; addList_FIFO f_rscQue rsc pp |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 391 </font></span><font color="#ff00cc">                                                  PRIORITY &rArr; addList_Prio f_rscQue f_curPriority rsc pp)&#10632;&#10632;))) pp1 |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 392 </font></span><font color="#ff00cc">    buf _ &rArr; (tCounterRsc(rscPendProcs_' (s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 393 </font></span><font color="#ff00cc">                                       (case disp of  FIFO &rArr; addList_FIFO f_rscQue rsc pp |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 394 </font></span><font color="#ff00cc">                                                  PRIORITY &rArr; addList_Prio f_rscQue f_curPriority rsc pp)&#10632;&#10632;))) pp1 |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 395 </font></span><font color="#ff00cc">   sema _ &rArr; (tCounterRsc(rscPendProcs_' (s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 396 </font></span><font color="#ff00cc">                                       (case disp of  FIFO &rArr; addList_FIFO f_rscQue rsc pp |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 397 </font></span><font color="#ff00cc">                                                  PRIORITY &rArr; addList_Prio f_rscQue f_curPriority rsc pp)&#10632;&#10632;))) pp1 |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 398 </font></span><font color="#ff00cc">userPlMtx _ &rArr; (tCounterRsc(rscPendProcs_' (s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 399 </font></span><font color="#ff00cc">                                       (case disp of  FIFO &rArr; addList_FIFO f_rscQue rsc pp |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 400 </font></span><font color="#ff00cc">                                                  PRIORITY &rArr; addList_Prio f_rscQue f_curPriority rsc pp)&#10632;&#10632;))) pp1)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 401 </font></span>      <font color="#006699"><strong>unfolding</strong></font> addList_FIFO_def addList_FIFO_Prio_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 402 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 403 </font></span>   <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getCterRsc (rscQPush s rsc pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 404 </font></span><font color="#ff00cc">    (let f_rscPendProcs_' = rscPendProcs_' s; f_rscQue = rscQue f_rscPendProcs_'; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 405 </font></span><font color="#ff00cc">      f_curPriority = curPriority (procs_' s);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 406 </font></span><font color="#ff00cc">      rsc_id_que = rscQue f_rscPendProcs_' rsc; disp = getRscQDis s rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 407 </font></span><font color="#ff00cc">  case rsc of</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 408 </font></span><font color="#ff00cc">    bbd _ &rArr; (tCounterRsc(rscPendProcs_' (s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 409 </font></span><font color="#ff00cc">                                     (let rsc_id_que = f_rscQue rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 410 </font></span><font color="#ff00cc">                                        case rsc_id_que of None &rArr; f_rscQue(rsc := Some [pp]) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 411 </font></span><font color="#ff00cc">                                                              _ &rArr; f_rscQue(rsc := Some (the rsc_id_que @ [pp])))&#10632;&#10632;))) pp1 |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 412 </font></span><font color="#ff00cc">    evt _ &rArr; (tCounterRsc(rscPendProcs_' (s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 413 </font></span><font color="#ff00cc">                                     (let rsc_id_que = f_rscQue rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 414 </font></span><font color="#ff00cc">                                        case rsc_id_que of None &rArr; f_rscQue(rsc := Some [pp]) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 415 </font></span><font color="#ff00cc">                                                              _ &rArr; f_rscQue(rsc := Some (the rsc_id_que @ [pp])))&#10632;&#10632;))) pp1 |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 416 </font></span><font color="#ff00cc"> interC _ &rArr; (tCounterRsc(rscPendProcs_' (s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 417 </font></span><font color="#ff00cc">                                       (case disp of  FIFO &rArr;  (let rsc_id_que = f_rscQue rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 418 </font></span><font color="#ff00cc">                                                                case rsc_id_que of None &rArr; f_rscQue(rsc := Some [pp]) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 419 </font></span><font color="#ff00cc">                                                                                      _ &rArr; f_rscQue(rsc := Some (the rsc_id_que @ [pp]))) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 420 </font></span><font color="#ff00cc">                                                  PRIORITY &rArr;  (let rsc_id_que = f_rscQue rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 421 </font></span><font color="#ff00cc">                                                                case rsc_id_que of None &rArr; f_rscQue(rsc := Some [pp]) |                      </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 422 </font></span><font color="#ff00cc">                                                                                      _ &rArr; f_rscQue(rsc := Some (addList_Prio' (the rsc_id_que) f_curPriority pp))) )&#10632;&#10632;))) pp1 |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 423 </font></span><font color="#ff00cc">    buf _ &rArr; (tCounterRsc(rscPendProcs_' (s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 424 </font></span><font color="#ff00cc">                                       (case disp of  FIFO &rArr; (let rsc_id_que = f_rscQue rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 425 </font></span><font color="#ff00cc">                                                                case rsc_id_que of None &rArr; f_rscQue(rsc := Some [pp]) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 426 </font></span><font color="#ff00cc">                                                                                      _ &rArr; f_rscQue(rsc := Some (the rsc_id_que @ [pp]))) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 427 </font></span><font color="#ff00cc">                                                  PRIORITY &rArr; (let rsc_id_que = f_rscQue rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 428 </font></span><font color="#ff00cc">                                                                case rsc_id_que of None &rArr; f_rscQue(rsc := Some [pp]) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 429 </font></span><font color="#ff00cc">                                                                                      _ &rArr; f_rscQue(rsc := Some (addList_Prio' (the rsc_id_que) f_curPriority pp))) )&#10632;&#10632;))) pp1 |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 430 </font></span><font color="#ff00cc">   sema _ &rArr; (tCounterRsc(rscPendProcs_' (s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 431 </font></span><font color="#ff00cc">                                       (case disp of  FIFO &rArr; (let rsc_id_que = f_rscQue rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 432 </font></span><font color="#ff00cc">                                                                case rsc_id_que of None &rArr; f_rscQue(rsc := Some [pp]) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 433 </font></span><font color="#ff00cc">                                                                                      _ &rArr; f_rscQue(rsc := Some (the rsc_id_que @ [pp])))|</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 434 </font></span><font color="#ff00cc">                                                  PRIORITY &rArr; (let rsc_id_que = f_rscQue rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 435 </font></span><font color="#ff00cc">                                                                case rsc_id_que of None &rArr; f_rscQue(rsc := Some [pp]) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 436 </font></span><font color="#ff00cc">                                                                                      _ &rArr; f_rscQue(rsc := Some (addList_Prio' (the rsc_id_que) f_curPriority pp))) )&#10632;&#10632;))) pp1 |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 437 </font></span><font color="#ff00cc">userPlMtx _ &rArr; (tCounterRsc(rscPendProcs_' (s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 438 </font></span><font color="#ff00cc">                                       (case disp of  FIFO &rArr; (let rsc_id_que = f_rscQue rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 439 </font></span><font color="#ff00cc">                                                                case rsc_id_que of None &rArr; f_rscQue(rsc := Some [pp]) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 440 </font></span><font color="#ff00cc">                                                                                      _ &rArr; f_rscQue(rsc := Some (the rsc_id_que @ [pp])))|</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 441 </font></span><font color="#ff00cc">                                                  PRIORITY &rArr; (let rsc_id_que = f_rscQue rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 442 </font></span><font color="#ff00cc">                                                                case rsc_id_que of None &rArr; f_rscQue(rsc := Some [pp]) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 443 </font></span><font color="#ff00cc">                                                                                      _ &rArr; f_rscQue(rsc := Some (addList_Prio' (the rsc_id_que) f_curPriority pp))) )&#10632;&#10632;))) pp1)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 444 </font></span>      <font color="#006699"><strong>unfolding</strong></font> addList_FIFO_def addList_FIFO_Prio_def addList_Prio_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 445 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 446 </font></span>   <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getCterRsc (rscQPush s rsc pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 447 </font></span><font color="#ff00cc">    (case rsc of</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 448 </font></span><font color="#ff00cc">    bbd _ &rArr; (tCounterRsc(rscPendProcs_' (s&#10631;rscPendProcs_' := (rscPendProcs_' s)&#10631;rscQue := </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 449 </font></span><font color="#ff00cc">                                     (let rsc_id_que = (rscQue (rscPendProcs_' s)) rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 450 </font></span><font color="#ff00cc">                                        case rsc_id_que of None &rArr; (rscQue (rscPendProcs_' s))(rsc := Some [pp]) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 451 </font></span><font color="#ff00cc">                                                              _ &rArr; (rscQue (rscPendProcs_' s))(rsc := Some (the rsc_id_que @ [pp])))&#10632;&#10632;))) pp1 |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 452 </font></span><font color="#ff00cc">    evt _ &rArr; (tCounterRsc(rscPendProcs_' (s&#10631;rscPendProcs_' := (rscPendProcs_' s)&#10631;rscQue := </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 453 </font></span><font color="#ff00cc">                                     (let rsc_id_que = (rscQue (rscPendProcs_' s)) rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 454 </font></span><font color="#ff00cc">                                        case rsc_id_que of None &rArr; (rscQue (rscPendProcs_' s))(rsc := Some [pp]) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 455 </font></span><font color="#ff00cc">                                                              _ &rArr; (rscQue (rscPendProcs_' s))(rsc := Some (the rsc_id_que @ [pp])))&#10632;&#10632;))) pp1 |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 456 </font></span><font color="#ff00cc"> interC _ &rArr;  (tCounterRsc(rscPendProcs_' (s&#10631;rscPendProcs_' := (rscPendProcs_' s)&#10631;rscQue := </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 457 </font></span><font color="#ff00cc">                                       (case (getRscQDis s rsc) of  FIFO &rArr;  (let rsc_id_que = (rscQue (rscPendProcs_' s)) rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 458 </font></span><font color="#ff00cc">                                                                case rsc_id_que of None &rArr; (rscQue (rscPendProcs_' s))(rsc := Some [pp]) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 459 </font></span><font color="#ff00cc">                                                                                      _ &rArr; (rscQue (rscPendProcs_' s))(rsc := Some (the rsc_id_que @ [pp]))) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 460 </font></span><font color="#ff00cc">                                                  PRIORITY &rArr;  (let rsc_id_que = (rscQue (rscPendProcs_' s)) rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 461 </font></span><font color="#ff00cc">                                                                case rsc_id_que of None &rArr; (rscQue (rscPendProcs_' s))(rsc := Some [pp]) |                      </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 462 </font></span><font color="#ff00cc">                                                                                      _ &rArr; (rscQue (rscPendProcs_' s))(rsc := Some (addList_Prio' (the rsc_id_que) (curPriority (procs_' s)) pp))) )&#10632;&#10632;))) pp1 |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 463 </font></span><font color="#ff00cc">    buf _ &rArr;  (tCounterRsc(rscPendProcs_' (s&#10631;rscPendProcs_' := (rscPendProcs_' s)&#10631;rscQue := </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 464 </font></span><font color="#ff00cc">                                       (case (getRscQDis s rsc) of  FIFO &rArr;  (let rsc_id_que = (rscQue (rscPendProcs_' s)) rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 465 </font></span><font color="#ff00cc">                                                                case rsc_id_que of None &rArr; (rscQue (rscPendProcs_' s))(rsc := Some [pp]) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 466 </font></span><font color="#ff00cc">                                                                                      _ &rArr; (rscQue (rscPendProcs_' s))(rsc := Some (the rsc_id_que @ [pp]))) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 467 </font></span><font color="#ff00cc">                                                  PRIORITY &rArr;  (let rsc_id_que = (rscQue (rscPendProcs_' s)) rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 468 </font></span><font color="#ff00cc">                                                                case rsc_id_que of None &rArr; (rscQue (rscPendProcs_' s))(rsc := Some [pp]) |                      </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 469 </font></span><font color="#ff00cc">                                                                                      _ &rArr; (rscQue (rscPendProcs_' s))(rsc := Some (addList_Prio' (the rsc_id_que) (curPriority (procs_' s)) pp))) )&#10632;&#10632;))) pp1 |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 470 </font></span><font color="#ff00cc">   sema _ &rArr;  (tCounterRsc(rscPendProcs_' (s&#10631;rscPendProcs_' := (rscPendProcs_' s)&#10631;rscQue := </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 471 </font></span><font color="#ff00cc">                                       (case (getRscQDis s rsc) of  FIFO &rArr;  (let rsc_id_que = (rscQue (rscPendProcs_' s)) rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 472 </font></span><font color="#ff00cc">                                                                case rsc_id_que of None &rArr; (rscQue (rscPendProcs_' s))(rsc := Some [pp]) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 473 </font></span><font color="#ff00cc">                                                                                      _ &rArr; (rscQue (rscPendProcs_' s))(rsc := Some (the rsc_id_que @ [pp]))) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 474 </font></span><font color="#ff00cc">                                                  PRIORITY &rArr;  (let rsc_id_que = (rscQue (rscPendProcs_' s)) rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 475 </font></span><font color="#ff00cc">                                                                case rsc_id_que of None &rArr; (rscQue (rscPendProcs_' s))(rsc := Some [pp]) |                      </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 476 </font></span><font color="#ff00cc">                                                                                      _ &rArr; (rscQue (rscPendProcs_' s))(rsc := Some (addList_Prio' (the rsc_id_que) (curPriority (procs_' s)) pp))) )&#10632;&#10632;))) pp1 |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 477 </font></span><font color="#ff00cc">userPlMtx _ &rArr;  (tCounterRsc(rscPendProcs_' (s&#10631;rscPendProcs_' := (rscPendProcs_' s)&#10631;rscQue := </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 478 </font></span><font color="#ff00cc">                                       (case (getRscQDis s rsc) of  FIFO &rArr;  (let rsc_id_que = (rscQue (rscPendProcs_' s)) rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 479 </font></span><font color="#ff00cc">                                                                case rsc_id_que of None &rArr; (rscQue (rscPendProcs_' s))(rsc := Some [pp]) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 480 </font></span><font color="#ff00cc">                                                                                      _ &rArr; (rscQue (rscPendProcs_' s))(rsc := Some (the rsc_id_que @ [pp]))) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 481 </font></span><font color="#ff00cc">                                                  PRIORITY &rArr;  (let rsc_id_que = (rscQue (rscPendProcs_' s)) rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 482 </font></span><font color="#ff00cc">                                                                case rsc_id_que of None &rArr; (rscQue (rscPendProcs_' s))(rsc := Some [pp]) |                      </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 483 </font></span><font color="#ff00cc">                                                                                      _ &rArr; (rscQue (rscPendProcs_' s))(rsc := Some (addList_Prio' (the rsc_id_que) (curPriority (procs_' s)) pp))) )&#10632;&#10632;))) pp1)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 484 </font></span>     <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>full_types<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 485 </font></span>      
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 486 </font></span>   <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getCterRsc (rscQPush s rsc pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 487 </font></span><font color="#ff00cc">    (case rsc of</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 488 </font></span><font color="#ff00cc">    bbd _ &rArr; (tCounterRsc(rscPendProcs_' s)) pp1 |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 489 </font></span><font color="#ff00cc">    evt _ &rArr; (tCounterRsc(rscPendProcs_' s)) pp1 |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 490 </font></span><font color="#ff00cc"> interC _ &rArr; (tCounterRsc(rscPendProcs_' s)) pp1 |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 491 </font></span><font color="#ff00cc">    buf _ &rArr; (tCounterRsc(rscPendProcs_' s)) pp1 |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 492 </font></span><font color="#ff00cc">   sema _ &rArr; (tCounterRsc(rscPendProcs_' s)) pp1 |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 493 </font></span><font color="#ff00cc">userPlMtx _ &rArr; (tCounterRsc(rscPendProcs_' s)) pp1)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 494 </font></span>     <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis getCterRsc_rscQPush_l1 getCterRsc_rscQPush_l2<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 495 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 496 </font></span>   <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getCterRsc (rscQPush s rsc pp) pp1 = (tCounterRsc(rscPendProcs_' s)) pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 497 </font></span>     <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.case<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.case<font color="#000000"><strong>(</strong></font>2<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.case<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.case<font color="#000000"><strong>(</strong></font>4<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.case<font color="#000000"><strong>(</strong></font>5<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.case<font color="#000000"><strong>(</strong></font>6<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.exhaust<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 498 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 499 </font></span>   <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getCterRsc (rscQPush s rsc pp) pp1 = getCterRsc s pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 500 </font></span>     <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> getCterRsc_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 501 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 502 </font></span>   <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> metis 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 503 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 504 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 505 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 506 </font></span><font color="#006699"><strong>lemma</strong></font> getCterRsc_setCntxt <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getCterRsc (setCntxt s pp ctx) pp = getCterRsc s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 507 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getCterRsc_def setCntxt_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 508 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 509 </font></span><font color="#006699"><strong>lemma</strong></font> getCterRsc_schedule_Abs<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getCterRsc (schedule_Abs s core_id) pp = getCterRsc s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 510 </font></span>  <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 511 </font></span>    <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getCterRsc (schedule_Abs s core_id) pp = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 512 </font></span><font color="#ff00cc">        tCounterRsc(rscPendProcs_'  (let t = timer_' s; newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 513 </font></span><font color="#ff00cc">      f_readyQ = readyQue (partitions_' s); newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 514 </font></span><font color="#ff00cc">      f_procSta = procSta (procs_' s); f_curProc = curProc (partitions_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 515 </font></span><font color="#ff00cc">      sched_proc_newPart = schedProc_Abs f_readyQ newPartID f_procSta f_curProc in </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 516 </font></span><font color="#ff00cc">  s&#10631;partitions_' := (partitions_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 517 </font></span><font color="#ff00cc">      &#10631;curPart := (curPart(partitions_' s))(core_id := Some newPartID),</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 518 </font></span><font color="#ff00cc">      curProc := (curProc (partitions_' s))(newPartID := Some (snd(snd sched_proc_newPart))),</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 519 </font></span><font color="#ff00cc">      readyQue := fst sched_proc_newPart&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 520 </font></span><font color="#ff00cc">    procs_' := (procs_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 521 </font></span><font color="#ff00cc">      &#10631;procSta := setProcSta' (fst (snd sched_proc_newPart)) (newPartID, (snd(snd sched_proc_newPart))) RUNNING&#10632;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 522 </font></span><font color="#ff00cc">    &#10632;)) pp&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 523 </font></span>      <font color="#006699"><strong>unfolding</strong></font> schedule_Abs_def getCterRsc_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 524 </font></span>    <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getCterRsc (schedule_Abs s core_id) pp = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 525 </font></span><font color="#ff00cc">        tCounterRsc(  (let t = timer_' s; newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 526 </font></span><font color="#ff00cc">      f_readyQ = readyQue (partitions_' s); newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 527 </font></span><font color="#ff00cc">      f_procSta = procSta (procs_' s); f_curProc = curProc (partitions_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 528 </font></span><font color="#ff00cc">      sched_proc_newPart = schedProc_Abs f_readyQ newPartID f_procSta f_curProc in </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 529 </font></span><font color="#ff00cc">  rscPendProcs_'(s&#10631;partitions_' := (partitions_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 530 </font></span><font color="#ff00cc">      &#10631;curPart := (curPart(partitions_' s))(core_id := Some newPartID),</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 531 </font></span><font color="#ff00cc">      curProc := (curProc (partitions_' s))(newPartID := Some (snd(snd sched_proc_newPart))),</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 532 </font></span><font color="#ff00cc">      readyQue := fst sched_proc_newPart&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 533 </font></span><font color="#ff00cc">    procs_' := (procs_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 534 </font></span><font color="#ff00cc">      &#10631;procSta := setProcSta' (fst (snd sched_proc_newPart)) (newPartID, (snd(snd sched_proc_newPart))) RUNNING&#10632;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 535 </font></span><font color="#ff00cc">    &#10632;))) pp&quot;</font> <font color="#006699"><strong>by</strong></font> metis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 536 </font></span>    <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getCterRsc (schedule_Abs s core_id) pp = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 537 </font></span><font color="#ff00cc">        tCounterRsc(rscPendProcs_' s) pp&quot;</font>  <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 538 </font></span>     <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>unfolding</strong></font> getCterRsc_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 539 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 540 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 541 </font></span><font color="#cc0000">(*WaitDiff*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 542 </font></span><font color="#006699"><strong>lemma</strong></font> getWaitDiff_set_NotNone <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getWaitDiff (setWaitDiff s pp tout) pp &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 543 </font></span>    <font color="#006699"><strong>unfolding</strong></font> getWaitDiff_def setWaitDiff_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 544 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 545 </font></span><font color="#cc0000">(*===getWaitDiff_waitAdd_D===*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 546 </font></span><font color="#cc0000">(*same as timedLAdd_InL*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 547 </font></span><font color="#006699"><strong>lemma</strong></font> waitAdd_D_timedLAdd_InL <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&forall;ppt. isInList (fst (timedLAdd ppl ppt pp')) pp'&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 548 </font></span><font color="#006699"><strong>proof</strong></font><font color="#000000"><strong>(</strong></font>induction ppl<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 549 </font></span>    <font color="#0099ff"><strong>case</strong></font>  Nil
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 550 </font></span>    <font color="#006699"><strong>then</strong></font> <font color="#0099ff"><strong>show</strong></font> ?case <font color="#006699"><strong>using</strong></font> isInList_def <font color="#006699"><strong>by</strong></font> force
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 551 </font></span>  <font color="#006699"><strong>next</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 552 </font></span>    <font color="#0099ff"><strong>case</strong></font> <font color="#000000"><strong>(</strong></font>Cons pp ppl<font color="#000000"><strong>)</strong></font> <font color="#006699"><strong>thm</strong></font> Cons
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 553 </font></span>    <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&forall;ppt. isInList (fst (timedLAdd ppl ppt pp')) pp'&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 554 </font></span>      <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis Cons.IH<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 555 </font></span>    <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>fix</strong></font> ppt<font color="#000000"><strong>::</strong></font><font color="#ff00cc">&quot;PART_ID_TYPE &times; PROC_ID_TYPE &rArr; TIMEOUT_TYPE option&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 556 </font></span>    <font color="#006699"><strong>let</strong></font> ?new_pl_ppt <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;(timedLAdd (pp#ppl) ppt pp')&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 557 </font></span>    <font color="#006699"><strong>let</strong></font> ?new_ppt <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;ppt(pp' := Some ((the(ppt pp')) -  (the(ppt pp))))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 558 </font></span>    <font color="#006699"><strong>have</strong></font> a10<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;fst ?new_pl_ppt = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 559 </font></span><font color="#ff00cc">        (if Int.nat (the(ppt pp')) &le; Int.nat (the(ppt pp)) then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 560 </font></span><font color="#ff00cc">                  (pp'#(pp#ppl))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 561 </font></span><font color="#ff00cc">         else (pp#(fst (timedLAdd ppl ?new_ppt pp'))))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 562 </font></span>      <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> fst_conv timedLAdd.simps<font color="#000000"><strong>(</strong></font>2<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 563 </font></span>    <font color="#006699"><strong>have</strong></font> a11<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;isInList (fst (timedLAdd (pp#ppl) ppt pp')) pp'&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 564 </font></span>      <font color="#006699"><strong>proof</strong></font><font color="#000000"><strong>(</strong></font>cases <font color="#ff00cc">&quot;Int.nat (the(ppt pp')) &le; Int.nat (the(ppt pp))&quot;</font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 565 </font></span>        <font color="#0099ff"><strong>case</strong></font> True
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 566 </font></span>        <font color="#006699"><strong>then</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>using</strong></font> isInList_def <font color="#006699"><strong>by</strong></font> force
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 567 </font></span>      <font color="#006699"><strong>next</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 568 </font></span>        <font color="#0099ff"><strong>case</strong></font> False
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 569 </font></span>        <font color="#006699"><strong>then</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>using</strong></font> isInList_def timedLAdd_def
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 570 </font></span>          <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> Cons.IH Suc_le_mono a10 add.right_neutral add_Suc_right list.size<font color="#000000"><strong>(</strong></font>4<font color="#000000"><strong>)</strong></font> nth_Cons_Suc<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 571 </font></span>    <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 572 </font></span>    <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 573 </font></span>    <font color="#006699"><strong>then</strong></font> <font color="#0099ff"><strong>show</strong></font> ?case <font color="#006699"><strong>by</strong></font> blast
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 574 </font></span>    
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 575 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 576 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 577 </font></span><font color="#cc0000">(*same as t1'*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 578 </font></span><font color="#006699"><strong>lemma</strong></font> waitAdd_D_t1' <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&forall;wait_diff. (wait_diff rr &ne; None &#10230; snd (timedLAdd pwl wait_diff qq) rr &ne; None)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 579 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 580 </font></span>    <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 581 </font></span>    <font color="#006699"><strong>proof</strong></font><font color="#000000"><strong>(</strong></font>induction pwl<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 582 </font></span>      <font color="#0099ff"><strong>case</strong></font> Nil
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 583 </font></span>      <font color="#006699"><strong>then</strong></font> <font color="#0099ff"><strong>show</strong></font> ?case <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 584 </font></span>    <font color="#006699"><strong>next</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 585 </font></span>      <font color="#0099ff"><strong>case</strong></font> <font color="#000000"><strong>(</strong></font>Cons pp ppl<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 586 </font></span>        <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&forall;wait_diff. (wait_diff rr &ne; None &#10230; snd (timedLAdd ppl wait_diff qq) rr &ne; None)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 587 </font></span>          <font color="#006699"><strong>using</strong></font> Cons <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 588 </font></span>        <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>fix</strong></font> wait_diff <font color="#000000"><strong>::</strong></font> <font color="#ff00cc">&quot;(PART_ID_TYPE &times; PROC_ID_TYPE &rArr; TIMEOUT_TYPE option)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 589 </font></span>          <font color="#0099ff"><strong>assume</strong></font> a00 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;wait_diff rr &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 590 </font></span>          <font color="#006699"><strong>let</strong></font> ?new_pwl_pd <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;timedLAdd (pp#ppl) wait_diff qq&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 591 </font></span>          <font color="#006699"><strong>have</strong></font> a10<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;snd ?new_pwl_pd rr = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 592 </font></span><font color="#ff00cc">             (if Int.nat (the(wait_diff qq)) &le; Int.nat (the(wait_diff pp)) then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 593 </font></span><font color="#ff00cc">              (wait_diff(pp := Some ((the(wait_diff pp)) -  (the(wait_diff qq)))))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 594 </font></span><font color="#ff00cc">             else let new_ppt = wait_diff(qq := Some ((the(wait_diff qq)) -  (the(wait_diff pp)))) in </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 595 </font></span><font color="#ff00cc">              (snd (timedLAdd ppl new_ppt qq))) rr&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 596 </font></span>            <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> snd_conv timedLAdd.simps<font color="#000000"><strong>(</strong></font>2<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 597 </font></span>          <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;snd ?new_pwl_pd rr &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 598 </font></span>            <font color="#006699"><strong>proof</strong></font><font color="#000000"><strong>(</strong></font>cases <font color="#ff00cc">&quot;Int.nat (the(wait_diff qq)) &le; Int.nat (the(wait_diff pp))&quot;</font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 599 </font></span>              <font color="#0099ff"><strong>case</strong></font> True
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 600 </font></span>                <font color="#006699"><strong>then</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>using</strong></font> a10 a00 <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 601 </font></span>            <font color="#006699"><strong>next</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 602 </font></span>              <font color="#0099ff"><strong>case</strong></font> False
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 603 </font></span>                <font color="#006699"><strong>let</strong></font> ?new_ppt <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot; wait_diff(qq := Some ((the(wait_diff qq)) -  (the(wait_diff pp))))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 604 </font></span>                <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;snd ?new_pwl_pd rr = snd (timedLAdd ppl ?new_ppt qq) rr&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 605 </font></span>                  <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> False a10<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 606 </font></span>            <font color="#006699"><strong>then</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>using</strong></font> a10 a00 Cons False <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 607 </font></span>          <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 608 </font></span>        <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 609 </font></span>      <font color="#006699"><strong>then</strong></font> <font color="#0099ff"><strong>show</strong></font> ?case
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 610 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 611 </font></span>    <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 612 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 613 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 614 </font></span><font color="#cc0000">(*same as common t1*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 615 </font></span><font color="#006699"><strong>lemma</strong></font> waitAdd_D_t1 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;let wait_diff = waitDiff(rscPendProcs_' s); tq_wd = waitQ_SuspQAdd tq wait_diff cid qq in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 616 </font></span><font color="#ff00cc">   wait_diff qq &ne; None &and; the(wait_diff qq) &gt; 0 &#10230; snd tq_wd qq &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 617 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 618 </font></span>  <font color="#006699"><strong>let</strong></font> ?wait_diff <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;waitDiff(rscPendProcs_' s)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 619 </font></span>  <font color="#006699"><strong>let</strong></font> ?tq_wd <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;waitQ_SuspQAdd tq ?wait_diff cid qq&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 620 </font></span>  <font color="#006699"><strong>let</strong></font> ?pwl <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;case tq cid = None of False &rArr; the(tq cid) | True &rArr; []&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 621 </font></span>  <font color="#006699"><strong>let</strong></font> ?new_pwl_pd <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;timedLAdd ?pwl ?wait_diff qq&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 622 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 623 </font></span>  <font color="#006699"><strong>have</strong></font> a10<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;snd ?tq_wd qq = snd ?new_pwl_pd qq&quot;</font> <font color="#006699"><strong>unfolding</strong></font> waitQ_SuspQAdd_def Let_def <font color="#006699"><strong>by</strong></font> simp
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 624 </font></span>  <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>assume</strong></font> a00<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?wait_diff qq &ne; None &and; the(?wait_diff qq) &gt; 0&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 625 </font></span>   <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;snd ?tq_wd qq &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 626 </font></span>    <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 627 </font></span>     <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;snd ?new_pwl_pd qq &ne; None&quot;</font> <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>meson a00 waitAdd_D_t1'<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 628 </font></span>     <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>using</strong></font> a10 <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 629 </font></span>    <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 630 </font></span>  <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 631 </font></span>  <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 632 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 633 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 634 </font></span><font color="#006699"><strong>lemma</strong></font> waitAdd_D <font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 635 </font></span>  <font color="#ff00cc">&quot;let s' = waitAdd_D s pp;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 636 </font></span><font color="#ff00cc">    cid = the (procBlngCore pp); tq = waitQue(cores_' s); wait_diff = waitDiff(rscPendProcs_' s);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 637 </font></span><font color="#ff00cc">      tq_wd = waitQ_SuspQAdd tq wait_diff cid pp in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 638 </font></span><font color="#ff00cc">   (getWaitDiff s pp &ne; None) &and; the(wait_diff pp) &gt; 0 &#10230; getWaitDiff s' pp &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 639 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 640 </font></span>  <font color="#006699"><strong>let</strong></font> ?s' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;waitAdd_D s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 641 </font></span>  <font color="#006699"><strong>let</strong></font> ?cid <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;the (procBlngCore pp)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 642 </font></span>  <font color="#006699"><strong>let</strong></font> ?tq <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;waitQue(cores_' s)&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 643 </font></span>  <font color="#006699"><strong>let</strong></font> ?wait_diff <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;waitDiff(rscPendProcs_' s)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 644 </font></span>  <font color="#006699"><strong>let</strong></font> ?tq_wd <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;waitQ_SuspQAdd ?tq ?wait_diff ?cid pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 645 </font></span>  <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>assume</strong></font> a0<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;(getWaitDiff s pp &ne; None) &and; the(?wait_diff pp) &gt; 0&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 646 </font></span>    <font color="#006699"><strong>hence</strong></font> a1<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?s' = s&#10631;cores_' := (cores_' s)&#10631;waitQue := fst ?tq_wd&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 647 </font></span><font color="#ff00cc">      rscPendProcs_' := (rscPendProcs_' s)&#10631;waitDiff := snd ?tq_wd&#10632;&#10632;&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 648 </font></span>      <font color="#006699"><strong>unfolding</strong></font> waitAdd_D_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 649 </font></span>    <font color="#006699"><strong>have</strong></font> a2<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getWaitDiff ?s' pp &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 650 </font></span>      <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 651 </font></span>        <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getWaitDiff ?s' pp =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 652 </font></span><font color="#ff00cc">          (if the(?wait_diff pp) &gt; 0 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 653 </font></span><font color="#ff00cc">              snd ?tq_wd</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 654 </font></span><font color="#ff00cc">           else waitDiff(rscPendProcs_' s)) pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 655 </font></span>          <font color="#006699"><strong>unfolding</strong></font> getWaitDiff_def waitAdd_D_def Let_def <font color="#006699"><strong>by</strong></font> simp
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 656 </font></span>        <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>using</strong></font> waitAdd_D_t1
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 657 </font></span>          <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>verit<font color="#000000"><strong>,</strong></font> ccfv_SIG<font color="#000000"><strong>)</strong></font> a0 getWaitDiff_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 658 </font></span>      <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 659 </font></span>   <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 660 </font></span>  <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 661 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 662 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 663 </font></span><font color="#006699"><strong>lemma</strong></font> getWaitDiff_waitAdd_D <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getWaitDiff s pp &ne; None </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 664 </font></span><font color="#ff00cc">                    &#10230; getWaitDiff (waitAdd_D s pp) pp &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 665 </font></span>  <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>verit<font color="#000000"><strong>,</strong></font> del_insts<font color="#000000"><strong>)</strong></font> waitAdd_D waitAdd_D_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 666 </font></span>  
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 667 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 668 </font></span><font color="#cc0000">(*getWaitDiff_rscQPush*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 669 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 670 </font></span><font color="#006699"><strong>lemma</strong></font> getWaitDiff_rscQPush_l1 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;(waitDiff (rscPendProcs_' (s&#10631;rscPendProcs_' := (rscPendProcs_' s)&#10631;rscQue := </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 671 </font></span><font color="#ff00cc">                                     (case ((rscQue (rscPendProcs_' s)) rsc) of None &rArr; (rscQue (rscPendProcs_' s))(rsc := Some [pp]) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 672 </font></span><font color="#ff00cc">                                                              _ &rArr; (rscQue (rscPendProcs_' s))(rsc := Some (the((rscQue (rscPendProcs_' s)) rsc) @ [pp])))&#10632;&#10632;))) pp1 = (waitDiff (rscPendProcs_' s)) pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 673 </font></span>   <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 674 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 675 </font></span><font color="#006699"><strong>lemma</strong></font> getWaitDiff_rscQPush_l2 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 676 </font></span><font color="#ff00cc">   (waitDiff (rscPendProcs_' (s&#10631;rscPendProcs_' := (rscPendProcs_' s)&#10631;rscQue := </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 677 </font></span><font color="#ff00cc">                                       (case (getRscQDis s rsc) of  FIFO &rArr;  (let rsc_id_que = (rscQue (rscPendProcs_' s)) rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 678 </font></span><font color="#ff00cc">                                                                case rsc_id_que of None &rArr; (rscQue (rscPendProcs_' s))(rsc := Some [pp]) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 679 </font></span><font color="#ff00cc">                                                                                      _ &rArr; (rscQue (rscPendProcs_' s))(rsc := Some (the rsc_id_que @ [pp]))) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 680 </font></span><font color="#ff00cc">                                                  PRIORITY &rArr;  (let rsc_id_que = (rscQue (rscPendProcs_' s)) rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 681 </font></span><font color="#ff00cc">                                                                case rsc_id_que of None &rArr; (rscQue (rscPendProcs_' s))(rsc := Some [pp]) |                      </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 682 </font></span><font color="#ff00cc">                                                                                      _ &rArr; (rscQue (rscPendProcs_' s))(rsc := Some (addList_Prio' (the rsc_id_que) (curPriority (procs_' s)) pp))) )&#10632;&#10632;))) pp1 = (waitDiff (rscPendProcs_' s)) pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 683 </font></span>  <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 684 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 685 </font></span><font color="#006699"><strong>lemma</strong></font> getWaitDiff_rscQPush <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getWaitDiff (rscQPush s rsc pp) pp1 = getWaitDiff s pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 686 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 687 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getWaitDiff (rscQPush s rsc pp) pp1 = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 688 </font></span><font color="#ff00cc">    (waitDiff(rscPendProcs_' (let f_rscPendProcs_' = rscPendProcs_' s; f_rscQue = rscQue f_rscPendProcs_'; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 689 </font></span><font color="#ff00cc">      f_curPriority = curPriority (procs_' s);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 690 </font></span><font color="#ff00cc">      rsc_id_que = rscQue f_rscPendProcs_' rsc; disp = getRscQDis s rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 691 </font></span><font color="#ff00cc">  case rsc of</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 692 </font></span><font color="#ff00cc">    bbd _ &rArr; s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO f_rscQue rsc pp&#10632;&#10632; |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 693 </font></span><font color="#ff00cc">    evt _ &rArr; s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO f_rscQue rsc pp&#10632;&#10632; |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 694 </font></span><font color="#ff00cc"> interC _ &rArr; s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO_Prio f_rscQue f_curPriority rsc pp disp&#10632;&#10632; |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 695 </font></span><font color="#ff00cc">    buf _ &rArr; s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO_Prio f_rscQue f_curPriority rsc pp disp&#10632;&#10632; |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 696 </font></span><font color="#ff00cc">   sema _ &rArr; s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO_Prio f_rscQue f_curPriority rsc pp disp&#10632;&#10632; |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 697 </font></span><font color="#ff00cc">userPlMtx _ &rArr; s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO_Prio f_rscQue f_curPriority rsc pp disp&#10632;&#10632;))) pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 698 </font></span>    <font color="#006699"><strong>unfolding</strong></font> getWaitDiff_def rscQPush_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 699 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 700 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getWaitDiff (rscQPush s rsc pp) pp1 = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 701 </font></span><font color="#ff00cc">   (let f_rscPendProcs_' = rscPendProcs_' s; f_rscQue = rscQue f_rscPendProcs_'; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 702 </font></span><font color="#ff00cc">      f_curPriority = curPriority (procs_' s);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 703 </font></span><font color="#ff00cc">      rsc_id_que = rscQue f_rscPendProcs_' rsc; disp = getRscQDis s rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 704 </font></span><font color="#ff00cc">  case rsc of</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 705 </font></span><font color="#ff00cc">    bbd _ &rArr; (waitDiff (rscPendProcs_' (s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO f_rscQue rsc pp&#10632;&#10632;)) pp1) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 706 </font></span><font color="#ff00cc">    evt _ &rArr; (waitDiff (rscPendProcs_' (s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO f_rscQue rsc pp&#10632;&#10632;)) pp1) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 707 </font></span><font color="#ff00cc"> interC _ &rArr; (waitDiff (rscPendProcs_' (s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO_Prio f_rscQue f_curPriority rsc pp disp&#10632;&#10632;)) pp1) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 708 </font></span><font color="#ff00cc">    buf _ &rArr; (waitDiff (rscPendProcs_' (s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO_Prio f_rscQue f_curPriority rsc pp disp&#10632;&#10632;)) pp1) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 709 </font></span><font color="#ff00cc">   sema _ &rArr; (waitDiff (rscPendProcs_' (s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO_Prio f_rscQue f_curPriority rsc pp disp&#10632;&#10632;)) pp1) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 710 </font></span><font color="#ff00cc">userPlMtx _ &rArr; (waitDiff (rscPendProcs_' (s&#10631;rscPendProcs_' := f_rscPendProcs_'&#10631;rscQue := addList_FIFO_Prio f_rscQue f_curPriority rsc pp disp&#10632;&#10632;))) pp1) &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 711 </font></span>  <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.exhaust RESRC_ID_TYPE.simps<font color="#000000"><strong>(</strong></font>37<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.simps<font color="#000000"><strong>(</strong></font>38<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.simps<font color="#000000"><strong>(</strong></font>39<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.simps<font color="#000000"><strong>(</strong></font>40<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.simps<font color="#000000"><strong>(</strong></font>41<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.simps<font color="#000000"><strong>(</strong></font>42<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 712 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 713 </font></span> <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getWaitDiff (rscQPush s rsc pp) pp1 = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 714 </font></span><font color="#ff00cc">   (case rsc of</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 715 </font></span><font color="#ff00cc">    bbd _ &rArr; (waitDiff (rscPendProcs_' (s&#10631;rscPendProcs_' := (rscPendProcs_' s)&#10631;rscQue := </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 716 </font></span><font color="#ff00cc">                                     (let rsc_id_que = (rscQue (rscPendProcs_' s)) rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 717 </font></span><font color="#ff00cc">                                        case rsc_id_que of None &rArr; (rscQue (rscPendProcs_' s))(rsc := Some [pp]) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 718 </font></span><font color="#ff00cc">                                                              _ &rArr; (rscQue (rscPendProcs_' s))(rsc := Some (the rsc_id_que @ [pp])))&#10632;&#10632;))) pp1 |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 719 </font></span><font color="#ff00cc">    evt _ &rArr; (waitDiff (rscPendProcs_' (s&#10631;rscPendProcs_' := (rscPendProcs_' s)&#10631;rscQue := </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 720 </font></span><font color="#ff00cc">                                     (let rsc_id_que = (rscQue (rscPendProcs_' s)) rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 721 </font></span><font color="#ff00cc">                                        case rsc_id_que of None &rArr; (rscQue (rscPendProcs_' s))(rsc := Some [pp]) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 722 </font></span><font color="#ff00cc">                                                              _ &rArr; (rscQue (rscPendProcs_' s))(rsc := Some (the rsc_id_que @ [pp])))&#10632;&#10632;))) pp1 |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 723 </font></span><font color="#ff00cc"> interC _ &rArr; (waitDiff (rscPendProcs_' (s&#10631;rscPendProcs_' := (rscPendProcs_' s)&#10631;rscQue := </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 724 </font></span><font color="#ff00cc">                                       (case (getRscQDis s rsc) of  FIFO &rArr;  (let rsc_id_que = (rscQue (rscPendProcs_' s)) rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 725 </font></span><font color="#ff00cc">                                                                case rsc_id_que of None &rArr; (rscQue (rscPendProcs_' s))(rsc := Some [pp]) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 726 </font></span><font color="#ff00cc">                                                                                      _ &rArr; (rscQue (rscPendProcs_' s))(rsc := Some (the rsc_id_que @ [pp]))) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 727 </font></span><font color="#ff00cc">                                                  PRIORITY &rArr;  (let rsc_id_que = (rscQue (rscPendProcs_' s)) rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 728 </font></span><font color="#ff00cc">                                                                case rsc_id_que of None &rArr; (rscQue (rscPendProcs_' s))(rsc := Some [pp]) |                      </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 729 </font></span><font color="#ff00cc">                                                                                      _ &rArr; (rscQue (rscPendProcs_' s))(rsc := Some (addList_Prio' (the rsc_id_que) (curPriority (procs_' s)) pp))) )&#10632;&#10632;))) pp1 |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 730 </font></span><font color="#ff00cc">    buf _ &rArr; (waitDiff (rscPendProcs_' (s&#10631;rscPendProcs_' := (rscPendProcs_' s)&#10631;rscQue := </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 731 </font></span><font color="#ff00cc">                                       (case (getRscQDis s rsc) of  FIFO &rArr;  (let rsc_id_que = (rscQue (rscPendProcs_' s)) rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 732 </font></span><font color="#ff00cc">                                                                case rsc_id_que of None &rArr; (rscQue (rscPendProcs_' s))(rsc := Some [pp]) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 733 </font></span><font color="#ff00cc">                                                                                      _ &rArr; (rscQue (rscPendProcs_' s))(rsc := Some (the rsc_id_que @ [pp]))) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 734 </font></span><font color="#ff00cc">                                                  PRIORITY &rArr;  (let rsc_id_que = (rscQue (rscPendProcs_' s)) rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 735 </font></span><font color="#ff00cc">                                                                case rsc_id_que of None &rArr; (rscQue (rscPendProcs_' s))(rsc := Some [pp]) |                      </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 736 </font></span><font color="#ff00cc">                                                                                      _ &rArr; (rscQue (rscPendProcs_' s))(rsc := Some (addList_Prio' (the rsc_id_que) (curPriority (procs_' s)) pp))) )&#10632;&#10632;))) pp1 |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 737 </font></span><font color="#ff00cc">   sema _ &rArr; (waitDiff (rscPendProcs_' (s&#10631;rscPendProcs_' := (rscPendProcs_' s)&#10631;rscQue := </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 738 </font></span><font color="#ff00cc">                                       (case (getRscQDis s rsc) of  FIFO &rArr;  (let rsc_id_que = (rscQue (rscPendProcs_' s)) rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 739 </font></span><font color="#ff00cc">                                                                case rsc_id_que of None &rArr; (rscQue (rscPendProcs_' s))(rsc := Some [pp]) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 740 </font></span><font color="#ff00cc">                                                                                      _ &rArr; (rscQue (rscPendProcs_' s))(rsc := Some (the rsc_id_que @ [pp]))) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 741 </font></span><font color="#ff00cc">                                                  PRIORITY &rArr;  (let rsc_id_que = (rscQue (rscPendProcs_' s)) rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 742 </font></span><font color="#ff00cc">                                                                case rsc_id_que of None &rArr; (rscQue (rscPendProcs_' s))(rsc := Some [pp]) |                      </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 743 </font></span><font color="#ff00cc">                                                                                      _ &rArr; (rscQue (rscPendProcs_' s))(rsc := Some (addList_Prio' (the rsc_id_que) (curPriority (procs_' s)) pp))) )&#10632;&#10632;))) pp1 |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 744 </font></span><font color="#ff00cc">userPlMtx _ &rArr; (waitDiff (rscPendProcs_' (s&#10631;rscPendProcs_' := (rscPendProcs_' s)&#10631;rscQue := </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 745 </font></span><font color="#ff00cc">                                       (case (getRscQDis s rsc) of  FIFO &rArr;  (let rsc_id_que = (rscQue (rscPendProcs_' s)) rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 746 </font></span><font color="#ff00cc">                                                                case rsc_id_que of None &rArr; (rscQue (rscPendProcs_' s))(rsc := Some [pp]) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 747 </font></span><font color="#ff00cc">                                                                                      _ &rArr; (rscQue (rscPendProcs_' s))(rsc := Some (the rsc_id_que @ [pp]))) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 748 </font></span><font color="#ff00cc">                                                  PRIORITY &rArr;  (let rsc_id_que = (rscQue (rscPendProcs_' s)) rsc in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 749 </font></span><font color="#ff00cc">                                                                case rsc_id_que of None &rArr; (rscQue (rscPendProcs_' s))(rsc := Some [pp]) |                      </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 750 </font></span><font color="#ff00cc">                                                                                      _ &rArr; (rscQue (rscPendProcs_' s))(rsc := Some (addList_Prio' (the rsc_id_que) (curPriority (procs_' s)) pp))) )&#10632;&#10632;))) pp1)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 751 </font></span>     <font color="#006699"><strong>unfolding</strong></font> addList_FIFO_def addList_FIFO_Prio_def addList_Prio_def  <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>full_types<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 752 </font></span>  
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 753 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getWaitDiff (rscQPush s rsc pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 754 </font></span><font color="#ff00cc">    (case rsc of</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 755 </font></span><font color="#ff00cc">    bbd _ &rArr; (waitDiff (rscPendProcs_' s)) pp1 |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 756 </font></span><font color="#ff00cc">    evt _ &rArr; (waitDiff (rscPendProcs_' s)) pp1 |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 757 </font></span><font color="#ff00cc"> interC _ &rArr; (waitDiff (rscPendProcs_' s)) pp1 |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 758 </font></span><font color="#ff00cc">    buf _ &rArr; (waitDiff (rscPendProcs_' s)) pp1 |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 759 </font></span><font color="#ff00cc">   sema _ &rArr; (waitDiff (rscPendProcs_' s)) pp1 |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 760 </font></span><font color="#ff00cc">userPlMtx _ &rArr; (waitDiff (rscPendProcs_' s)) pp1)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 761 </font></span>  <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis getWaitDiff_rscQPush_l1 getWaitDiff_rscQPush_l2<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 762 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 763 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getWaitDiff (rscQPush s rsc pp) pp1 = (waitDiff (rscPendProcs_' s)) pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 764 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.case<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.case<font color="#000000"><strong>(</strong></font>2<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.case<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.case<font color="#000000"><strong>(</strong></font>4<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.case<font color="#000000"><strong>(</strong></font>5<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.case<font color="#000000"><strong>(</strong></font>6<font color="#000000"><strong>)</strong></font> RESRC_ID_TYPE.exhaust<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 765 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getWaitDiff (rscQPush s rsc pp) pp1 = getWaitDiff s pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 766 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> getWaitDiff_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 767 </font></span>  <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> metis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 768 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 769 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 770 </font></span><font color="#006699"><strong>lemma</strong></font> getWaitDiff_setCntxt <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getWaitDiff (setCntxt s pp suspSelf) pp1 = getWaitDiff s pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 771 </font></span>   <font color="#006699"><strong>unfolding</strong></font> getWaitDiff_def setCntxt_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 772 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 773 </font></span><font color="#006699"><strong>lemma</strong></font> getWaitDiff_schedule_Abs <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getWaitDiff (schedule_Abs s core_id) pp = getWaitDiff s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 774 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 775 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getWaitDiff (schedule_Abs s core_id) pp = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 776 </font></span><font color="#ff00cc">   waitDiff(rscPendProcs_' (let t = timer_' s; newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 777 </font></span><font color="#ff00cc">      f_readyQ = readyQue (partitions_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 778 </font></span><font color="#ff00cc">      f_procSta = procSta (procs_' s); f_curProc = curProc (partitions_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 779 </font></span><font color="#ff00cc">      sched_proc_newPart = schedProc_Abs f_readyQ newPartID f_procSta f_curProc in </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 780 </font></span><font color="#ff00cc">  s&#10631;partitions_' := (partitions_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 781 </font></span><font color="#ff00cc">      &#10631;curPart := (curPart(partitions_' s))(core_id := Some newPartID),</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 782 </font></span><font color="#ff00cc">      curProc := (curProc (partitions_' s))(newPartID := Some (snd(snd sched_proc_newPart))),</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 783 </font></span><font color="#ff00cc">      readyQue := fst sched_proc_newPart&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 784 </font></span><font color="#ff00cc">    procs_' := (procs_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 785 </font></span><font color="#ff00cc">      &#10631;procSta := setProcSta' (fst (snd sched_proc_newPart)) (newPartID, (snd(snd sched_proc_newPart))) RUNNING&#10632;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 786 </font></span><font color="#ff00cc">    &#10632;)) pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 787 </font></span>    <font color="#006699"><strong>unfolding</strong></font> schedule_Abs_def getWaitDiff_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 788 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getWaitDiff (schedule_Abs s core_id) pp = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 789 </font></span><font color="#ff00cc">   waitDiff( (let t = timer_' s; newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 790 </font></span><font color="#ff00cc">      f_readyQ = readyQue (partitions_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 791 </font></span><font color="#ff00cc">      f_procSta = procSta (procs_' s); f_curProc = curProc (partitions_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 792 </font></span><font color="#ff00cc">      sched_proc_newPart = schedProc_Abs f_readyQ newPartID f_procSta f_curProc in </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 793 </font></span><font color="#ff00cc">  rscPendProcs_' (s&#10631;partitions_' := (partitions_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 794 </font></span><font color="#ff00cc">      &#10631;curPart := (curPart(partitions_' s))(core_id := Some newPartID),</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 795 </font></span><font color="#ff00cc">      curProc := (curProc (partitions_' s))(newPartID := Some (snd(snd sched_proc_newPart))),</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 796 </font></span><font color="#ff00cc">      readyQue := fst sched_proc_newPart&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 797 </font></span><font color="#ff00cc">    procs_' := (procs_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 798 </font></span><font color="#ff00cc">      &#10631;procSta := setProcSta' (fst (snd sched_proc_newPart)) (newPartID, (snd(snd sched_proc_newPart))) RUNNING&#10632;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 799 </font></span><font color="#ff00cc">    &#10632;))) pp&quot;</font> <font color="#006699"><strong>by</strong></font> metis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 800 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getWaitDiff (schedule_Abs s core_id) pp =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 801 </font></span><font color="#ff00cc">      waitDiff(rscPendProcs_' s) pp&quot;</font> <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 802 </font></span>  <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>unfolding</strong></font> getWaitDiff_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 803 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 804 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 805 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 806 </font></span><font color="#006699"><strong>lemma</strong></font> getCntxt_set_NotNone <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getCntxt (setCntxt s pp ctx) pp &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 807 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getCntxt_def setCntxt_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 808 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 809 </font></span><font color="#006699"><strong>lemma</strong></font> getCntxt_schedule_Abs <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getCntxt (schedule_Abs s core_id) pp = getCntxt s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 810 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 811 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getCntxt (schedule_Abs s core_id) pp </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 812 </font></span><font color="#ff00cc">    = procCntxt(rscPendProcs_' (</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 813 </font></span><font color="#ff00cc">  let t = timer_' s; newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 814 </font></span><font color="#ff00cc">      f_readyQ = readyQue (partitions_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 815 </font></span><font color="#ff00cc">      f_procSta = procSta (procs_' s); f_curProc = curProc (partitions_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 816 </font></span><font color="#ff00cc">      sched_proc_newPart = schedProc_Abs f_readyQ newPartID f_procSta f_curProc in </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 817 </font></span><font color="#ff00cc">    s&#10631;partitions_' := (partitions_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 818 </font></span><font color="#ff00cc">      &#10631;curPart := (curPart(partitions_' s))(core_id := Some newPartID),</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 819 </font></span><font color="#ff00cc">      curProc := (curProc (partitions_' s))(newPartID := Some (snd(snd sched_proc_newPart))),</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 820 </font></span><font color="#ff00cc">      readyQue := fst sched_proc_newPart&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 821 </font></span><font color="#ff00cc">      procs_' := (procs_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 822 </font></span><font color="#ff00cc">        &#10631;procSta := setProcSta' (fst (snd sched_proc_newPart)) (newPartID, (snd(snd sched_proc_newPart))) RUNNING&#10632;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 823 </font></span><font color="#ff00cc">      &#10632;)) pp &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 824 </font></span>    <font color="#006699"><strong>unfolding</strong></font> getCntxt_def schedule_Abs_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 825 </font></span>    <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getCntxt (schedule_Abs s core_id) pp </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 826 </font></span><font color="#ff00cc">    = procCntxt( (</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 827 </font></span><font color="#ff00cc">  let t = timer_' s; newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 828 </font></span><font color="#ff00cc">      f_readyQ = readyQue (partitions_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 829 </font></span><font color="#ff00cc">      f_procSta = procSta (procs_' s); f_curProc = curProc (partitions_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 830 </font></span><font color="#ff00cc">      sched_proc_newPart = schedProc_Abs f_readyQ newPartID f_procSta f_curProc in </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 831 </font></span><font color="#ff00cc">    rscPendProcs_'(s&#10631;partitions_' := (partitions_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 832 </font></span><font color="#ff00cc">      &#10631;curPart := (curPart(partitions_' s))(core_id := Some newPartID),</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 833 </font></span><font color="#ff00cc">      curProc := (curProc (partitions_' s))(newPartID := Some (snd(snd sched_proc_newPart))),</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 834 </font></span><font color="#ff00cc">      readyQue := fst sched_proc_newPart&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 835 </font></span><font color="#ff00cc">      procs_' := (procs_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 836 </font></span><font color="#ff00cc">        &#10631;procSta := setProcSta' (fst (snd sched_proc_newPart)) (newPartID, (snd(snd sched_proc_newPart))) RUNNING&#10632;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 837 </font></span><font color="#ff00cc">      &#10632;))) pp &quot;</font> <font color="#006699"><strong>by</strong></font> metis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 838 </font></span>    <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getCntxt (schedule_Abs s core_id) pp =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 839 </font></span><font color="#ff00cc">    procCntxt(rscPendProcs_' s) pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 840 </font></span>     <font color="#006699"><strong>using</strong></font> getCntxt_def
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 841 </font></span>      <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis getCtx_sd<font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 842 </font></span>    
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 843 </font></span>    <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>unfolding</strong></font> getCntxt_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 844 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 845 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 846 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 847 </font></span><font color="#cc0000">(*chQueWrite*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 848 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 849 </font></span><font color="#006699"><strong>lemma</strong></font> getCterRsc_resetCntxt <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getCterRsc (resetCntxt s pp) pp1 = getCterRsc s pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 850 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getCterRsc_def resetCntxt_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 851 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 852 </font></span><font color="#006699"><strong>lemma</strong></font> getCterRsc_chQueWrite_l1 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;let s_rcvOneMsg =  case (quePortEmpty s (part_id, port_id)) of</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 853 </font></span><font color="#ff00cc">                      False &rArr; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 854 </font></span><font color="#ff00cc">                          let cs = interCom_' s;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 855 </font></span><font color="#ff00cc">                              pts = quePortMsg cs;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 856 </font></span><font color="#ff00cc">                              msglist = the(pts (part_id, port_id));</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 857 </font></span><font color="#ff00cc">                              Resmsglist = drop 1 msglist </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 858 </font></span><font color="#ff00cc">                          in </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 859 </font></span><font color="#ff00cc">                            (s&#10631;interCom_':= cs&#10631;quePortMsg := pts((part_id, port_id) := Some(Resmsglist))&#10632;&#10632;, Some (msglist!0))| </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 860 </font></span><font color="#ff00cc">                      True &rArr; (s, None);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 861 </font></span><font color="#ff00cc">              s_rcvOneMsg_dtlFstDst = dltQueFstMsg (fst s_rcvOneMsg) (part_id, the dstQ_id) in </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 862 </font></span><font color="#ff00cc">              (let inter_com = (interCom_' (fst s_rcvOneMsg));</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 863 </font></span><font color="#ff00cc">                 port_msg_que = quePortMsg inter_com (part_id, the dstQ_id) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 864 </font></span><font color="#ff00cc">                if port_msg_que = None &or; port_msg_que = Some [] then </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 865 </font></span><font color="#ff00cc">                    (fst s_rcvOneMsg)&#10631;interCom_' := inter_com&#10631;quePortMsg := </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 866 </font></span><font color="#ff00cc">                                (quePortMsg inter_com)((part_id, the dstQ_id) := Some [(the(snd s_rcvOneMsg))])&#10632;&#10632;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 867 </font></span><font color="#ff00cc">                else (fst s_rcvOneMsg)&#10631;interCom_' := inter_com&#10631;quePortMsg := </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 868 </font></span><font color="#ff00cc">                                (quePortMsg inter_com)((part_id, the dstQ_id) := Some ((the port_msg_que)@[(the(snd s_rcvOneMsg))]))&#10632;&#10632;)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 869 </font></span><font color="#ff00cc">      = (case (quePortEmpty s (part_id, port_id)) of</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 870 </font></span><font color="#ff00cc">                      False &rArr; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 871 </font></span><font color="#ff00cc">                        let cs = interCom_' s;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 872 </font></span><font color="#ff00cc">                            pts = quePortMsg cs;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 873 </font></span><font color="#ff00cc">                            msglist = the(pts (part_id, port_id));</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 874 </font></span><font color="#ff00cc">                            Resmsglist = drop 1 msglist;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 875 </font></span><font color="#ff00cc">                            s_rcvOneMsg_dtlFstDst = dltQueFstMsg (s&#10631;interCom_':= cs&#10631;quePortMsg := pts((part_id, port_id) := Some(Resmsglist))&#10632;&#10632;) (part_id, the dstQ_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 876 </font></span><font color="#ff00cc">                            inter_com = (interCom_' (s&#10631;interCom_':= cs&#10631;quePortMsg := pts((part_id, port_id) := Some(Resmsglist))&#10632;&#10632;));</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 877 </font></span><font color="#ff00cc">                            port_msg_que = quePortMsg inter_com (part_id, the dstQ_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 878 </font></span><font color="#ff00cc">                        in ( if port_msg_que = None &or; port_msg_que = Some [] then </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 879 </font></span><font color="#ff00cc">                                (s&#10631;interCom_':= cs&#10631;quePortMsg := pts((part_id, port_id) := Some(Resmsglist))&#10632;&#10632;)&#10631;interCom_' := inter_com&#10631;quePortMsg := </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 880 </font></span><font color="#ff00cc">                                    (quePortMsg inter_com)((part_id, the dstQ_id) := Some [(the(Some (msglist!0)))])&#10632;&#10632;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 881 </font></span><font color="#ff00cc">                             else (s&#10631;interCom_':= cs&#10631;quePortMsg := pts((part_id, port_id) := Some(Resmsglist))&#10632;&#10632;)&#10631;interCom_' := inter_com&#10631;quePortMsg := </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 882 </font></span><font color="#ff00cc">                                       (quePortMsg inter_com)((part_id, the dstQ_id) := Some ((the port_msg_que)@[(the(Some (msglist!0)))]))&#10632;&#10632;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 883 </font></span><font color="#ff00cc">                             )| </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 884 </font></span><font color="#ff00cc">                      True &rArr; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 885 </font></span><font color="#ff00cc">                       let</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 886 </font></span><font color="#ff00cc">                           s_rcvOneMsg_dtlFstDst = dltQueFstMsg s (part_id, the dstQ_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 887 </font></span><font color="#ff00cc">                           inter_com = (interCom_' s);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 888 </font></span><font color="#ff00cc">                           port_msg_que = quePortMsg inter_com (part_id, the dstQ_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 889 </font></span><font color="#ff00cc">                       in ( if port_msg_que = None &or; port_msg_que = Some [] then </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 890 </font></span><font color="#ff00cc">                                s&#10631;interCom_' := inter_com&#10631;quePortMsg := </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 891 </font></span><font color="#ff00cc">                                    (quePortMsg inter_com)((part_id, the dstQ_id) := Some [the None])&#10632;&#10632;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 892 </font></span><font color="#ff00cc">                            else </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 893 </font></span><font color="#ff00cc">                                s&#10631;interCom_' := inter_com&#10631;quePortMsg := </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 894 </font></span><font color="#ff00cc">                                    (quePortMsg inter_com)((part_id, the dstQ_id) := Some ((the port_msg_que)@[the None]))&#10632;&#10632;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 895 </font></span><font color="#ff00cc">                                ) )&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 896 </font></span>  <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> INTER_COM_TYPE.unfold_congs<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font> STATE.unfold_congs<font color="#000000"><strong>(</strong></font>8<font color="#000000"><strong>)</strong></font> fst_conv snd_conv<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 897 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 898 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 899 </font></span><font color="#006699"><strong>lemma</strong></font> getCterRsc_chQueWrite_l2 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;let s_rcvOneMsg = case (quePortEmpty s (part_id, port_id)) of</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 900 </font></span><font color="#ff00cc">                          False &rArr; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 901 </font></span><font color="#ff00cc">                              let cs = interCom_' s;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 902 </font></span><font color="#ff00cc">                                  pts = quePortMsg cs;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 903 </font></span><font color="#ff00cc">                                  msglist = the(pts (part_id, port_id));</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 904 </font></span><font color="#ff00cc">                                  Resmsglist = drop 1 msglist </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 905 </font></span><font color="#ff00cc">                              in </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 906 </font></span><font color="#ff00cc">                                (s&#10631;interCom_':= cs&#10631;quePortMsg := pts((part_id, port_id) := Some(Resmsglist))&#10632;&#10632;, Some (msglist!0))| </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 907 </font></span><font color="#ff00cc">                          True &rArr; (s, None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 908 </font></span><font color="#ff00cc">               in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 909 </font></span><font color="#ff00cc">             (let inter_com = (interCom_' (fst s_rcvOneMsg));</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 910 </font></span><font color="#ff00cc">                 port_msg_que = quePortMsg inter_com (part_id, the dstQ_id) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 911 </font></span><font color="#ff00cc">                if port_msg_que = None &or; port_msg_que = Some [] then </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 912 </font></span><font color="#ff00cc">                    (fst s_rcvOneMsg)&#10631;interCom_' := inter_com&#10631;quePortMsg := </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 913 </font></span><font color="#ff00cc">                                (quePortMsg inter_com)((part_id, the dstQ_id) := Some [(the(snd s_rcvOneMsg))])&#10632;&#10632;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 914 </font></span><font color="#ff00cc">                else (fst s_rcvOneMsg)&#10631;interCom_' := inter_com&#10631;quePortMsg := </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 915 </font></span><font color="#ff00cc">                                (quePortMsg inter_com)((part_id, the dstQ_id) := Some ((the port_msg_que)@[ (the(snd s_rcvOneMsg))]))&#10632;&#10632;)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 916 </font></span><font color="#ff00cc">  = ( case (quePortEmpty s (part_id, port_id)) of</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 917 </font></span><font color="#ff00cc">                    False &rArr; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 918 </font></span><font color="#ff00cc">                        let cs = interCom_' s;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 919 </font></span><font color="#ff00cc">                            pts = quePortMsg cs;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 920 </font></span><font color="#ff00cc">                            msglist = the(pts (part_id, port_id));</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 921 </font></span><font color="#ff00cc">                            Resmsglist = drop 1 msglist;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 922 </font></span><font color="#ff00cc">                            inter_com = (interCom_' (s&#10631;interCom_':= cs&#10631;quePortMsg := pts((part_id, port_id) := Some(Resmsglist))&#10632;&#10632;));</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 923 </font></span><font color="#ff00cc">                            port_msg_que = quePortMsg inter_com (part_id, the dstQ_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 924 </font></span><font color="#ff00cc">                        in (  if port_msg_que = None &or; port_msg_que = Some [] then </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 925 </font></span><font color="#ff00cc">                                (s&#10631;interCom_':= cs&#10631;quePortMsg := pts((part_id, port_id) := Some(Resmsglist))&#10632;&#10632;)&#10631;interCom_' := inter_com&#10631;quePortMsg := </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 926 </font></span><font color="#ff00cc">                                        (quePortMsg inter_com)((part_id, the dstQ_id) := Some [(the(Some (msglist!0)))])&#10632;&#10632;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 927 </font></span><font color="#ff00cc">                              else (s&#10631;interCom_':= cs&#10631;quePortMsg := pts((part_id, port_id) := Some(Resmsglist))&#10632;&#10632;)&#10631;interCom_' := inter_com&#10631;quePortMsg := </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 928 </font></span><font color="#ff00cc">                                           (quePortMsg inter_com)((part_id, the dstQ_id) := Some ((the port_msg_que)@[ (the(Some (msglist!0)))]))&#10632;&#10632;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 929 </font></span><font color="#ff00cc">                           )| </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 930 </font></span><font color="#ff00cc">                    True &rArr;(let inter_com = (interCom_' s);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 931 </font></span><font color="#ff00cc">                           port_msg_que = quePortMsg inter_com (part_id, the dstQ_id) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 932 </font></span><font color="#ff00cc">                          if port_msg_que = None &or; port_msg_que = Some [] then </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 933 </font></span><font color="#ff00cc">                              s&#10631;interCom_' := inter_com&#10631;quePortMsg := </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 934 </font></span><font color="#ff00cc">                                          (quePortMsg inter_com)((part_id, the dstQ_id) := Some [(the None)])&#10632;&#10632;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 935 </font></span><font color="#ff00cc">                          else s&#10631;interCom_' := inter_com&#10631;quePortMsg := </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 936 </font></span><font color="#ff00cc">                                          (quePortMsg inter_com)((part_id, the dstQ_id) := Some ((the port_msg_que)@[the None]))&#10632;&#10632; ) )&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 937 </font></span>  <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> INTER_COM_TYPE.unfold_congs<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font> STATE.unfold_congs<font color="#000000"><strong>(</strong></font>8<font color="#000000"><strong>)</strong></font> fst_conv snd_conv<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 938 </font></span>  
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 939 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 940 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 941 </font></span><font color="#cc0000">(*WRITE_SAMPLING_MESSAGE*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 942 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 943 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 944 </font></span><font color="#cc0000">(*========service=======*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 945 </font></span><font color="#cc0000">(*===CREATE_SAMPLING_PORT===*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 946 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 947 </font></span><font color="#006699"><strong>lemma</strong></font> CREATE_SAMPLING_PORT<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 948 </font></span>  <font color="#ff00cc">&quot;let</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 949 </font></span><font color="#ff00cc">      c_s_p = CREATE_SAMPLING_PORT s core_id port_attr;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 950 </font></span><font color="#ff00cc">      port_name = portName port_attr;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 951 </font></span><font color="#ff00cc">      port_msgsz = portMsgSz port_attr;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 952 </font></span><font color="#ff00cc">      port_direction = portDirect port_attr;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 953 </font></span><font color="#ff00cc">      port_rfrp = portSamRefr port_attr;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 954 </font></span><font color="#ff00cc">      cur_part_id = curPartID s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 955 </font></span><font color="#ff00cc">      part_cfg = getPartByID (the cur_part_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 956 </font></span><font color="#ff00cc">      ports_created = portsCreated s;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 957 </font></span><font color="#ff00cc">      port_attrIncfg_op = getPortAttrByName (the cur_part_id) port_name;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 958 </font></span><font color="#ff00cc">      port_id = newPortID s (the cur_part_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 959 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 960 </font></span><font color="#ff00cc">      s_create_samp_port = createPort s (the cur_part_id, port_id) port_attr;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 961 </font></span><font color="#ff00cc">      port_attr'  = getPortAttrByID (fst c_s_p) (the cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 962 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 963 </font></span><font color="#ff00cc">   in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 964 </font></span><font color="#ff00cc">      if port_attrIncfg_op = None &or; ports_created &ge; portsAmount then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 965 </font></span><font color="#ff00cc">        c_s_p = (s, None, INVALID_CONFIG)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 966 </font></span><font color="#ff00cc">      else if &not;portNameInPart (the cur_part_id) port_name then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 967 </font></span><font color="#ff00cc">        c_s_p = (s, None, INVALID_CONFIG)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 968 </font></span><font color="#ff00cc">      else if getPortIDByName s (the cur_part_id) port_name &ne; None then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 969 </font></span><font color="#ff00cc">        c_s_p = (s, None, NO_ACTION)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 970 </font></span><font color="#ff00cc">      else if port_msgsz &le; 0 &or; port_msgsz &gt;  MAX_MSG_SZ_VALUE &or; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 971 </font></span><font color="#ff00cc">               port_msgsz &ne; portMsgSz (the port_attrIncfg_op) then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 972 </font></span><font color="#ff00cc">        c_s_p = (s, None, INVALID_CONFIG)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 973 </font></span><font color="#ff00cc">      else if port_direction &ne; portDirect (the port_attrIncfg_op) then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 974 </font></span><font color="#ff00cc">        c_s_p = (s, None, INVALID_CONFIG)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 975 </font></span><font color="#ff00cc">      else if port_rfrp &le; 0 &or; port_rfrp &gt; Int.int MAX_PRIORITY_VALUE then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 976 </font></span><font color="#ff00cc">        c_s_p = (s, None, INVALID_CONFIG)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 977 </font></span><font color="#ff00cc">      else if the(getPartMode s (the cur_part_id)) = NORMAL then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 978 </font></span><font color="#ff00cc">        c_s_p = (s, None, INVALID_MODE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 979 </font></span><font color="#ff00cc">      else</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 980 </font></span><font color="#ff00cc">        c_s_p = (s_create_samp_port, None, NO_ERROR) &and; port_attr' &ne; None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 981 </font></span><font color="#ff00cc">  &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 982 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 983 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 984 </font></span>  <font color="#006699"><strong>let</strong></font> ?c_s_p <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;CREATE_SAMPLING_PORT s core_id port_attr&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 985 </font></span>  <font color="#006699"><strong>let</strong></font> ?port_name <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;portName port_attr&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 986 </font></span>  <font color="#006699"><strong>let</strong></font> ?port_msgsz <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;portMsgSz port_attr&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 987 </font></span>  <font color="#006699"><strong>let</strong></font> ?port_direction <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;portDirect port_attr&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 988 </font></span>  <font color="#006699"><strong>let</strong></font> ?port_rfrp <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;portSamRefr port_attr&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 989 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curPartID s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 990 </font></span>  <font color="#006699"><strong>let</strong></font> ?part_cfg <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getPartByID (the ?cur_part_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 991 </font></span>  <font color="#006699"><strong>let</strong></font> ?ports_created <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;portsCreated s&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 992 </font></span>  <font color="#006699"><strong>let</strong></font> ?port_attrIncfg_op <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getPortAttrByName (the ?cur_part_id) ?port_name&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 993 </font></span>  <font color="#006699"><strong>let</strong></font> ?port_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;newPortID s (the ?cur_part_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 994 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 995 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_create_samp_port <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;createPort s (the ?cur_part_id, ?port_id) port_attr&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 996 </font></span>  <font color="#006699"><strong>let</strong></font> ?port_attr'  <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getPortAttrByID (fst ?c_s_p) (the ?cur_part_id, ?port_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 997 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 998 </font></span>  <font color="#006699"><strong>have</strong></font> a10<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?port_attrIncfg_op = None &or; ?ports_created &ge; portsAmount </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 999 </font></span><font color="#ff00cc">    &#10230; ?c_s_p = (s, None, INVALID_CONFIG)&quot;</font> <font color="#006699"><strong>unfolding</strong></font> CREATE_SAMPLING_PORT_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1000 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a11<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?port_attrIncfg_op &ne; None &and; ?ports_created &lt; portsAmount</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1001 </font></span><font color="#ff00cc">    &and; &not;portNameInPart (the ?cur_part_id) ?port_name &#10230; ?c_s_p = (s, None, INVALID_CONFIG)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1002 </font></span>      <font color="#006699"><strong>unfolding</strong></font> CREATE_SAMPLING_PORT_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1003 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a12<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?port_attrIncfg_op &ne; None &and; ?ports_created &lt; portsAmount</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1004 </font></span><font color="#ff00cc">    &and; portNameInPart (the ?cur_part_id) ?port_name </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1005 </font></span><font color="#ff00cc">    &and; getPortIDByName s (the ?cur_part_id) ?port_name &ne; None &#10230; ?c_s_p = (s, None, NO_ACTION)&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1006 </font></span>      <font color="#006699"><strong>unfolding</strong></font> CREATE_SAMPLING_PORT_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1007 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a13<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?port_attrIncfg_op &ne; None &and; ?ports_created &lt; portsAmount</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1008 </font></span><font color="#ff00cc">    &and; portNameInPart (the ?cur_part_id) ?port_name </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1009 </font></span><font color="#ff00cc">    &and; getPortIDByName s (the ?cur_part_id) ?port_name = None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1010 </font></span><font color="#ff00cc">    &and; (?port_msgsz &le; 0 &or; ?port_msgsz &gt;  MAX_MSG_SZ_VALUE </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1011 </font></span><font color="#ff00cc">                       &or; ?port_msgsz &ne; portMsgSz (the ?port_attrIncfg_op))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1012 </font></span><font color="#ff00cc">      &#10230; ?c_s_p = (s, None, INVALID_CONFIG)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1013 </font></span>      <font color="#006699"><strong>unfolding</strong></font> CREATE_SAMPLING_PORT_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1014 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a14<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?port_attrIncfg_op &ne; None &and; ?ports_created &lt; portsAmount</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1015 </font></span><font color="#ff00cc">    &and; portNameInPart (the ?cur_part_id) ?port_name </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1016 </font></span><font color="#ff00cc">    &and; getPortIDByName s (the ?cur_part_id) ?port_name = None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1017 </font></span><font color="#ff00cc">    &and; (?port_msgsz &gt; 0 &and; ?port_msgsz &le;  MAX_MSG_SZ_VALUE </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1018 </font></span><font color="#ff00cc">                       &and; ?port_msgsz = portMsgSz (the ?port_attrIncfg_op))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1019 </font></span><font color="#ff00cc">    &and; ?port_direction &ne; portDirect (the ?port_attrIncfg_op)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1020 </font></span><font color="#ff00cc">      &#10230; ?c_s_p =  (s, None, INVALID_CONFIG)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1021 </font></span>      <font color="#006699"><strong>unfolding</strong></font> CREATE_SAMPLING_PORT_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1022 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a15<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?port_attrIncfg_op &ne; None &and; ?ports_created &lt; portsAmount</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1023 </font></span><font color="#ff00cc">    &and; portNameInPart (the ?cur_part_id) ?port_name </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1024 </font></span><font color="#ff00cc">    &and; getPortIDByName s (the ?cur_part_id) ?port_name = None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1025 </font></span><font color="#ff00cc">    &and; (?port_msgsz &gt; 0 &and; ?port_msgsz &le;  MAX_MSG_SZ_VALUE </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1026 </font></span><font color="#ff00cc">                       &and; ?port_msgsz = portMsgSz (the ?port_attrIncfg_op))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1027 </font></span><font color="#ff00cc">    &and; ?port_direction = portDirect (the ?port_attrIncfg_op)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1028 </font></span><font color="#ff00cc">    &and; (?port_rfrp &le; 0 &or; ?port_rfrp &gt; Int.int MAX_PRIORITY_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1029 </font></span><font color="#ff00cc">      &#10230; ?c_s_p = (s, None, INVALID_CONFIG)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1030 </font></span>      <font color="#006699"><strong>unfolding</strong></font> CREATE_SAMPLING_PORT_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1031 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a16<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?port_attrIncfg_op &ne; None &and; ?ports_created &lt; portsAmount</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1032 </font></span><font color="#ff00cc">    &and; portNameInPart (the ?cur_part_id) ?port_name </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1033 </font></span><font color="#ff00cc">    &and; getPortIDByName s (the ?cur_part_id) ?port_name = None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1034 </font></span><font color="#ff00cc">    &and; (?port_msgsz &gt; 0 &and; ?port_msgsz &le;  MAX_MSG_SZ_VALUE </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1035 </font></span><font color="#ff00cc">                       &and; ?port_msgsz = portMsgSz (the ?port_attrIncfg_op))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1036 </font></span><font color="#ff00cc">    &and; ?port_direction = portDirect (the ?port_attrIncfg_op)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1037 </font></span><font color="#ff00cc">    &and; (?port_rfrp &gt; 0 &and; ?port_rfrp &le; Int.int MAX_PRIORITY_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1038 </font></span><font color="#ff00cc">    &and; the(getPartMode s (the ?cur_part_id)) = NORMAL </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1039 </font></span><font color="#ff00cc">      &#10230; ?c_s_p = (s, None, INVALID_MODE)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1040 </font></span>      <font color="#006699"><strong>unfolding</strong></font> CREATE_SAMPLING_PORT_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1041 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a17<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?port_attrIncfg_op &ne; None &and; ?ports_created &lt; portsAmount</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1042 </font></span><font color="#ff00cc">    &and; portNameInPart (the ?cur_part_id) ?port_name </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1043 </font></span><font color="#ff00cc">    &and; getPortIDByName s (the ?cur_part_id) ?port_name = None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1044 </font></span><font color="#ff00cc">    &and; (?port_msgsz &gt; 0 &and; ?port_msgsz &le;  MAX_MSG_SZ_VALUE </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1045 </font></span><font color="#ff00cc">                       &and; ?port_msgsz = portMsgSz (the ?port_attrIncfg_op))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1046 </font></span><font color="#ff00cc">    &and; ?port_direction = portDirect (the ?port_attrIncfg_op)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1047 </font></span><font color="#ff00cc">    &and; (?port_rfrp &gt; 0 &and; ?port_rfrp &le; Int.int MAX_PRIORITY_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1048 </font></span><font color="#ff00cc">    &and; the(getPartMode s (the ?cur_part_id)) &ne; NORMAL</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1049 </font></span><font color="#ff00cc">      &#10230; ?c_s_p = (?s_create_samp_port, None, NO_ERROR) &and; ?port_attr' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1050 </font></span>    <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1051 </font></span>      <font color="#006699"><strong>{</strong></font> <font color="#0099ff"><strong>assume</strong></font> <font color="#ff00cc">&quot;?port_attrIncfg_op &ne; None &and; ?ports_created &lt; portsAmount</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1052 </font></span><font color="#ff00cc">          &and; portNameInPart (the ?cur_part_id) ?port_name </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1053 </font></span><font color="#ff00cc">          &and; getPortIDByName s (the ?cur_part_id) ?port_name = None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1054 </font></span><font color="#ff00cc">          &and; (?port_msgsz &gt; 0 &and; ?port_msgsz &le;  MAX_MSG_SZ_VALUE </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1055 </font></span><font color="#ff00cc">                       &and; ?port_msgsz = portMsgSz (the ?port_attrIncfg_op))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1056 </font></span><font color="#ff00cc">          &and; ?port_direction = portDirect (the ?port_attrIncfg_op)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1057 </font></span><font color="#ff00cc">          &and; (?port_rfrp &gt; 0 &and; ?port_rfrp &le; Int.int MAX_PRIORITY_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1058 </font></span><font color="#ff00cc">          &and; the(getPartMode s (the ?cur_part_id)) &ne; NORMAL&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1059 </font></span>        <font color="#006699"><strong>hence</strong></font> a17_0 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?c_s_p = (?s_create_samp_port, None, NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1060 </font></span>          <font color="#006699"><strong>unfolding</strong></font> CREATE_SAMPLING_PORT_def Let_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1061 </font></span>        <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a17_1 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?port_attr' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1062 </font></span>          <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add <font color="#000000"><strong>:</strong></font> getAttr_set_NotNone a17_0 <font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1063 </font></span>        <font color="#006699"><strong>ultimately</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?c_s_p = (?s_create_samp_port, None, NO_ERROR) &and; ?port_attr' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1064 </font></span>          <font color="#006699"><strong>by</strong></font> blast
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1065 </font></span>      <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1066 </font></span>      <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1067 </font></span>    <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1068 </font></span>    
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1069 </font></span>    <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> verit_comp_simplify1<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1070 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1071 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1072 </font></span><font color="#cc0000">(*===READ_SAMPLING_MESSAGE===*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1073 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1074 </font></span><font color="#006699"><strong>lemma</strong></font> READ_SAMPLING_MESSAGE<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1075 </font></span>  <font color="#ff00cc">&quot;let</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1076 </font></span><font color="#ff00cc">      r_s_m = READ_SAMPLING_MESSAGE s core_id port_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1077 </font></span><font color="#ff00cc">      cur_part_id = curPartID s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1078 </font></span><font color="#ff00cc">      port_attr = getPortAttrByID s (the cur_part_id, port_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1079 </font></span><font color="#ff00cc">      message_size = portMsgSz (the port_attr);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1080 </font></span><font color="#ff00cc">      msg_wrtime = readSamPortMsg s (the cur_part_id, port_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1081 </font></span><font color="#ff00cc">      message = fst (the msg_wrtime);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1082 </font></span><font color="#ff00cc">      write_time = snd (the msg_wrtime);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1083 </font></span><font color="#ff00cc">      sys_time = sysClk s;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1084 </font></span><font color="#ff00cc">      len = MSG_SZ message;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1085 </font></span><font color="#ff00cc">      refresh_period = portSamRefr (the port_attr);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1086 </font></span><font color="#ff00cc">      message' = Some message</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1087 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1088 </font></span><font color="#ff00cc">   in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1089 </font></span><font color="#ff00cc">      if &not; isSamPort (the port_attr) &or; &not; portCreated s (the cur_part_id, port_id) then </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1090 </font></span><font color="#ff00cc">        r_s_m = (None, INVALID, INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1091 </font></span><font color="#ff00cc">      else if portDirect (the port_attr) &ne; DESTINATION then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1092 </font></span><font color="#ff00cc">        r_s_m = (None, INVALID, INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1093 </font></span><font color="#ff00cc">      else </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1094 </font></span><font color="#ff00cc">        if samPortEmpty s (the cur_part_id, port_id) = True then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1095 </font></span><font color="#ff00cc">          r_s_m = (None, INVALID, NO_ACTION)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1096 </font></span><font color="#ff00cc">        else</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1097 </font></span><font color="#ff00cc">          if sys_time - Int.nat write_time &le; Int.nat refresh_period then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1098 </font></span><font color="#ff00cc">             r_s_m = (Some message, VALID, NO_ERROR) &and; message' &ne; None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1099 </font></span><font color="#ff00cc">          else</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1100 </font></span><font color="#ff00cc">             r_s_m = (Some message, INVALID, NO_ERROR) &and; message' &ne; None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1101 </font></span><font color="#ff00cc">  &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1102 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1103 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1104 </font></span>    <font color="#006699"><strong>let</strong></font> ?r_s_m <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;READ_SAMPLING_MESSAGE s core_id port_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1105 </font></span>    <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curPartID s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1106 </font></span>    <font color="#006699"><strong>let</strong></font> ?port_attr <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getPortAttrByID s (the ?cur_part_id, port_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1107 </font></span>    <font color="#006699"><strong>let</strong></font> ?message_size <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;portMsgSz (the ?port_attr)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1108 </font></span>    <font color="#006699"><strong>let</strong></font> ?msg_wrtime <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;readSamPortMsg s (the ?cur_part_id, port_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1109 </font></span>    <font color="#006699"><strong>let</strong></font> ?message <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;fst (the ?msg_wrtime)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1110 </font></span>    <font color="#006699"><strong>let</strong></font> ?write_time <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;snd (the ?msg_wrtime)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1111 </font></span>    <font color="#006699"><strong>let</strong></font> ?sys_time <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;sysClk s&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1112 </font></span>    <font color="#006699"><strong>let</strong></font> ?len <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;MSG_SZ ?message&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1113 </font></span>    <font color="#006699"><strong>let</strong></font> ?refresh_period <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;portSamRefr (the ?port_attr)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1114 </font></span>    <font color="#006699"><strong>let</strong></font> ?message' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;Some ?message&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1115 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1116 </font></span>    <font color="#006699"><strong>have</strong></font> a10 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&not; isSamPort (the ?port_attr) &or; &not; portCreated s (the ?cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1117 </font></span><font color="#ff00cc">          &#10230; ?r_s_m = (None, INVALID, INVALID_PARAM)&quot;</font> <font color="#006699"><strong>unfolding</strong></font> READ_SAMPLING_MESSAGE_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1118 </font></span>    <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a11 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;isSamPort (the ?port_attr) &and; portCreated s (the ?cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1119 </font></span><font color="#ff00cc">          &and; portDirect (the ?port_attr) &ne; DESTINATION </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1120 </font></span><font color="#ff00cc">          &#10230; ?r_s_m = (None, INVALID, INVALID_PARAM)&quot;</font> <font color="#006699"><strong>unfolding</strong></font> READ_SAMPLING_MESSAGE_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1121 </font></span>    <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a12 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;isSamPort (the ?port_attr) &and; portCreated s (the ?cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1122 </font></span><font color="#ff00cc">          &and; portDirect (the ?port_attr) = DESTINATION </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1123 </font></span><font color="#ff00cc">          &and; samPortEmpty s (the ?cur_part_id, port_id) = True</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1124 </font></span><font color="#ff00cc">          &#10230; ?r_s_m = (None, INVALID, NO_ACTION)&quot;</font> <font color="#006699"><strong>unfolding</strong></font> READ_SAMPLING_MESSAGE_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1125 </font></span>    <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a14 <font color="#000000"><strong>:</strong></font>  <font color="#ff00cc">&quot;isSamPort (the ?port_attr) &and; portCreated s (the ?cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1126 </font></span><font color="#ff00cc">          &and; portDirect (the ?port_attr) = DESTINATION </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1127 </font></span><font color="#ff00cc">          &and; samPortEmpty s (the ?cur_part_id, port_id) = False</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1128 </font></span><font color="#ff00cc">          &and; (?sys_time - Int.nat ?write_time &le; Int.nat ?refresh_period)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1129 </font></span><font color="#ff00cc">          &#10230; ?r_s_m = (Some ?message, VALID, NO_ERROR) &and; ?message' &ne; None&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1130 </font></span>    <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1131 </font></span>      <font color="#006699"><strong>{</strong></font> <font color="#0099ff"><strong>assume</strong></font> <font color="#ff00cc">&quot;isSamPort (the ?port_attr) &and; portCreated s (the ?cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1132 </font></span><font color="#ff00cc">          &and; portDirect (the ?port_attr) = DESTINATION </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1133 </font></span><font color="#ff00cc">          &and; samPortEmpty s (the ?cur_part_id, port_id) = False</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1134 </font></span><font color="#ff00cc">          &and; (?sys_time - Int.nat ?write_time &le; Int.nat ?refresh_period)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1135 </font></span>        <font color="#006699"><strong>hence</strong></font> a14_0 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?r_s_m = (Some ?message, VALID, NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1136 </font></span>          <font color="#006699"><strong>unfolding</strong></font> READ_SAMPLING_MESSAGE_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1137 </font></span>        <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a14_1<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?message' &ne; None&quot;</font> <font color="#006699"><strong>by</strong></font> blast
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1138 </font></span>        <font color="#006699"><strong>ultimately</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?r_s_m = (Some ?message, VALID, NO_ERROR) &and; ?message' &ne; None&quot;</font> <font color="#006699"><strong>by</strong></font> blast
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1139 </font></span>      <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1140 </font></span>      <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1141 </font></span>    <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1142 </font></span>    <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a15 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;isSamPort (the ?port_attr) &and; portCreated s (the ?cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1143 </font></span><font color="#ff00cc">          &and; portDirect (the ?port_attr) = DESTINATION </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1144 </font></span><font color="#ff00cc">          &and; samPortEmpty s (the ?cur_part_id, port_id) = False</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1145 </font></span><font color="#ff00cc">          &and; (?sys_time - Int.nat ?write_time &gt; Int.nat ?refresh_period)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1146 </font></span><font color="#ff00cc">          &#10230; ?r_s_m = (Some ?message, INVALID, NO_ERROR) &and; ?message' &ne; None&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1147 </font></span>    <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1148 </font></span>      <font color="#006699"><strong>{</strong></font> <font color="#0099ff"><strong>assume</strong></font> <font color="#ff00cc">&quot;isSamPort (the ?port_attr) &and; portCreated s (the ?cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1149 </font></span><font color="#ff00cc">          &and; portDirect (the ?port_attr) = DESTINATION </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1150 </font></span><font color="#ff00cc">          &and; samPortEmpty s (the ?cur_part_id, port_id) = False</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1151 </font></span><font color="#ff00cc">          &and; (?sys_time - Int.nat ?write_time &gt; Int.nat ?refresh_period)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1152 </font></span>        <font color="#006699"><strong>hence</strong></font> a15_0 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?r_s_m = (Some ?message, INVALID, NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1153 </font></span>          <font color="#006699"><strong>unfolding</strong></font> READ_SAMPLING_MESSAGE_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1154 </font></span>        <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a15_1 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?message' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1155 </font></span>          <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add <font color="#000000"><strong>:</strong></font> readMsg_NotNone<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1156 </font></span>        <font color="#006699"><strong>ultimately</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?r_s_m = (Some ?message, INVALID, NO_ERROR) &and; ?message' &ne; None&quot;</font> <font color="#006699"><strong>by</strong></font> blast
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1157 </font></span>      <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1158 </font></span>      <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1159 </font></span>    <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1160 </font></span>    <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1161 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1162 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1163 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1164 </font></span><font color="#cc0000">(*=== GET_SAMPLING_PORT_ID ===*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1165 </font></span><font color="#006699"><strong>lemma</strong></font> GET_SAMPLING_PORT_ID <font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1166 </font></span>  <font color="#ff00cc">&quot;let gSampPortId = GET_SAMPLING_PORT_ID s core_id port_name;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1167 </font></span><font color="#ff00cc">   cur_part_id = curPartID s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1168 </font></span><font color="#ff00cc">   port_id = getPortIDByName s (the cur_part_id) port_name;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1169 </font></span><font color="#ff00cc">   isPortNameInCfg = portNameInCfg (the cur_part_id, port_name) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1170 </font></span><font color="#ff00cc">   if &not; isPortNameInCfg then gSampPortId = (None, INVALID_CONFIG)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1171 </font></span><font color="#ff00cc">   else </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1172 </font></span><font color="#ff00cc">      gSampPortId =  (port_id, NO_ERROR)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1173 </font></span><font color="#ff00cc">  &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1174 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1175 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1176 </font></span>  <font color="#006699"><strong>let</strong></font> ?gSampPortId <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;GET_SAMPLING_PORT_ID s core_id port_name&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1177 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curPartID s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1178 </font></span>  <font color="#006699"><strong>let</strong></font> ?port_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getPortIDByName s (the ?cur_part_id) port_name&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1179 </font></span>  <font color="#006699"><strong>let</strong></font> ?isPortNameInCfg <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;portNameInCfg (the ?cur_part_id, port_name)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1180 </font></span>  <font color="#006699"><strong>have</strong></font> a10<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&not;?isPortNameInCfg &#10230; ?gSampPortId = (None, INVALID_CONFIG)&quot;</font> <font color="#006699"><strong>unfolding</strong></font> GET_SAMPLING_PORT_ID_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1181 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a11<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?isPortNameInCfg &#10230; ?gSampPortId = (?port_id, NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1182 </font></span>    <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1183 </font></span>    <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>assume</strong></font> a11_0<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;portNameInCfg (the (curPartID s core_id), port_name)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1184 </font></span>     <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;GET_SAMPLING_PORT_ID s core_id port_name = (getPortIDByName s (the (curPartID s core_id)) port_name, NO_ERROR)&quot;</font> <font color="#006699"><strong>unfolding</strong></font> GET_SAMPLING_PORT_ID_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1185 </font></span>    <font color="#cc0000">(*ultimately have &quot;?gSampPortId = (?port_id, NO_ERROR)&quot; *)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1186 </font></span>    <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1187 </font></span>    <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1188 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1189 </font></span>  <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis a10 a11<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1190 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1191 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1192 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1193 </font></span><font color="#cc0000">(*=== GET_SAMPLING_PORT_STATUS ===*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1194 </font></span><font color="#006699"><strong>lemma</strong></font> GET_SAMPLING_PORT_STATUS <font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1195 </font></span>  <font color="#ff00cc">&quot;let </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1196 </font></span><font color="#ff00cc">      get_Sampport_Status = GET_SAMPLING_PORT_STATUS s core_id port_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1197 </font></span><font color="#ff00cc">      cur_part_id = curPartID s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1198 </font></span><font color="#ff00cc">      port_attr = getPortAttrByID s (the cur_part_id, port_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1199 </font></span><font color="#ff00cc">      system_time = sysClk s;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1200 </font></span><font color="#ff00cc">      samp_status = getSamStatus s (the cur_part_id, port_id) (Int.int system_time) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1201 </font></span><font color="#ff00cc">  in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1202 </font></span><font color="#ff00cc">      if &not;isSamPort (the port_attr) &or; &not; portCreated s (the cur_part_id, port_id) then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1203 </font></span><font color="#ff00cc">        get_Sampport_Status = (None, INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1204 </font></span><font color="#ff00cc">      else </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1205 </font></span><font color="#ff00cc">        get_Sampport_Status = (Some samp_status, NO_ERROR)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1206 </font></span><font color="#ff00cc">  &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1207 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1208 </font></span><font color="#006699"><strong>proof</strong></font> -
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1209 </font></span>  <font color="#006699"><strong>let</strong></font> ?get_Sampport_Status <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;GET_SAMPLING_PORT_STATUS s core_id port_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1210 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curPartID s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1211 </font></span>  <font color="#006699"><strong>let</strong></font> ?port_attr <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getPortAttrByID s (the ?cur_part_id, port_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1212 </font></span>  <font color="#006699"><strong>let</strong></font> ?system_time <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;sysClk s&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1213 </font></span>  <font color="#006699"><strong>let</strong></font> ?samp_status <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getSamStatus s (the ?cur_part_id, port_id) (Int.int ?system_time)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1214 </font></span>  <font color="#006699"><strong>have</strong></font> a10<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot; &not; isSamPort(the ?port_attr) &or; &not; portCreated s (the ?cur_part_id, port_id) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1215 </font></span><font color="#ff00cc">                                       &#10230; ?get_Sampport_Status = (None, INVALID_PARAM)&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1216 </font></span>    <font color="#006699"><strong>unfolding</strong></font> GET_SAMPLING_PORT_STATUS_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1217 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a11<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;isSamPort(the ?port_attr) &and; portCreated s (the ?cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1218 </font></span><font color="#ff00cc">                                       &#10230; ?get_Sampport_Status = (Some ?samp_status, NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1219 </font></span>    <font color="#006699"><strong>unfolding</strong></font> GET_SAMPLING_PORT_STATUS_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1220 </font></span>  
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1221 </font></span>  <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis a10 a11<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1222 </font></span>  
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1223 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1224 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1225 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1226 </font></span><font color="#cc0000">(*===CREATE_QUEUING_PORT===*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1227 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1228 </font></span><font color="#006699"><strong>lemma</strong></font> CREATE_QUEUING_PORT <font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1229 </font></span>  <font color="#ff00cc">&quot;let c_q_p = CREATE_QUEUING_PORT s core_id port_attr;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1230 </font></span><font color="#ff00cc">    port_name = portName port_attr;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1231 </font></span><font color="#ff00cc">    port_msgsz = portMsgSz port_attr;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1232 </font></span><font color="#ff00cc">    max_nb_message = portQueLen port_attr;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1233 </font></span><font color="#ff00cc">    port_direction = portDirect port_attr;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1234 </font></span><font color="#ff00cc">    cur_part_id = curPartID s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1235 </font></span><font color="#ff00cc">    part_cfg = getPartByID (the cur_part_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1236 </font></span><font color="#ff00cc">    ports_created = portsCreated s;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1237 </font></span><font color="#ff00cc">    port_attrIncfg_op = getPortAttrByName (the cur_part_id) port_name;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1238 </font></span><font color="#ff00cc">    port_id = newPortID s (the cur_part_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1239 </font></span><font color="#ff00cc">    </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1240 </font></span><font color="#ff00cc">    s_create_que_port = createPort s (the cur_part_id, port_id) port_attr;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1241 </font></span><font color="#ff00cc">    port_attr' = getPortAttrByID (fst c_q_p) (the cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1242 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1243 </font></span><font color="#ff00cc">    in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1244 </font></span><font color="#ff00cc">    if port_attrIncfg_op = None &or; ports_created  &ge; portsAmount then </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1245 </font></span><font color="#ff00cc">      c_q_p = (s, None, INVALID_CONFIG)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1246 </font></span><font color="#ff00cc">    else if portNameInPart (the cur_part_id) port_name then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1247 </font></span><font color="#ff00cc">      c_q_p = (s, None, INVALID_CONFIG)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1248 </font></span><font color="#ff00cc">    else if getPortIDByName s (the cur_part_id) port_name = None then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1249 </font></span><font color="#ff00cc">      c_q_p = (s, None, NO_ACTION)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1250 </font></span><font color="#ff00cc">    else if port_msgsz &le; 0 &or; port_msgsz &gt;  MAX_MSG_SZ_VALUE &or; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1251 </font></span><font color="#ff00cc">              port_msgsz &ne; portMsgSz (the port_attrIncfg_op) then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1252 </font></span><font color="#ff00cc">      c_q_p = (s, None, INVALID_CONFIG)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1253 </font></span><font color="#ff00cc">    else if port_direction &ne; portDirect (the port_attrIncfg_op) then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1254 </font></span><font color="#ff00cc">      c_q_p = (s, None, INVALID_CONFIG)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1255 </font></span><font color="#ff00cc">    else if the(getPartMode s (the cur_part_id)) = NORMAL then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1256 </font></span><font color="#ff00cc">      c_q_p = (s, None, INVALID_MODE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1257 </font></span><font color="#ff00cc">    else</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1258 </font></span><font color="#ff00cc">      c_q_p = (s_create_que_port, Some port_id, NO_ERROR) &and; port_attr' &ne; None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1259 </font></span><font color="#ff00cc">  &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1260 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1261 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1262 </font></span>  <font color="#006699"><strong>let</strong></font> ?c_q_p <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;CREATE_QUEUING_PORT s core_id port_attr&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1263 </font></span>  <font color="#006699"><strong>let</strong></font> ?port_name <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;portName port_attr&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1264 </font></span>  <font color="#006699"><strong>let</strong></font> ?port_msgsz <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;portMsgSz port_attr&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1265 </font></span>  <font color="#006699"><strong>let</strong></font> ?max_nb_message <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;portQueLen port_attr&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1266 </font></span>  <font color="#006699"><strong>let</strong></font> ?port_direction <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;portDirect port_attr&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1267 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curPartID s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1268 </font></span>  <font color="#006699"><strong>let</strong></font> ?part_cfg <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getPartByID (the ?cur_part_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1269 </font></span>  <font color="#006699"><strong>let</strong></font> ?ports_created <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;portsCreated s&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1270 </font></span>  <font color="#006699"><strong>let</strong></font> ?port_attrIncfg_op <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getPortAttrByName (the ?cur_part_id) ?port_name&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1271 </font></span>  <font color="#006699"><strong>let</strong></font> ?port_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;newPortID s (the ?cur_part_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1272 </font></span>    
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1273 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_create_que_port <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;createPort s (the ?cur_part_id, ?port_id) port_attr&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1274 </font></span>  <font color="#006699"><strong>let</strong></font> ?port_attr' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getPortAttrByID (fst ?c_q_p) (the ?cur_part_id, ?port_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1275 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1276 </font></span><font color="#006699"><strong>have</strong></font> a10<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?port_attrIncfg_op = None &or; ?ports_created  &ge; portsAmount &#10230; ?c_q_p =  (s, None, INVALID_CONFIG)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1277 </font></span>    <font color="#006699"><strong>unfolding</strong></font>  CREATE_QUEUING_PORT_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1278 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a11<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?port_attrIncfg_op &ne; None &and; (?ports_created &lt; portsAmount) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1279 </font></span><font color="#ff00cc">    &and; portNameInPart (the ?cur_part_id) ?port_name &#10230; ?c_q_p =  (s, None, INVALID_CONFIG)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1280 </font></span>    <font color="#006699"><strong>unfolding</strong></font> CREATE_QUEUING_PORT_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1281 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a12<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?port_attrIncfg_op &ne; None &and; (?ports_created &lt; portsAmount) &and; &not; portNameInPart (the ?cur_part_id) ?port_name </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1282 </font></span><font color="#ff00cc">    &and; &not; getPortIDByName s (the ?cur_part_id) ?port_name &ne; None &#10230; ?c_q_p = (s, None, NO_ACTION)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1283 </font></span>    <font color="#006699"><strong>unfolding</strong></font> CREATE_QUEUING_PORT_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1284 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a13<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?port_attrIncfg_op &ne; None &and; (?ports_created &lt; portsAmount) &and; &not; portNameInPart (the ?cur_part_id) ?port_name &and; &not; getPortIDByName s (the ?cur_part_id) ?port_name = None </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1285 </font></span><font color="#ff00cc">    &and; (?port_msgsz &le; 0 &or; ?port_msgsz &gt; MAX_MSG_SZ_VALUE &or; ?port_msgsz &ne; portMsgSz (the ?port_attrIncfg_op)) &#10230; ?c_q_p = (s, None, INVALID_CONFIG)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1286 </font></span>    <font color="#006699"><strong>unfolding</strong></font> CREATE_QUEUING_PORT_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1287 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a14<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?port_attrIncfg_op &ne; None &and; (?ports_created &lt; portsAmount) &and; &not; portNameInPart (the ?cur_part_id) ?port_name &and; &not; getPortIDByName s (the ?cur_part_id) ?port_name = None </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1288 </font></span><font color="#ff00cc">    &and; &not;(?port_msgsz &le; 0 &or; ?port_msgsz &gt; MAX_MSG_SZ_VALUE &or; ?port_msgsz &ne; portMsgSz (the ?port_attrIncfg_op)) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1289 </font></span><font color="#ff00cc">    &and; ?port_direction &ne; portDirect (the ?port_attrIncfg_op) &#10230; ?c_q_p = (s, None, INVALID_CONFIG)&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1290 </font></span>    <font color="#006699"><strong>unfolding</strong></font> CREATE_QUEUING_PORT_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1291 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a15<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?port_attrIncfg_op &ne; None &and; (?ports_created &lt; portsAmount) &and; &not; portNameInPart (the ?cur_part_id) ?port_name &and; &not; getPortIDByName s (the ?cur_part_id) ?port_name = None </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1292 </font></span><font color="#ff00cc">    &and; &not;(?port_msgsz &le; 0 &or; ?port_msgsz &gt; MAX_MSG_SZ_VALUE &or; ?port_msgsz &ne; portMsgSz (the ?port_attrIncfg_op)) &and; ?port_direction = portDirect (the ?port_attrIncfg_op)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1293 </font></span><font color="#ff00cc">    &and; the(getPartMode s (the ?cur_part_id)) = NORMAL &#10230; ?c_q_p = (s, None, INVALID_MODE)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1294 </font></span>    <font color="#006699"><strong>unfolding</strong></font> CREATE_QUEUING_PORT_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1295 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a16<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?port_attrIncfg_op &ne; None &and; (?ports_created &lt; portsAmount) &and; &not; portNameInPart (the ?cur_part_id) ?port_name &and; &not; getPortIDByName s (the ?cur_part_id) ?port_name = None </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1296 </font></span><font color="#ff00cc">    &and; &not;(?port_msgsz &le; 0 &or; ?port_msgsz &gt; MAX_MSG_SZ_VALUE &or; ?port_msgsz &ne; portMsgSz (the ?port_attrIncfg_op)) &and; ?port_direction = portDirect (the ?port_attrIncfg_op)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1297 </font></span><font color="#ff00cc">    &and; the(getPartMode s (the ?cur_part_id)) &ne; NORMAL &#10230; ?c_q_p = (?s_create_que_port, Some ?port_id, NO_ERROR) &and; ?port_attr' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1298 </font></span>  <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1299 </font></span>    <font color="#006699"><strong>{</strong></font> <font color="#0099ff"><strong>assume</strong></font> <font color="#ff00cc">&quot;?port_attrIncfg_op &ne; None &and; (?ports_created &lt; portsAmount) &and; &not; portNameInPart (the ?cur_part_id) ?port_name &and; &not; getPortIDByName s (the ?cur_part_id) ?port_name = None </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1300 </font></span><font color="#ff00cc">    &and; &not;(?port_msgsz &le; 0 &or; ?port_msgsz &gt; MAX_MSG_SZ_VALUE &or; ?port_msgsz &ne; portMsgSz (the ?port_attrIncfg_op)) &and; ?port_direction = portDirect (the ?port_attrIncfg_op)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1301 </font></span><font color="#ff00cc">    &and; the(getPartMode s (the ?cur_part_id)) &ne; NORMAL&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1302 </font></span>      <font color="#006699"><strong>hence</strong></font> a16_0 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?c_q_p = (?s_create_que_port, Some ?port_id, NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1303 </font></span>        <font color="#006699"><strong>unfolding</strong></font> CREATE_QUEUING_PORT_def Let_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1304 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a16_1 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?port_attr' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1305 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add <font color="#000000"><strong>:</strong></font> getAttr_set_NotNone a16_0<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1306 </font></span>      <font color="#006699"><strong>ultimately</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?c_q_p = (?s_create_que_port, Some ?port_id, NO_ERROR) &and; ?port_attr' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1307 </font></span>        <font color="#006699"><strong>by</strong></font> blast
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1308 </font></span>    <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1309 </font></span>    <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1310 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1311 </font></span>  <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> verit_comp_simplify1<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1312 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1313 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1314 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1315 </font></span><font color="#cc0000">(*===GET_QUEUING_PORT_ID===*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1316 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1317 </font></span><font color="#006699"><strong>lemma</strong></font> GET_QUEUING_PORT_ID <font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1318 </font></span>  <font color="#ff00cc">&quot;let</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1319 </font></span><font color="#ff00cc">      g_q_p_i = GET_QUEUING_PORT_ID s core_id port_name;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1320 </font></span><font color="#ff00cc">      cur_part_id = curPartID s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1321 </font></span><font color="#ff00cc">      port_id = getPortIDByName s (the cur_part_id) port_name</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1322 </font></span><font color="#ff00cc">   in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1323 </font></span><font color="#ff00cc">      if &not; portNameInCfg ((the cur_part_id), port_name) then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1324 </font></span><font color="#ff00cc">        g_q_p_i = (None, INVALID_CONFIG)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1325 </font></span><font color="#ff00cc">      else </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1326 </font></span><font color="#ff00cc">        g_q_p_i = (port_id, NO_ERROR)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1327 </font></span><font color="#ff00cc">  &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1328 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1329 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1330 </font></span>  <font color="#006699"><strong>let</strong></font> ?g_q_p_i <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;GET_QUEUING_PORT_ID s core_id port_name&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1331 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curPartID s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1332 </font></span>  <font color="#006699"><strong>let</strong></font> ?port_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getPortIDByName s (the ?cur_part_id) port_name&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1333 </font></span>  <font color="#006699"><strong>have</strong></font> a10<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&not; portNameInCfg ((the ?cur_part_id), port_name) &#10230; ?g_q_p_i = (None, INVALID_CONFIG)&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1334 </font></span>      <font color="#006699"><strong>unfolding</strong></font> GET_QUEUING_PORT_ID_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1335 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a11<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;portNameInCfg ((the ?cur_part_id), port_name) &#10230; ?g_q_p_i = (?port_id, NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1336 </font></span>      <font color="#006699"><strong>unfolding</strong></font> GET_QUEUING_PORT_ID_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1337 </font></span>  <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis a10 a11<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1338 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1339 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1340 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1341 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1342 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1343 </font></span><font color="#006699"><strong>lemma</strong></font> getQueMsgL_emptyQueMsgL_None <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;((quePortMsg (interCom_' (emptyQueMsgL s pp))) pp) = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1344 </font></span>  <font color="#006699"><strong>unfolding</strong></font> emptyQueMsgL_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1345 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1346 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1347 </font></span><font color="#cc0000">(*===CLEAR_QUEUING_PORT===*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1348 </font></span><font color="#006699"><strong>lemma</strong></font> CLEAR_QUEUING_PORT <font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1349 </font></span>  <font color="#ff00cc">&quot;let</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1350 </font></span><font color="#ff00cc">      c_q_p = CLEAR_QUEUING_PORT s core_id port_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1351 </font></span><font color="#ff00cc">      cur_part_id = curPartID s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1352 </font></span><font color="#ff00cc">      port_attr = getPortAttrByID s (the cur_part_id, port_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1353 </font></span><font color="#ff00cc">      que_status = getQueStatus s (the cur_part_id, port_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1354 </font></span><font color="#ff00cc">      s_emptyQueMsgL' = (quePortMsg (interCom_' (fst c_q_p))) (the cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1355 </font></span><font color="#ff00cc">   in </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1356 </font></span><font color="#ff00cc">     if &not; isQuePort (the port_attr) &or; &not; portCreated s (the cur_part_id, port_id) then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1357 </font></span><font color="#ff00cc">       c_q_p = (s, INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1358 </font></span><font color="#ff00cc">     else if portDirect (the port_attr) &ne; DESTINATION then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1359 </font></span><font color="#ff00cc">       c_q_p = (s, INVALID_MODE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1360 </font></span><font color="#ff00cc">     else if quePortEmpty s (the cur_part_id, port_id) then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1361 </font></span><font color="#ff00cc">       c_q_p = (s, NO_ACTION)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1362 </font></span><font color="#ff00cc">     else </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1363 </font></span><font color="#ff00cc">      c_q_p = (emptyQueMsgL s (the cur_part_id, port_id), NO_ERROR) &and; s_emptyQueMsgL' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1364 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1365 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1366 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1367 </font></span>  <font color="#006699"><strong>let</strong></font> ?c_q_p <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;CLEAR_QUEUING_PORT s core_id port_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1368 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curPartID s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1369 </font></span>  <font color="#006699"><strong>let</strong></font> ?port_attr <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getPortAttrByID s (the ?cur_part_id, port_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1370 </font></span>  <font color="#006699"><strong>let</strong></font> ?que_status <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getQueStatus s (the ?cur_part_id, port_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1371 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_emptyQueMsgL' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;(quePortMsg (interCom_' (fst ?c_q_p))) (the ?cur_part_id, port_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1372 </font></span>  <font color="#006699"><strong>have</strong></font> a10 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&not; isQuePort (the ?port_attr) &or; &not; portCreated s (the ?cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1373 </font></span><font color="#ff00cc">      &#10230; ?c_q_p = (s, INVALID_PARAM)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1374 </font></span>    <font color="#006699"><strong>unfolding</strong></font> CLEAR_QUEUING_PORT_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1375 </font></span>  <font color="#006699"><strong>have</strong></font> a11 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;isQuePort (the ?port_attr) &and; portCreated s (the ?cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1376 </font></span><font color="#ff00cc">      &and; portDirect (the ?port_attr) &ne; DESTINATION </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1377 </font></span><font color="#ff00cc">      &#10230; ?c_q_p = (s, INVALID_MODE)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1378 </font></span>    <font color="#006699"><strong>unfolding</strong></font> CLEAR_QUEUING_PORT_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1379 </font></span>  <font color="#006699"><strong>have</strong></font> a12 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;isQuePort (the ?port_attr) &and; portCreated s (the ?cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1380 </font></span><font color="#ff00cc">      &and; portDirect (the ?port_attr) = DESTINATION </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1381 </font></span><font color="#ff00cc">      &and; quePortEmpty s (the ?cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1382 </font></span><font color="#ff00cc">      &#10230; ?c_q_p = (s, NO_ACTION)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1383 </font></span>    <font color="#006699"><strong>unfolding</strong></font> CLEAR_QUEUING_PORT_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1384 </font></span>  <font color="#006699"><strong>have</strong></font> a13 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;isQuePort (the ?port_attr) &and; portCreated s (the ?cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1385 </font></span><font color="#ff00cc">      &and; portDirect (the ?port_attr) = DESTINATION </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1386 </font></span><font color="#ff00cc">      &and; &not;(quePortEmpty s (the ?cur_part_id, port_id))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1387 </font></span><font color="#ff00cc">      &#10230; ?c_q_p = (emptyQueMsgL s (the ?cur_part_id, port_id), NO_ERROR) &and; ?s_emptyQueMsgL' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1388 </font></span>  <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1389 </font></span>    <font color="#006699"><strong>{</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1390 </font></span>      <font color="#0099ff"><strong>assume</strong></font> a13_0 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;isQuePort (the ?port_attr) &and; portCreated s (the ?cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1391 </font></span><font color="#ff00cc">      &and; portDirect (the ?port_attr) = DESTINATION </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1392 </font></span><font color="#ff00cc">      &and; &not;(quePortEmpty s (the ?cur_part_id, port_id))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1393 </font></span>      <font color="#006699"><strong>hence</strong></font> a13_1 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?c_q_p = (emptyQueMsgL s (the ?cur_part_id, port_id), NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1394 </font></span>        <font color="#006699"><strong>unfolding</strong></font> CLEAR_QUEUING_PORT_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1395 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?s_emptyQueMsgL' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1396 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add <font color="#000000"><strong>:</strong></font> a13_1 getQueMsgL_emptyQueMsgL_None<font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1397 </font></span>      <font color="#006699"><strong>ultimately</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?c_q_p = (emptyQueMsgL s (the ?cur_part_id, port_id), NO_ERROR) &and; ?s_emptyQueMsgL' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1398 </font></span>        <font color="#006699"><strong>using</strong></font> a13_1 <font color="#006699"><strong>by</strong></font> blast
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1399 </font></span>    <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1400 </font></span>    <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> metis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1401 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1402 </font></span>  <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> a10 a11 a12 a13<font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1403 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1404 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1405 </font></span><font color="#cc0000">(*===WRITE_SAMPLING_MESSAGE===*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1406 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1407 </font></span><font color="#006699"><strong>lemma</strong></font> readSamPortMsg_writeSamPortMsg_Not_None <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;readSamPortMsg (writeSamPortMsg s pp msg) pp &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1408 </font></span>  <font color="#006699"><strong>unfolding</strong></font> writeSamPortMsg_def readSamPortMsg_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1409 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1410 </font></span><font color="#006699"><strong>lemma</strong></font> readSamPortMsg_chSampWrite <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;readSamPortMsg (chSampWrite s part_id port_id) (part_id, port_id) &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1411 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1412 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;readSamPortMsg (chSampWrite s part_id port_id) (part_id, port_id) = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1413 </font></span><font color="#ff00cc">      (samPortMsg (interCom_' (chSampWrite s part_id port_id))) (part_id, port_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1414 </font></span>    <font color="#006699"><strong>unfolding</strong></font> readSamPortMsg_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1415 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;readSamPortMsg (chSampWrite s part_id port_id) (part_id, port_id) = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1416 </font></span><font color="#ff00cc">      (samPortMsg (interCom_' (</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1417 </font></span><font color="#ff00cc">          let srcQ_attr_op = getPortAttrByID s (part_id, port_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1418 </font></span><font color="#ff00cc">              msg_t = readSamPortMsg s (part_id, port_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1419 </font></span><font color="#ff00cc">              srcS_name = portName (the srcQ_attr_op);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1420 </font></span><font color="#ff00cc">              t = Int.int (sysClk s);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1421 </font></span><font color="#ff00cc">              ch_cfg_op = getChBySrcPort (part_id, srcS_name);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1422 </font></span><font color="#ff00cc">              dstQ_part_names = chnlSampDest_PortNames (the ch_cfg_op);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1423 </font></span><font color="#ff00cc">              dstQ_portids = getPortIDsPortIDsByNames s dstQ_part_names in </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1424 </font></span><font color="#ff00cc">          if ch_cfg_op = None &or; dstQ_portids = {} then </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1425 </font></span><font color="#ff00cc">              s</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1426 </font></span><font color="#ff00cc">          else </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1427 </font></span><font color="#ff00cc">              writeSamPortsMsg s dstQ_portids (the msg_t)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1428 </font></span><font color="#ff00cc">    ))) (part_id, port_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1429 </font></span>    <font color="#006699"><strong>unfolding</strong></font> chSampWrite_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1430 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;readSamPortMsg (chSampWrite s part_id port_id) (part_id, port_id) = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1431 </font></span><font color="#ff00cc">       (let srcQ_attr_op = getPortAttrByID s (part_id, port_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1432 </font></span><font color="#ff00cc">              msg_t = readSamPortMsg s (part_id, port_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1433 </font></span><font color="#ff00cc">              srcS_name = portName (the srcQ_attr_op);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1434 </font></span><font color="#ff00cc">              t = Int.int (sysClk s);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1435 </font></span><font color="#ff00cc">              ch_cfg_op = getChBySrcPort (part_id, srcS_name);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1436 </font></span><font color="#ff00cc">              dstQ_part_names = chnlSampDest_PortNames (the ch_cfg_op);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1437 </font></span><font color="#ff00cc">              dstQ_portids = getPortIDsPortIDsByNames s dstQ_part_names in </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1438 </font></span><font color="#ff00cc">          if ch_cfg_op = None &or; dstQ_portids = {} then </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1439 </font></span><font color="#ff00cc">              (samPortMsg (interCom_' s)) (part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1440 </font></span><font color="#ff00cc">          else </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1441 </font></span><font color="#ff00cc">              (samPortMsg (interCom_' (writeSamPortsMsg s dstQ_portids (the msg_t)))) (part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1442 </font></span><font color="#ff00cc">    ) &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1443 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1444 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;readSamPortMsg (chSampWrite s part_id port_id) (part_id, port_id) &ne; None&quot;</font>  <font color="#006699"><strong>sorry</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1445 </font></span>  <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>unfolding</strong></font> readSamPortMsg_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1446 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1447 </font></span><font color="#cc0000">(*</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1448 </font></span><font color="#cc0000">lemma WRITE_SAMPLING_MESSAGE :</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1449 </font></span><font color="#cc0000">  &quot;let </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1450 </font></span><font color="#cc0000">    w_s_m = WRITE_SAMPLING_MESSAGE s core_id port_id msg;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1451 </font></span><font color="#cc0000">    cur_part_id = curPartID s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1452 </font></span><font color="#cc0000">    port_attr = getPortAttrByID s (the cur_part_id, port_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1453 </font></span><font color="#cc0000">    s_writePort = writeSamPortMsg s (the cur_part_id, port_id) msg;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1454 </font></span><font color="#cc0000">    </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1455 </font></span><font color="#cc0000">    s_getWritePortMsg = readSamPortMsg s_writePort (the cur_part_id, port_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1456 </font></span><font color="#cc0000">  </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1457 </font></span><font color="#cc0000">    port_msg' = readSamPortMsg (fst w_s_m) (the cur_part_id, port_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1458 </font></span><font color="#cc0000">    </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1459 </font></span><font color="#cc0000">    srcQ_attr_op = getPortAttrByID (fst w_s_m) (the cur_part_id, port_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1460 </font></span><font color="#cc0000">    msg_t = readSamPortMsg (fst w_s_m) (the cur_part_id, port_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1461 </font></span><font color="#cc0000">    srcS_name = portName (the srcQ_attr_op);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1462 </font></span><font color="#cc0000">    ch_cfg_op = getChBySrcPort (part_id, srcS_name);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1463 </font></span><font color="#cc0000">    dstQ_part_names = chnlSampDest_PortNames (the ch_cfg_op);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1464 </font></span><font color="#cc0000">    dstQ_portids = getPortIDsPortIDsByNames (fst w_s_m) dstQ_part_names</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1465 </font></span><font color="#cc0000">    </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1466 </font></span><font color="#cc0000">  in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1467 </font></span><font color="#cc0000">    if &not;isSamPort (the port_attr) &or; &not; portCreated s (the cur_part_id, port_id) then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1468 </font></span><font color="#cc0000">      w_s_m = (s, INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1469 </font></span><font color="#cc0000">    else if portMsgSz (the (getPortAttrByID s (the cur_part_id, port_id))) &gt; MAX_MSG_SZ_VALUE then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1470 </font></span><font color="#cc0000">      w_s_m = (s, INVALID_CONFIG)  </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1471 </font></span><font color="#cc0000">    else if portMsgSz (the (getPortAttrByID s (the cur_part_id, port_id))) &le; 0 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1472 </font></span><font color="#cc0000">      w_s_m = (s, INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1473 </font></span><font color="#cc0000">    else if portDirect (the port_attr) &ne; SOURCE then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1474 </font></span><font color="#cc0000">      w_s_m = (s, INVALID_MODE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1475 </font></span><font color="#cc0000">    else</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1476 </font></span><font color="#cc0000">      w_s_m = (chSampWrite s_writePort (the cur_part_id) port_id, NO_ERROR) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1477 </font></span><font color="#cc0000">        &and; port_msg' &ne; None &and; (&forall;pp &isin; dstQ_portids. (&not;(ch_cfg_op = None &or; dstQ_portids = {})) &#10230; readSamPortMsg (fst w_s_m) pp &ne; None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1478 </font></span><font color="#cc0000">  &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1479 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1480 </font></span><font color="#cc0000">proof-</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1481 </font></span><font color="#cc0000">  let ?w_s_m = &quot;WRITE_SAMPLING_MESSAGE s core_id port_id msg&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1482 </font></span><font color="#cc0000">  let ?cur_part_id = &quot;curPartID s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1483 </font></span><font color="#cc0000">  let ?port_attr = &quot;getPortAttrByID s (the ?cur_part_id, port_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1484 </font></span><font color="#cc0000">  let ?s_writePort = &quot;writeSamPortMsg s (the ?cur_part_id, port_id) msg&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1485 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1486 </font></span><font color="#cc0000">  let ?s_getWritePortMsg = &quot;readSamPortMsg ?s_writePort (the ?cur_part_id, port_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1487 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1488 </font></span><font color="#cc0000">  let ?port_msg' = &quot;readSamPortMsg (fst ?w_s_m) (the ?cur_part_id, port_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1489 </font></span><font color="#cc0000">    </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1490 </font></span><font color="#cc0000">  let ?srcQ_attr_op = &quot;getPortAttrByID (fst ?w_s_m) (the ?cur_part_id, port_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1491 </font></span><font color="#cc0000">  let ?msg_t = &quot;readSamPortMsg (fst ?w_s_m) (the ?cur_part_id, port_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1492 </font></span><font color="#cc0000">  let ?srcS_name = &quot;portName (the ?srcQ_attr_op)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1493 </font></span><font color="#cc0000">  let ?ch_cfg_op = &quot;getChBySrcPort (part_id, ?srcS_name)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1494 </font></span><font color="#cc0000">  let ?dstQ_part_names = &quot;chnlSampDest_PortNames (the ?ch_cfg_op)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1495 </font></span><font color="#cc0000">  let ?dstQ_portids = &quot;getPortIDsPortIDsByNames (fst ?w_s_m) ?dstQ_part_names&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1496 </font></span><font color="#cc0000">  </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1497 </font></span><font color="#cc0000">  have a10: &quot;&not;isSamPort (the ?port_attr) &or; &not; portCreated s (the ?cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1498 </font></span><font color="#cc0000">    &#10230; ?w_s_m = (s, INVALID_PARAM)&quot; unfolding WRITE_SAMPLING_MESSAGE_def by auto</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1499 </font></span><font color="#cc0000">  moreover have a11: &quot;isSamPort (the ?port_attr) &and; portCreated s (the ?cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1500 </font></span><font color="#cc0000">    &and; portMsgSz (the (getPortAttrByID s (the ?cur_part_id, port_id))) &gt; MAX_MSG_SZ_VALUE</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1501 </font></span><font color="#cc0000">    &#10230; ?w_s_m = (s, INVALID_CONFIG)&quot; unfolding WRITE_SAMPLING_MESSAGE_def by auto</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1502 </font></span><font color="#cc0000">  moreover have a12: &quot;isSamPort (the ?port_attr) &and; portCreated s (the ?cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1503 </font></span><font color="#cc0000">    &and; portMsgSz (the (getPortAttrByID s (the ?cur_part_id, port_id))) &le; MAX_MSG_SZ_VALUE</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1504 </font></span><font color="#cc0000">    &and; portMsgSz (the (getPortAttrByID s (the ?cur_part_id, port_id))) &le; 0</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1505 </font></span><font color="#cc0000">    &#10230; ?w_s_m = (s, INVALID_PARAM)&quot; unfolding WRITE_SAMPLING_MESSAGE_def by auto</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1506 </font></span><font color="#cc0000">  moreover have a13: &quot;isSamPort (the ?port_attr) &and; portCreated s (the ?cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1507 </font></span><font color="#cc0000">    &and; portMsgSz (the (getPortAttrByID s (the ?cur_part_id, port_id))) &le; MAX_MSG_SZ_VALUE</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1508 </font></span><font color="#cc0000">    &and; portMsgSz (the (getPortAttrByID s (the ?cur_part_id, port_id))) &gt; 0</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1509 </font></span><font color="#cc0000">    &and; portDirect (the ?port_attr) &ne; SOURCE</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1510 </font></span><font color="#cc0000">    &#10230; ?w_s_m = (s, INVALID_MODE)&quot; unfolding WRITE_SAMPLING_MESSAGE_def by auto</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1511 </font></span><font color="#cc0000">  moreover have a14: &quot;isSamPort (the ?port_attr) &and; portCreated s (the ?cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1512 </font></span><font color="#cc0000">    &and; portMsgSz (the (getPortAttrByID s (the ?cur_part_id, port_id))) &le; MAX_MSG_SZ_VALUE</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1513 </font></span><font color="#cc0000">    &and; portMsgSz (the (getPortAttrByID s (the ?cur_part_id, port_id))) &gt; 0</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1514 </font></span><font color="#cc0000">    &and; portDirect (the ?port_attr) = SOURCE</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1515 </font></span><font color="#cc0000">    &#10230; ?w_s_m = (chSampWrite ?s_writePort (the ?cur_part_id) port_id, NO_ERROR) &and; ?port_msg' &ne; None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1516 </font></span><font color="#cc0000">        &and; (&forall;pp &isin; ?dstQ_portids. (&not;(?ch_cfg_op = None &or; ?dstQ_portids = {})) &#10230; readSamPortMsg (fst ?w_s_m) pp &ne; None)&quot; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1517 </font></span><font color="#cc0000">  proof-</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1518 </font></span><font color="#cc0000">    {</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1519 </font></span><font color="#cc0000">      assume a14_0 : &quot;isSamPort (the ?port_attr) &and; portCreated s (the ?cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1520 </font></span><font color="#cc0000">              &and; portMsgSz (the (getPortAttrByID s (the ?cur_part_id, port_id))) &le; MAX_MSG_SZ_VALUE</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1521 </font></span><font color="#cc0000">              &and; portMsgSz (the (getPortAttrByID s (the ?cur_part_id, port_id))) &gt; 0</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1522 </font></span><font color="#cc0000">              &and; portDirect (the ?port_attr) = SOURCE&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1523 </font></span><font color="#cc0000">      hence a14_1 : &quot;?w_s_m = (chSampWrite ?s_writePort (the ?cur_part_id) port_id, NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1524 </font></span><font color="#cc0000">        unfolding WRITE_SAMPLING_MESSAGE_def Let_def writeSamPortMsg_def readSamPortMsg_def by auto</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1525 </font></span><font color="#cc0000">      moreover have &quot;?port_msg' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1526 </font></span><font color="#cc0000">        by (simp add: readSamPortMsg_writeSamPortMsg_Not_None a14_0 readSamPortMsg_chSampWrite)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1527 </font></span><font color="#cc0000">   }</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1528 </font></span><font color="#cc0000">  qed</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1529 </font></span><font color="#cc0000">  ultimately show ?thesis by auto</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1530 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1531 </font></span><font color="#cc0000">qed</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1532 </font></span><font color="#cc0000">*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1533 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1534 </font></span><font color="#cc0000">(*===RECEIVE_QUEUING_MESSAGE===*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1535 </font></span><font color="#006699"><strong>lemma</strong></font> RECEIVE_QUEUING_MESSAGE <font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1536 </font></span>  <font color="#ff00cc">&quot;let</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1537 </font></span><font color="#ff00cc">      r_q_m = RECEIVE_QUEUING_MESSAGE s core_id port_id time_out;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1538 </font></span><font color="#ff00cc">      cur_part_id = curPartID s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1539 </font></span><font color="#ff00cc">      port_attr = getPortAttrByID s (the cur_part_id, port_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1540 </font></span><font color="#ff00cc">      cur_proc_id = curProcID_Core s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1541 </font></span><font color="#ff00cc">      </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1542 </font></span><font color="#ff00cc">      state_msg = rcvQueMsg s (the cur_part_id, port_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1543 </font></span><font color="#ff00cc">      s' = fst state_msg;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1544 </font></span><font color="#ff00cc">      msg = snd state_msg;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1545 </font></span><font color="#ff00cc">      </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1546 </font></span><font color="#ff00cc">      s_alone = procAlone s (the cur_part_id, the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1547 </font></span><font color="#ff00cc">      s_setSta = setProcSta s_alone (the cur_part_id, the cur_proc_id) WAITING;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1548 </font></span><font color="#ff00cc">      s_set_tCounterRsc = setCterRsc s_setSta (the cur_part_id, the cur_proc_id) time_out;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1549 </font></span><font color="#ff00cc">      s_setWd = setWaitDiff s_set_tCounterRsc (the cur_part_id, the cur_proc_id) time_out;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1550 </font></span><font color="#ff00cc">      s_addTimeQ = if time_out = -1 then s_setWd </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1551 </font></span><font color="#ff00cc">                   else  waitAdd_D s_setWd (the cur_part_id, the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1552 </font></span><font color="#ff00cc">      s_tcter_rscQ = rscQPush s_addTimeQ (interC (the cur_part_id, port_id)) (the cur_part_id, the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1553 </font></span><font color="#ff00cc">      s_setCntxt = setCntxt s_tcter_rscQ (the cur_part_id, the cur_proc_id) (rdQueu (the cur_part_id, port_id));</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1554 </font></span><font color="#ff00cc">      s_schedule_Abs = schedule_Abs s_setCntxt core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1555 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1556 </font></span><font color="#ff00cc">      get_tCounterRsc' = getCterRsc (fst r_q_m) (the cur_part_id, the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1557 </font></span><font color="#ff00cc">      get_ProcSta' = getProcSta (fst r_q_m) (the cur_part_id, the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1558 </font></span><font color="#ff00cc">      get_WaitDiff' = getWaitDiff (fst r_q_m) (the cur_part_id, the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1559 </font></span><font color="#ff00cc">      get_Cntxt' = getCntxt (fst r_q_m) (the cur_part_id, the cur_proc_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1560 </font></span><font color="#ff00cc">    in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1561 </font></span><font color="#ff00cc">      if &not; isQuePort (the port_attr) &or; &not; portCreated s (the cur_part_id, port_id) then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1562 </font></span><font color="#ff00cc">        r_q_m = (s, None, Some INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1563 </font></span><font color="#ff00cc">      else if Int.nat time_out &ge; INVALID_TIMEOUT_VALUE then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1564 </font></span><font color="#ff00cc">        r_q_m = (s, None, Some INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1565 </font></span><font color="#ff00cc">      else if portDirect (the port_attr) &ne; DESTINATION then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1566 </font></span><font color="#ff00cc">        r_q_m = (s, None, Some INVALID_MODE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1567 </font></span><font color="#ff00cc">      else if &not; quePortEmpty s (the cur_part_id, port_id) then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1568 </font></span><font color="#ff00cc">        r_q_m = (s', msg, Some NO_ERROR)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1569 </font></span><font color="#ff00cc">      else if time_out = 0 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1570 </font></span><font color="#ff00cc">        r_q_m = (s, None, Some NOT_AVAILABLE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1571 </font></span><font color="#ff00cc">      else if (the cur_proc_id) = HM_PROC_ID &or; getProcUserPLMtx s (the cur_part_id, the cur_proc_id) &ne; None then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1572 </font></span><font color="#ff00cc">        r_q_m = (s, None, Some INVALID_MODE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1573 </font></span><font color="#ff00cc">      else</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1574 </font></span><font color="#ff00cc">        r_q_m = (schedule_Abs s_setCntxt core_id, None, None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1575 </font></span><font color="#ff00cc">          &and; get_tCounterRsc' &ne; None &and; get_WaitDiff' &ne; None &and; get_Cntxt' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1576 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1577 </font></span>  <font color="#006699"><strong>let</strong></font> ?r_q_m <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;RECEIVE_QUEUING_MESSAGE s core_id port_id time_out&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1578 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curPartID s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1579 </font></span>  <font color="#006699"><strong>let</strong></font> ?port_attr <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getPortAttrByID s (the ?cur_part_id, port_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1580 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_proc_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curProcID_Core s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1581 </font></span>      
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1582 </font></span>  <font color="#006699"><strong>let</strong></font> ?state_msg <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;rcvQueMsg s (the ?cur_part_id, port_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1583 </font></span>  <font color="#006699"><strong>let</strong></font> ?s' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;fst ?state_msg&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1584 </font></span>  <font color="#006699"><strong>let</strong></font> ?msg <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;snd ?state_msg&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1585 </font></span>      
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1586 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_alone <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;procAlone s (the ?cur_part_id, the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1587 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setSta <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setProcSta ?s_alone (the ?cur_part_id, the ?cur_proc_id) WAITING&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1588 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_set_tCounterRsc <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setCterRsc ?s_setSta (the ?cur_part_id, the ?cur_proc_id) time_out&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1589 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setWd <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setWaitDiff ?s_set_tCounterRsc (the ?cur_part_id, the ?cur_proc_id) time_out&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1590 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_addTimeQ <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;if time_out = -1 then ?s_setWd </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1591 </font></span><font color="#ff00cc">                   else  waitAdd_D ?s_setWd (the ?cur_part_id, the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1592 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_tcter_rscQ <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;rscQPush ?s_addTimeQ (interC (the ?cur_part_id, port_id)) (the ?cur_part_id, the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1593 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setCntxt <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setCntxt ?s_tcter_rscQ (the ?cur_part_id, the ?cur_proc_id) (rdQueu (the ?cur_part_id, port_id))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1594 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_schedule_Abs <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;schedule_Abs ?s_setCntxt core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1595 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1596 </font></span>  <font color="#006699"><strong>let</strong></font> ?get_tCounterRsc' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getCterRsc (fst ?r_q_m) (the ?cur_part_id, the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1597 </font></span>  <font color="#006699"><strong>let</strong></font> ?get_ProcSta' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getProcSta (fst ?r_q_m) (the ?cur_part_id, the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1598 </font></span>  <font color="#006699"><strong>let</strong></font> ?get_WaitDiff' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getWaitDiff (fst ?r_q_m) (the ?cur_part_id, the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1599 </font></span>  <font color="#006699"><strong>let</strong></font> ?get_Cntxt' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getCntxt (fst ?r_q_m) (the ?cur_part_id, the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1600 </font></span>  <font color="#006699"><strong>have</strong></font> a10 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&not; isQuePort (the ?port_attr) &or; &not; portCreated s (the ?cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1601 </font></span><font color="#ff00cc">      &#10230; ?r_q_m = (s, None, Some INVALID_PARAM)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1602 </font></span>      <font color="#006699"><strong>unfolding</strong></font> RECEIVE_QUEUING_MESSAGE_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1603 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a11 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;isQuePort (the ?port_attr) &and; portCreated s (the ?cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1604 </font></span><font color="#ff00cc">      &and; (Int.nat time_out &ge; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1605 </font></span><font color="#ff00cc">      &#10230; ?r_q_m = (s, None, Some INVALID_PARAM)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1606 </font></span>      <font color="#006699"><strong>unfolding</strong></font> RECEIVE_QUEUING_MESSAGE_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1607 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a12 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;isQuePort (the ?port_attr) &and; portCreated s (the ?cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1608 </font></span><font color="#ff00cc">      &and; (Int.nat time_out &lt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1609 </font></span><font color="#ff00cc">      &and; portDirect (the ?port_attr) &ne; DESTINATION</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1610 </font></span><font color="#ff00cc">      &#10230; ?r_q_m = (s, None, Some INVALID_MODE)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1611 </font></span>      <font color="#006699"><strong>unfolding</strong></font> RECEIVE_QUEUING_MESSAGE_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1612 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a13 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;isQuePort (the ?port_attr) &and; portCreated s (the ?cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1613 </font></span><font color="#ff00cc">      &and; (Int.nat time_out &lt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1614 </font></span><font color="#ff00cc">      &and; portDirect (the ?port_attr) = DESTINATION</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1615 </font></span><font color="#ff00cc">      &and; &not; quePortEmpty s (the ?cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1616 </font></span><font color="#ff00cc">      &#10230; ?r_q_m = (?s', ?msg, Some NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1617 </font></span>      <font color="#006699"><strong>unfolding</strong></font> RECEIVE_QUEUING_MESSAGE_def Let_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1618 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a14 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;isQuePort (the ?port_attr) &and; portCreated s (the ?cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1619 </font></span><font color="#ff00cc">      &and; (Int.nat time_out &lt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1620 </font></span><font color="#ff00cc">      &and; portDirect (the ?port_attr) = DESTINATION</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1621 </font></span><font color="#ff00cc">      &and; quePortEmpty s (the ?cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1622 </font></span><font color="#ff00cc">      &and; time_out = 0</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1623 </font></span><font color="#ff00cc">      &#10230; ?r_q_m = (s, None, Some NOT_AVAILABLE)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1624 </font></span>      <font color="#006699"><strong>unfolding</strong></font> RECEIVE_QUEUING_MESSAGE_def Let_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1625 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a15 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;isQuePort (the ?port_attr) &and; portCreated s (the ?cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1626 </font></span><font color="#ff00cc">      &and; (Int.nat time_out &lt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1627 </font></span><font color="#ff00cc">      &and; portDirect (the ?port_attr) = DESTINATION</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1628 </font></span><font color="#ff00cc">      &and; quePortEmpty s (the ?cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1629 </font></span><font color="#ff00cc">      &and; time_out &ne; 0</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1630 </font></span><font color="#ff00cc">      &and; ((the ?cur_proc_id) = HM_PROC_ID &or; getProcUserPLMtx s (the ?cur_part_id, the ?cur_proc_id) &ne; None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1631 </font></span><font color="#ff00cc">      &#10230; ?r_q_m = (s, None, Some INVALID_MODE)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1632 </font></span>      <font color="#006699"><strong>unfolding</strong></font> RECEIVE_QUEUING_MESSAGE_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1633 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a16 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;isQuePort (the ?port_attr) &and; portCreated s (the ?cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1634 </font></span><font color="#ff00cc">      &and; (Int.nat time_out &lt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1635 </font></span><font color="#ff00cc">      &and; portDirect (the ?port_attr) = DESTINATION</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1636 </font></span><font color="#ff00cc">      &and; quePortEmpty s (the ?cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1637 </font></span><font color="#ff00cc">      &and; time_out &ne; 0</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1638 </font></span><font color="#ff00cc">      &and; &not;((the ?cur_proc_id) = HM_PROC_ID &or; getProcUserPLMtx s (the ?cur_part_id, the ?cur_proc_id) &ne; None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1639 </font></span><font color="#ff00cc">      &#10230; ?r_q_m = (schedule_Abs ?s_setCntxt core_id, None, None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1640 </font></span><font color="#ff00cc">              &and; ?get_tCounterRsc' &ne; None &and; ?get_WaitDiff' &ne; None &and; ?get_Cntxt' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1641 </font></span>    <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1642 </font></span>      <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>assume</strong></font> a16_0 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;isQuePort (the ?port_attr) &and; portCreated s (the ?cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1643 </font></span><font color="#ff00cc">        &and; (Int.nat time_out &lt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1644 </font></span><font color="#ff00cc">        &and; portDirect (the ?port_attr) = DESTINATION</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1645 </font></span><font color="#ff00cc">        &and; quePortEmpty s (the ?cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1646 </font></span><font color="#ff00cc">        &and; time_out &ne; 0</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1647 </font></span><font color="#ff00cc">        &and; &not;((the ?cur_proc_id) = HM_PROC_ID &or; getProcUserPLMtx s (the ?cur_part_id, the ?cur_proc_id) &ne; None)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1648 </font></span>        <font color="#006699"><strong>hence</strong></font> a16_1 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?r_q_m = (schedule_Abs ?s_setCntxt core_id, None, None)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1649 </font></span>          <font color="#006699"><strong>unfolding</strong></font> RECEIVE_QUEUING_MESSAGE_def Let_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1650 </font></span>        <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?get_tCounterRsc' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1651 </font></span>          <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt option.discI fstI getCterRsc_set_NotNone getCterRsc_setWaitDiff getCterRsc_waitAdd_D getCterRsc_rscQPush getCterRsc_setCntxt getCterRsc_schedule_Abs a16_1<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1652 </font></span>        <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?get_Cntxt' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1653 </font></span>          <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt option.discI fstI getCtx_sd getCntxt_set_NotNone a16_1<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1654 </font></span>        <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?get_WaitDiff' &ne; None&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1655 </font></span>        <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1656 </font></span>          <font color="#006699"><strong>have</strong></font> a17_0 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getWaitDiff ?s_setWd (the ?cur_part_id, the ?cur_proc_id) &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1657 </font></span>            <font color="#006699"><strong>using</strong></font> getWaitDiff_setWaitDiff_NotNone <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1658 </font></span>          <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getWaitDiff ?s_addTimeQ (the ?cur_part_id, the ?cur_proc_id) &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1659 </font></span>            <font color="#006699"><strong>apply</strong></font> <font color="#000000"><strong>(</strong></font>cases <font color="#ff00cc">&quot;time_out = -1&quot;</font><font color="#000000"><strong>)</strong></font> <font color="#006699"><strong>apply</strong></font> auto<font color="#000000"><strong>[</strong></font>1<font color="#000000"><strong>]</strong></font> <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> getWaitDiff_waitAdd_D<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1660 </font></span>          <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getWaitDiff ?s_tcter_rscQ (the ?cur_part_id, the ?cur_proc_id) &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1661 </font></span>            <font color="#006699"><strong>using</strong></font> getWaitDiff_rscQPush_Eq <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1662 </font></span>          <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>using</strong></font> getWaitDiff_setCntxt_Eq
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1663 </font></span>            <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> a16_1 fst_conv getWaitDiff_schedule_Abs<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1664 </font></span>        <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1665 </font></span>        <font color="#006699"><strong>ultimately</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?r_q_m = (schedule_Abs ?s_setCntxt core_id, None, None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1666 </font></span><font color="#ff00cc">              &and; ?get_tCounterRsc' &ne; None &and; ?get_WaitDiff' &ne; None &and; ?get_Cntxt' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1667 </font></span>         <font color="#006699"><strong>using</strong></font> a16_1 <font color="#006699"><strong>by</strong></font> blast
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1668 </font></span>      <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1669 </font></span>      <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1670 </font></span>    <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1671 </font></span>    <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1672 </font></span>      <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> verit_comp_simplify1<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1673 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1674 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1675 </font></span><font color="#cc0000">(*</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1676 </font></span><font color="#cc0000">   by (simp add : getWaitDiff_set_NotNone getWaitDiff_waitAdd_D getWaitDiff_rscQPush getWaitDiff_setCntxt getWaitDiff_schedule_Abs a16_1)                </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1677 </font></span><font color="#cc0000">*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1678 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1679 </font></span><font color="#006699"><strong>lemma</strong></font> RECEIVE_QUEUING_MESSAGE' <font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1680 </font></span>  <font color="#ff00cc">&quot;let </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1681 </font></span><font color="#ff00cc">      r_q_m' = RECEIVE_QUEUING_MESSAGE' s core_id port_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1682 </font></span><font color="#ff00cc">      cur_part_id = curPartID s core_id; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1683 </font></span><font color="#ff00cc">      cur_proc_id = curProcID_Core s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1684 </font></span><font color="#ff00cc">      cntxt = getCntxt s (the cur_part_id, the cur_proc_id); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1685 </font></span><font color="#ff00cc">      cter = getCterRsc s (the cur_part_id, the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1686 </font></span><font color="#ff00cc">      </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1687 </font></span><font color="#ff00cc">      state_msg = rcvQueMsg s (the cur_part_id, port_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1688 </font></span><font color="#ff00cc">      s' = fst state_msg;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1689 </font></span><font color="#ff00cc">      msg = snd state_msg</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1690 </font></span><font color="#ff00cc">   in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1691 </font></span><font color="#ff00cc">    if the cter = 0 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1692 </font></span><font color="#ff00cc">      r_q_m' = (resetCntxt s (the cur_part_id, the cur_proc_id), None, TIMED_OUT)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1693 </font></span><font color="#ff00cc">    else</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1694 </font></span><font color="#ff00cc">      r_q_m' = (resetCntxt s' (the cur_part_id, the cur_proc_id), msg, NO_ERROR)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1695 </font></span><font color="#ff00cc">  &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1696 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1697 </font></span>  <font color="#006699"><strong>let</strong></font> ?r_q_m' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;RECEIVE_QUEUING_MESSAGE' s core_id port_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1698 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curPartID s core_id&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1699 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_proc_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curProcID_Core s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1700 </font></span>  <font color="#006699"><strong>let</strong></font> ?cntxt <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getCntxt s (the ?cur_part_id, the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1701 </font></span>  <font color="#006699"><strong>let</strong></font> ?cter <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getCterRsc s (the ?cur_part_id, the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1702 </font></span>      
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1703 </font></span>  <font color="#006699"><strong>let</strong></font> ?state_msg <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;rcvQueMsg s (the ?cur_part_id, port_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1704 </font></span>  <font color="#006699"><strong>let</strong></font> ?s' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;fst ?state_msg&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1705 </font></span>  <font color="#006699"><strong>let</strong></font> ?msg <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;snd ?state_msg&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1706 </font></span>  <font color="#006699"><strong>have</strong></font> a10 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;the ?cter = 0 &#10230; ?r_q_m' = (resetCntxt s (the ?cur_part_id, the ?cur_proc_id), None, TIMED_OUT)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1707 </font></span>    <font color="#006699"><strong>unfolding</strong></font> RECEIVE_QUEUING_MESSAGE'_def Let_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1708 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a11 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;the ?cter &ne; 0 &#10230; ?r_q_m' = (resetCntxt ?s' (the ?cur_part_id, the ?cur_proc_id), ?msg, NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1709 </font></span>    <font color="#006699"><strong>unfolding</strong></font> RECEIVE_QUEUING_MESSAGE'_def Let_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1710 </font></span>  <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1711 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1712 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1713 </font></span><font color="#cc0000">(*===SEND_QUEUING_MESSAGE===*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1714 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1715 </font></span><font color="#006699"><strong>lemma</strong></font> SEND_QUEUING_MESSAGE <font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1716 </font></span>  <font color="#ff00cc">&quot;let</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1717 </font></span><font color="#ff00cc">      s_q_m = SEND_QUEUING_MESSAGE s core_id port_id msg time_out;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1718 </font></span><font color="#ff00cc">      cur_part_id = curPartID s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1719 </font></span><font color="#ff00cc">      port_attr = getPortAttrByID s (the cur_part_id, port_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1720 </font></span><font color="#ff00cc">      port_full = quePortFull s (the cur_part_id, port_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1721 </font></span><font color="#ff00cc">      part_sta = partitions_' s;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1722 </font></span><font color="#ff00cc">      cur_proc_id = curProc part_sta (the cur_part_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1723 </font></span><font color="#ff00cc">      </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1724 </font></span><font color="#ff00cc">      s_alone = procAlone s (the cur_part_id, the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1725 </font></span><font color="#ff00cc">      s_cter_Sta = setProcSta s_alone (the cur_part_id, the cur_proc_id) WAITING;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1726 </font></span><font color="#ff00cc">      s_cter = setCterRsc s_cter_Sta (the cur_part_id, the cur_proc_id) time_out;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1727 </font></span><font color="#ff00cc">      s_setWd = setWaitDiff s_cter (the cur_part_id, the cur_proc_id) time_out;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1728 </font></span><font color="#ff00cc">      s_insertQMsg = insertQueMsg s (the cur_part_id, port_id) msg;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1729 </font></span><font color="#ff00cc">      s_tcter = if time_out = -1 then s_setWd </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1730 </font></span><font color="#ff00cc">                      else waitAdd_D s_setWd (the cur_part_id, the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1731 </font></span><font color="#ff00cc">      s_tcter_rscQ = rscQPush s_tcter (interC (the cur_part_id, port_id)) (the cur_part_id, the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1732 </font></span><font color="#ff00cc">      s_setCntxt = setCntxt s_tcter_rscQ (the cur_part_id, the cur_proc_id) (wrQueu((the cur_part_id, port_id), msg));</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1733 </font></span><font color="#ff00cc">      s_chQueWrite = chQueWrite s_insertQMsg (the cur_part_id) port_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1734 </font></span><font color="#ff00cc">      s_schedule_Abs = schedule_Abs s_setCntxt core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1735 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1736 </font></span><font color="#ff00cc">      get_tCounterRsc' = getCterRsc (fst s_q_m) (the cur_part_id, the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1737 </font></span><font color="#ff00cc">      get_ProcSta' = getProcSta (fst s_q_m) (the cur_part_id, the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1738 </font></span><font color="#ff00cc">      get_WaitDiff' = getWaitDiff (fst s_q_m) (the cur_part_id, the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1739 </font></span><font color="#ff00cc">      get_Cntxt' = getCntxt (fst s_q_m) (the cur_part_id, the cur_proc_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1740 </font></span><font color="#ff00cc">   in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1741 </font></span><font color="#ff00cc">     if &not; isQuePort (the port_attr) &or; &not; portCreated s (the cur_part_id, port_id) then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1742 </font></span><font color="#ff00cc">        s_q_m = (s, Some INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1743 </font></span><font color="#ff00cc">     else if invalTout time_out then </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1744 </font></span><font color="#ff00cc">        s_q_m = (s, Some INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1745 </font></span><font color="#ff00cc">     else if msg &gt; portMsgSz (the port_attr) then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1746 </font></span><font color="#ff00cc">        s_q_m = (s, Some INVALID_CONFIG)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1747 </font></span><font color="#ff00cc">     else if msg &le; 0 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1748 </font></span><font color="#ff00cc">        s_q_m = (s, Some INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1749 </font></span><font color="#ff00cc">     else if portDirect (the port_attr) &ne; SOURCE then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1750 </font></span><font color="#ff00cc">        s_q_m = (s, Some INVALID_MODE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1751 </font></span><font color="#ff00cc">     else if &not; port_full then </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1752 </font></span><font color="#ff00cc">        s_q_m = (chQueWrite s_insertQMsg (the cur_part_id) port_id, Some NO_ERROR) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1753 </font></span><font color="#ff00cc">     else if time_out = 0 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1754 </font></span><font color="#ff00cc">        s_q_m = (s, Some NOT_AVAILABLE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1755 </font></span><font color="#ff00cc">     else if (the cur_proc_id) = HM_PROC_ID &or; getProcUserPLMtx s (the cur_part_id, the cur_proc_id) &ne; None then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1756 </font></span><font color="#ff00cc">        s_q_m = (s, Some INVALID_MODE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1757 </font></span><font color="#ff00cc">     else</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1758 </font></span><font color="#ff00cc">          s_q_m = (schedule_Abs s_setCntxt core_id, None) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1759 </font></span><font color="#ff00cc">           &and; get_tCounterRsc' &ne; None &and; get_WaitDiff' &ne; None &and; get_Cntxt' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1760 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1761 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1762 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_q_m <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;SEND_QUEUING_MESSAGE s core_id port_id msg time_out&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1763 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curPartID s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1764 </font></span>  <font color="#006699"><strong>let</strong></font> ?port_attr <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getPortAttrByID s (the ?cur_part_id, port_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1765 </font></span>  <font color="#006699"><strong>let</strong></font> ?port_full <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;quePortFull s (the ?cur_part_id, port_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1766 </font></span>  <font color="#006699"><strong>let</strong></font> ?part_sta <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;partitions_' s&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1767 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_proc_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curProc ?part_sta (the ?cur_part_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1768 </font></span>      
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1769 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_alone <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;procAlone s (the ?cur_part_id, the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1770 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_cter_Sta <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setProcSta ?s_alone (the ?cur_part_id, the ?cur_proc_id) WAITING&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1771 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_cter <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setCterRsc ?s_cter_Sta (the ?cur_part_id, the ?cur_proc_id) time_out&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1772 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setWd <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setWaitDiff ?s_cter (the ?cur_part_id, the ?cur_proc_id) time_out&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1773 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_insertQMsg <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;insertQueMsg s (the ?cur_part_id, port_id) msg&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1774 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_tcter <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;if time_out = -1 then ?s_setWd </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1775 </font></span><font color="#ff00cc">                      else waitAdd_D ?s_setWd (the ?cur_part_id, the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1776 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_tcter_rscQ <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;rscQPush ?s_tcter (interC (the ?cur_part_id, port_id)) (the ?cur_part_id, the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1777 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setCntxt <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setCntxt ?s_tcter_rscQ (the ?cur_part_id, the ?cur_proc_id) (wrQueu((the ?cur_part_id, port_id), msg))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1778 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_chQueWrite <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;chQueWrite ?s_insertQMsg (the ?cur_part_id) port_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1779 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_schedule_Abs <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;schedule_Abs ?s_setCntxt core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1780 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1781 </font></span>  <font color="#006699"><strong>let</strong></font> ?get_tCounterRsc' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getCterRsc (fst ?s_q_m) (the ?cur_part_id, the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1782 </font></span>  <font color="#006699"><strong>let</strong></font> ?get_ProcSta' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getProcSta (fst ?s_q_m) (the ?cur_part_id, the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1783 </font></span>  <font color="#006699"><strong>let</strong></font> ?get_WaitDiff' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getWaitDiff (fst ?s_q_m) (the ?cur_part_id, the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1784 </font></span>  <font color="#006699"><strong>let</strong></font> ?get_Cntxt' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getCntxt (fst ?s_q_m) (the ?cur_part_id, the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1785 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1786 </font></span>  <font color="#006699"><strong>have</strong></font> a10 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&not; isQuePort (the ?port_attr) &or; &not; portCreated s (the ?cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1787 </font></span><font color="#ff00cc">       &#10230; ?s_q_m = (s, Some INVALID_PARAM)&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1788 </font></span>        <font color="#006699"><strong>unfolding</strong></font> SEND_QUEUING_MESSAGE_def  <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1789 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a11 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;isQuePort (the ?port_attr) &and; portCreated s (the ?cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1790 </font></span><font color="#ff00cc">        &and; invalTout time_out &#10230; ?s_q_m = (s, Some INVALID_PARAM)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1791 </font></span>        <font color="#006699"><strong>unfolding</strong></font> SEND_QUEUING_MESSAGE_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1792 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a12 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;isQuePort (the ?port_attr) &and; portCreated s (the ?cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1793 </font></span><font color="#ff00cc">        &and; &not;invalTout time_out &and; msg &gt; portMsgSz (the ?port_attr) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1794 </font></span><font color="#ff00cc">        &#10230; ?s_q_m = (s, Some INVALID_CONFIG)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1795 </font></span>        <font color="#006699"><strong>unfolding</strong></font> SEND_QUEUING_MESSAGE_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1796 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a13 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;isQuePort (the ?port_attr) &and; portCreated s (the ?cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1797 </font></span><font color="#ff00cc">        &and; &not;invalTout time_out &and; msg &le; portMsgSz (the ?port_attr)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1798 </font></span><font color="#ff00cc">        &and; msg &le; 0 &#10230; ?s_q_m = (s, Some INVALID_PARAM)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1799 </font></span>        <font color="#006699"><strong>unfolding</strong></font> SEND_QUEUING_MESSAGE_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1800 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a14 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;isQuePort (the ?port_attr) &and; portCreated s (the ?cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1801 </font></span><font color="#ff00cc">        &and; &not;invalTout time_out &and; msg &le; portMsgSz (the ?port_attr)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1802 </font></span><font color="#ff00cc">        &and; msg &gt; 0 &and; portDirect (the ?port_attr) &ne; SOURCE </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1803 </font></span><font color="#ff00cc">        &#10230;  ?s_q_m = (s, Some INVALID_MODE)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1804 </font></span>        <font color="#006699"><strong>unfolding</strong></font> SEND_QUEUING_MESSAGE_def <font color="#006699"><strong>by</strong></font> auto        
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1805 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a15 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;isQuePort (the ?port_attr) &and; portCreated s (the ?cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1806 </font></span><font color="#ff00cc">        &and; &not;invalTout time_out &and; msg &le; portMsgSz (the ?port_attr)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1807 </font></span><font color="#ff00cc">        &and; msg &gt; 0 &and; portDirect (the ?port_attr) = SOURCE &and; &not; ?port_full</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1808 </font></span><font color="#ff00cc">        &#10230; ?s_q_m = (chQueWrite ?s_insertQMsg (the ?cur_part_id) port_id, Some NO_ERROR)&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1809 </font></span>    <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1810 </font></span>      <font color="#006699"><strong>{</strong></font> <font color="#0099ff"><strong>assume</strong></font> a15_0 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;isQuePort (the ?port_attr) &and; portCreated s (the ?cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1811 </font></span><font color="#ff00cc">        &and; &not;invalTout time_out &and; msg &le; portMsgSz (the ?port_attr)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1812 </font></span><font color="#ff00cc">        &and; msg &gt; 0 &and; portDirect (the ?port_attr) = SOURCE &and; &not; ?port_full&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1813 </font></span>        <font color="#006699"><strong>hence</strong></font> a15_1 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?s_q_m = (chQueWrite ?s_insertQMsg (the ?cur_part_id) port_id, Some NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1814 </font></span>           <font color="#006699"><strong>unfolding</strong></font> SEND_QUEUING_MESSAGE_def isQuePort_def portCreated_def 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1815 </font></span>              invalTout_def portMsgSz_def portDirect_def chQueWrite_def Let_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1816 </font></span>      <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1817 </font></span>      <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1818 </font></span>    <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1819 </font></span>   <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a16 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;isQuePort (the ?port_attr) &and; portCreated s (the ?cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1820 </font></span><font color="#ff00cc">        &and; &not;invalTout time_out &and; msg &le; portMsgSz (the ?port_attr)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1821 </font></span><font color="#ff00cc">        &and; msg &gt; 0 &and; portDirect (the ?port_attr) = SOURCE </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1822 </font></span><font color="#ff00cc">        &and; ?port_full &and; time_out = 0 &#10230; ?s_q_m = (s, Some NOT_AVAILABLE)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1823 </font></span>     <font color="#006699"><strong>unfolding</strong></font> SEND_QUEUING_MESSAGE_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1824 </font></span>   <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a17 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;isQuePort (the ?port_attr) &and; portCreated s (the ?cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1825 </font></span><font color="#ff00cc">        &and; &not;invalTout time_out &and; msg &le; portMsgSz (the ?port_attr)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1826 </font></span><font color="#ff00cc">        &and; msg &gt; 0 &and; portDirect (the ?port_attr) = SOURCE </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1827 </font></span><font color="#ff00cc">        &and; ?port_full &and; time_out &ne; 0 </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1828 </font></span><font color="#ff00cc">        &and; ((the ?cur_proc_id) = HM_PROC_ID &or; getProcUserPLMtx s (the ?cur_part_id, the ?cur_proc_id) &ne; None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1829 </font></span><font color="#ff00cc">        &#10230; ?s_q_m = (s, Some INVALID_MODE)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1830 </font></span>    <font color="#006699"><strong>unfolding</strong></font> SEND_QUEUING_MESSAGE_def isQuePort_def portCreated_def 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1831 </font></span>              invalTout_def portMsgSz_def portDirect_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1832 </font></span>   <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a18 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;isQuePort (the ?port_attr) &and; portCreated s (the ?cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1833 </font></span><font color="#ff00cc">        &and; &not;invalTout time_out &and; msg &le; portMsgSz (the ?port_attr)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1834 </font></span><font color="#ff00cc">        &and; msg &gt; 0 &and; portDirect (the ?port_attr) = SOURCE </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1835 </font></span><font color="#ff00cc">        &and; ?port_full &and; time_out &ne; 0 </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1836 </font></span><font color="#ff00cc">        &and; &not;((the ?cur_proc_id) = HM_PROC_ID &or; getProcUserPLMtx s (the ?cur_part_id, the ?cur_proc_id) &ne; None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1837 </font></span><font color="#ff00cc">        &#10230; ?s_q_m = (schedule_Abs ?s_setCntxt core_id, None) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1838 </font></span><font color="#ff00cc">           &and; ?get_tCounterRsc' &ne; None  &and;  ?get_WaitDiff' &ne; None &and; ?get_Cntxt' &ne; None &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1839 </font></span>   <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1840 </font></span>     <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>assume</strong></font> a18_0 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;isQuePort (the ?port_attr) &and; portCreated s (the ?cur_part_id, port_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1841 </font></span><font color="#ff00cc">        &and; &not;invalTout time_out &and; msg &le; portMsgSz (the ?port_attr)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1842 </font></span><font color="#ff00cc">        &and; msg &gt; 0 &and; portDirect (the ?port_attr) = SOURCE </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1843 </font></span><font color="#ff00cc">        &and; ?port_full &and; time_out &ne; 0 </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1844 </font></span><font color="#ff00cc">        &and; &not;((the ?cur_proc_id) = HM_PROC_ID &or; getProcUserPLMtx s (the ?cur_part_id, the ?cur_proc_id) &ne; None)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1845 </font></span>       <font color="#006699"><strong>hence</strong></font> a18_1 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?s_q_m = (schedule_Abs ?s_setCntxt core_id, None)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1846 </font></span>         <font color="#006699"><strong>unfolding</strong></font> SEND_QUEUING_MESSAGE_def  Let_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1847 </font></span>       <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?get_tCounterRsc' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1848 </font></span>         <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt option.discI fstI getCterRsc_set_NotNone getCterRsc_setWaitDiff getCterRsc_waitAdd_D getCterRsc_rscQPush getCterRsc_setCntxt getCterRsc_schedule_Abs a18_1<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1849 </font></span>       <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?get_Cntxt' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1850 </font></span>         <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> getCtx_sd getCntxt_set_NotNone a18_1<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1851 </font></span>       <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?get_WaitDiff' &ne; None&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1852 </font></span>       <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1853 </font></span>         <font color="#006699"><strong>have</strong></font> a19_0 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getWaitDiff ?s_setWd (the ?cur_part_id, the ?cur_proc_id) &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1854 </font></span>           <font color="#006699"><strong>using</strong></font> getWaitDiff_setWaitDiff_NotNone <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1855 </font></span>         <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getWaitDiff ?s_tcter (the ?cur_part_id, the ?cur_proc_id) &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1856 </font></span>           <font color="#006699"><strong>apply</strong></font> <font color="#000000"><strong>(</strong></font>cases <font color="#ff00cc">&quot;time_out = -1&quot;</font><font color="#000000"><strong>)</strong></font> <font color="#006699"><strong>apply</strong></font> auto<font color="#000000"><strong>[</strong></font>1<font color="#000000"><strong>]</strong></font> <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> getWaitDiff_waitAdd_D<font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1857 </font></span>         <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getWaitDiff ?s_tcter_rscQ (the ?cur_part_id, the ?cur_proc_id) &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1858 </font></span>           <font color="#006699"><strong>using</strong></font> getWaitDiff_rscQPush_Eq <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1859 </font></span>         <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>using</strong></font> getWaitDiff_setCntxt_Eq
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1860 </font></span>           <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> a18_1 fst_conv getWaitDiff_schedule_Abs<font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1861 </font></span>       <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1862 </font></span>       <font color="#006699"><strong>ultimately</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?s_q_m = (schedule_Abs ?s_setCntxt core_id, None) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1863 </font></span><font color="#ff00cc">           &and; ?get_tCounterRsc' &ne; None  &and;  ?get_WaitDiff' &ne; None &and; ?get_Cntxt' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1864 </font></span>         <font color="#006699"><strong>using</strong></font> a18_1 <font color="#006699"><strong>by</strong></font> blast
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1865 </font></span>       <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1866 </font></span>      <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1867 </font></span>   <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1868 </font></span>   <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1869 </font></span>     <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> verit_comp_simplify1<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1870 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1871 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1872 </font></span><font color="#006699"><strong>lemma</strong></font> getCterRsc_stopCter_None <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getCterRsc (stopCterRsc s rsc) rsc = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1873 </font></span>   <font color="#006699"><strong>unfolding</strong></font> getCterRsc_def stopCterRsc_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1874 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1875 </font></span><font color="#006699"><strong>lemma</strong></font> getCterRsc_insertQueMsg_l1 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;(tCounterRsc(rscPendProcs_' (s&#10631;interCom_' := inter_com&#10631;quePortMsg := (quePortMsg inter_com)(pp := Some [msg])&#10632;&#10632;))) pp1 = (tCounterRsc(rscPendProcs_' s) pp1)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1876 </font></span>  <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1877 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1878 </font></span><font color="#006699"><strong>lemma</strong></font> getCterRsc_insertQueMsg_l2 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;(tCounterRsc(rscPendProcs_' (s&#10631;interCom_' := inter_com&#10631;quePortMsg := (quePortMsg inter_com)(pp := Some ((the port_msg_que)@[msg]))&#10632;&#10632;))) pp1 = (tCounterRsc(rscPendProcs_' s) pp1)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1879 </font></span>  <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1880 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1881 </font></span><font color="#006699"><strong>lemma</strong></font> getCterRsc_insertQueMsg <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getCterRsc (insertQueMsg s pp msg) pp1 = getCterRsc s pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1882 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1883 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getCterRsc (insertQueMsg s pp msg) pp1 = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1884 </font></span><font color="#ff00cc">    (tCounterRsc(rscPendProcs_' </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1885 </font></span><font color="#ff00cc">      (let inter_com = (interCom_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1886 </font></span><font color="#ff00cc">           port_msg_que = quePortMsg inter_com pp in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1887 </font></span><font color="#ff00cc">        if port_msg_que = None &or; port_msg_que = Some [] then </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1888 </font></span><font color="#ff00cc">            s&#10631;interCom_' := inter_com&#10631;quePortMsg := (quePortMsg inter_com)(pp := Some [msg])&#10632;&#10632;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1889 </font></span><font color="#ff00cc">        else s&#10631;interCom_' := inter_com&#10631;quePortMsg := (quePortMsg inter_com)(pp := Some ((the port_msg_que)@[msg]))&#10632;&#10632;)) pp1)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1890 </font></span>      <font color="#006699"><strong>unfolding</strong></font> getCterRsc_def insertQueMsg_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1891 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getCterRsc (insertQueMsg s pp msg) pp1 = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1892 </font></span><font color="#ff00cc">      (let inter_com = (interCom_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1893 </font></span><font color="#ff00cc">           port_msg_que = quePortMsg inter_com pp in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1894 </font></span><font color="#ff00cc">        if port_msg_que = None &or; port_msg_que = Some [] then </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1895 </font></span><font color="#ff00cc">            (tCounterRsc(rscPendProcs_' (s&#10631;interCom_' := inter_com&#10631;quePortMsg := (quePortMsg inter_com)(pp := Some [msg])&#10632;&#10632;))) pp1 </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1896 </font></span><font color="#ff00cc">        else (tCounterRsc(rscPendProcs_' (s&#10631;interCom_' := inter_com&#10631;quePortMsg := (quePortMsg inter_com)(pp := Some ((the port_msg_que)@[msg]))&#10632;&#10632;))) pp1)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1897 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1898 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getCterRsc (insertQueMsg s pp msg) pp1 = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1899 </font></span><font color="#ff00cc">      (let inter_com = (interCom_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1900 </font></span><font color="#ff00cc">           port_msg_que = quePortMsg inter_com pp in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1901 </font></span><font color="#ff00cc">        if port_msg_que = None &or; port_msg_que = Some [] then </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1902 </font></span><font color="#ff00cc">            (tCounterRsc(rscPendProcs_' s) pp1)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1903 </font></span><font color="#ff00cc">        else (tCounterRsc(rscPendProcs_' s) pp1))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1904 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>verit<font color="#000000"><strong>)</strong></font> INTER_COM_TYPE.unfold_congs<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font> STATE.unfold_congs<font color="#000000"><strong>(</strong></font>8<font color="#000000"><strong>)</strong></font> getCterRsc_insertQueMsg_l1 getCterRsc_insertQueMsg_l2<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1905 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getCterRsc (insertQueMsg s pp msg) pp1 = (tCounterRsc(rscPendProcs_' s) pp1)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1906 </font></span>    <font color="#006699"><strong>by</strong></font> metis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1907 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getCterRsc (insertQueMsg s pp msg) pp1 = getCterRsc s pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1908 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> getCterRsc_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1909 </font></span>  <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> metis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1910 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1911 </font></span> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1912 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1913 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1914 </font></span><font color="#006699"><strong>lemma</strong></font> SEND_QUEUING_MESSAGE' <font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1915 </font></span>  <font color="#ff00cc">&quot;let </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1916 </font></span><font color="#ff00cc">      s_q_m' = SEND_QUEUING_MESSAGE' s core_id port_id msg;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1917 </font></span><font color="#ff00cc">      cur_part_id = curPartID s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1918 </font></span><font color="#ff00cc">      cur_proc_id = curProcID_Core s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1919 </font></span><font color="#ff00cc">      cntxt = getCntxt s (the cur_part_id, the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1920 </font></span><font color="#ff00cc">      cter = getCterRsc s (the cur_part_id, the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1921 </font></span><font color="#ff00cc">      </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1922 </font></span><font color="#ff00cc">      s_stopCter = stopCterRsc s (the cur_part_id, the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1923 </font></span><font color="#ff00cc">      s_sendMsg = insertQueMsg s_stopCter (the cur_part_id, port_id) msg;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1924 </font></span><font color="#ff00cc">      s_sendMsg_rst = resetCntxt s_sendMsg (the cur_part_id, the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1925 </font></span><font color="#ff00cc">      </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1926 </font></span><font color="#ff00cc">      get_tCounterRsc' = getCterRsc (fst s_q_m') (the cur_part_id, the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1927 </font></span><font color="#ff00cc">      get_Cntxt' = getCntxt (fst r_q_m) (the cur_part_id, the cur_proc_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1928 </font></span><font color="#ff00cc">  in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1929 </font></span><font color="#ff00cc">    if the cter = 0 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1930 </font></span><font color="#ff00cc">      s_q_m' = (resetCntxt s (the cur_part_id, the cur_proc_id), TIMED_OUT)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1931 </font></span><font color="#ff00cc">    else </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1932 </font></span><font color="#ff00cc">      s_q_m' = (chQueWrite s_sendMsg_rst (the cur_part_id) port_id, NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1933 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1934 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_q_m' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;SEND_QUEUING_MESSAGE' s core_id port_id msg&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1935 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curPartID s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1936 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_proc_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curProcID_Core s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1937 </font></span>  <font color="#006699"><strong>let</strong></font> ?cntxt <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getCntxt s (the ?cur_part_id, the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1938 </font></span>  <font color="#006699"><strong>let</strong></font> ?cter <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getCterRsc s (the ?cur_part_id, the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1939 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_stopCter <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;stopCterRsc s (the ?cur_part_id, the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1940 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_sendMsg <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;insertQueMsg ?s_stopCter (the ?cur_part_id, port_id) msg&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1941 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_sendMsg_rst <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;resetCntxt ?s_sendMsg (the ?cur_part_id, the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1942 </font></span>      
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1943 </font></span>  <font color="#006699"><strong>let</strong></font> ?get_tCounterRsc' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getCterRsc (fst ?s_q_m') (the ?cur_part_id, the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1944 </font></span>  <font color="#006699"><strong>let</strong></font> ?get_Cntxt' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getCntxt (fst r_q_m) (the ?cur_part_id, the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1945 </font></span>  <font color="#006699"><strong>have</strong></font> a10 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;the ?cter = 0 &#10230; ?s_q_m' = (resetCntxt s (the ?cur_part_id, the ?cur_proc_id), TIMED_OUT)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1946 </font></span>    <font color="#006699"><strong>unfolding</strong></font> SEND_QUEUING_MESSAGE'_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1947 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a11 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;the ?cter &ne; 0 &#10230; ?s_q_m' = (chQueWrite ?s_sendMsg_rst (the ?cur_part_id) port_id, NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1948 </font></span>    <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1949 </font></span>      <font color="#006699"><strong>{</strong></font> <font color="#0099ff"><strong>assume</strong></font> a11_0 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;the ?cter &ne; 0&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1950 </font></span>        <font color="#006699"><strong>hence</strong></font> a11_1 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?s_q_m' = (chQueWrite ?s_sendMsg_rst (the ?cur_part_id) port_id, NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1951 </font></span>          <font color="#006699"><strong>unfolding</strong></font> SEND_QUEUING_MESSAGE'_def Let_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1952 </font></span>      <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1953 </font></span>      <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1954 </font></span>    <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1955 </font></span>    <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1956 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1957 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1958 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1959 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1960 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1961 </font></span><font color="#009966"><strong>end</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1962 </font></span>
</font></pre>
</body>
</html>
