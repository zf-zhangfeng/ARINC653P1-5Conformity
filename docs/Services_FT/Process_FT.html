<html>
<head>
<title>Process_FT.thy</title>
</head>
<body bgcolor="#ffffff">



<pre><font color="#333333"><span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">   1 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">   2 </font></span><font color="#006699"><strong>section</strong></font><font color="#6600cc">&lsaquo;</font><font color="#6600cc">C</font><font color="#6600cc">o</font><font color="#6600cc">n</font><font color="#6600cc">f</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">m</font><font color="#6600cc">i</font><font color="#6600cc">t</font><font color="#6600cc">y</font><font color="#6600cc"> </font><font color="#6600cc">P</font><font color="#6600cc">r</font><font color="#6600cc">o</font><font color="#6600cc">o</font><font color="#6600cc">f</font><font color="#6600cc"> </font><font color="#6600cc">o</font><font color="#6600cc">f</font><font color="#6600cc"> </font><font color="#6600cc">P</font><font color="#6600cc">r</font><font color="#6600cc">o</font><font color="#6600cc">c</font><font color="#6600cc">e</font><font color="#6600cc">s</font><font color="#6600cc">s</font><font color="#6600cc"> </font><font color="#6600cc">M</font><font color="#6600cc">a</font><font color="#6600cc">n</font><font color="#6600cc">a</font><font color="#6600cc">g</font><font color="#6600cc">e</font><font color="#6600cc">m</font><font color="#6600cc">e</font><font color="#6600cc">n</font><font color="#6600cc">t</font><font color="#6600cc">&rsaquo;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">   3 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">   4 </font></span><font color="#006699"><strong>theory</strong></font> Process_FT
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">   5 </font></span>  <font color="#009966"><strong>imports</strong></font> BasicLems
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">   6 </font></span><font color="#009966"><strong>begin</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">   7 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">   8 </font></span><font color="#006699"><strong>lemma</strong></font> getPrio_sd<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getPriority (schedule_Abs s core_id) (part_id, proc_id) =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">   9 </font></span><font color="#ff00cc">      getPriority s (part_id, proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  10 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getPriority_def schedule_Abs_def
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  11 </font></span>  <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> PROCS_STATE_TYPE.select_convs<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font> PROCS_STATE_TYPE.surjective PROCS_STATE_TYPE.update_convs<font color="#000000"><strong>(</strong></font>2<font color="#000000"><strong>)</strong></font> StaProc_sched.select_convs<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> StaProc_sched.surjective StaProc_sched.update_convs<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>  
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  12 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  13 </font></span><font color="#006699"><strong>lemma</strong></font> getCtx_sd<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getCntxt (schedule_Abs s core_id) pp =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  14 </font></span><font color="#ff00cc">      getCntxt s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  15 </font></span>  <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  16 </font></span>    <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getCntxt (schedule_Abs s core_id) pp = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  17 </font></span><font color="#ff00cc">        procCntxt(rscPendProcs_'  (let t = timer_' s; newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  18 </font></span><font color="#ff00cc">      f_readyQ = readyQue (partitions_' s); newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  19 </font></span><font color="#ff00cc">      f_procSta = procSta (procs_' s); f_curProc = curProc (partitions_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  20 </font></span><font color="#ff00cc">      sched_proc_newPart = schedProc_Abs f_readyQ newPartID f_procSta f_curProc in </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  21 </font></span><font color="#ff00cc">  s&#10631;partitions_' := (partitions_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  22 </font></span><font color="#ff00cc">      &#10631;curPart := (curPart(partitions_' s))(core_id := Some newPartID),</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  23 </font></span><font color="#ff00cc">      curProc := (curProc (partitions_' s))(newPartID := Some (snd(snd sched_proc_newPart))),</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  24 </font></span><font color="#ff00cc">      readyQue := fst sched_proc_newPart&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  25 </font></span><font color="#ff00cc">    procs_' := (procs_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  26 </font></span><font color="#ff00cc">      &#10631;procSta := setProcSta' (fst (snd sched_proc_newPart)) (newPartID, (snd(snd sched_proc_newPart))) RUNNING&#10632;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  27 </font></span><font color="#ff00cc">    &#10632;)) pp&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  28 </font></span>      <font color="#006699"><strong>unfolding</strong></font> schedule_Abs_def getCntxt_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  29 </font></span>     <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getCntxt (schedule_Abs s core_id) pp = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  30 </font></span><font color="#ff00cc">        procCntxt(  (let t = timer_' s; newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  31 </font></span><font color="#ff00cc">      f_readyQ = readyQue (partitions_' s); newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  32 </font></span><font color="#ff00cc">      f_procSta = procSta (procs_' s); f_curProc = curProc (partitions_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  33 </font></span><font color="#ff00cc">      sched_proc_newPart = schedProc_Abs f_readyQ newPartID f_procSta f_curProc in </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  34 </font></span><font color="#ff00cc">  rscPendProcs_'(s&#10631;partitions_' := (partitions_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  35 </font></span><font color="#ff00cc">      &#10631;curPart := (curPart(partitions_' s))(core_id := Some newPartID),</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  36 </font></span><font color="#ff00cc">      curProc := (curProc (partitions_' s))(newPartID := Some (snd(snd sched_proc_newPart))),</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  37 </font></span><font color="#ff00cc">      readyQue := fst sched_proc_newPart&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  38 </font></span><font color="#ff00cc">    procs_' := (procs_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  39 </font></span><font color="#ff00cc">      &#10631;procSta := setProcSta' (fst (snd sched_proc_newPart)) (newPartID, (snd(snd sched_proc_newPart))) RUNNING&#10632;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  40 </font></span><font color="#ff00cc">    &#10632;))) pp&quot;</font> <font color="#006699"><strong>by</strong></font> metis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  41 </font></span>     <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getCntxt (schedule_Abs s core_id) pp = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  42 </font></span><font color="#ff00cc">        procCntxt(rscPendProcs_' s) pp&quot;</font>  <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  43 </font></span>     <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>unfolding</strong></font> getCntxt_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  44 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  45 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  46 </font></span><font color="#006699"><strong>lemma</strong></font> getddl_sd<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcDDL (schedule_Abs s core_id) (part_id, proc_id) =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  47 </font></span><font color="#ff00cc">      getProcDDL s (part_id, proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  48 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getProcDDL_def schedule_Abs_def
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  49 </font></span>  <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> PROCS_STATE_TYPE.select_convs<font color="#000000"><strong>(</strong></font>4<font color="#000000"><strong>)</strong></font> PROCS_STATE_TYPE.surjective PROCS_STATE_TYPE.update_convs<font color="#000000"><strong>(</strong></font>2<font color="#000000"><strong>)</strong></font> StaProc.surjective StaProc_sched.select_convs<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> StaProc_sched.update_convs<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  50 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  51 </font></span><font color="#cc0000">(*Priorty*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  52 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  53 </font></span><font color="#006699"><strong>lemma</strong></font> set_NotNone<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getPriority (setPriority s pp prio) pp = Some prio&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  54 </font></span>  <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  55 </font></span>    <font color="#006699"><strong>let</strong></font> ?s_set <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setPriority s pp prio&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  56 </font></span>    <font color="#006699"><strong>have</strong></font> a10<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?s_set = s&#10631;procs_' := (procs_' s)&#10631;curPriority := (curPriority (procs_' s))(pp := Some prio)&#10632;&#10632;&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  57 </font></span>        <font color="#006699"><strong>unfolding</strong></font> setPriority_def <font color="#006699"><strong>by</strong></font> metis  
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  58 </font></span>    <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getPriority ?s_set pp = curPriority(procs_' ?s_set)pp&quot;</font> <font color="#006699"><strong>unfolding</strong></font> getPriority_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  59 </font></span>    <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>using</strong></font> a10 <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  60 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  61 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  62 </font></span><font color="#006699"><strong>lemma</strong></font> getPrio_rstCtx<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getPriority (resetCntxt s pp) (pp) =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  63 </font></span><font color="#ff00cc">      getPriority s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  64 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getPriority_def resetCntxt_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  65 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  66 </font></span><font color="#006699"><strong>lemma</strong></font> getPrio_readyDel_s_D<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getPriority (readyDel_s_D s pt p) pp =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  67 </font></span><font color="#ff00cc">      getPriority s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  68 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getPriority_def readyDel_s_D_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  69 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  70 </font></span><font color="#006699"><strong>lemma</strong></font> getPrio_waitDel_D<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getPriority (waitDel_D s pp) pp =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  71 </font></span><font color="#ff00cc">      getPriority s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  72 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getPriority_def waitDel_D_def
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  73 </font></span>  <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> StaProc.simps<font color="#000000"><strong>(</strong></font>6<font color="#000000"><strong>)</strong></font> StaProc.simps<font color="#000000"><strong>(</strong></font>7<font color="#000000"><strong>)</strong></font> StaProc.surjective StaProc_sched.simps<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  74 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  75 </font></span><font color="#006699"><strong>lemma</strong></font> getPrio_Alone<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getPriority (procAlone s pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  76 </font></span><font color="#ff00cc">      getPriority s pp1&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  77 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  78 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getPriority (procAlone s pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  79 </font></span><font color="#ff00cc">      curPriority(procs_' (let proc_id_sta = procSta (procs_' s) pp in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  80 </font></span><font color="#ff00cc">  case proc_id_sta of </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  81 </font></span><font color="#ff00cc">      Some READY &rArr; readyDel_s_D s (fst pp) (snd pp) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  82 </font></span><font color="#ff00cc">      Some WAITING &rArr; if isInWaitQ s pp then waitDel_D s pp</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  83 </font></span><font color="#ff00cc">                      else s |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  84 </font></span><font color="#ff00cc">      _ &rArr; s) )pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  85 </font></span>    <font color="#006699"><strong>unfolding</strong></font> getPriority_def procAlone_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  86 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getPriority (procAlone s pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  87 </font></span><font color="#ff00cc">      curPriority(procs_' </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  88 </font></span><font color="#ff00cc">      (let proc_id_sta = procSta (procs_' s) pp in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  89 </font></span><font color="#ff00cc">  case proc_id_sta of </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  90 </font></span><font color="#ff00cc">      Some READY &rArr; (let ll = the ((readyQue(partitions_' s)) (fst pp)); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  91 </font></span><font color="#ff00cc">      proc_priority = the((curPriority(procs_' s)) ((fst pp), (snd pp))) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  92 </font></span><font color="#ff00cc">  s&#10631;partitions_' := (partitions_' s)&#10631;readyQue := readyDel_D (readyQue(partitions_' s)) (fst pp) proc_priority (snd pp)&#10632;&#10632;)    |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  93 </font></span><font color="#ff00cc">      Some WAITING &rArr; if isInWaitQ s pp then (let cid = the (procBlngCore pp); vpwl = waitQue (cores_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  94 </font></span><font color="#ff00cc">    pd = waitDiff(rscPendProcs_' s); new_vp_pd = waitQ_SuspQDel vpwl pd cid pp  in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  95 </font></span><font color="#ff00cc">  s&#10631;cores_' := (cores_' s)&#10631;waitQue := fst new_vp_pd&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  96 </font></span><font color="#ff00cc">    rscPendProcs_' := (rscPendProcs_' s)&#10631;waitDiff := snd new_vp_pd&#10632;&#10632;)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  97 </font></span><font color="#ff00cc">                      else s |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  98 </font></span><font color="#ff00cc">      _ &rArr; s) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  99 </font></span><font color="#ff00cc">      )pp1&quot;</font> <font color="#006699"><strong>unfolding</strong></font> readyDel_s_D_def waitDel_D_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 100 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getPriority (procAlone s pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 101 </font></span><font color="#ff00cc">     </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 102 </font></span><font color="#ff00cc">      (let proc_id_sta = procSta (procs_' s) pp in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 103 </font></span><font color="#ff00cc">  case proc_id_sta of </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 104 </font></span><font color="#ff00cc">      Some READY &rArr; curPriority(procs_' s)   |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 105 </font></span><font color="#ff00cc">      Some WAITING &rArr; if isInWaitQ s pp then  curPriority(procs_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 106 </font></span><font color="#ff00cc">                      else  curPriority(procs_' s) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 107 </font></span><font color="#ff00cc">      _ &rArr;  curPriority(procs_' s)) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 108 </font></span><font color="#ff00cc">      pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 109 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>verit<font color="#000000"><strong>,</strong></font> best<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.exhaust PROC_STATE_TYPE.simps<font color="#000000"><strong>(</strong></font>21<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.simps<font color="#000000"><strong>(</strong></font>22<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.simps<font color="#000000"><strong>(</strong></font>23<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.simps<font color="#000000"><strong>(</strong></font>24<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.simps<font color="#000000"><strong>(</strong></font>25<font color="#000000"><strong>)</strong></font> StaProc.simps<font color="#000000"><strong>(</strong></font>6<font color="#000000"><strong>)</strong></font> StaProc.simps<font color="#000000"><strong>(</strong></font>7<font color="#000000"><strong>)</strong></font> StaProc.surjective StaProc_sched.simps<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> getPrio_readyDel_s_D getPriority_def option.case_eq_if procAlone_def<font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 110 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getPriority (procAlone s pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 111 </font></span><font color="#ff00cc">      curPriority(procs_' s)pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 112 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.exhaust PROC_STATE_TYPE.simps<font color="#000000"><strong>(</strong></font>21<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.simps<font color="#000000"><strong>(</strong></font>22<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.simps<font color="#000000"><strong>(</strong></font>23<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.simps<font color="#000000"><strong>(</strong></font>24<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.simps<font color="#000000"><strong>(</strong></font>25<font color="#000000"><strong>)</strong></font> option.case_eq_if<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 113 </font></span>  <font color="#0099ff"><strong>thus</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 114 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> getPriority_def<font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 115 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 116 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 117 </font></span><font color="#006699"><strong>lemma</strong></font> getPrio_rdyAdd<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getPriority (readyAdd s (part_id0, proc_id0)) (part_id1, proc_id1) =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 118 </font></span><font color="#ff00cc">      getPriority s (part_id1, proc_id1)&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 119 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 120 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getPriority (readyAdd s (part_id0, proc_id0)) (part_id1, proc_id1) =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 121 </font></span><font color="#ff00cc">      curPriority(procs_' (let f_readyQue = readyQue(partitions_' s); part_id = fst (part_id0, proc_id0); proc_id = snd (part_id0, proc_id0);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 122 </font></span><font color="#ff00cc">      prio = the(getPriority s (part_id0, proc_id0)); f_readyQue' = readyAddTail_D f_readyQue part_id prio proc_id in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 123 </font></span><font color="#ff00cc">  s&#10631;partitions_' := (partitions_' s)&#10631;readyQue := f_readyQue'&#10632;&#10632;))(part_id1, proc_id1)&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 124 </font></span>    <font color="#006699"><strong>unfolding</strong></font> getPriority_def readyAdd_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 125 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getPriority (readyAdd s (part_id0, proc_id0)) (part_id1, proc_id1) =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 126 </font></span><font color="#ff00cc">      curPriority( let f_readyQue = readyQue(partitions_' s); part_id = fst (part_id0, proc_id0); proc_id = snd (part_id0, proc_id0);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 127 </font></span><font color="#ff00cc">      prio = the(getPriority s (part_id0, proc_id0)); f_readyQue' = readyAddTail_D f_readyQue part_id prio proc_id in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 128 </font></span><font color="#ff00cc">  procs_' (s&#10631;partitions_' := (partitions_' s)&#10631;readyQue := f_readyQue'&#10632;&#10632;)) (part_id1, proc_id1)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 129 </font></span>    <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 130 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getPriority (readyAdd s (part_id0, proc_id0)) (part_id1, proc_id1) =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 131 </font></span><font color="#ff00cc">        curPriority(procs_' s)(part_id1, proc_id1)&quot;</font> <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 132 </font></span>   <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>unfolding</strong></font> getPriority_def  <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 133 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 134 </font></span>  
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 135 </font></span><font color="#006699"><strong>lemma</strong></font> getPrio_setSta<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getPriority (setProcSta s (part_id0, proc_id0) sta) (part_id1, proc_id1) =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 136 </font></span><font color="#ff00cc">      getPriority s (part_id1, proc_id1)&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 137 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 138 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getPriority (setProcSta s (part_id0, proc_id0) sta) (part_id1, proc_id1) =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 139 </font></span><font color="#ff00cc">    curPriority(procs_' (s&#10631;procs_' := (procs_' s) &#10631;procSta := (procSta (procs_' s))((part_id0, proc_id0) := Some sta)&#10632;&#10632;))(part_id1, proc_id1)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 140 </font></span>    <font color="#006699"><strong>unfolding</strong></font> getPriority_def setProcSta_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 141 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getPriority (setProcSta s (part_id0, proc_id0) sta) (part_id1, proc_id1) =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 142 </font></span><font color="#ff00cc">        curPriority(procs_' s)(part_id1, proc_id1)&quot;</font> <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 143 </font></span>  <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>unfolding</strong></font> getPriority_def  <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 144 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 145 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 146 </font></span><font color="#006699"><strong>lemma</strong></font> getPrio_procRdy<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getPriority (procReady s (part_id0, proc_id0)) (part_id1, proc_id1) =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 147 </font></span><font color="#ff00cc">      getPriority s (part_id1, proc_id1)&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 148 </font></span>        <font color="#006699"><strong>unfolding</strong></font> procReady_def getPriority_def 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 149 </font></span>        <font color="#006699"><strong>using</strong></font> getPrio_Alone getPrio_rdyAdd getPrio_setSta getPriority_def <font color="#006699"><strong>by</strong></font> metis   
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 150 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 151 </font></span><font color="#006699"><strong>lemma</strong></font> getPrio_petDdl<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getPriority (setProcDDL s (part_id0, proc_id0) t) (part_id1, proc_id1) =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 152 </font></span><font color="#ff00cc">      getPriority s (part_id1, proc_id1)&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 153 </font></span>  <font color="#006699"><strong>unfolding</strong></font> setProcDDL_def getPriority_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 154 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 155 </font></span><font color="#006699"><strong>lemma</strong></font> getPrio_setrls<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getPriority (setRlsPoint s (part_id0, proc_id0) t) (part_id1, proc_id1) =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 156 </font></span><font color="#ff00cc">      getPriority s (part_id1, proc_id1)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 157 </font></span>  <font color="#006699"><strong>unfolding</strong></font> setRlsPoint_def getPriority_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 158 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 159 </font></span><font color="#006699"><strong>lemma</strong></font> set_restorePrio_NotNone<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getPriority (restoreCurPrioUPLMtx s (cur_part_id,plmtx) (cur_part_id,proc_id)) (cur_part_id,proc_id) = Some (the(getCurPrioUPLMtx s (cur_part_id,plmtx)))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 160 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 161 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getPriority (restoreCurPrioUPLMtx s (cur_part_id,plmtx) (cur_part_id,proc_id)) (cur_part_id,proc_id) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 162 </font></span><font color="#ff00cc">      =curPriority(procs_' </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 163 </font></span><font color="#ff00cc">      (setPriority s (cur_part_id,proc_id) (the(mtxRtnPrio(user_pl_Mtx_' s)(cur_part_id,plmtx))))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 164 </font></span><font color="#ff00cc">      )(cur_part_id,proc_id) &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 165 </font></span>    <font color="#006699"><strong>unfolding</strong></font> getPriority_def restoreCurPrioUPLMtx_def getCurPrioUPLMtx_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 166 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getPriority (restoreCurPrioUPLMtx s (cur_part_id,plmtx) (cur_part_id,proc_id)) (cur_part_id,proc_id) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 167 </font></span><font color="#ff00cc">      =curPriority(procs_' </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 168 </font></span><font color="#ff00cc">      ( (let proc_sta = procs_' s in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 169 </font></span><font color="#ff00cc">  s&#10631;procs_' := proc_sta&#10631;curPriority := (curPriority proc_sta)((cur_part_id,proc_id) := Some  (the(mtxRtnPrio(user_pl_Mtx_' s)(cur_part_id,plmtx))))&#10632;&#10632;)  )</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 170 </font></span><font color="#ff00cc">      )(cur_part_id,proc_id) &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 171 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis setPriority_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 172 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getPriority (restoreCurPrioUPLMtx s (cur_part_id,plmtx) (cur_part_id,proc_id)) (cur_part_id,proc_id) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 173 </font></span><font color="#ff00cc">      =curPriority(procs_' </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 174 </font></span><font color="#ff00cc">      (s&#10631;procs_' := (procs_' s)&#10631;curPriority := (curPriority (procs_' s))((cur_part_id,proc_id) := Some  (the(mtxRtnPrio(user_pl_Mtx_' s)(cur_part_id,plmtx))))&#10632;&#10632;)  </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 175 </font></span><font color="#ff00cc">      )(cur_part_id,proc_id) &quot;</font> <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 176 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getPriority (restoreCurPrioUPLMtx s (cur_part_id,plmtx) (cur_part_id,proc_id)) (cur_part_id,proc_id) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 177 </font></span><font color="#ff00cc">      = Some  (the(mtxRtnPrio(user_pl_Mtx_' s)(cur_part_id,plmtx)))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 178 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>full_types<font color="#000000"><strong>)</strong></font> restoreCurPrioUPLMtx_def set_NotNone<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 179 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getCurPrioUPLMtx s (cur_part_id,plmtx) =   ((mtxRtnPrio(user_pl_Mtx_' s)(cur_part_id,plmtx)))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 180 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis getCurPrioUPLMtx_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 181 </font></span>  <font color="#0099ff"><strong>thus</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 182 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> hide_lams<font color="#000000"><strong>)</strong></font> <font color="#6600cc">&lsaquo;</font><font color="#6600cc">g</font><font color="#6600cc">e</font><font color="#6600cc">t</font><font color="#6600cc">P</font><font color="#6600cc">r</font><font color="#6600cc">i</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">i</font><font color="#6600cc">t</font><font color="#6600cc">y</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc">s</font><font color="#6600cc">t</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc">C</font><font color="#6600cc">u</font><font color="#6600cc">r</font><font color="#6600cc">P</font><font color="#6600cc">r</font><font color="#6600cc">i</font><font color="#6600cc">o</font><font color="#6600cc">U</font><font color="#6600cc">P</font><font color="#6600cc">L</font><font color="#6600cc">M</font><font color="#6600cc">t</font><font color="#6600cc">x</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">c</font><font color="#6600cc">u</font><font color="#6600cc">r</font><font color="#6600cc">_</font><font color="#6600cc">p</font><font color="#6600cc">a</font><font color="#6600cc">r</font><font color="#6600cc">t</font><font color="#6600cc">_</font><font color="#6600cc">i</font><font color="#6600cc">d</font><font color="#6600cc">,</font><font color="#6600cc"> </font><font color="#6600cc">p</font><font color="#6600cc">l</font><font color="#6600cc">m</font><font color="#6600cc">t</font><font color="#6600cc">x</font><font color="#6600cc">)</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">c</font><font color="#6600cc">u</font><font color="#6600cc">r</font><font color="#6600cc">_</font><font color="#6600cc">p</font><font color="#6600cc">a</font><font color="#6600cc">r</font><font color="#6600cc">t</font><font color="#6600cc">_</font><font color="#6600cc">i</font><font color="#6600cc">d</font><font color="#6600cc">,</font><font color="#6600cc"> </font><font color="#6600cc">p</font><font color="#6600cc">r</font><font color="#6600cc">o</font><font color="#6600cc">c</font><font color="#6600cc">_</font><font color="#6600cc">i</font><font color="#6600cc">d</font><font color="#6600cc">)</font><font color="#6600cc">)</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">c</font><font color="#6600cc">u</font><font color="#6600cc">r</font><font color="#6600cc">_</font><font color="#6600cc">p</font><font color="#6600cc">a</font><font color="#6600cc">r</font><font color="#6600cc">t</font><font color="#6600cc">_</font><font color="#6600cc">i</font><font color="#6600cc">d</font><font color="#6600cc">,</font><font color="#6600cc"> </font><font color="#6600cc">p</font><font color="#6600cc">r</font><font color="#6600cc">o</font><font color="#6600cc">c</font><font color="#6600cc">_</font><font color="#6600cc">i</font><font color="#6600cc">d</font><font color="#6600cc">)</font><font color="#6600cc"> </font><font color="#6600cc">=</font><font color="#6600cc"> </font><font color="#6600cc">S</font><font color="#6600cc">o</font><font color="#6600cc">m</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">t</font><font color="#6600cc">h</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">m</font><font color="#6600cc">t</font><font color="#6600cc">x</font><font color="#6600cc">R</font><font color="#6600cc">t</font><font color="#6600cc">n</font><font color="#6600cc">P</font><font color="#6600cc">r</font><font color="#6600cc">i</font><font color="#6600cc">o</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">u</font><font color="#6600cc">s</font><font color="#6600cc">e</font><font color="#6600cc">r</font><font color="#6600cc">_</font><font color="#6600cc">p</font><font color="#6600cc">l</font><font color="#6600cc">_</font><font color="#6600cc">M</font><font color="#6600cc">t</font><font color="#6600cc">x</font><font color="#6600cc">_</font><font color="#6600cc">'</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc">)</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">c</font><font color="#6600cc">u</font><font color="#6600cc">r</font><font color="#6600cc">_</font><font color="#6600cc">p</font><font color="#6600cc">a</font><font color="#6600cc">r</font><font color="#6600cc">t</font><font color="#6600cc">_</font><font color="#6600cc">i</font><font color="#6600cc">d</font><font color="#6600cc">,</font><font color="#6600cc"> </font><font color="#6600cc">p</font><font color="#6600cc">l</font><font color="#6600cc">m</font><font color="#6600cc">t</font><font color="#6600cc">x</font><font color="#6600cc">)</font><font color="#6600cc">)</font><font color="#6600cc">)</font><font color="#6600cc">&rsaquo;</font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 183 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 184 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 185 </font></span><font color="#006699"><strong>lemma</strong></font> getPrio_rstDeadline<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getPriority (rstDeadline s (part_id0, proc_id0)) (part_id1, proc_id1) =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 186 </font></span><font color="#ff00cc">      getPriority s (part_id1, proc_id1)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 187 </font></span>  <font color="#006699"><strong>unfolding</strong></font> rstDeadline_def getPriority_def <font color="#006699"><strong>by</strong></font> auto 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 188 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 189 </font></span><font color="#006699"><strong>lemma</strong></font> getPrio_rstPriority_None<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getPriority (rstPriority s (part_id0, proc_id0)) (part_id0, proc_id0) = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 190 </font></span>  <font color="#006699"><strong>unfolding</strong></font> rstPriority_def getPriority_def Let_def <font color="#006699"><strong>by</strong></font> auto 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 191 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 192 </font></span><font color="#006699"><strong>lemma</strong></font> getPrio_rstHMCalled<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getPriority (rstHMCalled s part_id0) (part_id1, proc_id1) =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 193 </font></span><font color="#ff00cc">      getPriority s (part_id1, proc_id1)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 194 </font></span>  <font color="#006699"><strong>unfolding</strong></font> rstHMCalled_def getPriority_def <font color="#006699"><strong>by</strong></font> auto 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 195 </font></span>    
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 196 </font></span><font color="#006699"><strong>lemma</strong></font> getPrio_setDelayT<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getPriority (setDelayT s (part_id0, proc_id0) t) (part_id1, proc_id1) =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 197 </font></span><font color="#ff00cc">      getPriority s (part_id1, proc_id1)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 198 </font></span>  <font color="#006699"><strong>unfolding</strong></font> setDelayT_def getPriority_def <font color="#006699"><strong>by</strong></font> auto 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 199 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 200 </font></span><font color="#006699"><strong>lemma</strong></font> getPrio_setWaitDiff<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getPriority (setWaitDiff s (part_id0, proc_id0) t) (part_id1, proc_id1) =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 201 </font></span><font color="#ff00cc">      getPriority s (part_id1, proc_id1)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 202 </font></span>  <font color="#006699"><strong>unfolding</strong></font> setWaitDiff_def getPriority_def <font color="#006699"><strong>by</strong></font> auto 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 203 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 204 </font></span><font color="#006699"><strong>lemma</strong></font> getPrio_waitAdd_D<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getPriority (waitAdd_D s pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 205 </font></span><font color="#ff00cc">      getPriority s pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 206 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 207 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getPriority (waitAdd_D s pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 208 </font></span><font color="#ff00cc">        curPriority(procs_' </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 209 </font></span><font color="#ff00cc">        (let cid = the (procBlngCore pp); tq = waitQue(cores_' s); wait_diff = waitDiff(rscPendProcs_' s);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 210 </font></span><font color="#ff00cc">      tq_wd = waitQ_SuspQAdd tq wait_diff cid pp  in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 211 </font></span><font color="#ff00cc">  if the(wait_diff pp) &gt; 0 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 212 </font></span><font color="#ff00cc">    s&#10631;cores_' := (cores_' s)&#10631;waitQue := fst tq_wd&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 213 </font></span><font color="#ff00cc">      rscPendProcs_' := (rscPendProcs_' s)&#10631;waitDiff := snd tq_wd&#10632;&#10632;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 214 </font></span><font color="#ff00cc">  else s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 215 </font></span><font color="#ff00cc">  )pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 216 </font></span>    <font color="#006699"><strong>unfolding</strong></font> getPriority_def waitAdd_D_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 217 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getPriority (waitAdd_D s pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 218 </font></span><font color="#ff00cc">       (let cid = the (procBlngCore pp); tq = waitQue(cores_' s); wait_diff = waitDiff(rscPendProcs_' s);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 219 </font></span><font color="#ff00cc">      tq_wd = waitQ_SuspQAdd tq wait_diff cid pp  in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 220 </font></span><font color="#ff00cc">     if the(wait_diff pp) &gt; 0 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 221 </font></span><font color="#ff00cc">      curPriority(procs_' (s&#10631;cores_' := (cores_' s)&#10631;waitQue := fst tq_wd&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 222 </font></span><font color="#ff00cc">       rscPendProcs_' := (rscPendProcs_' s)&#10631;waitDiff := snd tq_wd&#10632;&#10632;))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 223 </font></span><font color="#ff00cc">    else curPriority(procs_' s))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 224 </font></span><font color="#ff00cc">   pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 225 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 226 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getPriority (waitAdd_D s pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 227 </font></span><font color="#ff00cc">       curPriority(procs_' s)pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 228 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> StaProc.simps<font color="#000000"><strong>(</strong></font>6<font color="#000000"><strong>)</strong></font> StaProc.simps<font color="#000000"><strong>(</strong></font>7<font color="#000000"><strong>)</strong></font> StaProc.surjective StaProc_sched.simps<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 229 </font></span>  <font color="#0099ff"><strong>thus</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 230 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis getPriority_def<font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 231 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 232 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 233 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 234 </font></span><font color="#cc0000">(*cntx*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 235 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 236 </font></span><font color="#006699"><strong>lemma</strong></font> getCtx_rst_None<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getCntxt (resetCntxt s pp) pp = None&quot;</font> <font color="#006699"><strong>unfolding</strong></font> getCntxt_def resetCntxt_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 237 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 238 </font></span><font color="#006699"><strong>lemma</strong></font> setCtx_Not_None<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getCntxt (setCntxt s pp c) pp &ne; None&quot;</font> <font color="#006699"><strong>unfolding</strong></font> getCntxt_def setCntxt_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 239 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 240 </font></span><font color="#006699"><strong>lemma</strong></font> getCtx_rdyAdd<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getCntxt (readyAdd s (part_id0, proc_id0)) (part_id1, proc_id1) =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 241 </font></span><font color="#ff00cc">      getCntxt s (part_id1, proc_id1)&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 242 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 243 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getCntxt (readyAdd s (part_id0, proc_id0)) (part_id1, proc_id1) =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 244 </font></span><font color="#ff00cc">      procCntxt(rscPendProcs_' (let f_readyQue = readyQue(partitions_' s); part_id = fst (part_id0, proc_id0); proc_id = snd (part_id0, proc_id0);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 245 </font></span><font color="#ff00cc">      prio = the(getPriority s (part_id0, proc_id0)); f_readyQue' = readyAddTail_D f_readyQue part_id prio proc_id in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 246 </font></span><font color="#ff00cc">  s&#10631;partitions_' := (partitions_' s)&#10631;readyQue := f_readyQue'&#10632;&#10632;))(part_id1, proc_id1)&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 247 </font></span>    <font color="#006699"><strong>unfolding</strong></font> getCntxt_def readyAdd_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 248 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getCntxt (readyAdd s (part_id0, proc_id0)) (part_id1, proc_id1) =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 249 </font></span><font color="#ff00cc">      procCntxt( let f_readyQue = readyQue(partitions_' s); part_id = fst (part_id0, proc_id0); proc_id = snd (part_id0, proc_id0);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 250 </font></span><font color="#ff00cc">      prio = the(getPriority s (part_id0, proc_id0)); f_readyQue' = readyAddTail_D f_readyQue part_id prio proc_id in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 251 </font></span><font color="#ff00cc">  rscPendProcs_' (s&#10631;partitions_' := (partitions_' s)&#10631;readyQue := f_readyQue'&#10632;&#10632;)) (part_id1, proc_id1)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 252 </font></span>    <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 253 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getCntxt (readyAdd s (part_id0, proc_id0)) (part_id1, proc_id1) =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 254 </font></span><font color="#ff00cc">        procCntxt(rscPendProcs_' s)(part_id1, proc_id1)&quot;</font> <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 255 </font></span>   <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>unfolding</strong></font> getCntxt_def  <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 256 </font></span> <font color="#006699"><strong>qed</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 257 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 258 </font></span><font color="#006699"><strong>lemma</strong></font> getCtx_setSta<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getCntxt (setProcSta s (part_id0, proc_id0) sta) (part_id1, proc_id1) =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 259 </font></span><font color="#ff00cc">      getCntxt s (part_id1, proc_id1)&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 260 </font></span>  <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 261 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getCntxt (setProcSta s (part_id0, proc_id0) sta) (part_id1, proc_id1) =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 262 </font></span><font color="#ff00cc">    procCntxt(rscPendProcs_' (s&#10631;procs_' := (procs_' s) &#10631;procSta := (procSta (procs_' s))((part_id0, proc_id0) := Some sta)&#10632;&#10632;))(part_id1, proc_id1)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 263 </font></span>    <font color="#006699"><strong>unfolding</strong></font> getCntxt_def setProcSta_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 264 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getCntxt (setProcSta s (part_id0, proc_id0) sta) (part_id1, proc_id1) =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 265 </font></span><font color="#ff00cc">        procCntxt(rscPendProcs_' s)(part_id1, proc_id1)&quot;</font> <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 266 </font></span>  <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>unfolding</strong></font> getCntxt_def  <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 267 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 268 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 269 </font></span><font color="#006699"><strong>lemma</strong></font> getCtx_Alone<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getCntxt (procAlone s pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 270 </font></span><font color="#ff00cc">      getCntxt s pp1&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 271 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 272 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getCntxt (procAlone s pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 273 </font></span><font color="#ff00cc">      procCntxt(rscPendProcs_' (let proc_id_sta = procSta (procs_' s) pp in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 274 </font></span><font color="#ff00cc">  case proc_id_sta of </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 275 </font></span><font color="#ff00cc">      Some READY &rArr; readyDel_s_D s (fst pp) (snd pp) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 276 </font></span><font color="#ff00cc">      Some WAITING &rArr; if isInWaitQ s pp then waitDel_D s pp</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 277 </font></span><font color="#ff00cc">                      else s |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 278 </font></span><font color="#ff00cc">      _ &rArr; s) )pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 279 </font></span>    <font color="#006699"><strong>unfolding</strong></font> getCntxt_def procAlone_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 280 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getCntxt (procAlone s pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 281 </font></span><font color="#ff00cc">      procCntxt(rscPendProcs_'</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 282 </font></span><font color="#ff00cc">      (let proc_id_sta = procSta (procs_' s) pp in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 283 </font></span><font color="#ff00cc">  case proc_id_sta of </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 284 </font></span><font color="#ff00cc">      Some READY &rArr; (let ll = the ((readyQue(partitions_' s)) (fst pp)); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 285 </font></span><font color="#ff00cc">      proc_priority = the((curPriority(procs_' s)) ((fst pp), (snd pp))) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 286 </font></span><font color="#ff00cc">  s&#10631;partitions_' := (partitions_' s)&#10631;readyQue := readyDel_D (readyQue(partitions_' s)) (fst pp) proc_priority (snd pp)&#10632;&#10632;)    |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 287 </font></span><font color="#ff00cc">      Some WAITING &rArr; if isInWaitQ s pp then (let cid = the (procBlngCore pp); vpwl = waitQue (cores_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 288 </font></span><font color="#ff00cc">    pd = waitDiff(rscPendProcs_' s); new_vp_pd = waitQ_SuspQDel vpwl pd cid pp  in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 289 </font></span><font color="#ff00cc">  s&#10631;cores_' := (cores_' s)&#10631;waitQue := fst new_vp_pd&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 290 </font></span><font color="#ff00cc">    rscPendProcs_' := (rscPendProcs_' s)&#10631;waitDiff := snd new_vp_pd&#10632;&#10632;)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 291 </font></span><font color="#ff00cc">                      else s |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 292 </font></span><font color="#ff00cc">      _ &rArr; s) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 293 </font></span><font color="#ff00cc">      )pp1&quot;</font> <font color="#006699"><strong>unfolding</strong></font> readyDel_s_D_def waitDel_D_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 294 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getCntxt (procAlone s pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 295 </font></span><font color="#ff00cc">      (let proc_id_sta = procSta (procs_' s) pp in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 296 </font></span><font color="#ff00cc">  case proc_id_sta of </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 297 </font></span><font color="#ff00cc">      Some READY &rArr; (let ll = the ((readyQue(partitions_' s)) (fst pp)); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 298 </font></span><font color="#ff00cc">      proc_priority = the((curPriority(procs_' s)) ((fst pp), (snd pp))) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 299 </font></span><font color="#ff00cc">  procCntxt(rscPendProcs_' (s&#10631;partitions_' := (partitions_' s)&#10631;readyQue := readyDel_D (readyQue(partitions_' s)) (fst pp) proc_priority (snd pp)&#10632;&#10632;)))    |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 300 </font></span><font color="#ff00cc">      Some WAITING &rArr; if isInWaitQ s pp then (let cid = the (procBlngCore pp); vpwl = waitQue (cores_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 301 </font></span><font color="#ff00cc">       pd = waitDiff(rscPendProcs_' s); new_vp_pd = waitQ_SuspQDel vpwl pd cid pp  in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 302 </font></span><font color="#ff00cc">      procCntxt(rscPendProcs_'(s&#10631;cores_' := (cores_' s)&#10631;waitQue := fst new_vp_pd&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 303 </font></span><font color="#ff00cc">      rscPendProcs_' := (rscPendProcs_' s)&#10631;waitDiff := snd new_vp_pd&#10632;&#10632;)))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 304 </font></span><font color="#ff00cc">                      else procCntxt(rscPendProcs_' s) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 305 </font></span><font color="#ff00cc">      _ &rArr; procCntxt(rscPendProcs_' s) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 306 </font></span><font color="#ff00cc">      )pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 307 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.exhaust PROC_STATE_TYPE.simps<font color="#000000"><strong>(</strong></font>21<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.simps<font color="#000000"><strong>(</strong></font>22<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.simps<font color="#000000"><strong>(</strong></font>23<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.simps<font color="#000000"><strong>(</strong></font>24<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.simps<font color="#000000"><strong>(</strong></font>25<font color="#000000"><strong>)</strong></font> option.case_eq_if<font color="#000000"><strong>)</strong></font>  
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 308 </font></span>   <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getCntxt (procAlone s pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 309 </font></span><font color="#ff00cc">      (let proc_id_sta = procSta (procs_' s) pp in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 310 </font></span><font color="#ff00cc">  case proc_id_sta of </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 311 </font></span><font color="#ff00cc">      Some READY &rArr; (let ll = the ((readyQue(partitions_' s)) (fst pp)); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 312 </font></span><font color="#ff00cc">      proc_priority = the((curPriority(procs_' s)) ((fst pp), (snd pp))) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 313 </font></span><font color="#ff00cc">  procCntxt(rscPendProcs_' s))    |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 314 </font></span><font color="#ff00cc">      Some WAITING &rArr; if isInWaitQ s pp then (let cid = the (procBlngCore pp); vpwl = waitQue (cores_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 315 </font></span><font color="#ff00cc">       pd = waitDiff(rscPendProcs_' s); new_vp_pd = waitQ_SuspQDel vpwl pd cid pp  in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 316 </font></span><font color="#ff00cc">      procCntxt(rscPendProcs_'(s&#10631;cores_' := (cores_' s)&#10631;waitQue := fst new_vp_pd&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 317 </font></span><font color="#ff00cc">      rscPendProcs_' := (rscPendProcs_' s)&#10631;waitDiff := snd new_vp_pd&#10632;&#10632;)))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 318 </font></span><font color="#ff00cc">                      else procCntxt(rscPendProcs_' s) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 319 </font></span><font color="#ff00cc">      _ &rArr; procCntxt(rscPendProcs_' s) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 320 </font></span><font color="#ff00cc">      )pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 321 </font></span>     <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> StaPart_Sched.update_convs<font color="#000000"><strong>(</strong></font>2<font color="#000000"><strong>)</strong></font> StaProc.simps<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font> StaProc.surjective<font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 322 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getCntxt (procAlone s pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 323 </font></span><font color="#ff00cc">      (let proc_id_sta = procSta (procs_' s) pp in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 324 </font></span><font color="#ff00cc">  case proc_id_sta of </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 325 </font></span><font color="#ff00cc">      Some READY &rArr; (let ll = the ((readyQue(partitions_' s)) (fst pp)); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 326 </font></span><font color="#ff00cc">      proc_priority = the((curPriority(procs_' s)) ((fst pp), (snd pp))) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 327 </font></span><font color="#ff00cc">  procCntxt(rscPendProcs_' s))    |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 328 </font></span><font color="#ff00cc">      Some WAITING &rArr; if isInWaitQ s pp then (let cid = the (procBlngCore pp); vpwl = waitQue (cores_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 329 </font></span><font color="#ff00cc">       pd = waitDiff(rscPendProcs_' s); new_vp_pd = waitQ_SuspQDel vpwl pd cid pp  in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 330 </font></span><font color="#ff00cc">      procCntxt(rscPendProcs_' s))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 331 </font></span><font color="#ff00cc">                      else procCntxt(rscPendProcs_' s) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 332 </font></span><font color="#ff00cc">      _ &rArr; procCntxt(rscPendProcs_' s) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 333 </font></span><font color="#ff00cc">      )pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 334 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis PROCS_STATE_PENDING_TYPE.select_convs<font color="#000000"><strong>(</strong></font>7<font color="#000000"><strong>)</strong></font> PROCS_STATE_PENDING_TYPE.surjective PROCS_STATE_PENDING_TYPE.update_convs<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> StaProc.simps<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font> StaProc.simps<font color="#000000"><strong>(</strong></font>7<font color="#000000"><strong>)</strong></font> StaProc.surjective<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 335 </font></span>  
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 336 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getCntxt (procAlone s pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 337 </font></span><font color="#ff00cc">      procCntxt(rscPendProcs_' s)pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 338 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.exhaust PROC_STATE_TYPE.simps<font color="#000000"><strong>(</strong></font>21<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.simps<font color="#000000"><strong>(</strong></font>22<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.simps<font color="#000000"><strong>(</strong></font>23<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.simps<font color="#000000"><strong>(</strong></font>24<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.simps<font color="#000000"><strong>(</strong></font>25<font color="#000000"><strong>)</strong></font> option.case_eq_if<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 339 </font></span>     <font color="#0099ff"><strong>thus</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 340 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> getCntxt_def<font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 341 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 342 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 343 </font></span><font color="#006699"><strong>lemma</strong></font> getCtx_procRdy<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getCntxt (procReady s pp) pp = getCntxt s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 344 </font></span>        <font color="#006699"><strong>unfolding</strong></font> getCntxt_def procReady_def 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 345 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis getCntxt_def getCtx_Alone getCtx_rdyAdd getCtx_setSta surj_pair<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 346 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 347 </font></span><font color="#006699"><strong>lemma</strong></font> getCtx_petDdl<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getCntxt (setProcDDL s (part_id0, proc_id0) t) (part_id1, proc_id1) =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 348 </font></span><font color="#ff00cc">      getCntxt s (part_id1, proc_id1)&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 349 </font></span>  <font color="#006699"><strong>unfolding</strong></font> setProcDDL_def getCntxt_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 350 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 351 </font></span><font color="#006699"><strong>lemma</strong></font> getCtx_petrls<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getCntxt (setRlsPoint s (part_id0, proc_id0) t) (part_id1, proc_id1) =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 352 </font></span><font color="#ff00cc">      getCntxt s (part_id1, proc_id1)&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 353 </font></span>  <font color="#006699"><strong>unfolding</strong></font> setRlsPoint_def getCntxt_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 354 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 355 </font></span><font color="#006699"><strong>lemma</strong></font> getCtx_setDelayT<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getCntxt (setDelayT s (part_id0, proc_id0) t) (part_id1, proc_id1) =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 356 </font></span><font color="#ff00cc">      getCntxt s (part_id1, proc_id1)&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 357 </font></span>  <font color="#006699"><strong>unfolding</strong></font> setDelayT_def getCntxt_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 358 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 359 </font></span><font color="#006699"><strong>lemma</strong></font> getCtx_setWaitDiff<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getCntxt (setWaitDiff s (part_id0, proc_id0) t) (part_id1, proc_id1) =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 360 </font></span><font color="#ff00cc">      getCntxt s (part_id1, proc_id1)&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 361 </font></span>  <font color="#006699"><strong>unfolding</strong></font> setWaitDiff_def getCntxt_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 362 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 363 </font></span><font color="#006699"><strong>lemma</strong></font> getCtx_waitAdd_D<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getCntxt (waitAdd_D s pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 364 </font></span><font color="#ff00cc">      getCntxt s pp1&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 365 </font></span>  <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 366 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getCntxt (waitAdd_D s pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 367 </font></span><font color="#ff00cc">       procCntxt(rscPendProcs_' </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 368 </font></span><font color="#ff00cc">        (let cid = the (procBlngCore pp); tq = waitQue(cores_' s); wait_diff = waitDiff(rscPendProcs_' s);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 369 </font></span><font color="#ff00cc">      tq_wd = waitQ_SuspQAdd tq wait_diff cid pp  in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 370 </font></span><font color="#ff00cc">  if the(wait_diff pp) &gt; 0 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 371 </font></span><font color="#ff00cc">    s&#10631;cores_' := (cores_' s)&#10631;waitQue := fst tq_wd&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 372 </font></span><font color="#ff00cc">      rscPendProcs_' := (rscPendProcs_' s)&#10631;waitDiff := snd tq_wd&#10632;&#10632;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 373 </font></span><font color="#ff00cc">  else s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 374 </font></span><font color="#ff00cc">  )pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 375 </font></span>    <font color="#006699"><strong>unfolding</strong></font> getCntxt_def waitAdd_D_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 376 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getCntxt (waitAdd_D s pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 377 </font></span><font color="#ff00cc">       (let cid = the (procBlngCore pp); tq = waitQue(cores_' s); wait_diff = waitDiff(rscPendProcs_' s);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 378 </font></span><font color="#ff00cc">      tq_wd = waitQ_SuspQAdd tq wait_diff cid pp  in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 379 </font></span><font color="#ff00cc">     if the(wait_diff pp) &gt; 0 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 380 </font></span><font color="#ff00cc">      procCntxt(rscPendProcs_' (s&#10631;cores_' := (cores_' s)&#10631;waitQue := fst tq_wd&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 381 </font></span><font color="#ff00cc">       rscPendProcs_' := (rscPendProcs_' s)&#10631;waitDiff := snd tq_wd&#10632;&#10632;))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 382 </font></span><font color="#ff00cc">    else procCntxt(rscPendProcs_' s))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 383 </font></span><font color="#ff00cc">   pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 384 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 385 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getCntxt (waitAdd_D s pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 386 </font></span><font color="#ff00cc">       (let cid = the (procBlngCore pp); tq = waitQue(cores_' s); wait_diff = waitDiff(rscPendProcs_' s);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 387 </font></span><font color="#ff00cc">      tq_wd = waitQ_SuspQAdd tq wait_diff cid pp  in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 388 </font></span><font color="#ff00cc">     if the(wait_diff pp) &gt; 0 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 389 </font></span><font color="#ff00cc">      procCntxt(rscPendProcs_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 390 </font></span><font color="#ff00cc">    else procCntxt(rscPendProcs_' s))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 391 </font></span><font color="#ff00cc">   pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 392 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> PROCS_STATE_PENDING_TYPE.select_convs<font color="#000000"><strong>(</strong></font>7<font color="#000000"><strong>)</strong></font> PROCS_STATE_PENDING_TYPE.surjective PROCS_STATE_PENDING_TYPE.update_convs<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> StaProc.simps<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font> StaProc.simps<font color="#000000"><strong>(</strong></font>7<font color="#000000"><strong>)</strong></font> StaProc.surjective<font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 393 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getCntxt (waitAdd_D s pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 394 </font></span><font color="#ff00cc">       procCntxt(rscPendProcs_' s)pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 395 </font></span>    <font color="#006699"><strong>by</strong></font> metis 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 396 </font></span>  <font color="#0099ff"><strong>thus</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 397 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> getCntxt_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 398 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 399 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 400 </font></span><font color="#cc0000">(*ddl*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 401 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 402 </font></span><font color="#006699"><strong>lemma</strong></font> getddl_set_NotNone <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcDDL (setProcDDL s pp t) pp &ne; None&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 403 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getProcDDL_def setProcDDL_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 404 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 405 </font></span><font color="#006699"><strong>lemma</strong></font> getddl_rstDeadline_None <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcDDL (rstDeadline s pp) pp = None&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 406 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getProcDDL_def rstDeadline_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 407 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 408 </font></span><font color="#006699"><strong>lemma</strong></font> getddl_rstHMCalled <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcDDL (rstHMCalled s pt) pp = getProcDDL s pp&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 409 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getProcDDL_def rstHMCalled_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 410 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 411 </font></span><font color="#006699"><strong>lemma</strong></font> procStop_rst<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 412 </font></span><font color="#ff00cc">&quot;let s' = procStop s pp;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 413 </font></span><font color="#ff00cc">    s_set_Dorm = setProcSta s pp DORMANT;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 414 </font></span><font color="#ff00cc">      s_set_Dorm_susp_del = if isSuspended s_set_Dorm pp then suspInfoAllDel_D s_set_Dorm pp else s_set_Dorm;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 415 </font></span><font color="#ff00cc">      s_set_Dorm_alone = procAlone s_set_Dorm_susp_del pp;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 416 </font></span><font color="#ff00cc">      s_set_waitQue_del = if procInRscQ s_set_Dorm_alone pp then rscQdelProc s_set_Dorm_alone pp else s_set_Dorm_alone;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 417 </font></span><font color="#ff00cc">      s_set_stopTct = StopTCounter s_set_waitQue_del pp;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 418 </font></span><font color="#ff00cc">      s_rstPrio = rstPriority s_set_stopTct pp;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 419 </font></span><font color="#ff00cc">      s_rstDdl = rstDeadline s_rstPrio pp;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 420 </font></span><font color="#ff00cc">      s_ddl'= getProcDDL s' pp;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 421 </font></span><font color="#ff00cc">      s_prio' = getPriority s' pp</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 422 </font></span><font color="#ff00cc">       in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 423 </font></span><font color="#ff00cc">     s_ddl'= None&and; s_prio' = None&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 424 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 425 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 426 </font></span>  <font color="#006699"><strong>let</strong></font> ?s' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;procStop s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 427 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_set_Dorm <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setProcSta s pp DORMANT&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 428 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_set_Dorm_susp_del <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;if isSuspended ?s_set_Dorm pp then suspInfoAllDel_D ?s_set_Dorm pp else ?s_set_Dorm&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 429 </font></span>  <font color="#006699"><strong>let</strong></font>  ?s_set_Dorm_alone <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;procAlone ?s_set_Dorm_susp_del pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 430 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_set_waitQue_del <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;if procInRscQ ?s_set_Dorm_alone pp then rscQdelProc ?s_set_Dorm_alone pp else ?s_set_Dorm_alone&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 431 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_set_stopTct <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;StopTCounter ?s_set_waitQue_del pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 432 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_rstPrio <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;rstPriority ?s_set_stopTct pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 433 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_rstDdl <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;rstDeadline ?s_rstPrio pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 434 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_ddl'<font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getProcDDL ?s' pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 435 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_prio' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getPriority ?s' pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 436 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot; (?s_ddl'= None &and; ?s_prio' = None) &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 437 </font></span>  <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 438 </font></span>    <font color="#006699"><strong>{</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 439 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 440 </font></span>      <font color="#006699"><strong>have</strong></font> a1<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?s' = ?s_rstDdl&quot;</font> <font color="#006699"><strong>unfolding</strong></font> procStop_def Let_def
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 441 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.exhaust PROC_STATE_TYPE.simps<font color="#000000"><strong>(</strong></font>22<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.simps<font color="#000000"><strong>(</strong></font>23<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.simps<font color="#000000"><strong>(</strong></font>24<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.simps<font color="#000000"><strong>(</strong></font>25<font color="#000000"><strong>)</strong></font> option.case_eq_if option.collapse<font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 442 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a2<font color="#000000"><strong>:</strong></font><font color="#ff00cc">&quot;?s_ddl'= None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 443 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis a1 getddl_rstDeadline_None<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 444 </font></span>      <font color="#006699"><strong>hence</strong></font> a3<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?s_ddl'= None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 445 </font></span>        <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 446 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a4<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?s_prio' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 447 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis a1 getPrio_rstDeadline getPrio_rstPriority_None old.prod.exhaust<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 448 </font></span>      <font color="#006699"><strong>ultimately</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;  ?s_ddl'= None &and; ?s_prio' = None&quot;</font> <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 449 </font></span>    <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 450 </font></span>     <font color="#0099ff"><strong>thus</strong></font>  ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 451 </font></span>       <font color="#006699"><strong>by</strong></font> metis   
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 452 </font></span>   <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 453 </font></span>   <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 454 </font></span>     <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#6600cc">&lsaquo;</font><font color="#6600cc">g</font><font color="#6600cc">e</font><font color="#6600cc">t</font><font color="#6600cc">P</font><font color="#6600cc">r</font><font color="#6600cc">o</font><font color="#6600cc">c</font><font color="#6600cc">D</font><font color="#6600cc">D</font><font color="#6600cc">L</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">p</font><font color="#6600cc">r</font><font color="#6600cc">o</font><font color="#6600cc">c</font><font color="#6600cc">S</font><font color="#6600cc">t</font><font color="#6600cc">o</font><font color="#6600cc">p</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc"> </font><font color="#6600cc">p</font><font color="#6600cc">p</font><font color="#6600cc">)</font><font color="#6600cc"> </font><font color="#6600cc">p</font><font color="#6600cc">p</font><font color="#6600cc"> </font><font color="#6600cc">=</font><font color="#6600cc"> </font><font color="#6600cc">N</font><font color="#6600cc">o</font><font color="#6600cc">n</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">&and;</font><font color="#6600cc"> </font><font color="#6600cc">g</font><font color="#6600cc">e</font><font color="#6600cc">t</font><font color="#6600cc">P</font><font color="#6600cc">r</font><font color="#6600cc">i</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">i</font><font color="#6600cc">t</font><font color="#6600cc">y</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">p</font><font color="#6600cc">r</font><font color="#6600cc">o</font><font color="#6600cc">c</font><font color="#6600cc">S</font><font color="#6600cc">t</font><font color="#6600cc">o</font><font color="#6600cc">p</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc"> </font><font color="#6600cc">p</font><font color="#6600cc">p</font><font color="#6600cc">)</font><font color="#6600cc"> </font><font color="#6600cc">p</font><font color="#6600cc">p</font><font color="#6600cc"> </font><font color="#6600cc">=</font><font color="#6600cc"> </font><font color="#6600cc">N</font><font color="#6600cc">o</font><font color="#6600cc">n</font><font color="#6600cc">e</font><font color="#6600cc">&rsaquo;</font><font color="#000000"><strong>)</strong></font>  
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 455 </font></span> <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 456 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 457 </font></span><font color="#006699"><strong>lemma</strong></font> procStop_rstDeadline<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 458 </font></span><font color="#ff00cc">&quot;let s' = procStop s pp;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 459 </font></span><font color="#ff00cc">    s_set_Dorm = setProcSta s pp DORMANT;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 460 </font></span><font color="#ff00cc">      s_set_Dorm_susp_del = if isSuspended s_set_Dorm pp then suspInfoAllDel_D s_set_Dorm pp else s_set_Dorm;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 461 </font></span><font color="#ff00cc">      s_set_Dorm_alone = procAlone s_set_Dorm_susp_del pp;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 462 </font></span><font color="#ff00cc">      s_set_waitQue_del = if procInRscQ s_set_Dorm_alone pp then rscQdelProc s_set_Dorm_alone pp else s_set_Dorm_alone;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 463 </font></span><font color="#ff00cc">      s_set_stopTct = StopTCounter s_set_waitQue_del pp;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 464 </font></span><font color="#ff00cc">      s_rstPrio = rstPriority s_set_stopTct pp;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 465 </font></span><font color="#ff00cc">      s_rstDdl = rstDeadline s_rstPrio pp;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 466 </font></span><font color="#ff00cc">      s_ddl'= getProcDDL s' pp</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 467 </font></span><font color="#ff00cc">       in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 468 </font></span><font color="#ff00cc">   &not;(getProcSta s pp = Some DORMANT) &#10230;  s_ddl'= None&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 469 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 470 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 471 </font></span>  <font color="#006699"><strong>let</strong></font> ?s' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;procStop s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 472 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_set_Dorm <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setProcSta s pp DORMANT&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 473 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_set_Dorm_susp_del <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;if isSuspended ?s_set_Dorm pp then suspInfoAllDel_D ?s_set_Dorm pp else ?s_set_Dorm&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 474 </font></span>  <font color="#006699"><strong>let</strong></font>  ?s_set_Dorm_alone <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;procAlone ?s_set_Dorm_susp_del pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 475 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_set_waitQue_del <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;if procInRscQ ?s_set_Dorm_alone pp then rscQdelProc ?s_set_Dorm_alone pp else ?s_set_Dorm_alone&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 476 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_set_stopTct <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;StopTCounter ?s_set_waitQue_del pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 477 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_rstPrio <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;rstPriority ?s_set_stopTct pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 478 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_rstDdl <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;rstDeadline ?s_rstPrio pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 479 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_ddl'<font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getProcDDL ?s' pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 480 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getProcSta s pp = Some DORMANT) &#10230;  ?s_ddl'= None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 481 </font></span>  <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 482 </font></span>    <font color="#006699"><strong>{</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 483 </font></span>      <font color="#0099ff"><strong>assume</strong></font> <font color="#ff00cc">&quot;&not;(getProcSta s pp = Some DORMANT)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 484 </font></span>      <font color="#006699"><strong>hence</strong></font> a1<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?s' = ?s_rstDdl&quot;</font> <font color="#006699"><strong>unfolding</strong></font> procStop_def Let_def
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 485 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.exhaust PROC_STATE_TYPE.simps<font color="#000000"><strong>(</strong></font>22<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.simps<font color="#000000"><strong>(</strong></font>23<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.simps<font color="#000000"><strong>(</strong></font>24<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.simps<font color="#000000"><strong>(</strong></font>25<font color="#000000"><strong>)</strong></font> option.case_eq_if option.collapse<font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 486 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a2<font color="#000000"><strong>:</strong></font><font color="#ff00cc">&quot;?s_ddl'= None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 487 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis a1 getddl_rstDeadline_None<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 488 </font></span>      <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;&not;(getProcSta s pp = Some DORMANT) &#10230;  ?s_ddl'= None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 489 </font></span>        <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 490 </font></span>    <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 491 </font></span>     <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 492 </font></span>       <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#6600cc">&lsaquo;</font><font color="#6600cc">g</font><font color="#6600cc">e</font><font color="#6600cc">t</font><font color="#6600cc">P</font><font color="#6600cc">r</font><font color="#6600cc">o</font><font color="#6600cc">c</font><font color="#6600cc">S</font><font color="#6600cc">t</font><font color="#6600cc">a</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc"> </font><font color="#6600cc">p</font><font color="#6600cc">p</font><font color="#6600cc"> </font><font color="#6600cc">&ne;</font><font color="#6600cc"> </font><font color="#6600cc">S</font><font color="#6600cc">o</font><font color="#6600cc">m</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">D</font><font color="#6600cc">O</font><font color="#6600cc">R</font><font color="#6600cc">M</font><font color="#6600cc">A</font><font color="#6600cc">N</font><font color="#6600cc">T</font><font color="#6600cc"> </font><font color="#6600cc">&#10233;</font><font color="#6600cc"> </font><font color="#6600cc">g</font><font color="#6600cc">e</font><font color="#6600cc">t</font><font color="#6600cc">P</font><font color="#6600cc">r</font><font color="#6600cc">o</font><font color="#6600cc">c</font><font color="#6600cc">S</font><font color="#6600cc">t</font><font color="#6600cc">a</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc"> </font><font color="#6600cc">p</font><font color="#6600cc">p</font><font color="#6600cc"> </font><font color="#6600cc">&ne;</font><font color="#6600cc"> </font><font color="#6600cc">S</font><font color="#6600cc">o</font><font color="#6600cc">m</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">D</font><font color="#6600cc">O</font><font color="#6600cc">R</font><font color="#6600cc">M</font><font color="#6600cc">A</font><font color="#6600cc">N</font><font color="#6600cc">T</font><font color="#6600cc"> </font><font color="#6600cc">&#10230;</font><font color="#6600cc"> </font><font color="#6600cc">g</font><font color="#6600cc">e</font><font color="#6600cc">t</font><font color="#6600cc">P</font><font color="#6600cc">r</font><font color="#6600cc">o</font><font color="#6600cc">c</font><font color="#6600cc">D</font><font color="#6600cc">D</font><font color="#6600cc">L</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">p</font><font color="#6600cc">r</font><font color="#6600cc">o</font><font color="#6600cc">c</font><font color="#6600cc">S</font><font color="#6600cc">t</font><font color="#6600cc">o</font><font color="#6600cc">p</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc"> </font><font color="#6600cc">p</font><font color="#6600cc">p</font><font color="#6600cc">)</font><font color="#6600cc"> </font><font color="#6600cc">p</font><font color="#6600cc">p</font><font color="#6600cc"> </font><font color="#6600cc">=</font><font color="#6600cc"> </font><font color="#6600cc">N</font><font color="#6600cc">o</font><font color="#6600cc">n</font><font color="#6600cc">e</font><font color="#6600cc">&rsaquo;</font><font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 493 </font></span>   <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 494 </font></span>   <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 495 </font></span>     <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#6600cc">&lsaquo;</font><font color="#6600cc">g</font><font color="#6600cc">e</font><font color="#6600cc">t</font><font color="#6600cc">P</font><font color="#6600cc">r</font><font color="#6600cc">o</font><font color="#6600cc">c</font><font color="#6600cc">S</font><font color="#6600cc">t</font><font color="#6600cc">a</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc"> </font><font color="#6600cc">p</font><font color="#6600cc">p</font><font color="#6600cc"> </font><font color="#6600cc">&ne;</font><font color="#6600cc"> </font><font color="#6600cc">S</font><font color="#6600cc">o</font><font color="#6600cc">m</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">D</font><font color="#6600cc">O</font><font color="#6600cc">R</font><font color="#6600cc">M</font><font color="#6600cc">A</font><font color="#6600cc">N</font><font color="#6600cc">T</font><font color="#6600cc"> </font><font color="#6600cc">&#10230;</font><font color="#6600cc"> </font><font color="#6600cc">g</font><font color="#6600cc">e</font><font color="#6600cc">t</font><font color="#6600cc">P</font><font color="#6600cc">r</font><font color="#6600cc">o</font><font color="#6600cc">c</font><font color="#6600cc">D</font><font color="#6600cc">D</font><font color="#6600cc">L</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">p</font><font color="#6600cc">r</font><font color="#6600cc">o</font><font color="#6600cc">c</font><font color="#6600cc">S</font><font color="#6600cc">t</font><font color="#6600cc">o</font><font color="#6600cc">p</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc"> </font><font color="#6600cc">p</font><font color="#6600cc">p</font><font color="#6600cc">)</font><font color="#6600cc"> </font><font color="#6600cc">p</font><font color="#6600cc">p</font><font color="#6600cc"> </font><font color="#6600cc">=</font><font color="#6600cc"> </font><font color="#6600cc">N</font><font color="#6600cc">o</font><font color="#6600cc">n</font><font color="#6600cc">e</font><font color="#6600cc">&rsaquo;</font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 496 </font></span> <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 497 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 498 </font></span><font color="#006699"><strong>lemma</strong></font> getddl_procStop_setNone<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&not;(getProcSta s pp = Some DORMANT) &#10230; getProcDDL (procStop s pp) pp = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 499 </font></span>  <font color="#006699"><strong>using</strong></font>   procStop_rstDeadline
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 500 </font></span>  <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>mono_tags<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>    
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 501 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 502 </font></span><font color="#006699"><strong>lemma</strong></font> getddl_setDelayT <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcDDL (setDelayT s pp t) pp1 = getProcDDL s pp1&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 503 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getProcDDL_def setDelayT_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 504 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 505 </font></span><font color="#006699"><strong>lemma</strong></font> getddl_setWaitDiff <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcDDL (setWaitDiff s pp t) pp1 = getProcDDL s pp1&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 506 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getProcDDL_def setWaitDiff_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 507 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 508 </font></span><font color="#006699"><strong>lemma</strong></font> getddl_waitAdd_D <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcDDL (waitAdd_D s pp) pp1 = getProcDDL s pp1&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 509 </font></span>  <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 510 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getProcDDL (waitAdd_D s pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 511 </font></span><font color="#ff00cc">        deadline(procs_' </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 512 </font></span><font color="#ff00cc">        (let cid = the (procBlngCore pp); tq = waitQue(cores_' s); wait_diff = waitDiff(rscPendProcs_' s);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 513 </font></span><font color="#ff00cc">      tq_wd = waitQ_SuspQAdd tq wait_diff cid pp  in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 514 </font></span><font color="#ff00cc">  if the(wait_diff pp) &gt; 0 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 515 </font></span><font color="#ff00cc">    s&#10631;cores_' := (cores_' s)&#10631;waitQue := fst tq_wd&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 516 </font></span><font color="#ff00cc">      rscPendProcs_' := (rscPendProcs_' s)&#10631;waitDiff := snd tq_wd&#10632;&#10632;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 517 </font></span><font color="#ff00cc">  else s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 518 </font></span><font color="#ff00cc">  )pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 519 </font></span>    <font color="#006699"><strong>unfolding</strong></font> getProcDDL_def waitAdd_D_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 520 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getProcDDL (waitAdd_D s pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 521 </font></span><font color="#ff00cc">       (let cid = the (procBlngCore pp); tq = waitQue(cores_' s); wait_diff = waitDiff(rscPendProcs_' s);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 522 </font></span><font color="#ff00cc">      tq_wd = waitQ_SuspQAdd tq wait_diff cid pp  in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 523 </font></span><font color="#ff00cc">     if the(wait_diff pp) &gt; 0 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 524 </font></span><font color="#ff00cc">      deadline(procs_' (s&#10631;cores_' := (cores_' s)&#10631;waitQue := fst tq_wd&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 525 </font></span><font color="#ff00cc">       rscPendProcs_' := (rscPendProcs_' s)&#10631;waitDiff := snd tq_wd&#10632;&#10632;))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 526 </font></span><font color="#ff00cc">    else deadline(procs_' s))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 527 </font></span><font color="#ff00cc">   pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 528 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 529 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getProcDDL (waitAdd_D s pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 530 </font></span><font color="#ff00cc">       deadline(procs_' s)pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 531 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> StaProc.simps<font color="#000000"><strong>(</strong></font>6<font color="#000000"><strong>)</strong></font> StaProc.simps<font color="#000000"><strong>(</strong></font>7<font color="#000000"><strong>)</strong></font> StaProc.surjective StaProc_sched.simps<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 532 </font></span>  <font color="#0099ff"><strong>thus</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 533 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis getProcDDL_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 534 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 535 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 536 </font></span><font color="#cc0000">(*rls*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 537 </font></span><font color="#006699"><strong>lemma</strong></font> getfrls_set_NotNone <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getRlsPoint (setRlsPoint s pp t) pp &ne; None&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 538 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getRlsPoint_def setRlsPoint_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 539 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 540 </font></span><font color="#006699"><strong>lemma</strong></font> getfrls_setddl <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getRlsPoint (setProcDDL s pp0 t) pp1 = getRlsPoint s pp1&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 541 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getRlsPoint_def setProcDDL_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 542 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 543 </font></span><font color="#cc0000">(*proc sta*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 544 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 545 </font></span><font color="#006699"><strong>lemma</strong></font> getSta_set_STATE<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcSta (setProcSta s p STATE) p = Some STATE&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 546 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getProcSta_def setProcSta_def <font color="#006699"><strong>by</strong></font> auto          
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 547 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 548 </font></span><font color="#006699"><strong>lemma</strong></font> getSta_setddl<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcSta (setProcDDL s pp t) pp = getProcSta s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 549 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getProcSta_def setProcDDL_def <font color="#006699"><strong>by</strong></font> auto  
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 550 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 551 </font></span><font color="#006699"><strong>lemma</strong></font> getSta_setrls<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcSta (setRlsPoint s pp t) pp = getProcSta s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 552 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getProcSta_def setRlsPoint_def <font color="#006699"><strong>by</strong></font> auto  
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 553 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 554 </font></span><font color="#006699"><strong>lemma</strong></font> getSta_set_Waiting<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcSta (setProcSta s p WAITING) p = Some WAITING&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 555 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getProcSta_def setProcSta_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 556 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 557 </font></span><font color="#006699"><strong>lemma</strong></font> getSta_setCterRsc<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcSta (setCterRsc s pp stddl) pp = getProcSta s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 558 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getProcSta_def setCterRsc_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 559 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 560 </font></span><font color="#006699"><strong>lemma</strong></font> getSta_setSuspDiff<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcSta (setSuspDiff s pp stddl) pp = getProcSta s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 561 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getProcSta_def setSuspDiff_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 562 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 563 </font></span><font color="#006699"><strong>lemma</strong></font> getSta_setCterSusp<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcSta (setCterSusp s pp stddl) pp = getProcSta s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 564 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getProcSta_def setCterSusp_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 565 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 566 </font></span><font color="#006699"><strong>lemma</strong></font> getSta_suspProc<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcSta (suspProc s pp) pp = getProcSta s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 567 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getProcSta_def suspProc_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 568 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 569 </font></span><font color="#006699"><strong>lemma</strong></font> getSta_readyDel_s_D<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcSta (readyDel_s_D s pt p) (pt1,p1) = getProcSta s (pt1,p1)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 570 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getProcSta_def readyDel_s_D_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 571 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 572 </font></span><font color="#006699"><strong>lemma</strong></font> getSta_set_READY<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcSta (setProcSta s p READY) p = Some READY&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 573 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getProcSta_def setProcSta_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 574 </font></span>  
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 575 </font></span><font color="#006699"><strong>lemma</strong></font> getSta_procRdy<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcSta (procReady s pp) pp = Some READY&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 576 </font></span>   <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt getSta_set_STATE procReady_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 577 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 578 </font></span><font color="#006699"><strong>lemma</strong></font> getSta_setDelayT<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcSta (setDelayT s pp stddl) pp = getProcSta s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 579 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getProcSta_def setDelayT_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 580 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 581 </font></span><font color="#006699"><strong>lemma</strong></font> getSta_suspQueAdd_D<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcSta (suspQueAdd_D s pp) pp1 = getProcSta s pp1&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 582 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 583 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getProcSta (suspQueAdd_D s pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 584 </font></span><font color="#ff00cc">      (procSta (procs_'  </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 585 </font></span><font color="#ff00cc">      (let cid = the (procBlngCore pp); tq = suspdQue(cores_' s); susp_diff = suspDiff(rscPendProcs_' s);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 586 </font></span><font color="#ff00cc">      tq_wd = waitQ_SuspQAdd tq susp_diff cid pp  in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 587 </font></span><font color="#ff00cc">  if the(susp_diff pp) &gt; 0 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 588 </font></span><font color="#ff00cc">    s&#10631;cores_' := (cores_' s)&#10631;suspdQue := fst tq_wd&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 589 </font></span><font color="#ff00cc">      rscPendProcs_' := (rscPendProcs_' s)&#10631;suspDiff := snd tq_wd&#10632;&#10632;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 590 </font></span><font color="#ff00cc">  else s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 591 </font></span><font color="#ff00cc">      ))pp1&quot;</font> <font color="#006699"><strong>unfolding</strong></font> suspQueAdd_D_def getProcSta_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 592 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getProcSta (suspQueAdd_D s pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 593 </font></span><font color="#ff00cc">      (  </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 594 </font></span><font color="#ff00cc">      (let cid = the (procBlngCore pp); tq = suspdQue(cores_' s); susp_diff = suspDiff(rscPendProcs_' s);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 595 </font></span><font color="#ff00cc">      tq_wd = waitQ_SuspQAdd tq susp_diff cid pp  in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 596 </font></span><font color="#ff00cc">  if the(susp_diff pp) &gt; 0 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 597 </font></span><font color="#ff00cc">    procSta (procs_'(s&#10631;cores_' := (cores_' s)&#10631;suspdQue := fst tq_wd&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 598 </font></span><font color="#ff00cc">      rscPendProcs_' := (rscPendProcs_' s)&#10631;suspDiff := snd tq_wd&#10632;&#10632;))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 599 </font></span><font color="#ff00cc">  else procSta (procs_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 600 </font></span><font color="#ff00cc">      ))pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 601 </font></span>    <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 602 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getProcSta (suspQueAdd_D s pp) pp1=</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 603 </font></span><font color="#ff00cc">        procSta (procs_' s) pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 604 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> StaProc.simps<font color="#000000"><strong>(</strong></font>6<font color="#000000"><strong>)</strong></font> StaProc.simps<font color="#000000"><strong>(</strong></font>7<font color="#000000"><strong>)</strong></font> StaProc.surjective StaProc_sched.simps<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 605 </font></span>  <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis getProcSta_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 606 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 607 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 608 </font></span><font color="#006699"><strong>lemma</strong></font> getSta_setCntxt<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcSta (setCntxt s pp suspSelf) pp = getProcSta s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 609 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getProcSta_def setCntxt_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 610 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 611 </font></span><font color="#cc0000">(*</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 612 </font></span><font color="#cc0000">lemma &quot;&not; procInReadyQ s pp &and; (readyQue(partitions_' s)) part_id &ne; None &and; part_id = fst pp &and; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 613 </font></span><font color="#cc0000">      getPriority s pp &ne; None &and;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 614 </font></span><font color="#cc0000">      (&exist;proc_priority.(the ((readyQue(partitions_' s)) part_id))!proc_priority &ne; [])</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 615 </font></span><font color="#cc0000">       &#10230; fstProc_HiestPrority_D (readyQue(partitions_' s)) part_id &ne; snd pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 616 </font></span><font color="#cc0000">  proof-</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 617 </font></span><font color="#cc0000">  {assume a00: &quot;&not; procInReadyQ s pp &and; (readyQue(partitions_' s)) part_id &ne; None &and; part_id = fst pp &and; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 618 </font></span><font color="#cc0000">    getPriority s pp &ne; None &and;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 619 </font></span><font color="#cc0000">    (&exist;proc_priority.(the ((readyQue(partitions_' s)) part_id))!proc_priority &ne; [])&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 620 </font></span><font color="#cc0000">  let ?readyQ = &quot;(readyQue(partitions_' s))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 621 </font></span><font color="#cc0000">  obtain proc_priority where a10: &quot;(the (?readyQ part_id))!proc_priority &ne; []&quot; using a00 by blast</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 622 </font></span><font color="#cc0000">  let ?fstProc_HiestPrority = &quot;fstProc_HiestPrority_D ?readyQ part_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 623 </font></span><font color="#cc0000">  let ?hiestPriority = &quot;hiestPrority_D (the(?readyQ part_id))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 624 </font></span><font color="#cc0000">  let ?proc_prio = &quot;getPriority s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 625 </font></span><font color="#cc0000">  let ?readyQAtPrio = &quot;getReadyProcLAtPri s part_id (the ?proc_prio)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 626 </font></span><font color="#cc0000">  have a20':&quot;?readyQAtPrio &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 627 </font></span><font color="#cc0000">    proof-</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 628 </font></span><font color="#cc0000">      have a00: &quot;?readyQ part_id &ne; None&quot; using a00 by auto</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 629 </font></span><font color="#cc0000">      thus ?thesis unfolding getReadyProcLAtPri_def a10 by auto</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 630 </font></span><font color="#cc0000">    qed</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 631 </font></span><font color="#cc0000">  have &quot;fstProc_HiestPrority_D ?readyQ part_id &ne; snd pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 632 </font></span><font color="#cc0000">    proof(cases &quot;?hiestPriority = proc_priority&quot;)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 633 </font></span><font color="#cc0000">    case True</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 634 </font></span><font color="#cc0000">      have a20: &quot;?fstProc_HiestPrority = ((the(?readyQ part_id))!?hiestPriority)!0&quot; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 635 </font></span><font color="#cc0000">        unfolding fstProc_HiestPrority_D_def using True by auto</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 636 </font></span><font color="#cc0000">      then show ?thesis</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 637 </font></span><font color="#cc0000">        proof-</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 638 </font></span><font color="#cc0000">          {assume a30: &quot;?fstProc_HiestPrority = snd pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 639 </font></span><font color="#cc0000">          hence a31: &quot;((the (?readyQ part_id))!proc_priority)!0 = snd pp&quot; using True unfolding fstProc_HiestPrority_D_def by auto</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 640 </font></span><font color="#cc0000">          hence a33:&quot;(the (?readyQ part_id))!proc_priority &ne; []&quot; using a10 by auto</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 641 </font></span><font color="#cc0000">          have a34: &quot;(&forall;i&lt;length ((the (?readyQ part_id))!proc_priority). </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 642 </font></span><font color="#cc0000">                  getPriority s (part_id, ((the (?readyQ part_id))!proc_priority)!i) = Some proc_priority)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 643 </font></span><font color="#cc0000">            using prioritySame a00 a10 unfolding Let_def by auto</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 644 </font></span><font color="#cc0000">          hence &quot;(getPriority s (part_id, ?fstProc_HiestPrority) = Some proc_priority)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 645 </font></span><font color="#cc0000">                  using a10 a20 True by auto</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 646 </font></span><font color="#cc0000">          hence a35: &quot;the ?proc_prio = proc_priority&quot;using a30 a00 by auto</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 647 </font></span><font color="#cc0000">          have a32_1: &quot;(the (?readyQ part_id))!(the ?proc_prio) &ne; []&quot; using a35 a33 by simp</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 648 </font></span><font color="#cc0000">          have &quot;the ?readyQAtPrio = (the (?readyQ part_id))!proc_priority&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 649 </font></span><font color="#cc0000">              unfolding getReadyProcLAtPri_def using a00 a35 by auto</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 650 </font></span><font color="#cc0000">          hence a32_2: &quot;(the ?readyQAtPrio)!0 = snd pp&quot;using a10 a20 a30 True by auto</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 651 </font></span><font color="#cc0000">          have &quot;?proc_prio &ne; None &and; ?readyQAtPrio &ne; None&quot; using a20' a00 by simp</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 652 </font></span><font color="#cc0000">          moreover have &quot;&exist;i&lt;length (the ?readyQAtPrio). (the ?readyQAtPrio)!i = snd pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 653 </font></span><font color="#cc0000">            using a32_1 a32_2 True a00</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 654 </font></span><font color="#cc0000">            unfolding getReadyProcLAtPri_def Let_def option.case_eq_if by force</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 655 </font></span><font color="#cc0000">          ultimately have &quot;procInReadyQ s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 656 </font></span><font color="#cc0000">            unfolding procInReadyQ_def getReadyProcLAtPri_def Let_def option.case_eq_if</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 657 </font></span><font color="#cc0000">            using a10 a00  by auto</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 658 </font></span><font color="#cc0000">          }</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 659 </font></span><font color="#cc0000">          thus ?thesis using a00 by blast</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 660 </font></span><font color="#cc0000">        qed</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 661 </font></span><font color="#cc0000">    next</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 662 </font></span><font color="#cc0000">    case False</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 663 </font></span><font color="#cc0000">      then show ?thesis sorry</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 664 </font></span><font color="#cc0000">    qed</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 665 </font></span><font color="#cc0000">  }</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 666 </font></span><font color="#cc0000">  thus ?thesis by auto</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 667 </font></span><font color="#cc0000">  qed</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 668 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 669 </font></span><font color="#cc0000">lemma &quot;&not; procInReadyQ s pp &and; part_id = fst pp &#10230; readySeek_D readyQ part_id &ne; Some (snd pp)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 670 </font></span><font color="#cc0000">  proof-</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 671 </font></span><font color="#cc0000">    {assume a00: &quot;&not; procInReadyQ s pp &and; part_id = fst pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 672 </font></span><font color="#cc0000">    have a10: &quot;readySeek_D readyQ part_id=</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 673 </font></span><font color="#cc0000">      (if &forall;proc_priority. (the (readyQ part_id))!proc_priority = [] then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 674 </font></span><font color="#cc0000">           None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 675 </font></span><font color="#cc0000">      else Some (fstProc_HiestPrority_D readyQ part_id))&quot; unfolding readySeek_D_def by auto</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 676 </font></span><font color="#cc0000">    have &quot;readySeek_D readyQ part_id &ne; Some (snd pp)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 677 </font></span><font color="#cc0000">      proof(cases &quot;&forall;proc_priority. (the (readyQ part_id))!proc_priority = []&quot;)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 678 </font></span><font color="#cc0000">      case True</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 679 </font></span><font color="#cc0000">        then show ?thesis using a00 a10 by auto</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 680 </font></span><font color="#cc0000">      next</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 681 </font></span><font color="#cc0000">      case False</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 682 </font></span><font color="#cc0000">        then show ?thesis sorry</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 683 </font></span><font color="#cc0000">      qed</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 684 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 685 </font></span><font color="#cc0000">    }</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 686 </font></span><font color="#cc0000">    thus ?thesis by auto</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 687 </font></span><font color="#cc0000">  qed</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 688 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 689 </font></span><font color="#cc0000">lemma &quot;&not; procInReadyQ s pp &and; snd pp &ne; IDLE_PROC_ID &#10230; schedAlgRT_D readyQ part_id &ne; (snd pp)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 690 </font></span><font color="#cc0000">  proof-</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 691 </font></span><font color="#cc0000">    {assume a00:&quot;&not; procInReadyQ s pp &and; snd pp &ne; IDLE_PROC_ID&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 692 </font></span><font color="#cc0000">    let ?proc_prio = &quot;getPriority s pp&quot; let ?part_id = &quot;fst pp&quot; let ?proc_id = &quot;snd pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 693 </font></span><font color="#cc0000">    let ?readyQAtPrio = &quot;getReadyProcLAtPri s ?part_id (the ?proc_prio)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 694 </font></span><font color="#cc0000">    have a10: &quot;procInReadyQ s pp &equiv; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 695 </font></span><font color="#cc0000">            ?proc_prio &ne; None &and; ?readyQAtPrio &ne; None &and;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 696 </font></span><font color="#cc0000">            (&exist;i&lt;length (the ?readyQAtPrio). (the ?readyQAtPrio)!i = ?proc_id)&quot; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 697 </font></span><font color="#cc0000">      unfolding procInReadyQ_def Let_def by auto</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 698 </font></span><font color="#cc0000">    have a11: &quot;schedAlgRT_D readyQ part_id &equiv;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 699 </font></span><font color="#cc0000">          if readySeek_D readyQ part_id = None then </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 700 </font></span><font color="#cc0000">             IDLE_PROC_ID</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 701 </font></span><font color="#cc0000">          else the (readySeek_D readyQ part_id)&quot; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 702 </font></span><font color="#cc0000">      unfolding schedAlgRT_D_def by auto</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 703 </font></span><font color="#cc0000">    have &quot;schedAlgRT_D readyQ part_id &ne; (snd pp)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 704 </font></span><font color="#cc0000">      proof(cases &quot;readySeek_D readyQ part_id&quot;)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 705 </font></span><font color="#cc0000">      case None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 706 </font></span><font color="#cc0000">        then show ?thesis using a10 a00 a11 by auto</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 707 </font></span><font color="#cc0000">      next</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 708 </font></span><font color="#cc0000">      case (Some pp')</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 709 </font></span><font color="#cc0000">        have &quot;schedAlgRT_D readyQ part_id &equiv; pp'&quot; using a11 Some by auto</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 710 </font></span><font color="#cc0000">        then show ?thesis sorry</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 711 </font></span><font color="#cc0000">      qed</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 712 </font></span><font color="#cc0000">    }</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 713 </font></span><font color="#cc0000">    thus ?thesis by auto</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 714 </font></span><font color="#cc0000">  qed</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 715 </font></span><font color="#cc0000">*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 716 </font></span><font color="#cc0000">(*</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 717 </font></span><font color="#cc0000">lemma getSta_schedule_Abs: &quot; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 718 </font></span><font color="#cc0000">                    ( (getProcSta s pp = Some WAITING &and; procInReadyQ s pp = False) &#10230; (getProcSta (schedule_Abs s core_id) pp = getProcSta s pp))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 719 </font></span><font color="#cc0000">proof-</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 720 </font></span><font color="#cc0000">  {assume a00: &quot;getProcSta s pp = Some WAITING&and; procInReadyQ s pp = False&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 721 </font></span><font color="#cc0000">   have &quot;getProcSta (schedule_Abs s core_id) pp = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 722 </font></span><font color="#cc0000">        procSta(procs_'  (let t = timer_' s; newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 723 </font></span><font color="#cc0000">      f_readyQ = readyQue (partitions_' s); newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 724 </font></span><font color="#cc0000">      f_procSta = procSta (procs_' s); f_curProc = curProc (partitions_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 725 </font></span><font color="#cc0000">      sched_proc_newPart = schedProc_Abs f_readyQ newPartID f_procSta f_curProc in </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 726 </font></span><font color="#cc0000">  s&#10631;partitions_' := (partitions_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 727 </font></span><font color="#cc0000">      &#10631;curPart := (curPart(partitions_' s))(core_id := Some newPartID),</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 728 </font></span><font color="#cc0000">      curProc := (curProc (partitions_' s))(newPartID := Some (snd(snd sched_proc_newPart))),</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 729 </font></span><font color="#cc0000">      readyQue := fst sched_proc_newPart&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 730 </font></span><font color="#cc0000">    procs_' := (procs_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 731 </font></span><font color="#cc0000">      &#10631;procSta := setProcSta' (fst (snd sched_proc_newPart)) (newPartID, (snd(snd sched_proc_newPart))) RUNNING&#10632;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 732 </font></span><font color="#cc0000">    &#10632;)) pp&quot; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 733 </font></span><font color="#cc0000">      unfolding schedule_Abs_def getProcSta_def by auto</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 734 </font></span><font color="#cc0000">   hence &quot;getProcSta (schedule_Abs s core_id) pp = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 735 </font></span><font color="#cc0000">        procSta(procs_'  (let t = timer_' s; newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 736 </font></span><font color="#cc0000">      f_readyQ = readyQue (partitions_' s); newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 737 </font></span><font color="#cc0000">      f_procSta = procSta (procs_' s); f_curProc = curProc (partitions_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 738 </font></span><font color="#cc0000">      sched_proc_newPart = schedProc_Abs f_readyQ newPartID f_procSta f_curProc in </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 739 </font></span><font color="#cc0000">  s&#10631;procs_' := (procs_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 740 </font></span><font color="#cc0000">      &#10631;procSta := setProcSta' (fst (snd sched_proc_newPart)) (newPartID, (snd(snd sched_proc_newPart))) RUNNING&#10632;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 741 </font></span><font color="#cc0000">    &#10632;)) pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 742 </font></span><font color="#cc0000">     by (smt (z3) StaProc_sched.simps(1) StaProc_sched.simps(3) StaProc_sched.surjective) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 743 </font></span><font color="#cc0000">   hence &quot;getProcSta (schedule_Abs s core_id) pp = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 744 </font></span><font color="#cc0000">        procSta(  (let t = timer_' s; newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 745 </font></span><font color="#cc0000">      f_readyQ = readyQue (partitions_' s); newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 746 </font></span><font color="#cc0000">      f_procSta = procSta (procs_' s); f_curProc = curProc (partitions_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 747 </font></span><font color="#cc0000">      sched_proc_newPart = schedProc_Abs f_readyQ newPartID f_procSta f_curProc in </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 748 </font></span><font color="#cc0000">  (procs_' s)&#10631;procSta := setProcSta' (fst (snd sched_proc_newPart)) (newPartID, (snd(snd sched_proc_newPart))) RUNNING&#10632;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 749 </font></span><font color="#cc0000">    )) pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 750 </font></span><font color="#cc0000">     by (smt (z3) StaProc_sched.simps(1) StaProc_sched.simps(3) StaProc_sched.surjective) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 751 </font></span><font color="#cc0000">   hence a2: &quot;getProcSta (schedule_Abs s core_id) pp = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 752 </font></span><font color="#cc0000">        (let t = timer_' s; newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 753 </font></span><font color="#cc0000">      f_readyQ = readyQue (partitions_' s); newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 754 </font></span><font color="#cc0000">      f_procSta = procSta (procs_' s); f_curProc = curProc (partitions_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 755 </font></span><font color="#cc0000">      sched_proc_newPart = schedProc_Abs f_readyQ newPartID f_procSta f_curProc in </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 756 </font></span><font color="#cc0000">   setProcSta' (fst (snd sched_proc_newPart)) (newPartID, (snd(snd sched_proc_newPart))) RUNNING</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 757 </font></span><font color="#cc0000">    ) pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 758 </font></span><font color="#cc0000">     by (metis (no_types, lifting) PROCS_STATE_TYPE.select_convs(2) PROCS_STATE_TYPE.surjective PROCS_STATE_TYPE.update_convs(2)) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 759 </font></span><font color="#cc0000">   hence a3: &quot;getProcSta (schedule_Abs s core_id) pp = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 760 </font></span><font color="#cc0000">        (let t = timer_' s; newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 761 </font></span><font color="#cc0000">      f_readyQ = readyQue (partitions_' s); newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 762 </font></span><font color="#cc0000">      f_procSta = procSta (procs_' s); f_curProc = curProc (partitions_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 763 </font></span><font color="#cc0000">      sched_proc_newPart = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 764 </font></span><font color="#cc0000">        (let curProc_id = the(f_curProc newPartID);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 765 </font></span><font color="#cc0000">          setCurRun2Ready = (case f_procSta (newPartID, curProc_id) of </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 766 </font></span><font color="#cc0000">                          Some RUNNING &rArr; setProcSta' f_procSta (newPartID, curProc_id) READY |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 767 </font></span><font color="#cc0000">                      _ &rArr; f_procSta) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 768 </font></span><font color="#cc0000">         (f_readyQ, setCurRun2Ready, schedAlgRT_D f_readyQ newPartID)) in </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 769 </font></span><font color="#cc0000">   setProcSta' (fst (snd sched_proc_newPart)) (newPartID, (snd(snd sched_proc_newPart))) RUNNING</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 770 </font></span><font color="#cc0000">    ) pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 771 </font></span><font color="#cc0000">     by (metis schedProc_Abs_def)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 772 </font></span><font color="#cc0000">  hence a4: &quot;getProcSta (schedule_Abs s core_id) pp = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 773 </font></span><font color="#cc0000">        (let t = timer_' s; newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 774 </font></span><font color="#cc0000">      f_readyQ = readyQue (partitions_' s); newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 775 </font></span><font color="#cc0000">      f_procSta = procSta (procs_' s); f_curProc = curProc (partitions_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 776 </font></span><font color="#cc0000">      sched_proc_newPart = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 777 </font></span><font color="#cc0000">        (let curProc_id = the(f_curProc newPartID);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 778 </font></span><font color="#cc0000">          setCurRun2Ready = (case f_procSta (newPartID, curProc_id) of </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 779 </font></span><font color="#cc0000">                          Some RUNNING &rArr; setProcSta' f_procSta (newPartID, curProc_id) READY |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 780 </font></span><font color="#cc0000">                      _ &rArr; f_procSta) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 781 </font></span><font color="#cc0000">         (f_readyQ, setCurRun2Ready, schedAlgRT_D f_readyQ newPartID)) in </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 782 </font></span><font color="#cc0000">   setProcSta' (fst (snd sched_proc_newPart)) (newPartID, (snd(snd sched_proc_newPart))) RUNNING</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 783 </font></span><font color="#cc0000">    ) pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 784 </font></span><font color="#cc0000">    by (metis schedProc_Abs_def)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 785 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 786 </font></span><font color="#cc0000">  let ?t = &quot;timer_' s&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 787 </font></span><font color="#cc0000">  let ?newPartID = &quot;schedPart core_id (int ?t)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 788 </font></span><font color="#cc0000">  let ?f_readyQ = &quot;readyQue (partitions_' s)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 789 </font></span><font color="#cc0000">  let ?newPartID = &quot;schedPart core_id (int ?t)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 790 </font></span><font color="#cc0000">  let ?f_procSta = &quot;procSta (procs_' s)&quot; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 791 </font></span><font color="#cc0000">  let ?f_curProc = &quot;curProc (partitions_' s)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 792 </font></span><font color="#cc0000">  let ?curProc_id = &quot;the(?f_curProc ?newPartID)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 793 </font></span><font color="#cc0000">  let ?setCurRun2Ready = &quot;(case ?f_procSta (?newPartID, ?curProc_id) of </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 794 </font></span><font color="#cc0000">                          Some RUNNING &rArr; setProcSta' ?f_procSta (?newPartID, ?curProc_id) READY |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 795 </font></span><font color="#cc0000">                      _ &rArr; ?f_procSta)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 796 </font></span><font color="#cc0000">  let ?sched_proc_newPart = &quot;(?f_readyQ, ?setCurRun2Ready, schedAlgRT_D ?f_readyQ ?newPartID)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 797 </font></span><font color="#cc0000">      </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 798 </font></span><font color="#cc0000">  have a5: &quot;(?f_procSta pp = Some WAITING &and; (?newPartID, ?curProc_id) =  pp) &#10230; ?f_procSta (?newPartID, ?curProc_id) = Some WAITING&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 799 </font></span><font color="#cc0000">   proof-</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 800 </font></span><font color="#cc0000">     {assume &quot;(?f_procSta pp = Some WAITING &and; (?newPartID, ?curProc_id) =  pp)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 801 </font></span><font color="#cc0000">       have &quot;?f_procSta (?newPartID, ?curProc_id) = Some WAITING&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 802 </font></span><font color="#cc0000">         using a4 a00 schedProc_Abs_def getProcSta_def</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 803 </font></span><font color="#cc0000"> </font><font color="#cc0000"> </font><font color="#cc0000"> </font><font color="#cc0000"> </font><font color="#cc0000"> </font><font color="#cc0000"> </font><font color="#cc0000"> </font><font color="#cc0000"> </font><font color="#cc0000"> </font><font color="#cc0000">b</font><font color="#cc0000">y</font><font color="#cc0000"> </font><font color="#cc0000">(</font><font color="#cc0000">m</font><font color="#cc0000">e</font><font color="#cc0000">t</font><font color="#cc0000">i</font><font color="#cc0000">s</font><font color="#cc0000"> </font><font color="#cc0000">&lsaquo;</font><font color="#cc0000">p</font><font color="#cc0000">r</font><font color="#cc0000">o</font><font color="#cc0000">c</font><font color="#cc0000">S</font><font color="#cc0000">t</font><font color="#cc0000">a</font><font color="#cc0000"> </font><font color="#cc0000">(</font><font color="#cc0000">p</font><font color="#cc0000">r</font><font color="#cc0000">o</font><font color="#cc0000">c</font><font color="#cc0000">s</font><font color="#cc0000">_</font><font color="#cc0000">'</font><font color="#cc0000"> </font><font color="#cc0000">s</font><font color="#cc0000">)</font><font color="#cc0000"> </font><font color="#cc0000">p</font><font color="#cc0000">p</font><font color="#cc0000"> </font><font color="#cc0000">=</font><font color="#cc0000"> </font><font color="#cc0000">S</font><font color="#cc0000">o</font><font color="#cc0000">m</font><font color="#cc0000">e</font><font color="#cc0000"> </font><font color="#cc0000">W</font><font color="#cc0000">A</font><font color="#cc0000">I</font><font color="#cc0000">T</font><font color="#cc0000">I</font><font color="#cc0000">N</font><font color="#cc0000">G</font><font color="#cc0000"> </font><font color="#cc0000">&and;</font><font color="#cc0000"> </font><font color="#cc0000">(</font><font color="#cc0000">s</font><font color="#cc0000">c</font><font color="#cc0000">h</font><font color="#cc0000">e</font><font color="#cc0000">d</font><font color="#cc0000">P</font><font color="#cc0000">a</font><font color="#cc0000">r</font><font color="#cc0000">t</font><font color="#cc0000"> </font><font color="#cc0000">c</font><font color="#cc0000">o</font><font color="#cc0000">r</font><font color="#cc0000">e</font><font color="#cc0000">_</font><font color="#cc0000">i</font><font color="#cc0000">d</font><font color="#cc0000"> </font><font color="#cc0000">(</font><font color="#cc0000">i</font><font color="#cc0000">n</font><font color="#cc0000">t</font><font color="#cc0000"> </font><font color="#cc0000">(</font><font color="#cc0000">t</font><font color="#cc0000">i</font><font color="#cc0000">m</font><font color="#cc0000">e</font><font color="#cc0000">r</font><font color="#cc0000">_</font><font color="#cc0000">'</font><font color="#cc0000"> </font><font color="#cc0000">s</font><font color="#cc0000">)</font><font color="#cc0000">)</font><font color="#cc0000">,</font><font color="#cc0000"> </font><font color="#cc0000">t</font><font color="#cc0000">h</font><font color="#cc0000">e</font><font color="#cc0000"> </font><font color="#cc0000">(</font><font color="#cc0000">c</font><font color="#cc0000">u</font><font color="#cc0000">r</font><font color="#cc0000">P</font><font color="#cc0000">r</font><font color="#cc0000">o</font><font color="#cc0000">c</font><font color="#cc0000"> </font><font color="#cc0000">(</font><font color="#cc0000">p</font><font color="#cc0000">a</font><font color="#cc0000">r</font><font color="#cc0000">t</font><font color="#cc0000">i</font><font color="#cc0000">t</font><font color="#cc0000">i</font><font color="#cc0000">o</font><font color="#cc0000">n</font><font color="#cc0000">s</font><font color="#cc0000">_</font><font color="#cc0000">'</font><font color="#cc0000"> </font><font color="#cc0000">s</font><font color="#cc0000">)</font><font color="#cc0000"> </font><font color="#cc0000">(</font><font color="#cc0000">s</font><font color="#cc0000">c</font><font color="#cc0000">h</font><font color="#cc0000">e</font><font color="#cc0000">d</font><font color="#cc0000">P</font><font color="#cc0000">a</font><font color="#cc0000">r</font><font color="#cc0000">t</font><font color="#cc0000"> </font><font color="#cc0000">c</font><font color="#cc0000">o</font><font color="#cc0000">r</font><font color="#cc0000">e</font><font color="#cc0000">_</font><font color="#cc0000">i</font><font color="#cc0000">d</font><font color="#cc0000"> </font><font color="#cc0000">(</font><font color="#cc0000">i</font><font color="#cc0000">n</font><font color="#cc0000">t</font><font color="#cc0000"> </font><font color="#cc0000">(</font><font color="#cc0000">t</font><font color="#cc0000">i</font><font color="#cc0000">m</font><font color="#cc0000">e</font><font color="#cc0000">r</font><font color="#cc0000">_</font><font color="#cc0000">'</font><font color="#cc0000"> </font><font color="#cc0000">s</font><font color="#cc0000">)</font><font color="#cc0000">)</font><font color="#cc0000">)</font><font color="#cc0000">)</font><font color="#cc0000">)</font><font color="#cc0000"> </font><font color="#cc0000">=</font><font color="#cc0000"> </font><font color="#cc0000">p</font><font color="#cc0000">p</font><font color="#cc0000">&rsaquo;</font><font color="#cc0000">)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 804 </font></span><font color="#cc0000">     }</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 805 </font></span><font color="#cc0000">     then show ?thesis by auto</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 806 </font></span><font color="#cc0000">   qed</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 807 </font></span><font color="#cc0000">  </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 808 </font></span><font color="#cc0000">  hence a6: &quot;((?newPartID, ?curProc_id) =  pp) &#10230;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 809 </font></span><font color="#cc0000">          (getProcSta (schedule_Abs s core_id) pp = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 810 </font></span><font color="#cc0000">        (let t = timer_' s; newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 811 </font></span><font color="#cc0000">      f_readyQ = readyQue (partitions_' s); newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 812 </font></span><font color="#cc0000">      f_procSta = procSta (procs_' s); f_curProc = curProc (partitions_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 813 </font></span><font color="#cc0000">      sched_proc_newPart = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 814 </font></span><font color="#cc0000">        (let curProc_id = the(f_curProc newPartID);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 815 </font></span><font color="#cc0000">          setCurRun2Ready =  f_procSta in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 816 </font></span><font color="#cc0000">         (f_readyQ, setCurRun2Ready, schedAlgRT_D f_readyQ newPartID)) in </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 817 </font></span><font color="#cc0000">   setProcSta' (fst (snd sched_proc_newPart)) (newPartID, (snd(snd sched_proc_newPart))) RUNNING</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 818 </font></span><font color="#cc0000">    ) pp)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 819 </font></span><font color="#cc0000">    by (metis (no_types, hide_lams) PROC_STATE_TYPE.simps(24) a00 a4 getProcSta_def option.simps(5))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 820 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 821 </font></span><font color="#cc0000">  hence a7: &quot;((?newPartID, ?curProc_id) &ne;  pp) &#10230; (?setCurRun2Ready pp = procSta (procs_' s)pp)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 822 </font></span><font color="#cc0000">    by (smt (z3) PROC_STATE_TYPE.exhaust PROC_STATE_TYPE.simps(21) PROC_STATE_TYPE.simps(22) PROC_STATE_TYPE.simps(23) PROC_STATE_TYPE.simps(24) PROC_STATE_TYPE.simps(25) fun_upd_apply option.case_eq_if setProcSta'_def)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 823 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 824 </font></span><font color="#cc0000">  hence a8: &quot;((?newPartID, ?curProc_id) =  pp) &#10230; (?setCurRun2Ready pp = procSta (procs_' s)pp)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 825 </font></span><font color="#cc0000">    by (metis (no_types, hide_lams) PROC_STATE_TYPE.simps(24) a00 getProcSta_def option.simps(5))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 826 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 827 </font></span><font color="#cc0000">  hence a10_u: &quot;(?setCurRun2Ready pp = procSta (procs_' s)pp)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 828 </font></span><font color="#cc0000">   proof -</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 829 </font></span><font color="#cc0000">     show ?thesis</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 830 </font></span><font color="#cc0000">       using a7 a8 by auto</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 831 </font></span><font color="#cc0000">   qed</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 832 </font></span><font color="#cc0000">   hence a11: &quot;(snd(snd ?sched_proc_newPart)) &ne; (snd pp)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 833 </font></span><font color="#cc0000">    proof-</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 834 </font></span><font color="#cc0000">      have &quot;&not; procInReadyQ s pp &#10230; schedAlgRT_D ?f_readyQ ?newPartID &ne; (snd pp)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 835 </font></span><font color="#cc0000">        proof-</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 836 </font></span><font color="#cc0000">          </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 837 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 838 </font></span><font color="#cc0000">        qed</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 839 </font></span><font color="#cc0000">       </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 840 </font></span><font color="#cc0000">    hence &quot;getProcSta s pp = Some WAITING &#10230; getProcSta (schedule_Abs s core_id) pp = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 841 </font></span><font color="#cc0000">        procSta(procs_' s) pp&quot;  using a00 a3 getProcSta_def schedule_Abs_def schedProc_Abs_def </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 842 </font></span><font color="#cc0000">  </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 843 </font></span><font color="#cc0000">  }</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 844 </font></span><font color="#cc0000">     thus ?thesis unfolding getCterRsc_def sorry</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 845 </font></span><font color="#cc0000">  qed*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 846 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 847 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 848 </font></span><font color="#006699"><strong>lemma</strong></font> getSta_schedule_Abs'<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 849 </font></span><font color="#ff00cc">                    (&exist;proc_id. (procSta (procs_' s)) ((schedPart core_id (int (timer_' s))), proc_id) = Some READY) &and;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 850 </font></span><font color="#ff00cc">                     getProcSta s pp = Some WAITING &#10230; (getProcSta (schedule_Abs' s core_id) pp = getProcSta s pp)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 851 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 852 </font></span>  <font color="#006699"><strong>let</strong></font> ?t <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;timer_' s&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 853 </font></span>  <font color="#006699"><strong>let</strong></font> ?newPartID <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;schedPart core_id (int ?t)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 854 </font></span>  <font color="#006699"><strong>let</strong></font> ?f_readyQ <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;readyQue (partitions_' s)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 855 </font></span>  <font color="#006699"><strong>let</strong></font> ?newPartID <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;schedPart core_id (int ?t)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 856 </font></span>  <font color="#006699"><strong>let</strong></font> ?f_procSta <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;procSta (procs_' s)&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 857 </font></span>  <font color="#006699"><strong>let</strong></font> ?f_curProc <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curProc (partitions_' s)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 858 </font></span>  <font color="#006699"><strong>let</strong></font> ?curProc_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;the(?f_curProc ?newPartID)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 859 </font></span>  <font color="#006699"><strong>let</strong></font> ?setCurRun2Ready <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;(case ?f_procSta (?newPartID, ?curProc_id) of </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 860 </font></span><font color="#ff00cc">                          Some RUNNING &rArr; setProcSta' ?f_procSta (?newPartID, ?curProc_id) READY |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 861 </font></span><font color="#ff00cc">                      _ &rArr; ?f_procSta)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 862 </font></span>  <font color="#006699"><strong>let</strong></font> ?new_proc_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;SOME proc_id. ?f_procSta (?newPartID, proc_id) = Some READY&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 863 </font></span>  <font color="#006699"><strong>let</strong></font> ?sched_proc_newPart <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;(?setCurRun2Ready, ?new_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 864 </font></span>      
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 865 </font></span>  <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>assume</strong></font> a00<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot; (&exist;proc_id. ?f_procSta (?newPartID, proc_id) = Some READY) &and;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 866 </font></span><font color="#ff00cc">                     getProcSta s pp = Some WAITING&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 867 </font></span>    <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getProcSta (schedule_Abs' s core_id) pp = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 868 </font></span><font color="#ff00cc">        procSta(procs_'  </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 869 </font></span><font color="#ff00cc">          (let t = timer_' s; newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 870 </font></span><font color="#ff00cc">      f_readyQ = readyQue (partitions_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 871 </font></span><font color="#ff00cc">      f_procSta = procSta (procs_' s); f_curProc = curProc (partitions_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 872 </font></span><font color="#ff00cc">      sched_proc_newPart = schedProc_Abs' f_readyQ newPartID f_procSta f_curProc in </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 873 </font></span><font color="#ff00cc">  s&#10631;partitions_' := (partitions_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 874 </font></span><font color="#ff00cc">      &#10631;curPart := (curPart(partitions_' s))(core_id := Some newPartID),</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 875 </font></span><font color="#ff00cc">      curProc := (curProc (partitions_' s))(newPartID := Some (snd sched_proc_newPart))&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 876 </font></span><font color="#ff00cc">    procs_' := (procs_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 877 </font></span><font color="#ff00cc">      &#10631;procSta := setProcSta' (fst ( sched_proc_newPart)) (newPartID, (snd sched_proc_newPart)) RUNNING&#10632;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 878 </font></span><font color="#ff00cc">    &#10632;)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 879 </font></span><font color="#ff00cc">      ) pp&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 880 </font></span>      <font color="#006699"><strong>unfolding</strong></font> schedule_Abs'_def getProcSta_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 881 </font></span>   <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getProcSta (schedule_Abs' s core_id) pp = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 882 </font></span><font color="#ff00cc">        procSta(procs_'  </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 883 </font></span><font color="#ff00cc">          (let t = timer_' s; newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 884 </font></span><font color="#ff00cc">      f_readyQ = readyQue (partitions_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 885 </font></span><font color="#ff00cc">      f_procSta = procSta (procs_' s); f_curProc = curProc (partitions_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 886 </font></span><font color="#ff00cc">      sched_proc_newPart = schedProc_Abs' f_readyQ newPartID f_procSta f_curProc in </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 887 </font></span><font color="#ff00cc">    s&#10631;procs_' := (procs_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 888 </font></span><font color="#ff00cc">      &#10631;procSta := setProcSta' (fst ( sched_proc_newPart)) (newPartID, (snd sched_proc_newPart)) RUNNING&#10632;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 889 </font></span><font color="#ff00cc">    &#10632;)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 890 </font></span><font color="#ff00cc">      ) pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 891 </font></span>     <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> StaProc_sched.simps<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> StaProc_sched.simps<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font> StaProc_sched.surjective<font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 892 </font></span>   <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getProcSta (schedule_Abs' s core_id) pp = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 893 </font></span><font color="#ff00cc">        procSta(  </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 894 </font></span><font color="#ff00cc">          (let t = timer_' s; newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 895 </font></span><font color="#ff00cc">      f_readyQ = readyQue (partitions_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 896 </font></span><font color="#ff00cc">      f_procSta = procSta (procs_' s); f_curProc = curProc (partitions_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 897 </font></span><font color="#ff00cc">      sched_proc_newPart = schedProc_Abs' f_readyQ newPartID f_procSta f_curProc in </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 898 </font></span><font color="#ff00cc">    (procs_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 899 </font></span><font color="#ff00cc">      &#10631;procSta := setProcSta' (fst ( sched_proc_newPart)) (newPartID, (snd sched_proc_newPart)) RUNNING&#10632;)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 900 </font></span><font color="#ff00cc">      ) pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 901 </font></span>     <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> StaProc_sched.simps<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> StaProc_sched.simps<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font> StaProc_sched.surjective<font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 902 </font></span>   <font color="#006699"><strong>hence</strong></font> a2<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcSta (schedule_Abs' s core_id) pp = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 903 </font></span><font color="#ff00cc">        ((let t = timer_' s; newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 904 </font></span><font color="#ff00cc">      f_readyQ = readyQue (partitions_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 905 </font></span><font color="#ff00cc">      f_procSta = procSta (procs_' s); f_curProc = curProc (partitions_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 906 </font></span><font color="#ff00cc">      sched_proc_newPart = schedProc_Abs' f_readyQ newPartID f_procSta f_curProc in </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 907 </font></span><font color="#ff00cc">     setProcSta' (fst ( sched_proc_newPart)) (newPartID, (snd sched_proc_newPart)) RUNNING)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 908 </font></span><font color="#ff00cc">      ) pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 909 </font></span>     <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> PROCS_STATE_TYPE.select_convs<font color="#000000"><strong>(</strong></font>2<font color="#000000"><strong>)</strong></font> PROCS_STATE_TYPE.surjective PROCS_STATE_TYPE.update_convs<font color="#000000"><strong>(</strong></font>2<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 910 </font></span>   <font color="#006699"><strong>hence</strong></font> a3<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcSta (schedule_Abs' s core_id) pp = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 911 </font></span><font color="#ff00cc">        ((let t = timer_' s; newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 912 </font></span><font color="#ff00cc">      f_readyQ = readyQue (partitions_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 913 </font></span><font color="#ff00cc">      f_procSta = procSta (procs_' s); f_curProc = curProc (partitions_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 914 </font></span><font color="#ff00cc">      sched_proc_newPart = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 915 </font></span><font color="#ff00cc">            (let curProc_id = the(f_curProc newPartID);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 916 </font></span><font color="#ff00cc">             setCurRun2Ready = (case f_procSta (newPartID, curProc_id) of </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 917 </font></span><font color="#ff00cc">                  Some RUNNING &rArr; setProcSta' f_procSta (newPartID, curProc_id) READY |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 918 </font></span><font color="#ff00cc">                  _ &rArr; f_procSta);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 919 </font></span><font color="#ff00cc">           new_proc_id = (SOME proc_id. f_procSta (newPartID, proc_id) = Some READY) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 920 </font></span><font color="#ff00cc">          (setCurRun2Ready, new_proc_id))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 921 </font></span><font color="#ff00cc">          in </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 922 </font></span><font color="#ff00cc">     setProcSta' (fst  sched_proc_newPart) (newPartID, (snd sched_proc_newPart)) RUNNING)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 923 </font></span><font color="#ff00cc">      ) pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 924 </font></span>     <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> Eps_cong schedProc_Abs'_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 925 </font></span>   <font color="#006699"><strong>hence</strong></font> a5<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;(?f_procSta pp = Some WAITING &and; (?newPartID, ?curProc_id) =  pp) &#10230; ?f_procSta (?newPartID, ?curProc_id) = Some WAITING&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 926 </font></span>   <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 927 </font></span>     <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>assume</strong></font> <font color="#ff00cc">&quot;(?f_procSta pp = Some WAITING &and; (?newPartID, ?curProc_id) =  pp)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 928 </font></span>       <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?f_procSta (?newPartID, ?curProc_id) = Some WAITING&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 929 </font></span>         <font color="#006699"><strong>using</strong></font> a3 a00 schedProc_Abs_def getProcSta_def
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 930 </font></span>         <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#6600cc">&lsaquo;</font><font color="#6600cc">p</font><font color="#6600cc">r</font><font color="#6600cc">o</font><font color="#6600cc">c</font><font color="#6600cc">S</font><font color="#6600cc">t</font><font color="#6600cc">a</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">p</font><font color="#6600cc">r</font><font color="#6600cc">o</font><font color="#6600cc">c</font><font color="#6600cc">s</font><font color="#6600cc">_</font><font color="#6600cc">'</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc">)</font><font color="#6600cc"> </font><font color="#6600cc">p</font><font color="#6600cc">p</font><font color="#6600cc"> </font><font color="#6600cc">=</font><font color="#6600cc"> </font><font color="#6600cc">S</font><font color="#6600cc">o</font><font color="#6600cc">m</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">W</font><font color="#6600cc">A</font><font color="#6600cc">I</font><font color="#6600cc">T</font><font color="#6600cc">I</font><font color="#6600cc">N</font><font color="#6600cc">G</font><font color="#6600cc"> </font><font color="#6600cc">&and;</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">s</font><font color="#6600cc">c</font><font color="#6600cc">h</font><font color="#6600cc">e</font><font color="#6600cc">d</font><font color="#6600cc">P</font><font color="#6600cc">a</font><font color="#6600cc">r</font><font color="#6600cc">t</font><font color="#6600cc"> </font><font color="#6600cc">c</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc">_</font><font color="#6600cc">i</font><font color="#6600cc">d</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">i</font><font color="#6600cc">n</font><font color="#6600cc">t</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">t</font><font color="#6600cc">i</font><font color="#6600cc">m</font><font color="#6600cc">e</font><font color="#6600cc">r</font><font color="#6600cc">_</font><font color="#6600cc">'</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc">)</font><font color="#6600cc">)</font><font color="#6600cc">,</font><font color="#6600cc"> </font><font color="#6600cc">t</font><font color="#6600cc">h</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">c</font><font color="#6600cc">u</font><font color="#6600cc">r</font><font color="#6600cc">P</font><font color="#6600cc">r</font><font color="#6600cc">o</font><font color="#6600cc">c</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">p</font><font color="#6600cc">a</font><font color="#6600cc">r</font><font color="#6600cc">t</font><font color="#6600cc">i</font><font color="#6600cc">t</font><font color="#6600cc">i</font><font color="#6600cc">o</font><font color="#6600cc">n</font><font color="#6600cc">s</font><font color="#6600cc">_</font><font color="#6600cc">'</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc">)</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">s</font><font color="#6600cc">c</font><font color="#6600cc">h</font><font color="#6600cc">e</font><font color="#6600cc">d</font><font color="#6600cc">P</font><font color="#6600cc">a</font><font color="#6600cc">r</font><font color="#6600cc">t</font><font color="#6600cc"> </font><font color="#6600cc">c</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc">_</font><font color="#6600cc">i</font><font color="#6600cc">d</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">i</font><font color="#6600cc">n</font><font color="#6600cc">t</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">t</font><font color="#6600cc">i</font><font color="#6600cc">m</font><font color="#6600cc">e</font><font color="#6600cc">r</font><font color="#6600cc">_</font><font color="#6600cc">'</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc">)</font><font color="#6600cc">)</font><font color="#6600cc">)</font><font color="#6600cc">)</font><font color="#6600cc">)</font><font color="#6600cc"> </font><font color="#6600cc">=</font><font color="#6600cc"> </font><font color="#6600cc">p</font><font color="#6600cc">p</font><font color="#6600cc">&rsaquo;</font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 931 </font></span>     <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 932 </font></span>     <font color="#006699"><strong>then</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 933 </font></span>   <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 934 </font></span>  <font color="#006699"><strong>hence</strong></font> a7<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;((?newPartID, ?curProc_id) &ne;  pp) &#10230; (?setCurRun2Ready pp = procSta (procs_' s)pp)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 935 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.exhaust PROC_STATE_TYPE.simps<font color="#000000"><strong>(</strong></font>21<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.simps<font color="#000000"><strong>(</strong></font>22<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.simps<font color="#000000"><strong>(</strong></font>23<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.simps<font color="#000000"><strong>(</strong></font>24<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.simps<font color="#000000"><strong>(</strong></font>25<font color="#000000"><strong>)</strong></font> fun_upd_apply option.case_eq_if setProcSta'_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 936 </font></span>  <font color="#006699"><strong>hence</strong></font> a8<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;((?newPartID, ?curProc_id) =  pp) &#10230; (?setCurRun2Ready pp = procSta (procs_' s)pp)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 937 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> hide_lams<font color="#000000"><strong>)</strong></font> PROC_STATE_TYPE.simps<font color="#000000"><strong>(</strong></font>24<font color="#000000"><strong>)</strong></font> a00 getProcSta_def option.simps<font color="#000000"><strong>(</strong></font>5<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 938 </font></span>  <font color="#006699"><strong>hence</strong></font> a10_u<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;(?setCurRun2Ready pp = procSta (procs_' s)pp)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 939 </font></span>   <font color="#006699"><strong>proof</strong></font> -
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 940 </font></span>     <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 941 </font></span>       <font color="#006699"><strong>using</strong></font> a7 a8 <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 942 </font></span>   <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 943 </font></span>   <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;(fst ?sched_proc_newPart) pp = procSta (procs_' s)pp &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 944 </font></span>     <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis fst_conv<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 945 </font></span>  <font color="#006699"><strong>hence</strong></font> a10_1<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;(fst ?sched_proc_newPart) pp = getProcSta s pp &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 946 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis getProcSta_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 947 </font></span>   <font color="#006699"><strong>hence</strong></font> a11<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?new_proc_id = (SOME proc_id. ?f_procSta (?newPartID, proc_id) = Some READY)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 948 </font></span>     <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> hide_lams<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 949 </font></span>   <font color="#006699"><strong>hence</strong></font> a12<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?f_procSta (?newPartID, ?new_proc_id) = Some READY&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 950 </font></span>   <font color="#006699"><strong>proof</strong></font> -
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 951 </font></span>     <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&exist;i. procSta (procs_' s) (schedPart core_id (int (timer_' s)), i) = Some READY&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 952 </font></span>       <font color="#006699"><strong>using</strong></font> a00 <font color="#006699"><strong>by</strong></font> blast
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 953 </font></span>     <font color="#006699"><strong>then</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 954 </font></span>       <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> verit_sko_ex'<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 955 </font></span>   <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 956 </font></span>   <font color="#006699"><strong>hence</strong></font> a13<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;(?newPartID, ?new_proc_id) &ne; pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 957 </font></span>     <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis PROC_STATE_TYPE.distinct<font color="#000000"><strong>(</strong></font>11<font color="#000000"><strong>)</strong></font> a00 getProcSta_def option.sel<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 958 </font></span>   <font color="#006699"><strong>hence</strong></font> a14<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;(setProcSta' (fst ?sched_proc_newPart) (?newPartID, (snd ?sched_proc_newPart)) RUNNING) pp = procSta (procs_' s)pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 959 </font></span>     <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> a10_u fst_conv fun_upd_apply setProcSta'_def snd_conv<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 960 </font></span>   <font color="#006699"><strong>hence</strong></font> a15<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;(setProcSta' (fst ?sched_proc_newPart) (?newPartID, (snd ?sched_proc_newPart)) RUNNING) pp = getProcSta s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 961 </font></span>     <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis a10_1 a10_u fst_conv<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 962 </font></span>   <font color="#006699"><strong>hence</strong></font> a16<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcSta (schedule_Abs' s core_id) pp = (setProcSta' (fst ?sched_proc_newPart) (?newPartID, (snd ?sched_proc_newPart)) RUNNING) pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 963 </font></span>     <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis a3<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 964 </font></span>   <font color="#006699"><strong>hence</strong></font> a17<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcSta (schedule_Abs' s core_id) pp = getProcSta s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 965 </font></span>     <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>full_types<font color="#000000"><strong>)</strong></font> a15<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 966 </font></span> <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 967 </font></span>  <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>unfolding</strong></font> schedule_Abs'_def 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 968 </font></span>    <font color="#006699"><strong>by</strong></font> metis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 969 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 970 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 971 </font></span><font color="#006699"><strong>lemma</strong></font> getSta_setCurPartLock<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcSta (setCurPartLock s core_id lk) pp </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 972 </font></span><font color="#ff00cc">                          = getProcSta s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 973 </font></span>  <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 974 </font></span>    <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getProcSta (setCurPartLock s core_id lk) pp </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 975 </font></span><font color="#ff00cc">         =(procSta (procs_' (setPartLockS s (the ((curPart(partitions_' s))core_id)) lk)))pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 976 </font></span>      <font color="#006699"><strong>unfolding</strong></font> getProcSta_def setCurPartLock_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 977 </font></span>    <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getProcSta (setCurPartLock s core_id lk) pp </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 978 </font></span><font color="#ff00cc">         =(procSta (procs_' (s&#10631;partitions_' := (partitions_' s) &#10631;lockLvl := (lockLvl (partitions_' s))((the ((curPart(partitions_' s))core_id)) := Some lk)&#10632;&#10632;)))pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 979 </font></span>      <font color="#006699"><strong>unfolding</strong></font> setPartLockS_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 980 </font></span>    <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getProcSta (setCurPartLock s core_id lk) pp </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 981 </font></span><font color="#ff00cc">         =procSta (procs_' s)pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 982 </font></span>      <font color="#006699"><strong>unfolding</strong></font> setPartLockS_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 983 </font></span>    <font color="#0099ff"><strong>thus</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 984 </font></span>      <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis getProcSta_def<font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 985 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 986 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 987 </font></span><font color="#006699"><strong>lemma</strong></font> getSta_resetUserPLMtxLck<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcSta (resetUserPLMtxLck s (part_id,mtx_id)) pp </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 988 </font></span><font color="#ff00cc">                          = getProcSta s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 989 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getProcSta_def resetUserPLMtxLck_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 990 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 991 </font></span><font color="#006699"><strong>lemma</strong></font> getSta_setUserPLMtxAVAILABLE<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcSta (setUserPLMtxAVAILABLE s (part_id,mtx_id)) pp </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 992 </font></span><font color="#ff00cc">                          = getProcSta s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 993 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getProcSta_def setUserPLMtxAVAILABLE_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 994 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 995 </font></span><font color="#006699"><strong>lemma</strong></font> getSta_releaseUserPLMtxOwner<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcSta (releaseUserPLMtxOwner s (part_id,mtx_id)) pp </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 996 </font></span><font color="#ff00cc">                          = getProcSta s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 997 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getProcSta_def releaseUserPLMtxOwner_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 998 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 999 </font></span><font color="#006699"><strong>lemma</strong></font> getSta_restoreCurPrioUPLMtx<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcSta (restoreCurPrioUPLMtx s pu pp) pp </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1000 </font></span><font color="#ff00cc">                          = getProcSta s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1001 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1002 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getProcSta (restoreCurPrioUPLMtx s pu pp) pp=</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1003 </font></span><font color="#ff00cc">        (procSta (procs_' (setPriority s pp (the(mtxRtnPrio(user_pl_Mtx_' s)pu)))))pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1004 </font></span>    <font color="#006699"><strong>unfolding</strong></font> getProcSta_def restoreCurPrioUPLMtx_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1005 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getProcSta (restoreCurPrioUPLMtx s pu pp) pp=</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1006 </font></span><font color="#ff00cc">        (procSta (procs_' ((let proc_sta = procs_' s in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1007 </font></span><font color="#ff00cc">  s&#10631;procs_' := proc_sta&#10631;curPriority := (curPriority proc_sta)(pp := Some  (the(mtxRtnPrio(user_pl_Mtx_' s)pu)))&#10632;&#10632;) )))pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1008 </font></span>    <font color="#006699"><strong>unfolding</strong></font> setPriority_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1009 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getProcSta (restoreCurPrioUPLMtx s pu pp) pp=</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1010 </font></span><font color="#ff00cc">        (procSta (procs_' (s&#10631;procs_' := (procs_' s)&#10631;curPriority := (curPriority (procs_' s))(pp := Some  (the(mtxRtnPrio(user_pl_Mtx_' s)pu)))&#10632;&#10632; )))pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1011 </font></span>     <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1012 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getProcSta (restoreCurPrioUPLMtx s pu pp) pp=</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1013 </font></span><font color="#ff00cc">        (procSta (procs_' s))pp&quot;</font> <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1014 </font></span>  <font color="#0099ff"><strong>thus</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1015 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis getProcSta_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1016 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1017 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1018 </font></span><font color="#006699"><strong>lemma</strong></font> getSta_rscQPop<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcSta (fst(rscQPop s rsc_id)) pp </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1019 </font></span><font color="#ff00cc">                          = getProcSta s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1020 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1021 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getProcSta (fst(rscQPop s rsc_id)) pp</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1022 </font></span><font color="#ff00cc">        = (procSta (procs_' </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1023 </font></span><font color="#ff00cc">        (fst(let rsc_pend_procs = rscPendProcs_' s;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1024 </font></span><font color="#ff00cc">      rsc_id_que = rscQue rsc_pend_procs rsc_id in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1025 </font></span><font color="#ff00cc">  case rsc_id_que of</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1026 </font></span><font color="#ff00cc">     None &rArr; (s, None) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1027 </font></span><font color="#ff00cc">  Some [] &rArr; (s, None) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1028 </font></span><font color="#ff00cc">   Some l &rArr; (s&#10631;rscPendProcs_' := rsc_pend_procs&#10631;rscQue := (rscQue rsc_pend_procs) (rsc_id := Some (tl (the rsc_id_que)))&#10632;&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1029 </font></span><font color="#ff00cc">              Some (hd l)))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1030 </font></span><font color="#ff00cc">        )))pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1031 </font></span>    <font color="#006699"><strong>using</strong></font> getProcSta_def rscQPop_def 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1032 </font></span>    <font color="#006699"><strong>by</strong></font> metis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1033 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getProcSta (fst(rscQPop s rsc_id)) pp</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1034 </font></span><font color="#ff00cc">        = ( </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1035 </font></span><font color="#ff00cc">        ((let rsc_pend_procs = rscPendProcs_' s;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1036 </font></span><font color="#ff00cc">      rsc_id_que = rscQue rsc_pend_procs rsc_id in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1037 </font></span><font color="#ff00cc">  case rsc_id_que of</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1038 </font></span><font color="#ff00cc">     None &rArr; procSta (procs_' (fst(s, None))) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1039 </font></span><font color="#ff00cc">  Some [] &rArr; procSta (procs_' (fst(s, None))) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1040 </font></span><font color="#ff00cc">   Some l &rArr; procSta (procs_' (fst(s&#10631;rscPendProcs_' := rsc_pend_procs&#10631;rscQue := (rscQue rsc_pend_procs) (rsc_id := Some (tl (the rsc_id_que)))&#10632;&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1041 </font></span><font color="#ff00cc">              Some (hd l))))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1042 </font></span><font color="#ff00cc">        ))  )pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1043 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> fst_conv list.case_eq_if option.case_eq_if<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1044 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getProcSta (fst(rscQPop s rsc_id)) pp</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1045 </font></span><font color="#ff00cc">        = ( </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1046 </font></span><font color="#ff00cc">        ((let rsc_pend_procs = rscPendProcs_' s;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1047 </font></span><font color="#ff00cc">      rsc_id_que = rscQue rsc_pend_procs rsc_id in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1048 </font></span><font color="#ff00cc">  case rsc_id_que of</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1049 </font></span><font color="#ff00cc">     None &rArr; procSta (procs_' s) pp |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1050 </font></span><font color="#ff00cc">  Some [] &rArr; procSta (procs_' s) pp|</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1051 </font></span><font color="#ff00cc">   Some l &rArr; procSta (procs_' (fst(s&#10631;rscPendProcs_' := rsc_pend_procs&#10631;rscQue := (rscQue rsc_pend_procs) (rsc_id := Some (tl (the rsc_id_que)))&#10632;&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1052 </font></span><font color="#ff00cc">              Some (hd l)))) pp</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1053 </font></span><font color="#ff00cc">        ))  )&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1054 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>verit<font color="#000000"><strong>,</strong></font> best<font color="#000000"><strong>)</strong></font> fst_eqD list.case_eq_if option.case_eq_if<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1055 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1056 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getProcSta (fst(rscQPop s rsc_id)) pp</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1057 </font></span><font color="#ff00cc">        = ( </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1058 </font></span><font color="#ff00cc">  case (rscQue (rscPendProcs_' s) rsc_id) of</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1059 </font></span><font color="#ff00cc">     None &rArr; procSta (procs_' s) pp |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1060 </font></span><font color="#ff00cc">  Some [] &rArr; procSta (procs_' s) pp|</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1061 </font></span><font color="#ff00cc">   Some l &rArr; procSta (procs_' (s&#10631;rscPendProcs_' := (rscPendProcs_' s)&#10631;rscQue := (rscQue (rscPendProcs_' s)) (rsc_id := Some (tl (the (rscQue (rscPendProcs_' s) rsc_id))))&#10632;&#10632; )) pp</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1062 </font></span><font color="#ff00cc">          )&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1063 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> fst_conv list.case_eq_if option.case_eq_if <font color="#000000"><strong>)</strong></font>   
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1064 </font></span> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1065 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getProcSta (fst(rscQPop s rsc_id)) pp</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1066 </font></span><font color="#ff00cc">        = ( </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1067 </font></span><font color="#ff00cc">  case (rscQue (rscPendProcs_' s) rsc_id) of</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1068 </font></span><font color="#ff00cc">     None &rArr; procSta (procs_' s) pp |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1069 </font></span><font color="#ff00cc">  Some [] &rArr; procSta (procs_' s) pp|</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1070 </font></span><font color="#ff00cc">   Some l &rArr; procSta (procs_' s) pp</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1071 </font></span><font color="#ff00cc">          )&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1072 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> list.case_eq_if option.case_eq_if<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1073 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1074 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getProcSta (fst(rscQPop s rsc_id)) pp</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1075 </font></span><font color="#ff00cc">        = procSta (procs_' s) pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1076 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> list.case_eq_if option.case_eq_if<font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1077 </font></span>  <font color="#0099ff"><strong>thus</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1078 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> getProcSta_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1079 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1080 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1081 </font></span><font color="#006699"><strong>lemma</strong></font> getSta_StopTCounter<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcSta (StopTCounter s pp) pp1 </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1082 </font></span><font color="#ff00cc">                          = getProcSta s pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1083 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1084 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getProcSta (StopTCounter s pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1085 </font></span><font color="#ff00cc">      procSta (procs_' </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1086 </font></span><font color="#ff00cc">      (let t_waitDiff = getWaitDiff s pp;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1087 </font></span><font color="#ff00cc">        s_waitQue_waitDiff_Del = waitDel_D s pp;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1088 </font></span><font color="#ff00cc">        s_waitDiff_Del = rstWaitDiff s pp;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1089 </font></span><font color="#ff00cc">        delT = if the(t_waitDiff) = -1 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1090 </font></span><font color="#ff00cc">                  s_waitDiff_Del</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1091 </font></span><font color="#ff00cc">               else s_waitQue_waitDiff_Del;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1092 </font></span><font color="#ff00cc">        delCterRsc =  stopCterRsc delT pp in delCterRsc)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1093 </font></span><font color="#ff00cc">      ) pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1094 </font></span>    <font color="#006699"><strong>unfolding</strong></font> getProcSta_def StopTCounter_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1095 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getProcSta (StopTCounter s pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1096 </font></span><font color="#ff00cc">      procSta (procs_' </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1097 </font></span><font color="#ff00cc">      (let t_waitDiff = getWaitDiff s pp;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1098 </font></span><font color="#ff00cc">        s_waitQue_waitDiff_Del = (let cid = the (procBlngCore pp); vpwl = waitQue (cores_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1099 </font></span><font color="#ff00cc">    pd = waitDiff(rscPendProcs_' s); new_vp_pd = waitQ_SuspQDel vpwl pd cid pp  in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1100 </font></span><font color="#ff00cc">    s&#10631;cores_' := (cores_' s)&#10631;waitQue := fst new_vp_pd&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1101 </font></span><font color="#ff00cc">    rscPendProcs_' := (rscPendProcs_' s)&#10631;waitDiff := snd new_vp_pd&#10632;&#10632;);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1102 </font></span><font color="#ff00cc">        s_waitDiff_Del = (s&#10631;rscPendProcs_' := (rscPendProcs_' s)&#10631;waitDiff := (waitDiff(rscPendProcs_' s))(pp := None)&#10632;&#10632;);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1103 </font></span><font color="#ff00cc">        delT = if the(t_waitDiff) = -1 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1104 </font></span><font color="#ff00cc">                  s_waitDiff_Del</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1105 </font></span><font color="#ff00cc">               else s_waitQue_waitDiff_Del;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1106 </font></span><font color="#ff00cc">        delCterRsc =  stopCterRsc delT pp in delCterRsc)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1107 </font></span><font color="#ff00cc">      ) pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1108 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis rstWaitDiff_def waitDel_D_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1109 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1110 </font></span>    <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getProcSta (StopTCounter s pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1111 </font></span><font color="#ff00cc">        (procSta (procs_' s))pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1112 </font></span>      <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> StaProc.simps<font color="#000000"><strong>(</strong></font>6<font color="#000000"><strong>)</strong></font> StaProc.simps<font color="#000000"><strong>(</strong></font>7<font color="#000000"><strong>)</strong></font> StaProc.surjective StaProc_sched.simps<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> stopCterRsc_def<font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1113 </font></span>    <font color="#0099ff"><strong>thus</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1114 </font></span>      <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> getProcSta_def<font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1115 </font></span>   <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1116 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1117 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1118 </font></span><font color="#006699"><strong>lemma</strong></font> getSta_setUserPLMtxOWNED<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcSta (setUserPLMtxOWNED s pu) pp</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1119 </font></span><font color="#ff00cc">                          = getProcSta s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1120 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getProcSta_def setUserPLMtxOWNED_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1121 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1122 </font></span><font color="#006699"><strong>lemma</strong></font> getSta_incrementUserPLMtxLck<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcSta (incrementUserPLMtxLck s pu) pp</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1123 </font></span><font color="#ff00cc">                          = getProcSta s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1124 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getProcSta_def incrementUserPLMtxLck_def
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1125 </font></span>  <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis STATE.simps<font color="#000000"><strong>(</strong></font>14<font color="#000000"><strong>)</strong></font> STATE.surjective StaProc_sched.simps<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1126 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1127 </font></span><font color="#006699"><strong>lemma</strong></font> getSta_setUserPLMtxOwner<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcSta (setUserPLMtxOwner s pu p) pp</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1128 </font></span><font color="#ff00cc">                          = getProcSta s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1129 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getProcSta_def setUserPLMtxOwner_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1130 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1131 </font></span><font color="#006699"><strong>lemma</strong></font> getSta_retainCurPrioUserPLMtx<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcSta (retainCurPrioUserPLMtx s pu p) pp</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1132 </font></span><font color="#ff00cc">                          = getProcSta s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1133 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getProcSta_def retainCurPrioUserPLMtx_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1134 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1135 </font></span><font color="#cc0000">(*proc attr*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1136 </font></span><font color="#006699"><strong>lemma</strong></font> getAttr_set_NotNone<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcAttr (createProc s (the cur_part_id, proc_id) proc_att) (the cur_part_id, proc_id)  &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1137 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getProcAttr_def createProc_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1138 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1139 </font></span><font color="#006699"><strong>lemma</strong></font> getAttr_setProcSta<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcAttr (setProcSta s (the cur_part_id, proc_id) state) (the cur_part_id, proc_id) = getProcAttr s (the cur_part_id, proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1140 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getProcAttr_def setProcSta_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1141 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1142 </font></span><font color="#006699"><strong>lemma</strong></font> getAttr_setPriority<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcAttr (setPriority s pp prio) pp = getProcAttr s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1143 </font></span>  <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1144 </font></span>    <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getProcAttr (setPriority s pp prio) pp =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1145 </font></span><font color="#ff00cc">        (createdProcs (procs_' (let proc_sta = procs_' s in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1146 </font></span><font color="#ff00cc">        s&#10631;procs_' := proc_sta&#10631;curPriority := (curPriority proc_sta)(pp := Some prio)&#10632;&#10632;)) pp)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1147 </font></span>      <font color="#006699"><strong>unfolding</strong></font> getProcAttr_def setPriority_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1148 </font></span>    <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getProcAttr (setPriority s pp prio) pp =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1149 </font></span><font color="#ff00cc">        (createdProcs ( (let proc_sta = procs_' s in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1150 </font></span><font color="#ff00cc">        procs_'(s&#10631;procs_' := proc_sta&#10631;curPriority := (curPriority proc_sta)(pp := Some prio)&#10632;&#10632;))) pp)&quot;</font> <font color="#006699"><strong>by</strong></font> metis 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1151 </font></span>    <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getProcAttr (setPriority s pp prio) pp =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1152 </font></span><font color="#ff00cc">        (createdProcs ( (</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1153 </font></span><font color="#ff00cc">        procs_'(s&#10631;procs_' := (procs_' s)&#10631;curPriority := (curPriority (procs_' s))(pp := Some prio)&#10632;&#10632;))) pp)&quot;</font> <font color="#006699"><strong>by</strong></font> meson 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1154 </font></span>    <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>unfolding</strong></font> getProcAttr_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1155 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1156 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1157 </font></span><font color="#cc0000">(*tCounterRsc*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1158 </font></span><font color="#006699"><strong>lemma</strong></font> getCterRsc_set_NotNone<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getCterRsc (setCterRsc s pp ddl) pp  &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1159 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getCterRsc_def setCterRsc_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1160 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1161 </font></span><font color="#006699"><strong>lemma</strong></font> getCterRsc_setSuspDiff<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getCterRsc (setSuspDiff s pp tout) pp = getCterRsc s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1162 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getCterRsc_def setSuspDiff_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1163 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1164 </font></span><font color="#006699"><strong>lemma</strong></font> getCterRsc_suspProc<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getCterRsc (suspProc s pp) pp = getCterRsc s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1165 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getCterRsc_def suspProc_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1166 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1167 </font></span><font color="#006699"><strong>lemma</strong></font> getCterRsc_suspQueAdd_D<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getCterRsc (suspQueAdd_D s pp) pp = getCterRsc s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1168 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1169 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getCterRsc (suspQueAdd_D s pp) pp = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1170 </font></span><font color="#ff00cc">      (tCounterRsc (rscPendProcs_' (let cid = the (procBlngCore  pp); tq = suspdQue(cores_' s); susp_diff = suspDiff(rscPendProcs_' s);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1171 </font></span><font color="#ff00cc">      tq_wd = waitQ_SuspQAdd tq susp_diff cid pp  in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1172 </font></span><font color="#ff00cc">     if the(susp_diff pp) &gt; 0 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1173 </font></span><font color="#ff00cc">       s&#10631;cores_' := (cores_' s)&#10631;suspdQue := fst tq_wd&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1174 </font></span><font color="#ff00cc">        rscPendProcs_' := (rscPendProcs_' s)&#10631;suspDiff := snd tq_wd&#10632;&#10632;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1175 </font></span><font color="#ff00cc">     else s)))pp&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1176 </font></span>    <font color="#006699"><strong>unfolding</strong></font> getCterRsc_def suspQueAdd_D_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1177 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getCterRsc (suspQueAdd_D s pp) pp = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1178 </font></span><font color="#ff00cc">      (tCounterRsc ( </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1179 </font></span><font color="#ff00cc">     if the((suspDiff(rscPendProcs_' s)) pp) &gt; 0 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1180 </font></span><font color="#ff00cc">       rscPendProcs_'(s&#10631;cores_' := (cores_' s)&#10631;suspdQue := fst (waitQ_SuspQAdd (suspdQue(cores_' s)) (suspDiff(rscPendProcs_' s)) (the (procBlngCore  pp)) pp)&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1181 </font></span><font color="#ff00cc">        rscPendProcs_' := (rscPendProcs_' s)&#10631;suspDiff := snd (waitQ_SuspQAdd (suspdQue(cores_' s)) (suspDiff(rscPendProcs_' s)) (the (procBlngCore  pp)) pp)&#10632;&#10632;)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1182 </font></span><font color="#ff00cc">     else (rscPendProcs_' s)))pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1183 </font></span>    <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1184 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getCterRsc (suspQueAdd_D s pp) pp = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1185 </font></span><font color="#ff00cc">     (if the((suspDiff(rscPendProcs_' s)) pp) &gt; 0 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1186 </font></span><font color="#ff00cc">       (tCounterRsc (rscPendProcs_'(s&#10631;cores_' := (cores_' s)&#10631;suspdQue := fst (waitQ_SuspQAdd (suspdQue(cores_' s)) (suspDiff(rscPendProcs_' s)) (the (procBlngCore  pp)) pp)&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1187 </font></span><font color="#ff00cc">        rscPendProcs_' := (rscPendProcs_' s)&#10631;suspDiff := snd (waitQ_SuspQAdd (suspdQue(cores_' s)) (suspDiff(rscPendProcs_' s)) (the (procBlngCore  pp)) pp)&#10632;&#10632;)) pp)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1188 </font></span><font color="#ff00cc">     else tCounterRsc(rscPendProcs_' s)pp)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1189 </font></span>    <font color="#006699"><strong>by</strong></font> smt     
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1190 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getCterRsc (suspQueAdd_D s pp) pp = ( tCounterRsc(rscPendProcs_' s))pp&quot;</font> <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1191 </font></span>  <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> getCterRsc_def<font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1192 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1193 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1194 </font></span><font color="#006699"><strong>lemma</strong></font> getCterRsc_setCntxt<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getCterRsc (setCntxt s pp suspSelf) pp = getCterRsc s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1195 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getCterRsc_def setCntxt_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1196 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1197 </font></span><font color="#006699"><strong>lemma</strong></font> getCterRsc_schedule_Abs<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getCterRsc (schedule_Abs s core_id) pp = getCterRsc s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1198 </font></span>  <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1199 </font></span>    <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getCterRsc (schedule_Abs s core_id) pp = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1200 </font></span><font color="#ff00cc">        tCounterRsc(rscPendProcs_'  (let t = timer_' s; newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1201 </font></span><font color="#ff00cc">      f_readyQ = readyQue (partitions_' s); newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1202 </font></span><font color="#ff00cc">      f_procSta = procSta (procs_' s); f_curProc = curProc (partitions_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1203 </font></span><font color="#ff00cc">      sched_proc_newPart = schedProc_Abs f_readyQ newPartID f_procSta f_curProc in </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1204 </font></span><font color="#ff00cc">  s&#10631;partitions_' := (partitions_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1205 </font></span><font color="#ff00cc">      &#10631;curPart := (curPart(partitions_' s))(core_id := Some newPartID),</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1206 </font></span><font color="#ff00cc">      curProc := (curProc (partitions_' s))(newPartID := Some (snd(snd sched_proc_newPart))),</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1207 </font></span><font color="#ff00cc">      readyQue := fst sched_proc_newPart&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1208 </font></span><font color="#ff00cc">    procs_' := (procs_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1209 </font></span><font color="#ff00cc">      &#10631;procSta := setProcSta' (fst (snd sched_proc_newPart)) (newPartID, (snd(snd sched_proc_newPart))) RUNNING&#10632;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1210 </font></span><font color="#ff00cc">    &#10632;)) pp&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1211 </font></span>      <font color="#006699"><strong>unfolding</strong></font> schedule_Abs_def getCterRsc_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1212 </font></span>    <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getCterRsc (schedule_Abs s core_id) pp = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1213 </font></span><font color="#ff00cc">        tCounterRsc(  (let t = timer_' s; newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1214 </font></span><font color="#ff00cc">      f_readyQ = readyQue (partitions_' s); newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1215 </font></span><font color="#ff00cc">      f_procSta = procSta (procs_' s); f_curProc = curProc (partitions_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1216 </font></span><font color="#ff00cc">      sched_proc_newPart = schedProc_Abs f_readyQ newPartID f_procSta f_curProc in </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1217 </font></span><font color="#ff00cc">  rscPendProcs_'(s&#10631;partitions_' := (partitions_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1218 </font></span><font color="#ff00cc">      &#10631;curPart := (curPart(partitions_' s))(core_id := Some newPartID),</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1219 </font></span><font color="#ff00cc">      curProc := (curProc (partitions_' s))(newPartID := Some (snd(snd sched_proc_newPart))),</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1220 </font></span><font color="#ff00cc">      readyQue := fst sched_proc_newPart&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1221 </font></span><font color="#ff00cc">    procs_' := (procs_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1222 </font></span><font color="#ff00cc">      &#10631;procSta := setProcSta' (fst (snd sched_proc_newPart)) (newPartID, (snd(snd sched_proc_newPart))) RUNNING&#10632;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1223 </font></span><font color="#ff00cc">    &#10632;))) pp&quot;</font> <font color="#006699"><strong>by</strong></font> metis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1224 </font></span>    <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getCterRsc (schedule_Abs s core_id) pp = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1225 </font></span><font color="#ff00cc">        tCounterRsc(rscPendProcs_' s) pp&quot;</font>  <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1226 </font></span>     <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>unfolding</strong></font> getCterRsc_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1227 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1228 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1229 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1230 </font></span><font color="#cc0000">(*isSuspd*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1231 </font></span><font color="#006699"><strong>lemma</strong></font> isSuspended_suspProc_set_True<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;isSuspended (suspProc s pp) pp  = True&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1232 </font></span>  <font color="#006699"><strong>unfolding</strong></font> isSuspended_def suspProc_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1233 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1234 </font></span><font color="#006699"><strong>lemma</strong></font> timedLAdd_NotNone<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;fst (timedLAdd ppl pd pp) &ne; []&quot;</font> <font color="#006699"><strong>apply</strong></font> <font color="#000000"><strong>(</strong></font>induction ppl<font color="#000000"><strong>)</strong></font> <font color="#006699"><strong>apply</strong></font> simp <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font>Let_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1235 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1236 </font></span><font color="#006699"><strong>lemma</strong></font> timedLAdd_InL<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&forall;ppt. isInList (fst (timedLAdd ppl ppt pp')) pp'&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1237 </font></span><font color="#006699"><strong>proof</strong></font><font color="#000000"><strong>(</strong></font>induction ppl<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1238 </font></span>  <font color="#0099ff"><strong>case</strong></font> Nil
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1239 </font></span>    <font color="#006699"><strong>then</strong></font> <font color="#0099ff"><strong>show</strong></font> ?case 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1240 </font></span>      <font color="#006699"><strong>using</strong></font> isInList_def <font color="#006699"><strong>by</strong></font> force
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1241 </font></span>  <font color="#006699"><strong>next</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1242 </font></span>    <font color="#0099ff"><strong>case</strong></font> <font color="#000000"><strong>(</strong></font>Cons pp ppl<font color="#000000"><strong>)</strong></font> <font color="#006699"><strong>thm</strong></font> Cons
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1243 </font></span>    <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&forall;ppt. isInList (fst (timedLAdd ppl ppt pp')) pp'&quot;</font> <font color="#006699"><strong>using</strong></font> Cons <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1244 </font></span>    <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>fix</strong></font> ppt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1245 </font></span>    <font color="#006699"><strong>let</strong></font> ?new_pl_ppt <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;timedLAdd (pp#ppl) ppt pp'&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1246 </font></span>    <font color="#006699"><strong>let</strong></font> ?new_ppt <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;ppt(pp' := Some ((the(ppt pp')) -  (the(ppt pp))))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1247 </font></span>    <font color="#006699"><strong>have</strong></font> a10<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;fst ?new_pl_ppt =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1248 </font></span><font color="#ff00cc">            (if Int.nat (the(ppt pp')) &le; Int.nat (the(ppt pp)) then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1249 </font></span><font color="#ff00cc">            (pp' #(pp#ppl))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1250 </font></span><font color="#ff00cc">              else (pp# (fst (timedLAdd ppl ?new_ppt pp')))) &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1251 </font></span>      <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> timedLAdd_def Let_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1252 </font></span>    <font color="#006699"><strong>have</strong></font> a11<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;isInList (fst (timedLAdd (pp#ppl) ppt pp')) pp'&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1253 </font></span>      <font color="#006699"><strong>proof</strong></font><font color="#000000"><strong>(</strong></font>cases <font color="#ff00cc">&quot;Int.nat (the(ppt pp')) &le; Int.nat (the(ppt pp))&quot;</font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1254 </font></span>        <font color="#0099ff"><strong>case</strong></font> True
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1255 </font></span>        <font color="#006699"><strong>then</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>using</strong></font> isInList_def <font color="#006699"><strong>by</strong></font> force
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1256 </font></span>      <font color="#006699"><strong>next</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1257 </font></span>        <font color="#0099ff"><strong>case</strong></font> False
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1258 </font></span>      <font color="#006699"><strong>then</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>using</strong></font> isInList_def timedLAdd_def 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1259 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> hide_lams<font color="#000000"><strong>)</strong></font> Suc_le_mono <font color="#6600cc">&lsaquo;</font><font color="#6600cc">&forall;</font><font color="#6600cc">p</font><font color="#6600cc">p</font><font color="#6600cc">t</font><font color="#6600cc">.</font><font color="#6600cc"> </font><font color="#6600cc">i</font><font color="#6600cc">s</font><font color="#6600cc">I</font><font color="#6600cc">n</font><font color="#6600cc">L</font><font color="#6600cc">i</font><font color="#6600cc">s</font><font color="#6600cc">t</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">f</font><font color="#6600cc">s</font><font color="#6600cc">t</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">t</font><font color="#6600cc">i</font><font color="#6600cc">m</font><font color="#6600cc">e</font><font color="#6600cc">d</font><font color="#6600cc">L</font><font color="#6600cc">A</font><font color="#6600cc">d</font><font color="#6600cc">d</font><font color="#6600cc"> </font><font color="#6600cc">p</font><font color="#6600cc">p</font><font color="#6600cc">l</font><font color="#6600cc"> </font><font color="#6600cc">p</font><font color="#6600cc">p</font><font color="#6600cc">t</font><font color="#6600cc"> </font><font color="#6600cc">p</font><font color="#6600cc">p</font><font color="#6600cc">'</font><font color="#6600cc">)</font><font color="#6600cc">)</font><font color="#6600cc"> </font><font color="#6600cc">p</font><font color="#6600cc">p</font><font color="#6600cc">'</font><font color="#6600cc">&rsaquo;</font> a10 length_Suc_conv nth_Cons_Suc<font color="#000000"><strong>)</strong></font>       
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1260 </font></span>    <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1261 </font></span>  <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1262 </font></span>    <font color="#006699"><strong>then</strong></font> <font color="#0099ff"><strong>show</strong></font> ?case <font color="#006699"><strong>by</strong></font>  blast 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1263 </font></span>  <font color="#006699"><strong>qed</strong></font>          
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1264 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1265 </font></span><font color="#006699"><strong>lemma</strong></font> waitQ_SuspQAdd_InL<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;isInList(the(fst (waitQ_SuspQAdd tq pd cid pp) cid)) pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1266 </font></span>  <font color="#006699"><strong>using</strong></font> timedLAdd_InL <font color="#006699"><strong>unfolding</strong></font> waitQ_SuspQAdd_def Let_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1267 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1268 </font></span><font color="#006699"><strong>lemma</strong></font> suspQueAdd_D_NotNone<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;let susp_diff = suspDiff(rscPendProcs_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1269 </font></span><font color="#ff00cc">  s_suspQueAdd_D = suspQueAdd_D s pp; cid = the (procBlngCore pp);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1270 </font></span><font color="#ff00cc">  suspdL_op = suspdQue (cores_' s_suspQueAdd_D)cid in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1271 </font></span><font color="#ff00cc">  procBlngCore pp &ne; None &and; susp_diff pp &ne; None &and; the(susp_diff pp) &gt; 0 &#10230; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1272 </font></span><font color="#ff00cc">    suspdL_op &ne; None &and; suspdL_op &ne; Some []&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1273 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1274 </font></span>  <font color="#006699"><strong>let</strong></font> ?susp_diff <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;suspDiff(rscPendProcs_' s)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1275 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_suspQueAdd_D <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;suspQueAdd_D s pp&quot;</font> <font color="#006699"><strong>let</strong></font> ?cid <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;the (procBlngCore pp)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1276 </font></span>  <font color="#006699"><strong>let</strong></font> ?suspdL_op <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;suspdQue (cores_' ?s_suspQueAdd_D) ?cid&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1277 </font></span>  <font color="#006699"><strong>let</strong></font> ?tq <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;suspdQue(cores_' s)&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1278 </font></span>  <font color="#006699"><strong>let</strong></font> ?tq_wd <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;waitQ_SuspQAdd ?tq ?susp_diff ?cid pp&quot;</font>   
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1279 </font></span>  <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>assume</strong></font> a00<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;procBlngCore pp &ne; None &and; ?susp_diff pp &ne; None &and; the(?susp_diff pp) &gt; 0&quot;</font>               
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1280 </font></span>  <font color="#006699"><strong>have</strong></font> a10<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?s_suspQueAdd_D =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1281 </font></span><font color="#ff00cc">    (if the(?susp_diff pp) &gt; 0 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1282 </font></span><font color="#ff00cc">    s&#10631;cores_' := (cores_' s)&#10631;suspdQue := fst ?tq_wd&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1283 </font></span><font color="#ff00cc">      rscPendProcs_' := (rscPendProcs_' s)&#10631;suspDiff := snd ?tq_wd&#10632;&#10632;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1284 </font></span><font color="#ff00cc">    else s)&quot;</font> <font color="#006699"><strong>unfolding</strong></font> suspQueAdd_D_def Let_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1285 </font></span>  <font color="#006699"><strong>hence</strong></font> a11<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?suspdL_op = ( (let pwl = case ?tq ?cid = None of False &rArr; the(?tq ?cid) | True &rArr; [];</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1286 </font></span><font color="#ff00cc">      new_pwl_pd = timedLAdd pwl ?susp_diff pp  in </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1287 </font></span><font color="#ff00cc">  (Some (fst new_pwl_pd)))) &quot;</font> <font color="#006699"><strong>using</strong></font> a00 <font color="#006699"><strong>unfolding</strong></font> waitQ_SuspQAdd_def
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1288 </font></span>  <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt CPU_STATE_TYPE.select_convs<font color="#000000"><strong>(</strong></font>2<font color="#000000"><strong>)</strong></font> CPU_STATE_TYPE.surjective CPU_STATE_TYPE.update_convs<font color="#000000"><strong>(</strong></font>2<font color="#000000"><strong>)</strong></font> StaProc.simps<font color="#000000"><strong>(</strong></font>2<font color="#000000"><strong>)</strong></font> StaProc.surjective StaProc.update_convs<font color="#000000"><strong>(</strong></font>2<font color="#000000"><strong>)</strong></font> StaProc.update_convs<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font> fst_conv fun_upd_eqD fun_upd_triv<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1289 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;?suspdL_op &ne; None &and; ?suspdL_op &ne; Some []&quot;</font> <font color="#006699"><strong>using</strong></font> timedLAdd_NotNone <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1290 </font></span>  <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1291 </font></span>  <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1292 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1293 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1294 </font></span><font color="#006699"><strong>lemma</strong></font> suspQueAdd_D_InL<font color="#000000"><strong>:</strong></font><font color="#ff00cc">&quot;let susp_diff = suspDiff(rscPendProcs_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1295 </font></span><font color="#ff00cc">  s_suspQueAdd_D = suspQueAdd_D s pp; cid = the (procBlngCore pp);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1296 </font></span><font color="#ff00cc">  suspdL_op = suspdQue (cores_' s_suspQueAdd_D)cid in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1297 </font></span><font color="#ff00cc">  procBlngCore pp &ne; None &and; susp_diff pp &ne; None &and; the(susp_diff pp) &gt; 0 &#10230; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1298 </font></span><font color="#ff00cc">    isInList (the suspdL_op) pp&quot;</font> <font color="#006699"><strong>using</strong></font> waitQ_SuspQAdd_InL <font color="#006699"><strong>unfolding</strong></font> suspQueAdd_D_def Let_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1299 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1300 </font></span><font color="#006699"><strong>lemma</strong></font> isSuspended_suspQueAdd_D_set_NotNone<font color="#000000"><strong>:</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1301 </font></span>  <font color="#ff00cc">&quot;let susp_proc_id = suspended (rscPendProcs_' s) pp;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1302 </font></span><font color="#ff00cc">    f_suspDiff = suspDiff(rscPendProcs_' s) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1303 </font></span><font color="#ff00cc">  procBlngCore pp &ne; None &and; f_suspDiff pp &ne; None &and; the (f_suspDiff pp) &gt; 0 &#10230; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1304 </font></span><font color="#ff00cc">  isSuspended (suspQueAdd_D s pp) pp  = True&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1305 </font></span>    <font color="#006699"><strong>using</strong></font> suspQueAdd_D_NotNone suspQueAdd_D_InL <font color="#006699"><strong>unfolding</strong></font> isInSuspQ_def  isSuspended_def <font color="#006699"><strong>by</strong></font> metis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1306 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1307 </font></span><font color="#006699"><strong>lemma</strong></font> suspended_suspProc_set_True<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;suspended (rscPendProcs_' (suspProc s pp)) pp  = Some True&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1308 </font></span>  <font color="#006699"><strong>unfolding</strong></font> suspProc_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1309 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1310 </font></span><font color="#006699"><strong>lemma</strong></font> suspendField_setCntxt<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;suspended (rscPendProcs_' (setCntxt s pp Ctx)) pp1  = suspended (rscPendProcs_' s) pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1311 </font></span>  <font color="#006699"><strong>unfolding</strong></font>  setCntxt_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1312 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1313 </font></span><font color="#006699"><strong>lemma</strong></font> suspendField_schedule_Abs<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;suspended (rscPendProcs_' (schedule_Abs s core_id)) pp1  = suspended (rscPendProcs_' s) pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1314 </font></span>    <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1315 </font></span>    <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;suspended (rscPendProcs_' (schedule_Abs s core_id)) pp1 = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1316 </font></span><font color="#ff00cc">        suspended(rscPendProcs_'  (let t = timer_' s; newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1317 </font></span><font color="#ff00cc">      f_readyQ = readyQue (partitions_' s); newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1318 </font></span><font color="#ff00cc">      f_procSta = procSta (procs_' s); f_curProc = curProc (partitions_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1319 </font></span><font color="#ff00cc">      sched_proc_newPart = schedProc_Abs f_readyQ newPartID f_procSta f_curProc in </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1320 </font></span><font color="#ff00cc">  s&#10631;partitions_' := (partitions_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1321 </font></span><font color="#ff00cc">      &#10631;curPart := (curPart(partitions_' s))(core_id := Some newPartID),</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1322 </font></span><font color="#ff00cc">      curProc := (curProc (partitions_' s))(newPartID := Some (snd(snd sched_proc_newPart))),</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1323 </font></span><font color="#ff00cc">      readyQue := fst sched_proc_newPart&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1324 </font></span><font color="#ff00cc">    procs_' := (procs_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1325 </font></span><font color="#ff00cc">      &#10631;procSta := setProcSta' (fst (snd sched_proc_newPart)) (newPartID, (snd(snd sched_proc_newPart))) RUNNING&#10632;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1326 </font></span><font color="#ff00cc">    &#10632;)) pp1&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1327 </font></span>      <font color="#006699"><strong>unfolding</strong></font> schedule_Abs_def  <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1328 </font></span>    <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;suspended (rscPendProcs_' (schedule_Abs s core_id)) pp1 = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1329 </font></span><font color="#ff00cc">          (let t = timer_' s; newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1330 </font></span><font color="#ff00cc">      f_readyQ = readyQue (partitions_' s); newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1331 </font></span><font color="#ff00cc">      f_procSta = procSta (procs_' s); f_curProc = curProc (partitions_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1332 </font></span><font color="#ff00cc">      sched_proc_newPart = schedProc_Abs f_readyQ newPartID f_procSta f_curProc in </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1333 </font></span><font color="#ff00cc">  suspended(rscPendProcs_'(s&#10631;partitions_' := (partitions_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1334 </font></span><font color="#ff00cc">      &#10631;curPart := (curPart(partitions_' s))(core_id := Some newPartID),</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1335 </font></span><font color="#ff00cc">      curProc := (curProc (partitions_' s))(newPartID := Some (snd(snd sched_proc_newPart))),</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1336 </font></span><font color="#ff00cc">      readyQue := fst sched_proc_newPart&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1337 </font></span><font color="#ff00cc">    procs_' := (procs_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1338 </font></span><font color="#ff00cc">      &#10631;procSta := setProcSta' (fst (snd sched_proc_newPart)) (newPartID, (snd(snd sched_proc_newPart))) RUNNING&#10632;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1339 </font></span><font color="#ff00cc">    &#10632;))) pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1340 </font></span>      <font color="#006699"><strong>by</strong></font> metis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1341 </font></span>     <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>unfolding</strong></font> getCntxt_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1342 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1343 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1344 </font></span><font color="#006699"><strong>lemma</strong></font> suspended_setProcSta<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;suspended (rscPendProcs_' (setProcSta s pp sta)) pp1  = suspended (rscPendProcs_' s) pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1345 </font></span>  <font color="#006699"><strong>unfolding</strong></font>  setProcSta_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1346 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1347 </font></span><font color="#006699"><strong>lemma</strong></font> suspended_readyDel_s_D<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;suspended (rscPendProcs_' (readyDel_s_D s pt p)) pp1  = suspended (rscPendProcs_' s) pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1348 </font></span>  <font color="#006699"><strong>unfolding</strong></font>  readyDel_s_D_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1349 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1350 </font></span><font color="#006699"><strong>lemma</strong></font> suspendFeild_rstsuspProc<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;suspended (rscPendProcs_' (rstsuspProc s pp)) pp = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1351 </font></span>  <font color="#006699"><strong>unfolding</strong></font> rstsuspProc_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1352 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1353 </font></span><font color="#cc0000">(*suspDiff*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1354 </font></span><font color="#006699"><strong>lemma</strong></font> getSuspDiff_set_NotNone<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getSuspDiff (setSuspDiff s pp tout) pp  &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1355 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getSuspDiff_def setSuspDiff_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1356 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1357 </font></span><font color="#006699"><strong>lemma</strong></font> getSuspDiff_set<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getSuspDiff (setSuspDiff s pp tout) pp  = Some tout&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1358 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getSuspDiff_def setSuspDiff_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1359 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1360 </font></span><font color="#006699"><strong>lemma</strong></font> getSuspDiff_suspProc <font color="#000000"><strong>:</strong></font><font color="#ff00cc">&quot;getSuspDiff (suspProc s pp) pp = getSuspDiff s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1361 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getSuspDiff_def suspProc_def <font color="#006699"><strong>by</strong></font> auto  
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1362 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1363 </font></span><font color="#006699"><strong>lemma</strong></font> t1'<font color="#000000"><strong>:</strong></font><font color="#ff00cc">&quot; &forall;wait_diff. (wait_diff rr &ne; None &#10230; snd (timedLAdd pwl wait_diff qq) rr &ne; None)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1364 </font></span>  <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1365 </font></span>  <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1366 </font></span>    <font color="#006699"><strong>proof</strong></font><font color="#000000"><strong>(</strong></font>induction pwl<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1367 </font></span>      <font color="#0099ff"><strong>case</strong></font> Nil
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1368 </font></span>        <font color="#006699"><strong>then</strong></font> <font color="#0099ff"><strong>show</strong></font> ?case <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1369 </font></span>    <font color="#006699"><strong>next</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1370 </font></span>      <font color="#0099ff"><strong>case</strong></font> <font color="#000000"><strong>(</strong></font>Cons pp ppl<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1371 </font></span>        <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&forall;wait_diff. (wait_diff rr &ne; None &#10230; snd (timedLAdd ppl wait_diff qq) rr &ne; None)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1372 </font></span>          <font color="#006699"><strong>using</strong></font> Cons <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1373 </font></span>        <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>fix</strong></font> wait_diff<font color="#000000"><strong>::</strong></font><font color="#ff00cc">&quot;PART_ID_TYPE &times; PROC_ID_TYPE &rArr; TIMEOUT_TYPE option&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1374 </font></span>        <font color="#0099ff"><strong>assume</strong></font> a00<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;wait_diff rr &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1375 </font></span>        <font color="#006699"><strong>let</strong></font> ?new_pwl_pd <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;timedLAdd (pp#ppl) wait_diff qq&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1376 </font></span>        <font color="#006699"><strong>have</strong></font> a10<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;snd ?new_pwl_pd rr =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1377 </font></span><font color="#ff00cc">               (if Int.nat (the(wait_diff qq)) &le; Int.nat (the(wait_diff pp)) then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1378 </font></span><font color="#ff00cc">                (wait_diff(pp := Some ((the(wait_diff pp)) -  (the(wait_diff qq)))))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1379 </font></span><font color="#ff00cc">              else let new_ppt = wait_diff(qq := Some ((the(wait_diff qq)) -  (the(wait_diff pp)))) in </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1380 </font></span><font color="#ff00cc">                (snd (timedLAdd ppl new_ppt qq))) rr&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1381 </font></span>              <font color="#006699"><strong>using</strong></font> Cons snd_conv <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> timedLAdd.simps<font color="#000000"><strong>(</strong></font>2<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1382 </font></span>        <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;snd ?new_pwl_pd rr &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1383 </font></span>          <font color="#006699"><strong>proof</strong></font><font color="#000000"><strong>(</strong></font>cases <font color="#ff00cc">&quot;Int.nat (the(wait_diff qq)) &le; Int.nat (the(wait_diff pp))&quot;</font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1384 </font></span>            <font color="#0099ff"><strong>case</strong></font> True
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1385 </font></span>              <font color="#006699"><strong>then</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>using</strong></font> a10 a00 <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1386 </font></span>          <font color="#006699"><strong>next</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1387 </font></span>            <font color="#0099ff"><strong>case</strong></font> False
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1388 </font></span>              <font color="#006699"><strong>let</strong></font> ?new_ppt <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;wait_diff(qq := Some ((the(wait_diff qq)) -  (the(wait_diff pp))))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1389 </font></span>              <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;snd ?new_pwl_pd rr = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1390 </font></span><font color="#ff00cc">                    (snd (timedLAdd ppl ?new_ppt qq)) rr&quot;</font> <font color="#006699"><strong>using</strong></font> a10 False   <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1391 </font></span>              <font color="#006699"><strong>then</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>using</strong></font> a10 a00 Cons False <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1392 </font></span>          <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1393 </font></span>        <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1394 </font></span>        <font color="#006699"><strong>then</strong></font> <font color="#0099ff"><strong>show</strong></font> ?case <font color="#006699"><strong>using</strong></font> Cons <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1395 </font></span>    <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1396 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1397 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1398 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1399 </font></span><font color="#006699"><strong>lemma</strong></font> t1<font color="#000000"><strong>:</strong></font><font color="#ff00cc">&quot;let wait_diff = waitDiff(rscPendProcs_' s); tq_wd = waitQ_SuspQAdd tq wait_diff cid qq in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1400 </font></span><font color="#ff00cc">  wait_diff qq &ne; None &and; the(wait_diff qq) &gt; 0  &#10230; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1401 </font></span><font color="#ff00cc">  snd tq_wd qq &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1402 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1403 </font></span>  <font color="#006699"><strong>let</strong></font> ?wait_diff <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;waitDiff(rscPendProcs_' s)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1404 </font></span>  <font color="#006699"><strong>let</strong></font> ?tq_wd <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;waitQ_SuspQAdd tq ?wait_diff cid qq&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1405 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1406 </font></span>  <font color="#006699"><strong>let</strong></font> ?pwl <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;case tq cid = None of False &rArr; the(tq cid) | True &rArr; []&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1407 </font></span>  <font color="#006699"><strong>let</strong></font> ?new_pwl_pd <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;timedLAdd ?pwl ?wait_diff qq&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1408 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1409 </font></span>  <font color="#006699"><strong>have</strong></font> a10<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;snd ?tq_wd qq = snd ?new_pwl_pd qq&quot;</font> <font color="#006699"><strong>unfolding</strong></font> waitQ_SuspQAdd_def Let_def <font color="#006699"><strong>by</strong></font> simp
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1410 </font></span>  <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>assume</strong></font> a00<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?wait_diff qq &ne; None &and; the(?wait_diff qq) &gt; 0&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1411 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;snd ?tq_wd qq &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1412 </font></span>    <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1413 </font></span>      <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;snd ?new_pwl_pd qq &ne; None&quot;</font> <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>meson a00 t1'<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1414 </font></span>      <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>using</strong></font> a10 <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1415 </font></span>    <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1416 </font></span>  <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1417 </font></span>  <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1418 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1419 </font></span><font color="#006699"><strong>lemma</strong></font> suspQueAdd_D<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1420 </font></span>  <font color="#ff00cc">&quot;let s' = suspQueAdd_D s pp;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1421 </font></span><font color="#ff00cc">    cid = the (procBlngCore pp); tq = suspdQue(cores_' s); susp_diff = suspDiff(rscPendProcs_' s);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1422 </font></span><font color="#ff00cc">      tq_wd = waitQ_SuspQAdd tq susp_diff cid pp  in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1423 </font></span><font color="#ff00cc">   ((getSuspDiff s pp &ne; None) &and; the(susp_diff pp) &gt; 0 &#10230;  getSuspDiff s' pp &ne; None) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1424 </font></span><font color="#ff00cc">    &and; (the(susp_diff pp) = -1 &#10230; getSuspDiff s' pp = getSuspDiff s pp)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1425 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1426 </font></span>  <font color="#006699"><strong>let</strong></font> ?s' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;suspQueAdd_D s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1427 </font></span>  <font color="#006699"><strong>let</strong></font> ?cid <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;the (procBlngCore pp)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1428 </font></span>  <font color="#006699"><strong>let</strong></font> ?tq <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;suspdQue(cores_' s)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1429 </font></span>  <font color="#006699"><strong>let</strong></font> ?susp_diff <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;suspDiff(rscPendProcs_' s)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1430 </font></span>  <font color="#006699"><strong>let</strong></font> ?tq_wd <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;waitQ_SuspQAdd ?tq ?susp_diff ?cid pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1431 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;(getSuspDiff s pp &ne; None) &and; the(?susp_diff pp) &gt; 0 &#10230;  getSuspDiff ?s' pp &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1432 </font></span>  <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1433 </font></span>  <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>assume</strong></font> a0<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;(getSuspDiff s pp &ne; None) &and; the(?susp_diff pp) &gt; 0&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1434 </font></span>    <font color="#006699"><strong>hence</strong></font> a1<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?s' = s&#10631;cores_' := (cores_' s)&#10631;suspdQue := fst ?tq_wd&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1435 </font></span><font color="#ff00cc">      rscPendProcs_' := (rscPendProcs_' s)&#10631;suspDiff := snd ?tq_wd&#10632;&#10632;&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1436 </font></span>      <font color="#006699"><strong>unfolding</strong></font> suspQueAdd_D_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1437 </font></span>    <font color="#006699"><strong>have</strong></font> a2<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getSuspDiff ?s' pp &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1438 </font></span>      <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1439 </font></span>        <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getSuspDiff ?s' pp= </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1440 </font></span><font color="#ff00cc">          (if the(?susp_diff pp) &gt; 0 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1441 </font></span><font color="#ff00cc">              snd ?tq_wd</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1442 </font></span><font color="#ff00cc">          else suspDiff(rscPendProcs_' s))pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1443 </font></span>          <font color="#006699"><strong>unfolding</strong></font> getSuspDiff_def suspQueAdd_D_def Let_def <font color="#006699"><strong>by</strong></font> simp
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1444 </font></span>        <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>using</strong></font> t1
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1445 </font></span>          <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>verit<font color="#000000"><strong>,</strong></font> best<font color="#000000"><strong>)</strong></font> a0 getSuspDiff_def snd_conv t1' waitQ_SuspQAdd_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1446 </font></span>      <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1447 </font></span>    <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1448 </font></span>    <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1449 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1450 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;the(?susp_diff pp) = -1 &#10230; getSuspDiff ?s' pp = getSuspDiff s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1451 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> suspQueAdd_D_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1452 </font></span>  <font color="#0099ff"><strong>thus</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1453 </font></span>    <font color="#006699"><strong>using</strong></font> <font color="#6600cc">&lsaquo;</font><font color="#6600cc">g</font><font color="#6600cc">e</font><font color="#6600cc">t</font><font color="#6600cc">S</font><font color="#6600cc">u</font><font color="#6600cc">s</font><font color="#6600cc">p</font><font color="#6600cc">D</font><font color="#6600cc">i</font><font color="#6600cc">f</font><font color="#6600cc">f</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc"> </font><font color="#6600cc">p</font><font color="#6600cc">p</font><font color="#6600cc"> </font><font color="#6600cc">&ne;</font><font color="#6600cc"> </font><font color="#6600cc">N</font><font color="#6600cc">o</font><font color="#6600cc">n</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">&and;</font><font color="#6600cc"> </font><font color="#6600cc">0</font><font color="#6600cc"> </font><font color="#6600cc">&lt;</font><font color="#6600cc"> </font><font color="#6600cc">t</font><font color="#6600cc">h</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">s</font><font color="#6600cc">u</font><font color="#6600cc">s</font><font color="#6600cc">p</font><font color="#6600cc">D</font><font color="#6600cc">i</font><font color="#6600cc">f</font><font color="#6600cc">f</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">r</font><font color="#6600cc">s</font><font color="#6600cc">c</font><font color="#6600cc">P</font><font color="#6600cc">e</font><font color="#6600cc">n</font><font color="#6600cc">d</font><font color="#6600cc">P</font><font color="#6600cc">r</font><font color="#6600cc">o</font><font color="#6600cc">c</font><font color="#6600cc">s</font><font color="#6600cc">_</font><font color="#6600cc">'</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc">)</font><font color="#6600cc"> </font><font color="#6600cc">p</font><font color="#6600cc">p</font><font color="#6600cc">)</font><font color="#6600cc"> </font><font color="#6600cc">&#10230;</font><font color="#6600cc"> </font><font color="#6600cc">g</font><font color="#6600cc">e</font><font color="#6600cc">t</font><font color="#6600cc">S</font><font color="#6600cc">u</font><font color="#6600cc">s</font><font color="#6600cc">p</font><font color="#6600cc">D</font><font color="#6600cc">i</font><font color="#6600cc">f</font><font color="#6600cc">f</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">s</font><font color="#6600cc">u</font><font color="#6600cc">s</font><font color="#6600cc">p</font><font color="#6600cc">Q</font><font color="#6600cc">u</font><font color="#6600cc">e</font><font color="#6600cc">A</font><font color="#6600cc">d</font><font color="#6600cc">d</font><font color="#6600cc">_</font><font color="#6600cc">D</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc"> </font><font color="#6600cc">p</font><font color="#6600cc">p</font><font color="#6600cc">)</font><font color="#6600cc"> </font><font color="#6600cc">p</font><font color="#6600cc">p</font><font color="#6600cc"> </font><font color="#6600cc">&ne;</font><font color="#6600cc"> </font><font color="#6600cc">N</font><font color="#6600cc">o</font><font color="#6600cc">n</font><font color="#6600cc">e</font><font color="#6600cc">&rsaquo;</font> <font color="#006699"><strong>by</strong></font> presburger
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1454 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1455 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1456 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1457 </font></span><font color="#006699"><strong>lemma</strong></font> getSuspDiff_suspQueAdd_D <font color="#000000"><strong>:</strong></font><font color="#ff00cc">&quot;getSuspDiff s pp  &ne; None </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1458 </font></span><font color="#ff00cc">                                  &#10230; getSuspDiff (suspQueAdd_D s pp) pp &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1459 </font></span>  <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> suspQueAdd_D suspQueAdd_D_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1460 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1461 </font></span><font color="#006699"><strong>lemma</strong></font> getSuspDiff_setCntxt <font color="#000000"><strong>:</strong></font><font color="#ff00cc">&quot;getSuspDiff (setCntxt s pp suspSelf) pp = getSuspDiff s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1462 </font></span>   <font color="#006699"><strong>unfolding</strong></font> getSuspDiff_def setCntxt_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1463 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1464 </font></span><font color="#006699"><strong>lemma</strong></font> getSuspDiff_schedule_Abs <font color="#000000"><strong>:</strong></font><font color="#ff00cc">&quot;getSuspDiff (schedule_Abs s core_id) pp = getSuspDiff s pp&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1465 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1466 </font></span>    <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getSuspDiff (schedule_Abs s core_id) pp = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1467 </font></span><font color="#ff00cc">        suspDiff(rscPendProcs_'  (let t = timer_' s; newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1468 </font></span><font color="#ff00cc">      f_readyQ = readyQue (partitions_' s); newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1469 </font></span><font color="#ff00cc">      f_procSta = procSta (procs_' s); f_curProc = curProc (partitions_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1470 </font></span><font color="#ff00cc">      sched_proc_newPart = schedProc_Abs f_readyQ newPartID f_procSta f_curProc in </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1471 </font></span><font color="#ff00cc">  s&#10631;partitions_' := (partitions_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1472 </font></span><font color="#ff00cc">      &#10631;curPart := (curPart(partitions_' s))(core_id := Some newPartID),</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1473 </font></span><font color="#ff00cc">      curProc := (curProc (partitions_' s))(newPartID := Some (snd(snd sched_proc_newPart))),</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1474 </font></span><font color="#ff00cc">      readyQue := fst sched_proc_newPart&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1475 </font></span><font color="#ff00cc">    procs_' := (procs_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1476 </font></span><font color="#ff00cc">      &#10631;procSta := setProcSta' (fst (snd sched_proc_newPart)) (newPartID, (snd(snd sched_proc_newPart))) RUNNING&#10632;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1477 </font></span><font color="#ff00cc">    &#10632;)) pp&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1478 </font></span>      <font color="#006699"><strong>unfolding</strong></font> schedule_Abs_def getSuspDiff_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1479 </font></span>     <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getSuspDiff (schedule_Abs s core_id) pp = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1480 </font></span><font color="#ff00cc">        suspDiff(  (let t = timer_' s; newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1481 </font></span><font color="#ff00cc">      f_readyQ = readyQue (partitions_' s); newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1482 </font></span><font color="#ff00cc">      f_procSta = procSta (procs_' s); f_curProc = curProc (partitions_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1483 </font></span><font color="#ff00cc">      sched_proc_newPart = schedProc_Abs f_readyQ newPartID f_procSta f_curProc in </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1484 </font></span><font color="#ff00cc">  rscPendProcs_'(s&#10631;partitions_' := (partitions_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1485 </font></span><font color="#ff00cc">      &#10631;curPart := (curPart(partitions_' s))(core_id := Some newPartID),</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1486 </font></span><font color="#ff00cc">      curProc := (curProc (partitions_' s))(newPartID := Some (snd(snd sched_proc_newPart))),</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1487 </font></span><font color="#ff00cc">      readyQue := fst sched_proc_newPart&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1488 </font></span><font color="#ff00cc">    procs_' := (procs_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1489 </font></span><font color="#ff00cc">      &#10631;procSta := setProcSta' (fst (snd sched_proc_newPart)) (newPartID, (snd(snd sched_proc_newPart))) RUNNING&#10632;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1490 </font></span><font color="#ff00cc">    &#10632;))) pp&quot;</font> <font color="#006699"><strong>by</strong></font> metis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1491 </font></span>     <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getSuspDiff (schedule_Abs s core_id) pp = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1492 </font></span><font color="#ff00cc">        suspDiff(rscPendProcs_' s) pp&quot;</font>  <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1493 </font></span>     <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>unfolding</strong></font> getSuspDiff_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1494 </font></span>   <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1495 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1496 </font></span><font color="#006699"><strong>lemma</strong></font> getSuspDiff_setCterSusp <font color="#000000"><strong>:</strong></font><font color="#ff00cc">&quot;getSuspDiff (setCterSusp s pp ctddl) pp = getSuspDiff s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1497 </font></span>  <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> getSuspDiff_def setCterSusp_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1498 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1499 </font></span><font color="#cc0000">(*part lock*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1500 </font></span><font color="#006699"><strong>lemma</strong></font> getlock_setPartLockS_NotNone<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getPartLock (setPartLockS s cur_part_id mtx_lock_count) cur_part_id = Some mtx_lock_count&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1501 </font></span>  <font color="#006699"><strong>unfolding</strong></font> setPartLockS_def getPartLock_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1502 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1503 </font></span><font color="#006699"><strong>lemma</strong></font> getlock_setPartLockS_zero<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getPartLock (setPartLockS s cur_part_id 0) cur_part_id = Some 0&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1504 </font></span>  <font color="#006699"><strong>unfolding</strong></font> setPartLockS_def getPartLock_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1505 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1506 </font></span><font color="#006699"><strong>lemma</strong></font> getlock_setCurProcSta<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getPartLock (setCurProcSta s core_id DORMANT) cur_part_id =getPartLock s cur_part_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1507 </font></span>  <font color="#006699"><strong>unfolding</strong></font> setCurProcSta_def getPartLock_def setProcSta_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1508 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1509 </font></span><font color="#006699"><strong>lemma</strong></font> getlock_readyDel_s_D<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getPartLock (readyDel_s_D s cur_part_id proc_id) cur_part_id =getPartLock s cur_part_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1510 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getPartLock_def readyDel_s_D_def  <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1511 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1512 </font></span><font color="#006699"><strong>lemma</strong></font> getlock_rstPriority<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getPartLock (rstPriority s (cur_part_id,proc_id)) cur_part_id =getPartLock s cur_part_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1513 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getPartLock_def rstPriority_def Let_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1514 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1515 </font></span><font color="#006699"><strong>lemma</strong></font> getlock_rstDeadline<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getPartLock (rstDeadline s (cur_part_id,proc_id)) cur_part_id =getPartLock s cur_part_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1516 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getPartLock_def rstDeadline_def Let_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1517 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1518 </font></span><font color="#006699"><strong>lemma</strong></font> getlock_rstHMCalled<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getPartLock (rstHMCalled s cur_part_id) cur_part_id =getPartLock s cur_part_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1519 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getPartLock_def rstHMCalled_def Let_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1520 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1521 </font></span><font color="#006699"><strong>lemma</strong></font> getlock_schedule_Abs<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getPartLock (schedule_Abs s core_id) pt =getPartLock s pt&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1522 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getPartLock_def schedule_Abs_def Let_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1523 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1524 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1525 </font></span><font color="#cc0000">(*setDelayT *)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1526 </font></span><font color="#006699"><strong>lemma</strong></font> getDelayT_setDelayT_NotNone<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getDelayT (setDelayT s pp t) pp &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1527 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getDelayT_def setDelayT_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1528 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1529 </font></span><font color="#006699"><strong>lemma</strong></font> getDelayT_setWaitDiff<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getDelayT (setWaitDiff s pp t) pp1 = getDelayT s pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1530 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getDelayT_def setWaitDiff_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1531 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1532 </font></span><font color="#006699"><strong>lemma</strong></font> getDelayT_waitAdd_D<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getDelayT (waitAdd_D s pp) pp1 = getDelayT s pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1533 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1534 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getDelayT (waitAdd_D s pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1535 </font></span><font color="#ff00cc">       delayedT(rscPendProcs_' </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1536 </font></span><font color="#ff00cc">        (let cid = the (procBlngCore pp); tq = waitQue(cores_' s); wait_diff = waitDiff(rscPendProcs_' s);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1537 </font></span><font color="#ff00cc">      tq_wd = waitQ_SuspQAdd tq wait_diff cid pp  in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1538 </font></span><font color="#ff00cc">  if the(wait_diff pp) &gt; 0 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1539 </font></span><font color="#ff00cc">    s&#10631;cores_' := (cores_' s)&#10631;waitQue := fst tq_wd&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1540 </font></span><font color="#ff00cc">      rscPendProcs_' := (rscPendProcs_' s)&#10631;waitDiff := snd tq_wd&#10632;&#10632;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1541 </font></span><font color="#ff00cc">  else s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1542 </font></span><font color="#ff00cc">  )pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1543 </font></span>    <font color="#006699"><strong>unfolding</strong></font> getDelayT_def waitAdd_D_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1544 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getDelayT (waitAdd_D s pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1545 </font></span><font color="#ff00cc">       (let cid = the (procBlngCore pp); tq = waitQue(cores_' s); wait_diff = waitDiff(rscPendProcs_' s);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1546 </font></span><font color="#ff00cc">      tq_wd = waitQ_SuspQAdd tq wait_diff cid pp  in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1547 </font></span><font color="#ff00cc">     if the(wait_diff pp) &gt; 0 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1548 </font></span><font color="#ff00cc">      delayedT(rscPendProcs_' (s&#10631;cores_' := (cores_' s)&#10631;waitQue := fst tq_wd&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1549 </font></span><font color="#ff00cc">       rscPendProcs_' := (rscPendProcs_' s)&#10631;waitDiff := snd tq_wd&#10632;&#10632;))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1550 </font></span><font color="#ff00cc">    else delayedT(rscPendProcs_' s))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1551 </font></span><font color="#ff00cc">   pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1552 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1553 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getDelayT (waitAdd_D s pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1554 </font></span><font color="#ff00cc">       (let cid = the (procBlngCore pp); tq = waitQue(cores_' s); wait_diff = waitDiff(rscPendProcs_' s);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1555 </font></span><font color="#ff00cc">      tq_wd = waitQ_SuspQAdd tq wait_diff cid pp  in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1556 </font></span><font color="#ff00cc">     if the(wait_diff pp) &gt; 0 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1557 </font></span><font color="#ff00cc">      delayedT(rscPendProcs_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1558 </font></span><font color="#ff00cc">    else delayedT(rscPendProcs_' s))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1559 </font></span><font color="#ff00cc">   pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1560 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> PROCS_STATE_PENDING_TYPE.select_convs<font color="#000000"><strong>(</strong></font>9<font color="#000000"><strong>)</strong></font> PROCS_STATE_PENDING_TYPE.surjective PROCS_STATE_PENDING_TYPE.update_convs<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> StaProc.simps<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font> StaProc.simps<font color="#000000"><strong>(</strong></font>7<font color="#000000"><strong>)</strong></font> StaProc.surjective<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1561 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getDelayT (waitAdd_D s pp) pp1 =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1562 </font></span><font color="#ff00cc">       delayedT(rscPendProcs_' s)pp1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1563 </font></span>    <font color="#006699"><strong>by</strong></font> metis 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1564 </font></span>  <font color="#0099ff"><strong>thus</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1565 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> getDelayT_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1566 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1567 </font></span>  
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1568 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1569 </font></span><font color="#006699"><strong>lemma</strong></font> getDelayT_schedule_Abs<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getDelayT (schedule_Abs s core_id) pp = getDelayT s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1570 </font></span>  <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1571 </font></span>    <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getDelayT (schedule_Abs s core_id) pp = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1572 </font></span><font color="#ff00cc">        delayedT(rscPendProcs_'  (let t = timer_' s; newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1573 </font></span><font color="#ff00cc">      f_readyQ = readyQue (partitions_' s); newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1574 </font></span><font color="#ff00cc">      f_procSta = procSta (procs_' s); f_curProc = curProc (partitions_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1575 </font></span><font color="#ff00cc">      sched_proc_newPart = schedProc_Abs f_readyQ newPartID f_procSta f_curProc in </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1576 </font></span><font color="#ff00cc">  s&#10631;partitions_' := (partitions_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1577 </font></span><font color="#ff00cc">      &#10631;curPart := (curPart(partitions_' s))(core_id := Some newPartID),</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1578 </font></span><font color="#ff00cc">      curProc := (curProc (partitions_' s))(newPartID := Some (snd(snd sched_proc_newPart))),</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1579 </font></span><font color="#ff00cc">      readyQue := fst sched_proc_newPart&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1580 </font></span><font color="#ff00cc">    procs_' := (procs_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1581 </font></span><font color="#ff00cc">      &#10631;procSta := setProcSta' (fst (snd sched_proc_newPart)) (newPartID, (snd(snd sched_proc_newPart))) RUNNING&#10632;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1582 </font></span><font color="#ff00cc">    &#10632;)) pp&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1583 </font></span>      <font color="#006699"><strong>unfolding</strong></font> schedule_Abs_def getDelayT_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1584 </font></span>     <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getDelayT (schedule_Abs s core_id) pp = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1585 </font></span><font color="#ff00cc">        delayedT(  (let t = timer_' s; newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1586 </font></span><font color="#ff00cc">      f_readyQ = readyQue (partitions_' s); newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1587 </font></span><font color="#ff00cc">      f_procSta = procSta (procs_' s); f_curProc = curProc (partitions_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1588 </font></span><font color="#ff00cc">      sched_proc_newPart = schedProc_Abs f_readyQ newPartID f_procSta f_curProc in </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1589 </font></span><font color="#ff00cc">  rscPendProcs_'(s&#10631;partitions_' := (partitions_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1590 </font></span><font color="#ff00cc">      &#10631;curPart := (curPart(partitions_' s))(core_id := Some newPartID),</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1591 </font></span><font color="#ff00cc">      curProc := (curProc (partitions_' s))(newPartID := Some (snd(snd sched_proc_newPart))),</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1592 </font></span><font color="#ff00cc">      readyQue := fst sched_proc_newPart&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1593 </font></span><font color="#ff00cc">    procs_' := (procs_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1594 </font></span><font color="#ff00cc">      &#10631;procSta := setProcSta' (fst (snd sched_proc_newPart)) (newPartID, (snd(snd sched_proc_newPart))) RUNNING&#10632;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1595 </font></span><font color="#ff00cc">    &#10632;))) pp&quot;</font> <font color="#006699"><strong>by</strong></font> metis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1596 </font></span>     <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getDelayT (schedule_Abs s core_id) pp = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1597 </font></span><font color="#ff00cc">        delayedT(rscPendProcs_' s) pp&quot;</font>  <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1598 </font></span>     <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>unfolding</strong></font> getDelayT_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1599 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1600 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1601 </font></span><font color="#cc0000">(*WaitDiff*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1602 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1603 </font></span><font color="#006699"><strong>lemma</strong></font> getWaitDiff_setWaitDiff_NotNone<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getWaitDiff (setWaitDiff s pp t) pp &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1604 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getWaitDiff_def setWaitDiff_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1605 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1606 </font></span><font color="#006699"><strong>lemma</strong></font> getWaitDiff_setWaitDiff<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getWaitDiff (setWaitDiff s pp t) pp = Some t&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1607 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getWaitDiff_def setWaitDiff_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1608 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1609 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1610 </font></span><font color="#006699"><strong>lemma</strong></font> t0'<font color="#000000"><strong>:</strong></font><font color="#ff00cc">&quot; &forall;wait_diff. (wait_diff rr &ne; None &#10230; snd (timedLAdd pwl wait_diff qq) rr &ne; None)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1611 </font></span>  <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1612 </font></span>  <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1613 </font></span>    <font color="#006699"><strong>proof</strong></font><font color="#000000"><strong>(</strong></font>induction pwl<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1614 </font></span>      <font color="#0099ff"><strong>case</strong></font> Nil
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1615 </font></span>        <font color="#006699"><strong>then</strong></font> <font color="#0099ff"><strong>show</strong></font> ?case <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1616 </font></span>    <font color="#006699"><strong>next</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1617 </font></span>      <font color="#0099ff"><strong>case</strong></font> <font color="#000000"><strong>(</strong></font>Cons pp ppl<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1618 </font></span>        <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&forall;wait_diff. (wait_diff rr &ne; None &#10230; snd (timedLAdd ppl wait_diff qq) rr &ne; None)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1619 </font></span>          <font color="#006699"><strong>using</strong></font> Cons <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1620 </font></span>        <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>fix</strong></font> wait_diff<font color="#000000"><strong>::</strong></font><font color="#ff00cc">&quot;PART_ID_TYPE &times; PROC_ID_TYPE &rArr; TIMEOUT_TYPE option&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1621 </font></span>        <font color="#0099ff"><strong>assume</strong></font> a00<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;wait_diff rr &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1622 </font></span>        <font color="#006699"><strong>let</strong></font> ?new_pwl_pd <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;timedLAdd (pp#ppl) wait_diff qq&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1623 </font></span>        <font color="#006699"><strong>have</strong></font> a10<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;snd ?new_pwl_pd rr =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1624 </font></span><font color="#ff00cc">               (if Int.nat (the(wait_diff qq)) &le; Int.nat (the(wait_diff pp)) then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1625 </font></span><font color="#ff00cc">                (wait_diff(pp := Some ((the(wait_diff pp)) -  (the(wait_diff qq)))))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1626 </font></span><font color="#ff00cc">              else let new_ppt = wait_diff(qq := Some ((the(wait_diff qq)) -  (the(wait_diff pp)))) in </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1627 </font></span><font color="#ff00cc">                (snd (timedLAdd ppl new_ppt qq))) rr&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1628 </font></span>              <font color="#006699"><strong>using</strong></font> Cons snd_conv <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> timedLAdd.simps<font color="#000000"><strong>(</strong></font>2<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1629 </font></span>        <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;snd ?new_pwl_pd rr &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1630 </font></span>          <font color="#006699"><strong>proof</strong></font><font color="#000000"><strong>(</strong></font>cases <font color="#ff00cc">&quot;Int.nat (the(wait_diff qq)) &le; Int.nat (the(wait_diff pp))&quot;</font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1631 </font></span>            <font color="#0099ff"><strong>case</strong></font> True
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1632 </font></span>              <font color="#006699"><strong>then</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>using</strong></font> a10 a00 <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1633 </font></span>          <font color="#006699"><strong>next</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1634 </font></span>            <font color="#0099ff"><strong>case</strong></font> False
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1635 </font></span>              <font color="#006699"><strong>let</strong></font> ?new_ppt <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;wait_diff(qq := Some ((the(wait_diff qq)) -  (the(wait_diff pp))))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1636 </font></span>              <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;snd ?new_pwl_pd rr = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1637 </font></span><font color="#ff00cc">                    (snd (timedLAdd ppl ?new_ppt qq)) rr&quot;</font> <font color="#006699"><strong>using</strong></font> a10 False snd_conv <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1638 </font></span>              <font color="#006699"><strong>then</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>using</strong></font> a10 a00 Cons False <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1639 </font></span>          <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1640 </font></span>        <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1641 </font></span>        <font color="#006699"><strong>then</strong></font> <font color="#0099ff"><strong>show</strong></font> ?case <font color="#006699"><strong>using</strong></font> Cons <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1642 </font></span>    <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1643 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1644 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1645 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1646 </font></span><font color="#006699"><strong>lemma</strong></font> t0<font color="#000000"><strong>:</strong></font><font color="#ff00cc">&quot;let wait_diff = waitDiff(rscPendProcs_' s); tq_wd = waitQ_SuspQAdd tq wait_diff cid qq in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1647 </font></span><font color="#ff00cc">  wait_diff qq &ne; None &and; the(wait_diff qq) &gt; 0  &#10230; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1648 </font></span><font color="#ff00cc">  snd tq_wd qq &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1649 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1650 </font></span>  <font color="#006699"><strong>let</strong></font> ?wait_diff <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;waitDiff(rscPendProcs_' s)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1651 </font></span>  <font color="#006699"><strong>let</strong></font> ?tq_wd <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;waitQ_SuspQAdd tq ?wait_diff cid qq&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1652 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1653 </font></span>  <font color="#006699"><strong>let</strong></font> ?pwl <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;case tq cid = None of False &rArr; the(tq cid) | True &rArr; []&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1654 </font></span>  <font color="#006699"><strong>let</strong></font> ?new_pwl_pd <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;timedLAdd ?pwl ?wait_diff qq&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1655 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1656 </font></span>  <font color="#006699"><strong>have</strong></font> a10<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;snd ?tq_wd qq = snd ?new_pwl_pd qq&quot;</font> <font color="#006699"><strong>unfolding</strong></font> waitQ_SuspQAdd_def Let_def <font color="#006699"><strong>by</strong></font> simp
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1657 </font></span>  <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>assume</strong></font> a00<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?wait_diff qq &ne; None &and; the(?wait_diff qq) &gt; 0&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1658 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;snd ?tq_wd qq &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1659 </font></span>    <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1660 </font></span>      <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;snd ?new_pwl_pd qq &ne; None&quot;</font> <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>meson a00 t0'<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1661 </font></span>      <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>using</strong></font> a10 <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1662 </font></span>    <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1663 </font></span>  <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1664 </font></span>  <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1665 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1666 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1667 </font></span><font color="#006699"><strong>lemma</strong></font> waitAdd_D<font color="#000000"><strong>:</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1668 </font></span>  <font color="#ff00cc">&quot;let s' = waitAdd_D s pp;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1669 </font></span><font color="#ff00cc">      cid = the (procBlngCore pp); tq = waitQue(cores_' s); wait_diff = waitDiff(rscPendProcs_' s);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1670 </font></span><font color="#ff00cc">      tq_wd = waitQ_SuspQAdd tq wait_diff cid pp  in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1671 </font></span><font color="#ff00cc"> (wait_diff pp &ne; None &and; the(wait_diff pp) &gt; 0 &#10230; getWaitDiff s' pp &ne; None)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1672 </font></span><font color="#cc0000">(* &and; (wait_diff pp &ne; None &and; the(wait_diff pp) &lt; 0 &#10230; getWaitDiff s' pp &ne; None)*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1673 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1674 </font></span>  <font color="#006699"><strong>let</strong></font> ?s' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;waitAdd_D s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1675 </font></span>  <font color="#006699"><strong>let</strong></font> ?cid <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;the (procBlngCore pp)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1676 </font></span>  <font color="#006699"><strong>let</strong></font> ?tq <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;waitQue(cores_' s)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1677 </font></span>  <font color="#006699"><strong>let</strong></font> ?wait_diff <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;waitDiff(rscPendProcs_' s)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1678 </font></span>  <font color="#006699"><strong>let</strong></font> ?tq_wd <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;waitQ_SuspQAdd ?tq ?wait_diff ?cid pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1679 </font></span>  <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>assume</strong></font> a0<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?wait_diff pp &ne; None &and; the(?wait_diff pp) &gt; 0&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1680 </font></span>  <font color="#006699"><strong>hence</strong></font> a1<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?s' = s&#10631;cores_' := (cores_' s)&#10631;waitQue := fst ?tq_wd&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1681 </font></span><font color="#ff00cc">        rscPendProcs_' := (rscPendProcs_' s)&#10631;waitDiff := snd ?tq_wd&#10632;&#10632;&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1682 </font></span>    <font color="#006699"><strong>unfolding</strong></font> waitAdd_D_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1683 </font></span>  <font color="#006699"><strong>have</strong></font> a2<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getWaitDiff ?s' pp &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1684 </font></span>    <font color="#006699"><strong>proof</strong></font>-  
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1685 </font></span>     <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getWaitDiff ?s' pp = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1686 </font></span><font color="#ff00cc">     (</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1687 </font></span><font color="#ff00cc">       if the(?wait_diff pp) &gt; 0 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1688 </font></span><font color="#ff00cc">         snd ?tq_wd</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1689 </font></span><font color="#ff00cc">       else waitDiff(rscPendProcs_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1690 </font></span><font color="#ff00cc">     ) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1691 </font></span><font color="#ff00cc">    pp&quot;</font> <font color="#006699"><strong>unfolding</strong></font> getWaitDiff_def waitAdd_D_def Let_def <font color="#006699"><strong>by</strong></font> simp
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1692 </font></span>    <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>using</strong></font> t0
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1693 </font></span>      <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>verit<font color="#000000"><strong>,</strong></font> best<font color="#000000"><strong>)</strong></font> a0 sndI t0 waitQ_SuspQAdd_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1694 </font></span>  <font color="#006699"><strong>qed</strong></font><font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1695 </font></span>  <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1696 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1697 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1698 </font></span><font color="#006699"><strong>lemma</strong></font> getWaitDiff_schedule_Abs<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getWaitDiff (schedule_Abs s core_id) pp = getWaitDiff s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1699 </font></span>    <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1700 </font></span>    <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getWaitDiff (schedule_Abs s core_id) pp = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1701 </font></span><font color="#ff00cc">        waitDiff(rscPendProcs_'  (let t = timer_' s; newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1702 </font></span><font color="#ff00cc">      f_readyQ = readyQue (partitions_' s); newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1703 </font></span><font color="#ff00cc">      f_procSta = procSta (procs_' s); f_curProc = curProc (partitions_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1704 </font></span><font color="#ff00cc">      sched_proc_newPart = schedProc_Abs f_readyQ newPartID f_procSta f_curProc in </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1705 </font></span><font color="#ff00cc">  s&#10631;partitions_' := (partitions_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1706 </font></span><font color="#ff00cc">      &#10631;curPart := (curPart(partitions_' s))(core_id := Some newPartID),</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1707 </font></span><font color="#ff00cc">      curProc := (curProc (partitions_' s))(newPartID := Some (snd(snd sched_proc_newPart))),</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1708 </font></span><font color="#ff00cc">      readyQue := fst sched_proc_newPart&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1709 </font></span><font color="#ff00cc">    procs_' := (procs_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1710 </font></span><font color="#ff00cc">      &#10631;procSta := setProcSta' (fst (snd sched_proc_newPart)) (newPartID, (snd(snd sched_proc_newPart))) RUNNING&#10632;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1711 </font></span><font color="#ff00cc">    &#10632;)) pp&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1712 </font></span>      <font color="#006699"><strong>unfolding</strong></font> schedule_Abs_def getWaitDiff_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1713 </font></span>     <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getWaitDiff (schedule_Abs s core_id) pp = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1714 </font></span><font color="#ff00cc">        waitDiff(  (let t = timer_' s; newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1715 </font></span><font color="#ff00cc">      f_readyQ = readyQue (partitions_' s); newPartID = schedPart core_id (int t);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1716 </font></span><font color="#ff00cc">      f_procSta = procSta (procs_' s); f_curProc = curProc (partitions_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1717 </font></span><font color="#ff00cc">      sched_proc_newPart = schedProc_Abs f_readyQ newPartID f_procSta f_curProc in </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1718 </font></span><font color="#ff00cc">  rscPendProcs_'(s&#10631;partitions_' := (partitions_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1719 </font></span><font color="#ff00cc">      &#10631;curPart := (curPart(partitions_' s))(core_id := Some newPartID),</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1720 </font></span><font color="#ff00cc">      curProc := (curProc (partitions_' s))(newPartID := Some (snd(snd sched_proc_newPart))),</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1721 </font></span><font color="#ff00cc">      readyQue := fst sched_proc_newPart&#10632;,</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1722 </font></span><font color="#ff00cc">    procs_' := (procs_' s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1723 </font></span><font color="#ff00cc">      &#10631;procSta := setProcSta' (fst (snd sched_proc_newPart)) (newPartID, (snd(snd sched_proc_newPart))) RUNNING&#10632;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1724 </font></span><font color="#ff00cc">    &#10632;))) pp&quot;</font> <font color="#006699"><strong>by</strong></font> metis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1725 </font></span>     <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getWaitDiff (schedule_Abs s core_id) pp = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1726 </font></span><font color="#ff00cc">        waitDiff(rscPendProcs_' s) pp&quot;</font>  <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1727 </font></span>     <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>unfolding</strong></font> getWaitDiff_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1728 </font></span>   <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1729 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1730 </font></span><font color="#cc0000">(*timedLDel*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1731 </font></span><font color="#006699"><strong>lemma</strong></font> <font color="#ff00cc">&quot;pp&ne; p1&#10230; ( (s(pp := None))(p1 := Some ee)) pp = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1732 </font></span>  <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis fun_upd_apply<font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1733 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1734 </font></span><font color="#006699"><strong>lemma</strong></font> diff_timedLDel<font color="#000000"><strong>:</strong></font><font color="#ff00cc">&quot;(snd (timedLDel pl pd pp) pp = None)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1735 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1736 </font></span>  <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1737 </font></span>  <font color="#006699"><strong>proof</strong></font><font color="#000000"><strong>(</strong></font>induction pl<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1738 </font></span>    <font color="#0099ff"><strong>case</strong></font> Nil
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1739 </font></span>    <font color="#006699"><strong>then</strong></font> <font color="#0099ff"><strong>show</strong></font> ?case
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1740 </font></span>      <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis fun_upd_apply snd_conv timedLDel.simps<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1741 </font></span>  <font color="#006699"><strong>next</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1742 </font></span>    <font color="#0099ff"><strong>case</strong></font> <font color="#000000"><strong>(</strong></font>Cons p pl<font color="#000000"><strong>)</strong></font> <font color="#006699"><strong>thm</strong></font> Cons
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1743 </font></span>    <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;snd (timedLDel pl pd pp) pp = None&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1744 </font></span>      <font color="#006699"><strong>using</strong></font> Cons <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1745 </font></span>    <font color="#006699"><strong>{</strong></font><font color="#006699"><strong>let</strong></font> ?new_pwl_pd <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;timedLDel (p#pl) pd pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1746 </font></span>      <font color="#006699"><strong>have</strong></font> a10<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?new_pwl_pd =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1747 </font></span><font color="#ff00cc">       (let new_pl_pd = timedLDel pl pd pp in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1748 </font></span><font color="#ff00cc">        if p = pp then </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1749 </font></span><font color="#ff00cc">           let delProc_Wd = pd pp; pd_del = pd(pp := None) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1750 </font></span><font color="#ff00cc">           if pl=[] then([],pd_del) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1751 </font></span><font color="#ff00cc">            else (pl, (pd_del((pl!0) := Some (the delProc_Wd + the (pd (pl!0)))))(pp := None)) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1752 </font></span><font color="#ff00cc">         else (p#(fst new_pl_pd), snd new_pl_pd))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1753 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis timedLDel.simps<font color="#000000"><strong>(</strong></font>2<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1754 </font></span>      <font color="#006699"><strong>have</strong></font> a11<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;snd ?new_pwl_pd pp = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1755 </font></span><font color="#ff00cc">           (let new_pl_pd = timedLDel pl pd pp in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1756 </font></span><font color="#ff00cc">              if p = pp then </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1757 </font></span><font color="#ff00cc">                 let delProc_Wd = pd pp; pd_del = pd(pp := None) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1758 </font></span><font color="#ff00cc">                  if pl=[] then pd_del pp</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1759 </font></span><font color="#ff00cc">                  else  ((pd_del((pl!0) := Some (the delProc_Wd + the (pd (pl!0)))))(pp := None)) pp</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1760 </font></span><font color="#ff00cc">              else  (snd new_pl_pd) pp)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1761 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> a10 snd_conv<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1762 </font></span>      <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;snd ?new_pwl_pd pp = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1763 </font></span>      <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1764 </font></span>        <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;p = pp&and; (pl=[]) &#10230; snd ?new_pwl_pd pp =None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1765 </font></span>          <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> a11 fun_upd_same<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1766 </font></span>        <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;p = pp &and; &not;(pl=[])  &#10230; snd ?new_pwl_pd pp = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1767 </font></span>          <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>mono_tags<font color="#000000"><strong>)</strong></font> a11 fun_upd_same<font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1768 </font></span>        <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(p = pp) &#10230;snd ?new_pwl_pd pp = None &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1769 </font></span>           <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis Cons.IH a11<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1770 </font></span>        <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1771 </font></span>          <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis Cons.IH a11<font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1772 </font></span>      <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1773 </font></span>    <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1774 </font></span>    <font color="#006699"><strong>then</strong></font> <font color="#0099ff"><strong>show</strong></font> ?case
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1775 </font></span>      <font color="#006699"><strong>by</strong></font> metis 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1776 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1777 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1778 </font></span>  
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1779 </font></span><font color="#006699"><strong>lemma</strong></font> waitDel_D<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1780 </font></span>  <font color="#ff00cc">&quot;let s' = waitDel_D s pp;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1781 </font></span><font color="#ff00cc">      cid = the (procBlngCore pp); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1782 </font></span><font color="#ff00cc">      vpwl = waitQue (cores_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1783 </font></span><font color="#ff00cc">      pd = waitDiff(rscPendProcs_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1784 </font></span><font color="#ff00cc">      new_vp_pd = waitQ_SuspQDel vpwl pd cid pp  in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1785 </font></span><font color="#ff00cc">    getWaitDiff s' pp = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1786 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1787 </font></span>  <font color="#006699"><strong>let</strong></font> ?s' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;waitDel_D s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1788 </font></span>  <font color="#006699"><strong>let</strong></font> ?cid <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;the (procBlngCore pp)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1789 </font></span>  <font color="#006699"><strong>let</strong></font> ?vpwl <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;waitQue (cores_' s)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1790 </font></span>  <font color="#006699"><strong>let</strong></font> ?pd <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;waitDiff(rscPendProcs_' s)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1791 </font></span>  <font color="#006699"><strong>let</strong></font> ?new_vp_pd <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;waitQ_SuspQDel ?vpwl ?pd ?cid pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1792 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?new_vp_pd = (let new_tq_pd = timedLDel (the(?vpwl ?cid)) ?pd pp in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1793 </font></span><font color="#ff00cc">  (?vpwl(?cid := Some (fst new_tq_pd)), snd new_tq_pd))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1794 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis waitQ_SuspQDel_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1795 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getWaitDiff ?s' pp = snd ?new_vp_pd pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1796 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> PROCS_STATE_PENDING_TYPE.select_convs<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> PROCS_STATE_PENDING_TYPE.surjective PROCS_STATE_PENDING_TYPE.update_convs<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> StaProc.simps<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font> StaProc.simps<font color="#000000"><strong>(</strong></font>7<font color="#000000"><strong>)</strong></font> StaProc.surjective getWaitDiff_def waitDel_D_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1797 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getWaitDiff ?s' pp = snd (timedLDel (the(?vpwl ?cid)) ?pd pp) pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1798 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> <font color="#6600cc">&lsaquo;</font><font color="#6600cc">w</font><font color="#6600cc">a</font><font color="#6600cc">i</font><font color="#6600cc">t</font><font color="#6600cc">Q</font><font color="#6600cc">_</font><font color="#6600cc">S</font><font color="#6600cc">u</font><font color="#6600cc">s</font><font color="#6600cc">p</font><font color="#6600cc">Q</font><font color="#6600cc">D</font><font color="#6600cc">e</font><font color="#6600cc">l</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">w</font><font color="#6600cc">a</font><font color="#6600cc">i</font><font color="#6600cc">t</font><font color="#6600cc">Q</font><font color="#6600cc">u</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">c</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc">s</font><font color="#6600cc">_</font><font color="#6600cc">'</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc">)</font><font color="#6600cc">)</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">w</font><font color="#6600cc">a</font><font color="#6600cc">i</font><font color="#6600cc">t</font><font color="#6600cc">D</font><font color="#6600cc">i</font><font color="#6600cc">f</font><font color="#6600cc">f</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">r</font><font color="#6600cc">s</font><font color="#6600cc">c</font><font color="#6600cc">P</font><font color="#6600cc">e</font><font color="#6600cc">n</font><font color="#6600cc">d</font><font color="#6600cc">P</font><font color="#6600cc">r</font><font color="#6600cc">o</font><font color="#6600cc">c</font><font color="#6600cc">s</font><font color="#6600cc">_</font><font color="#6600cc">'</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc">)</font><font color="#6600cc">)</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">t</font><font color="#6600cc">h</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">p</font><font color="#6600cc">r</font><font color="#6600cc">o</font><font color="#6600cc">c</font><font color="#6600cc">B</font><font color="#6600cc">l</font><font color="#6600cc">n</font><font color="#6600cc">g</font><font color="#6600cc">C</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">p</font><font color="#6600cc">p</font><font color="#6600cc">)</font><font color="#6600cc">)</font><font color="#6600cc"> </font><font color="#6600cc">p</font><font color="#6600cc">p</font><font color="#6600cc"> </font><font color="#6600cc">=</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">l</font><font color="#6600cc">e</font><font color="#6600cc">t</font><font color="#6600cc"> </font><font color="#6600cc">n</font><font color="#6600cc">e</font><font color="#6600cc">w</font><font color="#6600cc">_</font><font color="#6600cc">t</font><font color="#6600cc">q</font><font color="#6600cc">_</font><font color="#6600cc">p</font><font color="#6600cc">d</font><font color="#6600cc"> </font><font color="#6600cc">=</font><font color="#6600cc"> </font><font color="#6600cc">t</font><font color="#6600cc">i</font><font color="#6600cc">m</font><font color="#6600cc">e</font><font color="#6600cc">d</font><font color="#6600cc">L</font><font color="#6600cc">D</font><font color="#6600cc">e</font><font color="#6600cc">l</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">t</font><font color="#6600cc">h</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">w</font><font color="#6600cc">a</font><font color="#6600cc">i</font><font color="#6600cc">t</font><font color="#6600cc">Q</font><font color="#6600cc">u</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">c</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc">s</font><font color="#6600cc">_</font><font color="#6600cc">'</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc">)</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">t</font><font color="#6600cc">h</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">p</font><font color="#6600cc">r</font><font color="#6600cc">o</font><font color="#6600cc">c</font><font color="#6600cc">B</font><font color="#6600cc">l</font><font color="#6600cc">n</font><font color="#6600cc">g</font><font color="#6600cc">C</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">p</font><font color="#6600cc">p</font><font color="#6600cc">)</font><font color="#6600cc">)</font><font color="#6600cc">)</font><font color="#6600cc">)</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">w</font><font color="#6600cc">a</font><font color="#6600cc">i</font><font color="#6600cc">t</font><font color="#6600cc">D</font><font color="#6600cc">i</font><font color="#6600cc">f</font><font color="#6600cc">f</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">r</font><font color="#6600cc">s</font><font color="#6600cc">c</font><font color="#6600cc">P</font><font color="#6600cc">e</font><font color="#6600cc">n</font><font color="#6600cc">d</font><font color="#6600cc">P</font><font color="#6600cc">r</font><font color="#6600cc">o</font><font color="#6600cc">c</font><font color="#6600cc">s</font><font color="#6600cc">_</font><font color="#6600cc">'</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc">)</font><font color="#6600cc">)</font><font color="#6600cc"> </font><font color="#6600cc">p</font><font color="#6600cc">p</font><font color="#6600cc"> </font><font color="#6600cc">i</font><font color="#6600cc">n</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">w</font><font color="#6600cc">a</font><font color="#6600cc">i</font><font color="#6600cc">t</font><font color="#6600cc">Q</font><font color="#6600cc">u</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">c</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc">s</font><font color="#6600cc">_</font><font color="#6600cc">'</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc">)</font><font color="#6600cc">(</font><font color="#6600cc">t</font><font color="#6600cc">h</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">p</font><font color="#6600cc">r</font><font color="#6600cc">o</font><font color="#6600cc">c</font><font color="#6600cc">B</font><font color="#6600cc">l</font><font color="#6600cc">n</font><font color="#6600cc">g</font><font color="#6600cc">C</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">p</font><font color="#6600cc">p</font><font color="#6600cc">)</font><font color="#6600cc"> </font><font color="#6600cc">&#8614;</font><font color="#6600cc"> </font><font color="#6600cc">f</font><font color="#6600cc">s</font><font color="#6600cc">t</font><font color="#6600cc"> </font><font color="#6600cc">n</font><font color="#6600cc">e</font><font color="#6600cc">w</font><font color="#6600cc">_</font><font color="#6600cc">t</font><font color="#6600cc">q</font><font color="#6600cc">_</font><font color="#6600cc">p</font><font color="#6600cc">d</font><font color="#6600cc">)</font><font color="#6600cc">,</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc">n</font><font color="#6600cc">d</font><font color="#6600cc"> </font><font color="#6600cc">n</font><font color="#6600cc">e</font><font color="#6600cc">w</font><font color="#6600cc">_</font><font color="#6600cc">t</font><font color="#6600cc">q</font><font color="#6600cc">_</font><font color="#6600cc">p</font><font color="#6600cc">d</font><font color="#6600cc">)</font><font color="#6600cc">)</font><font color="#6600cc">&rsaquo;</font> snd_conv<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1799 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getWaitDiff ?s' pp = None&quot;</font> <font color="#006699"><strong>using</strong></font> diff_timedLDel
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1800 </font></span>    <font color="#006699"><strong>by</strong></font> metis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1801 </font></span>  <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1802 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1803 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1804 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1805 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1806 </font></span><font color="#006699"><strong>lemma</strong></font> GET_PROCESS_ID<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1807 </font></span>  <font color="#ff00cc">&quot;let s_p_r = GET_PROCESS_ID s core_id proc_name;               </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1808 </font></span><font color="#ff00cc">    cur_part_id = the(curPartID s core_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1809 </font></span><font color="#ff00cc">    cur_ProcID = getProcIDByName s cur_part_id proc_name in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1810 </font></span><font color="#ff00cc">    if cur_ProcID = None then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1811 </font></span><font color="#ff00cc">        s_p_r = (s, None, INVALID_CONFIG)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1812 </font></span><font color="#ff00cc">    else </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1813 </font></span><font color="#ff00cc">        s_p_r = (s , cur_ProcID , NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1814 </font></span><font color="#006699"><strong>proof</strong></font> -
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1815 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_p_r <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;GET_PROCESS_ID s core_id proc_name&quot;</font>               
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1816 </font></span>  <font color="#006699"><strong>let</strong></font>  ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;the(curPartID s core_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1817 </font></span>  <font color="#006699"><strong>let</strong></font>  ?cur_ProcID <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getProcIDByName s ?cur_part_id proc_name&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1818 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?cur_ProcID = None &#10230; ?s_p_r = (s, None, INVALID_CONFIG)&quot;</font> <font color="#006699"><strong>unfolding</strong></font> GET_PROCESS_ID_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1819 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;?cur_ProcID = None &#10230; ?s_p_r = (s , ?cur_ProcID , NO_ERROR)&quot;</font> <font color="#006699"><strong>unfolding</strong></font> GET_PROCESS_ID_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1820 </font></span>  <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1821 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1822 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1823 </font></span><font color="#006699"><strong>lemma</strong></font> GET_PROCESS_STATUS<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1824 </font></span>  <font color="#ff00cc">&quot;let s_r = GET_PROCESS_STATUS s core_id proc_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1825 </font></span><font color="#ff00cc">    proc_sta = procs_' s; cur_part_id = the(curPartID s core_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1826 </font></span><font color="#ff00cc">    proc_attr = getProcAttr s (cur_part_id,proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1827 </font></span><font color="#ff00cc">     proc_status = Some &#10631;DEADLINE_TIME = deadline proc_sta (cur_part_id,proc_id),</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1828 </font></span><font color="#ff00cc">                      CUR_PRIORITY = curPriority proc_sta (cur_part_id,proc_id),</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1829 </font></span><font color="#ff00cc">                      PROC_STA = procSta proc_sta (cur_part_id,proc_id),</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1830 </font></span><font color="#ff00cc">                      ATTRIBUTES = createdProcs proc_sta (cur_part_id,proc_id)&#10632; in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1831 </font></span><font color="#ff00cc">   if proc_attr = None then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1832 </font></span><font color="#ff00cc">      s_r = (s , None , INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1833 </font></span><font color="#ff00cc">   else</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1834 </font></span><font color="#ff00cc">      s_r =  (s,proc_status, NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1835 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1836 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_r <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;GET_PROCESS_STATUS s core_id proc_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1837 </font></span>  <font color="#006699"><strong>let</strong></font> ?proc_sta <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;procs_' s&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1838 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;the(curPartID s core_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1839 </font></span>  <font color="#006699"><strong>let</strong></font> ?proc_attr <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getProcAttr s (?cur_part_id,proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1840 </font></span>  <font color="#006699"><strong>let</strong></font> ?proc_status <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;Some &#10631;DEADLINE_TIME = deadline ?proc_sta (?cur_part_id,proc_id),</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1841 </font></span><font color="#ff00cc">                      CUR_PRIORITY = curPriority ?proc_sta (?cur_part_id,proc_id),</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1842 </font></span><font color="#ff00cc">                      PROC_STA = procSta ?proc_sta (?cur_part_id,proc_id),</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1843 </font></span><font color="#ff00cc">                      ATTRIBUTES = createdProcs ?proc_sta (?cur_part_id,proc_id)&#10632;&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1844 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?proc_attr = None &#10230; ?s_r = (s , None , INVALID_PARAM)&quot;</font> <font color="#006699"><strong>unfolding</strong></font> GET_PROCESS_STATUS_def <font color="#006699"><strong>by</strong></font> auto  
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1845 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;?proc_attr = None &#10230; ?s_r = (s,?proc_status, NO_ERROR)&quot;</font> <font color="#006699"><strong>unfolding</strong></font> GET_PROCESS_STATUS_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1846 </font></span>  <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1847 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1848 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1849 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1850 </font></span><font color="#006699"><strong>lemma</strong></font> CREATE_PROCESS<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1851 </font></span>  <font color="#ff00cc">&quot;let s_pid_r = CREATE_PROCESS s core_id proc_att;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1852 </font></span><font color="#ff00cc">   cur_part_id = curPartID s core_id; cur_part_cfg = getPartByID (the cur_part_id); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1853 </font></span><font color="#ff00cc">   cur_part_mod = getcurPartMode s core_id; proc_id = newUserProcID s (the cur_part_id);   </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1854 </font></span><font color="#ff00cc">   s_created_new = createProc s (the cur_part_id, proc_id) proc_att;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1855 </font></span><font color="#ff00cc">   s_created_new_prio =  setPriority s_created_new (the cur_part_id, proc_id) (BASE_PRIORITY proc_att);  </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1856 </font></span><font color="#ff00cc">   s_set_created_new = setProcSta s_created_new_prio (the cur_part_id, proc_id) DORMANT;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1857 </font></span><font color="#ff00cc">   proc_prio' = getPriority (fst s_pid_r) (the cur_part_id, proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1858 </font></span><font color="#ff00cc">   proc_att' = getProcAttr (fst s_pid_r) (the cur_part_id,proc_id) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1859 </font></span><font color="#ff00cc">   if getProcIDByName s (the cur_part_id) (PROC_ATTR_TYPE.NAME proc_att) &ne; None then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1860 </font></span><font color="#ff00cc">      s_pid_r = (s,None, NO_ACTION)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1861 </font></span><font color="#ff00cc">   else if STACK_SZ proc_att &gt;  (MAX_STACK_SZ_VALUE) &or; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1862 </font></span><font color="#ff00cc">            BASE_PRIORITY proc_att &gt; (MAX_PRIORITY_VALUE) &or;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1863 </font></span><font color="#ff00cc">            PERIOD proc_att &gt; Int.int  (INVALID_TIMEOUT_VALUE) &or; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1864 </font></span><font color="#ff00cc">            Int.nat (TIME_CAPACITY proc_att) &gt;  (INVALID_TIMEOUT_VALUE) &or;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1865 </font></span><font color="#ff00cc">            (PERIOD proc_att &gt; 0 &and; TIME_CAPACITY proc_att &gt; (PERIOD proc_att)) then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1866 </font></span><font color="#ff00cc">          s_pid_r = (s ,None,INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1867 </font></span><font color="#ff00cc">   else if (PERIOD proc_att &gt; 0 &and; Int.nat (PERIOD proc_att) mod Int.nat (partPeriod (the cur_part_cfg)) &ne; 0) then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1868 </font></span><font color="#ff00cc">          s_pid_r = (s ,None, INVALID_CONFIG)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1869 </font></span><font color="#ff00cc">   else if cur_part_mod &ne; None &and; the cur_part_mod = NORMAL then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1870 </font></span><font color="#ff00cc">          s_pid_r = (s ,None, INVALID_MODE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1871 </font></span><font color="#ff00cc">   else s_pid_r = (s_set_created_new ,Some proc_id, NO_ERROR) &and;  proc_prio' &ne; None &and; proc_att' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1872 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1873 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1874 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_pid_r <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;CREATE_PROCESS s core_id proc_att&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1875 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curPartID s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1876 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_cfg <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getPartByID (the ?cur_part_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1877 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_mod <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getcurPartMode s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1878 </font></span>  <font color="#006699"><strong>let</strong></font> ?proc_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;newUserProcID s (the ?cur_part_id)&quot;</font>   
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1879 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_created_new <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;createProc s (the ?cur_part_id, ?proc_id) proc_att&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1880 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_created_new_prio <font color="#000000"><strong>=</strong></font>  <font color="#ff00cc">&quot;setPriority ?s_created_new (the ?cur_part_id, ?proc_id) (BASE_PRIORITY proc_att)&quot;</font>  
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1881 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_set_created_new <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setProcSta ?s_created_new_prio (the ?cur_part_id, ?proc_id) DORMANT&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1882 </font></span>  <font color="#006699"><strong>let</strong></font> ?proc_prio' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getPriority (fst ?s_pid_r) (the ?cur_part_id, ?proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1883 </font></span>  <font color="#006699"><strong>let</strong></font> ?proc_att' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getProcAttr (fst ?s_pid_r) (the ?cur_part_id, ?proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1884 </font></span>  <font color="#006699"><strong>have</strong></font> a10<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcIDByName s (the ?cur_part_id) (PROC_ATTR_TYPE.NAME proc_att) &ne; None &#10230; ?s_pid_r = (s,None, NO_ACTION)&quot;</font> <font color="#006699"><strong>unfolding</strong></font> CREATE_PROCESS_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1885 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1886 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a11 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&not;(getProcIDByName s (the ?cur_part_id) (PROC_ATTR_TYPE.NAME proc_att) &ne; None) &and; (STACK_SZ proc_att &gt;  (MAX_STACK_SZ_VALUE) &or; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1887 </font></span><font color="#ff00cc">            BASE_PRIORITY proc_att &gt; (MAX_PRIORITY_VALUE) &or;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1888 </font></span><font color="#ff00cc">            PERIOD proc_att &gt; Int.int  (INVALID_TIMEOUT_VALUE) &or; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1889 </font></span><font color="#ff00cc">            Int.nat (TIME_CAPACITY proc_att) &gt;  (INVALID_TIMEOUT_VALUE) &or;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1890 </font></span><font color="#ff00cc">            (PERIOD proc_att &gt; 0 &and; TIME_CAPACITY proc_att &gt; (PERIOD proc_att))) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1891 </font></span><font color="#ff00cc">              &#10230; ?s_pid_r = (s ,None,INVALID_PARAM)&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1892 </font></span>      <font color="#006699"><strong>unfolding</strong></font> CREATE_PROCESS_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1893 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1894 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a12 <font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&not;(getProcIDByName s (the ?cur_part_id) (PROC_ATTR_TYPE.NAME proc_att) &ne; None) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1895 </font></span><font color="#ff00cc">                  &and; &not;(STACK_SZ proc_att &gt;  (MAX_STACK_SZ_VALUE) &or;   BASE_PRIORITY proc_att &gt; (MAX_PRIORITY_VALUE) &or;PERIOD proc_att &gt; Int.int  (INVALID_TIMEOUT_VALUE) &or; Int.nat (TIME_CAPACITY proc_att) &gt;  (INVALID_TIMEOUT_VALUE) &or;(PERIOD proc_att &gt; 0 &and; TIME_CAPACITY proc_att &gt; (PERIOD proc_att))) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1896 </font></span><font color="#ff00cc">                  &and; (PERIOD proc_att &gt; 0 &and; Int.nat (PERIOD proc_att) mod Int.nat (partPeriod (the ?cur_part_cfg)) &ne; 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1897 </font></span><font color="#ff00cc">                  &#10230;?s_pid_r = (s ,None, INVALID_CONFIG)&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1898 </font></span>    <font color="#006699"><strong>unfolding</strong></font> CREATE_PROCESS_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1899 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a13<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&not;(getProcIDByName s (the ?cur_part_id) (PROC_ATTR_TYPE.NAME proc_att) &ne; None) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1900 </font></span><font color="#ff00cc">                  &and; &not;(STACK_SZ proc_att &gt;  (MAX_STACK_SZ_VALUE) &or;   BASE_PRIORITY proc_att &gt; (MAX_PRIORITY_VALUE) &or;PERIOD proc_att &gt; Int.int  (INVALID_TIMEOUT_VALUE) &or; Int.nat (TIME_CAPACITY proc_att) &gt;  (INVALID_TIMEOUT_VALUE) &or;(PERIOD proc_att &gt; 0 &and; TIME_CAPACITY proc_att &gt; (PERIOD proc_att))) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1901 </font></span><font color="#ff00cc">                  &and; &not;(PERIOD proc_att &gt; 0 &and; Int.nat (PERIOD proc_att) mod Int.nat (partPeriod (the ?cur_part_cfg)) &ne; 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1902 </font></span><font color="#ff00cc">                  &and; ?cur_part_mod &ne; None &and; the ?cur_part_mod = NORMAL</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1903 </font></span><font color="#ff00cc">                  &#10230;?s_pid_r = (s ,None, INVALID_MODE)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1904 </font></span>    <font color="#006699"><strong>unfolding</strong></font> CREATE_PROCESS_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1905 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a14<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&not;(getProcIDByName s (the ?cur_part_id) (PROC_ATTR_TYPE.NAME proc_att) &ne; None) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1906 </font></span><font color="#ff00cc">                  &and; &not;(STACK_SZ proc_att &gt;  (MAX_STACK_SZ_VALUE) &or;   BASE_PRIORITY proc_att &gt; (MAX_PRIORITY_VALUE) &or;PERIOD proc_att &gt; Int.int  (INVALID_TIMEOUT_VALUE) &or; Int.nat (TIME_CAPACITY proc_att) &gt;  (INVALID_TIMEOUT_VALUE) &or;(PERIOD proc_att &gt; 0 &and; TIME_CAPACITY proc_att &gt; (PERIOD proc_att))) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1907 </font></span><font color="#ff00cc">                  &and; &not;(PERIOD proc_att &gt; 0 &and; Int.nat (PERIOD proc_att) mod Int.nat (partPeriod (the ?cur_part_cfg)) &ne; 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1908 </font></span><font color="#ff00cc">                  &and; &not;(?cur_part_mod &ne; None &and; the ?cur_part_mod = NORMAL)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1909 </font></span><font color="#ff00cc">                  &#10230;?s_pid_r = (?s_set_created_new ,Some ?proc_id, NO_ERROR)&and; ?proc_prio' &ne; None &and; ?proc_att' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1910 </font></span>    <font color="#006699"><strong>proof</strong></font> -
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1911 </font></span>      <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>assume</strong></font> <font color="#ff00cc">&quot;&not;(getProcIDByName s (the ?cur_part_id) (PROC_ATTR_TYPE.NAME proc_att) &ne; None) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1912 </font></span><font color="#ff00cc">                  &and; &not;(STACK_SZ proc_att &gt;  (MAX_STACK_SZ_VALUE) &or;   BASE_PRIORITY proc_att &gt; (MAX_PRIORITY_VALUE) &or;PERIOD proc_att &gt; Int.int  (INVALID_TIMEOUT_VALUE) &or; Int.nat (TIME_CAPACITY proc_att) &gt;  (INVALID_TIMEOUT_VALUE) &or;(PERIOD proc_att &gt; 0 &and; TIME_CAPACITY proc_att &gt; (PERIOD proc_att))) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1913 </font></span><font color="#ff00cc">                  &and; &not;(PERIOD proc_att &gt; 0 &and; Int.nat (PERIOD proc_att) mod Int.nat (partPeriod (the ?cur_part_cfg)) &ne; 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1914 </font></span><font color="#ff00cc">                  &and; &not;(?cur_part_mod &ne; None &and; the ?cur_part_mod = NORMAL)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1915 </font></span>        <font color="#006699"><strong>hence</strong></font> a14_0<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?s_pid_r = (?s_set_created_new ,Some ?proc_id, NO_ERROR)&quot;</font> <font color="#006699"><strong>unfolding</strong></font> CREATE_PROCESS_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1916 </font></span>        <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font>  <font color="#ff00cc">&quot;?proc_prio' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1917 </font></span>          <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> set_NotNone getPrio_setSta a14_0<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1918 </font></span>        <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?proc_att' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1919 </font></span>          <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> getAttr_set_NotNone getAttr_setPriority getAttr_setProcSta a14_0<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1920 </font></span>        <font color="#006699"><strong>ultimately</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?s_pid_r = (?s_set_created_new ,Some ?proc_id, NO_ERROR)&and; ?proc_prio' &ne; None &and; ?proc_att' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1921 </font></span>          <font color="#006699"><strong>by</strong></font> blast
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1922 </font></span>      <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1923 </font></span>      <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1924 </font></span>    <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1925 </font></span>   <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1926 </font></span>   <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1927 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1928 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1929 </font></span><font color="#006699"><strong>lemma</strong></font> SET_PRIORITY<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1930 </font></span>  <font color="#ff00cc">&quot;let s_r = SET_PRIORITY s core_id proc_id proc_priority;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1931 </font></span><font color="#ff00cc">      cur_part_id = the(curPartID s core_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1932 </font></span><font color="#ff00cc">      proc_sta = getProcSta s (cur_part_id,proc_id); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1933 </font></span><font color="#ff00cc">      plMtxPrio =  Some (the(getCurPrioUPLMtx s (cur_part_id,PREEMPT_MUTEX_ID_TYPE)));</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1934 </font></span><font color="#ff00cc">      setPrio = if getProcUserPLMtx s (cur_part_id,proc_id) &ne; None then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1935 </font></span><font color="#ff00cc">                        restoreCurPrioUPLMtx s (cur_part_id,PREEMPT_MUTEX_ID_TYPE) (cur_part_id,proc_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1936 </font></span><font color="#ff00cc">                    else setPriority s (cur_part_id,proc_id) proc_priority;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1937 </font></span><font color="#ff00cc">      proc_prio' = getPriority (fst s_r) (cur_part_id, proc_id) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1938 </font></span><font color="#ff00cc">  if  getProcAttr s (cur_part_id,proc_id) = None  &or; proc_priority &gt; MAX_PRIORITY_VALUE then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1939 </font></span><font color="#ff00cc">      s_r = (s , INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1940 </font></span><font color="#ff00cc">  else if proc_sta = Some DORMANT then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1941 </font></span><font color="#ff00cc">      s_r = (s , INVALID_MODE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1942 </font></span><font color="#ff00cc">  else </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1943 </font></span><font color="#ff00cc">      s_r = (schedule_Abs setPrio core_id  ,NO_ERROR) &and; proc_prio' &ne; None &and; (&not;(getProcUserPLMtx s (cur_part_id,proc_id) &ne; None) &#10230;proc_prio' = Some proc_priority)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1944 </font></span><font color="#ff00cc">        &and; getProcUserPLMtx s (cur_part_id,proc_id) &ne; None &#10230; proc_prio' = plMtxPrio &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1945 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1946 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_r <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;SET_PRIORITY s core_id proc_id proc_priority&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1947 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;the(curPartID s core_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1948 </font></span>  <font color="#006699"><strong>let</strong></font> ?proc_sta <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getProcSta s (?cur_part_id,proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1949 </font></span>  <font color="#006699"><strong>let</strong></font> ?plMtxPrio <font color="#000000"><strong>=</strong></font>  <font color="#ff00cc">&quot;Some (the(getCurPrioUPLMtx s (?cur_part_id,PREEMPT_MUTEX_ID_TYPE)))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1950 </font></span>  <font color="#006699"><strong>let</strong></font> ?setPrio <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;if getProcUserPLMtx s (?cur_part_id,proc_id) &ne; None then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1951 </font></span><font color="#ff00cc">                        restoreCurPrioUPLMtx s (?cur_part_id,PREEMPT_MUTEX_ID_TYPE) (?cur_part_id,proc_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1952 </font></span><font color="#ff00cc">                    else setPriority s (?cur_part_id,proc_id) proc_priority&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1953 </font></span>  <font color="#006699"><strong>let</strong></font> ?proc_prio' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getPriority (fst ?s_r) (?cur_part_id, proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1954 </font></span>  <font color="#006699"><strong>have</strong></font> a10<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;(getProcAttr s (?cur_part_id,proc_id) = None  &or; proc_priority &gt; MAX_PRIORITY_VALUE) &#10230; ?s_r = (s , INVALID_PARAM)&quot;</font> <font color="#006699"><strong>unfolding</strong></font> SET_PRIORITY_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1955 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a11<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&not;((getProcAttr s (?cur_part_id,proc_id) = None  &or; proc_priority &gt; MAX_PRIORITY_VALUE)) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1956 </font></span><font color="#ff00cc">                    &and; ?proc_sta = Some DORMANT &#10230; ?s_r = (s , INVALID_MODE)&quot;</font> <font color="#006699"><strong>unfolding</strong></font> SET_PRIORITY_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1957 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a12<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&not;((getProcAttr s (?cur_part_id,proc_id) = None  &or; proc_priority &gt; MAX_PRIORITY_VALUE)) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1958 </font></span><font color="#ff00cc">                    &and; &not;?proc_sta = Some DORMANT &#10230; ?s_r = (schedule_Abs ?setPrio core_id  ,NO_ERROR) &and; ?proc_prio' &ne; None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1959 </font></span><font color="#ff00cc">                  &and;(&not;(getProcUserPLMtx s (?cur_part_id,proc_id) &ne; None) &#10230;?proc_prio' = Some proc_priority)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1960 </font></span><font color="#ff00cc">                  &and; getProcUserPLMtx s (?cur_part_id,proc_id) &ne; None &#10230; ?proc_prio' = ?plMtxPrio&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1961 </font></span>  <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1962 </font></span>    <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>assume</strong></font> a12_0<font color="#000000"><strong>:</strong></font><font color="#ff00cc">&quot;&not;((getProcAttr s (?cur_part_id,proc_id) = None  &or; proc_priority &gt; MAX_PRIORITY_VALUE)) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1963 </font></span><font color="#ff00cc">                    &and; &not;?proc_sta = Some DORMANT&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1964 </font></span>      <font color="#006699"><strong>hence</strong></font> a12_1<font color="#000000"><strong>:</strong></font><font color="#ff00cc">&quot;?s_r = (schedule_Abs ?setPrio core_id  ,NO_ERROR)&quot;</font>  <font color="#006699"><strong>unfolding</strong></font> SET_PRIORITY_def Let_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1965 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?proc_prio' &ne; None&quot;</font>       
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1966 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt a12_1 fstI getPrio_sd option.discI set_NotNone set_restorePrio_NotNone<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1967 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;(&not;(getProcUserPLMtx s (?cur_part_id,proc_id) &ne; None) &#10230;?proc_prio' = Some proc_priority)&quot;</font>       
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1968 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt a12_1 fstI getPrio_sd option.discI set_restorePrio_NotNone set_NotNone set_restorePrio_NotNone<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1969 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getProcUserPLMtx s (?cur_part_id,proc_id) &ne; None &#10230; ?proc_prio' = ?plMtxPrio&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1970 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt a12_1 fstI getPrio_sd option.discI set_restorePrio_NotNone set_NotNone set_restorePrio_NotNone<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1971 </font></span>        <font color="#006699"><strong>ultimately</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;((getProcAttr s (?cur_part_id,proc_id) = None  &or; proc_priority &gt; MAX_PRIORITY_VALUE)) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1972 </font></span><font color="#ff00cc">                    &and; &not;?proc_sta = Some DORMANT &#10230; ?s_r = (schedule_Abs ?setPrio core_id  ,NO_ERROR) &and; ?proc_prio' &ne; None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1973 </font></span><font color="#ff00cc">               &and; getProcUserPLMtx s (?cur_part_id,proc_id) &ne; None &#10230; ?proc_prio' = ?plMtxPrio&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1974 </font></span>        <font color="#006699"><strong>by</strong></font> simp 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1975 </font></span>    <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1976 </font></span>     <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1977 </font></span>   <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1978 </font></span>   <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1979 </font></span>  <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1980 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1981 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1982 </font></span><font color="#006699"><strong>lemma</strong></font> getCterSusp_set<font color="#000000"><strong>:</strong></font><font color="#ff00cc">&quot;getCterSusp (setCterSusp s pp time) pp = Some time&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1983 </font></span>  <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> getCterSusp_def setCterSusp_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1984 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1985 </font></span><font color="#006699"><strong>lemma</strong></font> getCterSusp_setCntxt<font color="#000000"><strong>:</strong></font><font color="#ff00cc">&quot;getCterSusp (setCntxt s pp susp) pp = getCterSusp s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1986 </font></span>  <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> getCterSusp_def setCntxt_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1987 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1988 </font></span><font color="#006699"><strong>lemma</strong></font> getCterSusp_schedule_Abs<font color="#000000"><strong>:</strong></font><font color="#ff00cc">&quot;getCterSusp (schedule_Abs s core_id) pp = getCterSusp s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1989 </font></span>  <font color="#006699"><strong>unfolding</strong></font>  getCterSusp_def schedule_Abs_def
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1990 </font></span>  <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> StaPart_Sched.update_convs<font color="#000000"><strong>(</strong></font>2<font color="#000000"><strong>)</strong></font> StaProc.simps<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font> StaProc.surjective StaProc_sched.simps<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1991 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1992 </font></span><font color="#006699"><strong>axiomatization</strong></font> <font color="#009966"><strong>where</strong></font> procSta_sb_WAITING<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getProcSta s pp = Some WAITING &#10230;  getProcSta (schedule_Abs s core_id) pp = getProcSta s pp &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1993 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1994 </font></span> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1995 </font></span><font color="#006699"><strong>lemma</strong></font> SUSPEND_SELF_FT<font color="#000000"><strong>:</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1996 </font></span>  <font color="#ff00cc">&quot;let s_r = SUSPEND_SELF s core_id tout;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1997 </font></span><font color="#ff00cc">      cur_part_id = curPartID s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1998 </font></span><font color="#ff00cc">      cur_proc_id = curProcID_Core s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1999 </font></span><font color="#ff00cc">      procMutx = getProcUserPLMtx s (the cur_part_id,the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2000 </font></span><font color="#ff00cc">      procSta' = getProcSta (fst s_r) (the cur_part_id,the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2001 </font></span><font color="#ff00cc">      tCounterSusp' = getCterSusp (fst s_r) (the cur_part_id,the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2002 </font></span><font color="#ff00cc">      suspDiff' = getSuspDiff (fst s_r) (the cur_part_id,the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2003 </font></span><font color="#ff00cc">      proc_ctx' = getCntxt (fst s_r) (the cur_part_id,the cur_proc_id)  in </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2004 </font></span><font color="#ff00cc">   curPartID s core_id &ne;  None &and;  curProcID_Core s core_id &ne; None &#10230;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2005 </font></span><font color="#ff00cc">  (if procMutx &ne; None &or; (the cur_proc_id) = HM_PROC_ID then </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2006 </font></span><font color="#ff00cc">     s_r = (s, Some INVALID_MODE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2007 </font></span><font color="#ff00cc">  else if Int.nat tout &ge; INVALID_TIMEOUT_VALUE  then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2008 </font></span><font color="#ff00cc">     s_r =  (s ,Some  INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2009 </font></span><font color="#ff00cc">  else if isPeriodic s (the cur_part_id, the cur_proc_id) then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2010 </font></span><font color="#ff00cc">     s_r = (s ,Some  INVALID_MODE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2011 </font></span><font color="#ff00cc">  else if tout = 0 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2012 </font></span><font color="#ff00cc">     s_r = (s ,Some NO_ERROR) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2013 </font></span><font color="#ff00cc">  else procSta' = Some WAITING &and;  proc_ctx' &ne; None &and; suspDiff' &ne; None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2014 </font></span><font color="#ff00cc">       &and; (tout=-1 &#10230;suspDiff' = Some (-1)) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2015 </font></span><font color="#ff00cc">      &and;  (tout &gt;0 &#10230;tCounterSusp' = Some (Int.int(timer_' s) +  tout)))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2016 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2017 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_r <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;SUSPEND_SELF s core_id tout&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2018 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curPartID s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2019 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_proc_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curProcID_Core s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2020 </font></span>  <font color="#006699"><strong>let</strong></font> ?procMutx <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getProcUserPLMtx s (the ?cur_part_id,the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2021 </font></span>  <font color="#006699"><strong>let</strong></font> ?procSta' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getProcSta (fst ?s_r) (the ?cur_part_id,the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2022 </font></span>  <font color="#006699"><strong>let</strong></font> ?tCounterSusp' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getCterSusp (fst ?s_r) (the ?cur_part_id,the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2023 </font></span>  <font color="#006699"><strong>let</strong></font> ?suspDiff' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getSuspDiff (fst ?s_r) (the ?cur_part_id,the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2024 </font></span>  <font color="#006699"><strong>let</strong></font> ?proc_ctx' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getCntxt (fst ?s_r) (the ?cur_part_id,the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2025 </font></span>  <font color="#006699"><strong>have</strong></font> a10<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;curPartID s core_id &ne;  None &and;  curProcID_Core s core_id &ne; None&and;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2026 </font></span><font color="#ff00cc">            ?procMutx &ne; None &or; (the ?cur_proc_id) = HM_PROC_ID &#10230; ?s_r = (s ,Some INVALID_MODE) &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2027 </font></span>    <font color="#006699"><strong>unfolding</strong></font> SUSPEND_SELF_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2028 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a11<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;curPartID s core_id &ne;  None &and;  curProcID_Core s core_id &ne; None&and;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2029 </font></span><font color="#ff00cc">                  &not;(?procMutx &ne; None &or; (the ?cur_proc_id) = HM_PROC_ID)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2030 </font></span><font color="#ff00cc">                      &and; Int.nat tout &ge; INVALID_TIMEOUT_VALUE </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2031 </font></span><font color="#ff00cc">                  &#10230; ?s_r = (s ,Some INVALID_PARAM)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2032 </font></span>    <font color="#006699"><strong>unfolding</strong></font> SUSPEND_SELF_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2033 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a12<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;curPartID s core_id &ne;  None &and;  curProcID_Core s core_id &ne; None&and;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2034 </font></span><font color="#ff00cc">                  &not;(?procMutx &ne; None &or; (the ?cur_proc_id) = HM_PROC_ID)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2035 </font></span><font color="#ff00cc">                     &and; &not;( Int.nat tout &ge; INVALID_TIMEOUT_VALUE )</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2036 </font></span><font color="#ff00cc">                     &and; isPeriodic s (the ?cur_part_id, the ?cur_proc_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2037 </font></span><font color="#ff00cc">                   &#10230; ?s_r = (s ,Some INVALID_MODE)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2038 </font></span>    <font color="#006699"><strong>unfolding</strong></font> SUSPEND_SELF_def  <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2039 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a13<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;curPartID s core_id &ne;  None &and;  curProcID_Core s core_id &ne; None&and;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2040 </font></span><font color="#ff00cc">                    &not;(?procMutx &ne; None &or; (the ?cur_proc_id) = HM_PROC_ID)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2041 </font></span><font color="#ff00cc">                     &and;&not; (Int.nat tout &ge; INVALID_TIMEOUT_VALUE) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2042 </font></span><font color="#ff00cc">                     &and;&not; isPeriodic s (the ?cur_part_id, the ?cur_proc_id) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2043 </font></span><font color="#ff00cc">                     &and; tout = 0</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2044 </font></span><font color="#ff00cc">                    &#10230; ?s_r = (s ,Some NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2045 </font></span>    <font color="#006699"><strong>unfolding</strong></font> SUSPEND_SELF_def  <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2046 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a14<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;curPartID s core_id &ne;  None &and;  curProcID_Core s core_id &ne; None&and;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2047 </font></span><font color="#ff00cc">                    &not;(?procMutx &ne; None &or; (the ?cur_proc_id) = HM_PROC_ID)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2048 </font></span><font color="#ff00cc">                     &and;&not; (Int.nat tout &ge; INVALID_TIMEOUT_VALUE )</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2049 </font></span><font color="#ff00cc">                     &and;&not; isPeriodic s (the ?cur_part_id, the ?cur_proc_id) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2050 </font></span><font color="#ff00cc">                     &and; &not;(tout = 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2051 </font></span><font color="#ff00cc">                   &#10230; ?procSta' = Some WAITING &and;  ?proc_ctx' &ne; None &and; ?suspDiff' &ne; None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2052 </font></span><font color="#ff00cc">       &and; (tout=-1 &#10230;?suspDiff' = Some (-1)) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2053 </font></span><font color="#ff00cc">      &and;  (tout &gt;0 &#10230;?tCounterSusp' = Some (Int.int(timer_' s) +  tout))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2054 </font></span>  <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2055 </font></span>    <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>assume</strong></font> a14_0<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;curPartID s core_id &ne;  None &and;  curProcID_Core s core_id &ne; None&and;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2056 </font></span><font color="#ff00cc">                    &not;(?procMutx &ne; None &or; (the ?cur_proc_id) = HM_PROC_ID)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2057 </font></span><font color="#ff00cc">                     &and;&not; Int.nat tout &ge; INVALID_TIMEOUT_VALUE </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2058 </font></span><font color="#ff00cc">                     &and;&not; isPeriodic s (the ?cur_part_id, the ?cur_proc_id) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2059 </font></span><font color="#ff00cc">                     &and; &not;(tout = 0)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2060 </font></span>      <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;?proc_ctx' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2061 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>verit<font color="#000000"><strong>,</strong></font> best<font color="#000000"><strong>)</strong></font> getCtx_sd SUSPEND_SELF_def fstI setCtx_Not_None<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2062 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?suspDiff' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2063 </font></span>        <font color="#006699"><strong>unfolding</strong></font> SUSPEND_SELF_def
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2064 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt fstI getSuspDiff_set_NotNone getSuspDiff_setCterSusp getSuspDiff_suspQueAdd_D getSuspDiff_setCntxt getSuspDiff_schedule_Abs a14_0<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2065 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;(tout=-1 &#10230;?suspDiff' = Some (-1))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2066 </font></span>        <font color="#006699"><strong>unfolding</strong></font> SUSPEND_SELF_def
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2067 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> a14_0 fst_conv getSuspDiff_schedule_Abs getSuspDiff_set getSuspDiff_setCntxt<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2068 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;tout &gt;0 &#10230; ?tCounterSusp' = Some (Int.int(timer_' s) + tout)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2069 </font></span>        <font color="#006699"><strong>unfolding</strong></font> SUSPEND_SELF_def
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2070 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> a14_0 fst_conv getCterSusp_schedule_Abs getCterSusp_set getCterSusp_setCntxt<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2071 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?procSta' = Some WAITING&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2072 </font></span>        <font color="#006699"><strong>unfolding</strong></font> SUSPEND_SELF_def
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2073 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> a14_0 procSta_sb_WAITING fst_conv getSta_setCntxt getSta_setCterSusp getSta_setSuspDiff getSta_set_STATE getSta_suspQueAdd_D<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2074 </font></span>      <font color="#006699"><strong>ultimately</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?procSta' = Some WAITING &and;  ?proc_ctx' &ne; None &and; ?suspDiff' &ne; None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2075 </font></span><font color="#ff00cc">                     &and; (tout=-1 &#10230;?suspDiff' = Some (-1)) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2076 </font></span><font color="#ff00cc">                     &and;  (tout &gt;0 &#10230;?tCounterSusp' = Some (Int.int(timer_' s) +  tout))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2077 </font></span>        <font color="#006699"><strong>unfolding</strong></font> SUSPEND_SELF_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2078 </font></span>      <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2079 </font></span>      <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2080 </font></span>    <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2081 </font></span>    <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>unfolding</strong></font> SUSPEND_SELF_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2082 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2083 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2084 </font></span><font color="#006699"><strong>lemma</strong></font> SUSPEND_SELF'_FT<font color="#000000"><strong>:</strong></font><font color="#ff00cc">&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2085 </font></span><font color="#ff00cc">let s_r = SUSPEND_SELF'  s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2086 </font></span><font color="#ff00cc">    cur_part_id = the(curPartID s core_id); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2087 </font></span><font color="#ff00cc">    cur_proc_id = the(curProcID_Core s core_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2088 </font></span><font color="#ff00cc">    cntxt = getCntxt s (cur_part_id, cur_proc_id); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2089 </font></span><font color="#ff00cc">    ddl = getCterRsc s (cur_part_id, cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2090 </font></span><font color="#ff00cc">    proc_ctx' = getCntxt (fst s_r) (cur_part_id, cur_proc_id) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2091 </font></span><font color="#ff00cc">   curPartID s core_id &ne;  None &and;  curProcID_Core s core_id &ne; None &#10230;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2092 </font></span><font color="#ff00cc">    proc_ctx' = None &and; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2093 </font></span><font color="#ff00cc">      (if Int.int(timer_' s) &ge; the ddl  then snd s_r = TIMED_OUT </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2094 </font></span><font color="#ff00cc">          else snd s_r = NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2095 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2096 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_r <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;SUSPEND_SELF'  s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2097 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;the(curPartID s core_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2098 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_proc_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;the(curProcID_Core s core_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2099 </font></span>  <font color="#006699"><strong>let</strong></font> ?cntxt <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getCntxt s (?cur_part_id, ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2100 </font></span>  <font color="#006699"><strong>let</strong></font> ?ddl <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getCterRsc s (?cur_part_id, ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2101 </font></span>  <font color="#006699"><strong>let</strong></font> ?proc_ctx' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getCntxt (fst ?s_r) (?cur_part_id, ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2102 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?proc_ctx' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2103 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> getCtx_rst_None SUSPEND_SELF'_def fst_conv<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2104 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;Int.int(timer_' s) &ge; the ?ddl</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2105 </font></span><font color="#ff00cc">                &#10230; snd ?s_r = TIMED_OUT&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2106 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> SUSPEND_SELF'_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2107 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;Int.int(timer_' s) &ge; the ?ddl</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2108 </font></span><font color="#ff00cc">                &#10230;snd ?s_r = NO_ERROR&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2109 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> SUSPEND_SELF'_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2110 </font></span>  <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2111 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2112 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2113 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2114 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2115 </font></span><font color="#006699"><strong>lemma</strong></font> SUSPEND<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2116 </font></span>  <font color="#ff00cc">&quot;let s_r = SUSPEND s core_id proc_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2117 </font></span><font color="#ff00cc">      cur_part_id = the(curPartID s core_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2118 </font></span><font color="#ff00cc">      get_proc_sta = getProcSta s (cur_part_id,proc_id);      </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2119 </font></span><font color="#ff00cc">      cur_proc_id = curProcID_Core s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2120 </font></span><font color="#ff00cc">      rsc_id_num = getRscId_Num s (cur_part_id,proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2121 </font></span><font color="#ff00cc">      s_suspendFeild = suspProc s (cur_part_id,proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2122 </font></span><font color="#ff00cc">      s_setSta = setProcSta s_suspendFeild (cur_part_id,proc_id) WAITING;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2123 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2124 </font></span><font color="#ff00cc">      suspend' = suspended (rscPendProcs_' (fst s_r)) (cur_part_id,proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2125 </font></span><font color="#ff00cc">      proc_sta' = getProcSta (fst s_r) (cur_part_id, proc_id) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2126 </font></span><font color="#ff00cc">    if getProcUserPLMtx s (cur_part_id,proc_id) &ne; None &or; (rsc_id_num &ne; None &and; isResrcLockMtxType (fst (the rsc_id_num)) = True)  then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2127 </font></span><font color="#ff00cc">      s_r =(s,INVALID_MODE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2128 </font></span><font color="#ff00cc">    else if getProcAttr s (cur_part_id,proc_id) = None &or; (the cur_proc_id) = proc_id then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2129 </font></span><font color="#ff00cc">      s_r =(s,INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2130 </font></span><font color="#ff00cc">    else if get_proc_sta = Some DORMANT &or; the get_proc_sta = FAULTED then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2131 </font></span><font color="#ff00cc">      s_r =(s,INVALID_MODE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2132 </font></span><font color="#ff00cc">    else if isPeriodic s (cur_part_id,proc_id) then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2133 </font></span><font color="#ff00cc">      s_r =(s,INVALID_MODE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2134 </font></span><font color="#ff00cc">    else if isSuspended s (cur_part_id,proc_id) = True then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2135 </font></span><font color="#ff00cc">      s_r =(s,NO_ACTION)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2136 </font></span><font color="#ff00cc">    else </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2137 </font></span><font color="#ff00cc">      s_r =(readyDel_s_D s_setSta cur_part_id proc_id,NO_ERROR) &and; (suspend'= Some True) &and; (proc_sta' = Some WAITING)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2138 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2139 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_r <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;SUSPEND s core_id proc_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2140 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;the(curPartID s core_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2141 </font></span>  <font color="#006699"><strong>let</strong></font> ?get_proc_sta <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getProcSta s (?cur_part_id,proc_id)&quot;</font>      
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2142 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_proc_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curProcID_Core s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2143 </font></span>  <font color="#006699"><strong>let</strong></font> ?rsc_id_num <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getRscId_Num s (?cur_part_id,proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2144 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_suspendFeild <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;suspProc s (?cur_part_id,proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2145 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setSta <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setProcSta ?s_suspendFeild (?cur_part_id,proc_id) WAITING&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2146 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2147 </font></span>  <font color="#006699"><strong>let</strong></font> ?suspend' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;suspended (rscPendProcs_' (fst ?s_r)) (?cur_part_id,proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2148 </font></span>  <font color="#006699"><strong>let</strong></font> ?proc_sta' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getProcSta (fst ?s_r) (?cur_part_id, proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2149 </font></span>  <font color="#006699"><strong>have</strong></font> a10<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;(getProcUserPLMtx s (?cur_part_id,proc_id) &ne; None &or; (?rsc_id_num &ne; None &and; isResrcLockMtxType (fst (the ?rsc_id_num)) = True))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2150 </font></span><font color="#ff00cc">            &#10230; ?s_r =(s,INVALID_MODE)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2151 </font></span>    <font color="#006699"><strong>unfolding</strong></font> SUSPEND_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2152 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a11<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&not;(getProcUserPLMtx s (?cur_part_id,proc_id) &ne; None &or; (?rsc_id_num &ne; None &and; isResrcLockMtxType (fst (the ?rsc_id_num)) = True))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2153 </font></span><font color="#ff00cc">                     &and; (getProcAttr s (?cur_part_id,proc_id) = None &or; (the ?cur_proc_id) = proc_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2154 </font></span><font color="#ff00cc">                &#10230; ?s_r =(s,INVALID_PARAM)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2155 </font></span>    <font color="#006699"><strong>unfolding</strong></font> SUSPEND_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2156 </font></span>   <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a12<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&not;(getProcUserPLMtx s (?cur_part_id,proc_id) &ne; None &or; (?rsc_id_num &ne; None &and; isResrcLockMtxType (fst (the ?rsc_id_num)) = True))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2157 </font></span><font color="#ff00cc">                     &and; &not;(getProcAttr s (?cur_part_id,proc_id) = None &or; (the ?cur_proc_id) = proc_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2158 </font></span><font color="#ff00cc">                      &and; (?get_proc_sta = Some DORMANT &or; the ?get_proc_sta = FAULTED)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2159 </font></span><font color="#ff00cc">                &#10230; ?s_r =(s,INVALID_MODE)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2160 </font></span>     <font color="#006699"><strong>unfolding</strong></font> SUSPEND_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2161 </font></span>   <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a13<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&not;(getProcUserPLMtx s (?cur_part_id,proc_id) &ne; None &or; (?rsc_id_num &ne; None &and; isResrcLockMtxType (fst (the ?rsc_id_num)) = True))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2162 </font></span><font color="#ff00cc">                     &and; &not;(getProcAttr s (?cur_part_id,proc_id) = None &or; (the ?cur_proc_id) = proc_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2163 </font></span><font color="#ff00cc">                      &and; &not;(?get_proc_sta = Some DORMANT &or; the ?get_proc_sta = FAULTED)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2164 </font></span><font color="#ff00cc">                      &and; (isPeriodic s (?cur_part_id,proc_id))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2165 </font></span><font color="#ff00cc">                &#10230; ?s_r =(s,INVALID_MODE)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2166 </font></span>     <font color="#006699"><strong>unfolding</strong></font> SUSPEND_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2167 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a14<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&not;(getProcUserPLMtx s (?cur_part_id,proc_id) &ne; None &or; (?rsc_id_num &ne; None &and; isResrcLockMtxType (fst (the ?rsc_id_num)) = True))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2168 </font></span><font color="#ff00cc">                     &and; &not;(getProcAttr s (?cur_part_id,proc_id) = None &or; (the ?cur_proc_id) = proc_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2169 </font></span><font color="#ff00cc">                      &and; &not;(?get_proc_sta = Some DORMANT &or; the ?get_proc_sta = FAULTED)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2170 </font></span><font color="#ff00cc">                      &and; &not;(isPeriodic s (?cur_part_id,proc_id))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2171 </font></span><font color="#ff00cc">                      &and; (isSuspended s (?cur_part_id,proc_id) = True)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2172 </font></span><font color="#ff00cc">                &#10230; ?s_r =(s,NO_ACTION)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2173 </font></span>     <font color="#006699"><strong>unfolding</strong></font> SUSPEND_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2174 </font></span>   <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a15<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&not;(getProcUserPLMtx s (?cur_part_id,proc_id) &ne; None &or; (?rsc_id_num &ne; None &and; isResrcLockMtxType (fst (the ?rsc_id_num)) = True))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2175 </font></span><font color="#ff00cc">                     &and; &not;(getProcAttr s (?cur_part_id,proc_id) = None &or; (the ?cur_proc_id) = proc_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2176 </font></span><font color="#ff00cc">                      &and; &not;(?get_proc_sta = Some DORMANT &or; the ?get_proc_sta = FAULTED)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2177 </font></span><font color="#ff00cc">                      &and; &not;(isPeriodic s (?cur_part_id,proc_id))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2178 </font></span><font color="#ff00cc">                      &and; &not;(isSuspended s (?cur_part_id,proc_id) = True)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2179 </font></span><font color="#ff00cc">                &#10230; ?s_r =(readyDel_s_D ?s_setSta ?cur_part_id proc_id,NO_ERROR) &and; (?suspend'= Some True) &and; (?proc_sta' = Some WAITING)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2180 </font></span>   <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2181 </font></span>     <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>assume</strong></font> a15_0<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&not;(getProcUserPLMtx s (?cur_part_id,proc_id) &ne; None &or; (?rsc_id_num &ne; None &and; isResrcLockMtxType (fst (the ?rsc_id_num)) = True))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2182 </font></span><font color="#ff00cc">                     &and; &not;(getProcAttr s (?cur_part_id,proc_id) = None &or; (the ?cur_proc_id) = proc_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2183 </font></span><font color="#ff00cc">                      &and; &not;(?get_proc_sta = Some DORMANT &or; the ?get_proc_sta = FAULTED)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2184 </font></span><font color="#ff00cc">                      &and; &not;(isPeriodic s (?cur_part_id,proc_id))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2185 </font></span><font color="#ff00cc">                      &and; &not;(isSuspended s (?cur_part_id,proc_id) = True)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2186 </font></span>       <font color="#006699"><strong>hence</strong></font> a15_1<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?s_r =(readyDel_s_D ?s_setSta ?cur_part_id proc_id,NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2187 </font></span>         <font color="#006699"><strong>unfolding</strong></font> SUSPEND_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2188 </font></span>       <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?proc_sta' = Some WAITING&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2189 </font></span>         <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> getSta_set_Waiting getSta_readyDel_s_D a15_1<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2190 </font></span>       <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?suspend'= Some True&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2191 </font></span>         <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> suspended_suspProc_set_True suspended_setProcSta suspended_readyDel_s_D a15_1<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2192 </font></span>       <font color="#006699"><strong>ultimately</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?s_r =(readyDel_s_D ?s_setSta ?cur_part_id proc_id,NO_ERROR) &and; (?suspend'= Some True) &and; (?proc_sta' = Some WAITING)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2193 </font></span>         <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> a15_1<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2194 </font></span>     <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2195 </font></span>     <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2196 </font></span>   <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2197 </font></span>  <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2198 </font></span>  <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2199 </font></span><font color="#006699"><strong>qed</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2200 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2201 </font></span><font color="#006699"><strong>lemma</strong></font> suspDiff_cterSuspDel_D<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;suspDiff (rscPendProcs_' (cterSuspDel_D s pp))pp = suspDiff (rscPendProcs_' s)pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2202 </font></span>  <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> PROCS_STATE_PENDING_TYPE.select_convs<font color="#000000"><strong>(</strong></font>5<font color="#000000"><strong>)</strong></font> PROCS_STATE_PENDING_TYPE.surjective PROCS_STATE_PENDING_TYPE.update_convs<font color="#000000"><strong>(</strong></font>6<font color="#000000"><strong>)</strong></font> StaProc.simps<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font> StaProc.simps<font color="#000000"><strong>(</strong></font>7<font color="#000000"><strong>)</strong></font> StaProc.surjective cterSuspDel_D_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2203 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2204 </font></span><font color="#006699"><strong>lemma</strong></font> rst_waitDiff_suspQueDel_D<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;suspDiff (rscPendProcs_' (suspQueDel_D s pp))pp = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2205 </font></span>  <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> PROCS_STATE_PENDING_TYPE.select_convs<font color="#000000"><strong>(</strong></font>5<font color="#000000"><strong>)</strong></font> PROCS_STATE_PENDING_TYPE.surjective PROCS_STATE_PENDING_TYPE.update_convs<font color="#000000"><strong>(</strong></font>5<font color="#000000"><strong>)</strong></font> StaProc.simps<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font> StaProc.simps<font color="#000000"><strong>(</strong></font>7<font color="#000000"><strong>)</strong></font> StaProc.surjective diff_timedLDel snd_conv suspQueDel_D_def waitQ_SuspQDel_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2206 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2207 </font></span><font color="#006699"><strong>lemma</strong></font> rst_waitDiff_suspInfoAllDel_D<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2208 </font></span>  <font color="#ff00cc">&quot;(the(suspDiff(rscPendProcs_' s)pp) = -1 &or; isInSuspQ s pp = True) &#10230;suspDiff (rscPendProcs_' (suspInfoAllDel_D s pp))pp = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2209 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2210 </font></span>  <font color="#006699"><strong>let</strong></font> ?s' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;suspInfoAllDel_D s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2211 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_suspQueDel <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;suspQueDel_D s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2212 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_suspQue_tCounterSusp_del <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;cterSuspDel_D ?s_suspQueDel pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2213 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_suspended_del <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;rstsuspProc s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2214 </font></span>  
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2215 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?s' = (let </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2216 </font></span><font color="#ff00cc">      s_suspQueDel = suspQueDel_D s pp;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2217 </font></span><font color="#ff00cc">      s_suspQue_tCounterSusp_del = cterSuspDel_D s_suspQueDel pp;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2218 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2219 </font></span><font color="#ff00cc">      s_suspended_del = rstsuspProc s pp in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2220 </font></span><font color="#ff00cc">   case isInSuspQ s pp of</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2221 </font></span><font color="#ff00cc">      True &rArr; s_suspQue_tCounterSusp_del |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2222 </font></span><font color="#ff00cc">     False &rArr; s_suspended_del   )&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2223 </font></span>    <font color="#006699"><strong>unfolding</strong></font> suspInfoAllDel_D_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2224 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;isInSuspQ s pp = True &#10230; suspDiff (rscPendProcs_' (suspInfoAllDel_D s pp))pp = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2225 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> rst_waitDiff_suspQueDel_D suspDiff_cterSuspDel_D<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2226 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;(isInSuspQ s pp = False &and; the(suspDiff(rscPendProcs_' s)pp) = -1) &#10230; suspDiff (rscPendProcs_' (suspInfoAllDel_D s pp))pp = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2227 </font></span>    <font color="#006699"><strong>using</strong></font> suspendFeild_rstsuspProc suspInfoAllDel_D_def rstsuspProc_def
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2228 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> PROCS_STATE_PENDING_TYPE.select_convs<font color="#000000"><strong>(</strong></font>5<font color="#000000"><strong>)</strong></font> PROCS_STATE_PENDING_TYPE.surjective PROCS_STATE_PENDING_TYPE.update_convs<font color="#000000"><strong>(</strong></font>4<font color="#000000"><strong>)</strong></font> PROCS_STATE_PENDING_TYPE.update_convs<font color="#000000"><strong>(</strong></font>5<font color="#000000"><strong>)</strong></font> StaProc.simps<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font> StaProc.simps<font color="#000000"><strong>(</strong></font>7<font color="#000000"><strong>)</strong></font> StaProc.surjective fun_upd_same<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2229 </font></span>  <font color="#0099ff"><strong>thus</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2230 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>full_types<font color="#000000"><strong>)</strong></font> <font color="#6600cc">&lsaquo;</font><font color="#6600cc">i</font><font color="#6600cc">s</font><font color="#6600cc">I</font><font color="#6600cc">n</font><font color="#6600cc">S</font><font color="#6600cc">u</font><font color="#6600cc">s</font><font color="#6600cc">p</font><font color="#6600cc">Q</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc"> </font><font color="#6600cc">p</font><font color="#6600cc">p</font><font color="#6600cc"> </font><font color="#6600cc">=</font><font color="#6600cc"> </font><font color="#6600cc">T</font><font color="#6600cc">r</font><font color="#6600cc">u</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">&#10230;</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc">u</font><font color="#6600cc">s</font><font color="#6600cc">p</font><font color="#6600cc">D</font><font color="#6600cc">i</font><font color="#6600cc">f</font><font color="#6600cc">f</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">r</font><font color="#6600cc">s</font><font color="#6600cc">c</font><font color="#6600cc">P</font><font color="#6600cc">e</font><font color="#6600cc">n</font><font color="#6600cc">d</font><font color="#6600cc">P</font><font color="#6600cc">r</font><font color="#6600cc">o</font><font color="#6600cc">c</font><font color="#6600cc">s</font><font color="#6600cc">_</font><font color="#6600cc">'</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">s</font><font color="#6600cc">u</font><font color="#6600cc">s</font><font color="#6600cc">p</font><font color="#6600cc">I</font><font color="#6600cc">n</font><font color="#6600cc">f</font><font color="#6600cc">o</font><font color="#6600cc">A</font><font color="#6600cc">l</font><font color="#6600cc">l</font><font color="#6600cc">D</font><font color="#6600cc">e</font><font color="#6600cc">l</font><font color="#6600cc">_</font><font color="#6600cc">D</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc"> </font><font color="#6600cc">p</font><font color="#6600cc">p</font><font color="#6600cc">)</font><font color="#6600cc">)</font><font color="#6600cc"> </font><font color="#6600cc">p</font><font color="#6600cc">p</font><font color="#6600cc"> </font><font color="#6600cc">=</font><font color="#6600cc"> </font><font color="#6600cc">N</font><font color="#6600cc">o</font><font color="#6600cc">n</font><font color="#6600cc">e</font><font color="#6600cc">&rsaquo;</font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2231 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2232 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2233 </font></span><font color="#006699"><strong>lemma</strong></font> RESUME<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2234 </font></span>  <font color="#ff00cc">&quot;let s_r = RESUME s core_id proc_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2235 </font></span><font color="#ff00cc">     proc_sta = procs_' s; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2236 </font></span><font color="#ff00cc">      cur_proc_id = curProcID_Core s core_id; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2237 </font></span><font color="#ff00cc">      cur_part_id = the(curPartID s core_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2238 </font></span><font color="#ff00cc">      proc_state_opt=getProcSta s (cur_part_id,proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2239 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2240 </font></span><font color="#ff00cc">      s_suspDel_D = suspInfoAllDel_D s (cur_part_id,proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2241 </font></span><font color="#ff00cc">      s_rdy_suspDel_D = procReady s_suspDel_D (cur_part_id,proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2242 </font></span><font color="#ff00cc">      </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2243 </font></span><font color="#ff00cc">      suspDiff' = suspDiff (rscPendProcs_' (fst s_r))(cur_part_id,proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2244 </font></span><font color="#ff00cc">      suspend' = suspended (rscPendProcs_' (fst s_r)) (cur_part_id,proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2245 </font></span><font color="#ff00cc">      suspendQue' = isInSuspQ (fst s_r) (cur_part_id,proc_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2246 </font></span><font color="#ff00cc">    in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2247 </font></span><font color="#ff00cc">   if getProcAttr s (cur_part_id,proc_id) = None &or; (the cur_proc_id)=proc_id then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2248 </font></span><font color="#ff00cc">      s_r = ( s , INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2249 </font></span><font color="#ff00cc">   else if proc_state_opt = Some DORMANT then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2250 </font></span><font color="#ff00cc">      s_r = ( s , INVALID_MODE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2251 </font></span><font color="#ff00cc">   else if isPeriodic s (cur_part_id,proc_id) &and; getProcSta s (cur_part_id,proc_id) &ne; Some FAULTED then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2252 </font></span><font color="#ff00cc">      s_r = ( s , INVALID_MODE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2253 </font></span><font color="#ff00cc">   else if isSuspended s (cur_part_id,proc_id) = False &and; getProcSta s (cur_part_id,proc_id) &ne; Some FAULTED then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2254 </font></span><font color="#ff00cc">      s_r = (s,NO_ACTION)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2255 </font></span><font color="#ff00cc">   else                                     </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2256 </font></span><font color="#ff00cc">       if &not;isWaitTimeOrRsc s (cur_part_id,proc_id) then s_r = (schedule_Abs s_rdy_suspDel_D core_id, NO_ERROR) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2257 </font></span><font color="#ff00cc">            else s_r = (s_suspDel_D , NO_ERROR) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2258 </font></span><font color="#ff00cc">                &and; (isInSuspQ s (cur_part_id,proc_id) = False &#10230; suspend' = None)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2259 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2260 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2261 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_r <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;RESUME s core_id proc_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2262 </font></span>  <font color="#006699"><strong>let</strong></font> ?proc_sta <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;procs_' s&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2263 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_proc_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curProcID_Core s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2264 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;the(curPartID s core_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2265 </font></span>  <font color="#006699"><strong>let</strong></font> ?proc_state_opt <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getProcSta s (?cur_part_id,proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2266 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2267 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_suspDel_D <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;suspInfoAllDel_D s (?cur_part_id,proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2268 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_rdy_suspDel_D <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;procReady ?s_suspDel_D (?cur_part_id,proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2269 </font></span>  <font color="#006699"><strong>let</strong></font> ?suspDiff' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;suspDiff (rscPendProcs_' (fst ?s_r))(?cur_part_id,proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2270 </font></span>  <font color="#006699"><strong>let</strong></font> ?suspend' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;suspended (rscPendProcs_' (fst ?s_r)) (?cur_part_id,proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2271 </font></span>  <font color="#006699"><strong>let</strong></font> ?suspendQue' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;isInSuspQ (fst ?s_r) (?cur_part_id,proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2272 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;(getProcAttr s (?cur_part_id,proc_id) = None &or; (the ?cur_proc_id)=proc_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2273 </font></span><font color="#ff00cc">            &#10230; ?s_r = ( s , INVALID_PARAM)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2274 </font></span>    <font color="#006699"><strong>unfolding</strong></font> RESUME_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2275 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getProcAttr s (?cur_part_id,proc_id) = None &or; (the ?cur_proc_id)=proc_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2276 </font></span><font color="#ff00cc">                &and; (?proc_state_opt = Some DORMANT) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2277 </font></span><font color="#ff00cc">                &#10230; ?s_r = ( s , INVALID_MODE)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2278 </font></span>    <font color="#006699"><strong>unfolding</strong></font> RESUME_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2279 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getProcAttr s (?cur_part_id,proc_id) = None &or; (the ?cur_proc_id)=proc_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2280 </font></span><font color="#ff00cc">                &and; &not;(?proc_state_opt = Some DORMANT)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2281 </font></span><font color="#ff00cc">                &and; (isPeriodic s (?cur_part_id,proc_id) &and; getProcSta s (?cur_part_id,proc_id) &ne; Some FAULTED)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2282 </font></span><font color="#ff00cc">               &#10230; ?s_r = ( s , INVALID_MODE)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2283 </font></span>    <font color="#006699"><strong>unfolding</strong></font> RESUME_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2284 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getProcAttr s (?cur_part_id,proc_id) = None &or; (the ?cur_proc_id)=proc_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2285 </font></span><font color="#ff00cc">                &and; &not;(?proc_state_opt = Some DORMANT)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2286 </font></span><font color="#ff00cc">                &and; &not;(isPeriodic s (?cur_part_id,proc_id) &and; getProcSta s (?cur_part_id,proc_id) &ne; Some FAULTED)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2287 </font></span><font color="#ff00cc">                &and; (isSuspended s (?cur_part_id,proc_id) = False &and; getProcSta s (?cur_part_id,proc_id) &ne; Some FAULTED)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2288 </font></span><font color="#ff00cc">                &#10230; ?s_r = (s,NO_ACTION)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2289 </font></span>    <font color="#006699"><strong>unfolding</strong></font> RESUME_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2290 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getProcAttr s (?cur_part_id,proc_id) = None &or; (the ?cur_proc_id)=proc_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2291 </font></span><font color="#ff00cc">                &and; &not;(?proc_state_opt = Some DORMANT)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2292 </font></span><font color="#ff00cc">                &and; &not;(isPeriodic s (?cur_part_id,proc_id) &and; getProcSta s (?cur_part_id,proc_id) &ne; Some FAULTED)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2293 </font></span><font color="#ff00cc">                &and; &not;(isSuspended s (?cur_part_id,proc_id) = False &and; getProcSta s (?cur_part_id,proc_id) &ne; Some FAULTED)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2294 </font></span><font color="#ff00cc">               &and; &not;isWaitTimeOrRsc s (?cur_part_id,proc_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2295 </font></span><font color="#ff00cc">              &#10230; ?s_r = (schedule_Abs ?s_rdy_suspDel_D core_id, NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2296 </font></span>    <font color="#006699"><strong>unfolding</strong></font> RESUME_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2297 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getProcAttr s (?cur_part_id,proc_id) = None &or; (the ?cur_proc_id)=proc_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2298 </font></span><font color="#ff00cc">                &and; &not;(?proc_state_opt = Some DORMANT)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2299 </font></span><font color="#ff00cc">                &and; &not;(isPeriodic s (?cur_part_id,proc_id) &and; getProcSta s (?cur_part_id,proc_id) &ne; Some FAULTED)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2300 </font></span><font color="#ff00cc">                &and; &not;(isSuspended s (?cur_part_id,proc_id) = False &and; getProcSta s (?cur_part_id,proc_id) &ne; Some FAULTED)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2301 </font></span><font color="#ff00cc">               &and; isWaitTimeOrRsc s (?cur_part_id,proc_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2302 </font></span><font color="#ff00cc">                &#10230; ?s_r = (?s_suspDel_D , NO_ERROR)&and; (isInSuspQ s (?cur_part_id,proc_id) = False &#10230; ?suspend' = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2303 </font></span><font color="#ff00cc">                      &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2304 </font></span>  <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2305 </font></span>    <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>assume</strong></font> a1 <font color="#000000"><strong>:</strong></font><font color="#ff00cc">&quot;&not;(getProcAttr s (?cur_part_id,proc_id) = None &or; (the ?cur_proc_id)=proc_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2306 </font></span><font color="#ff00cc">                &and; &not;(?proc_state_opt = Some DORMANT)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2307 </font></span><font color="#ff00cc">                &and; &not;(isPeriodic s (?cur_part_id,proc_id) &and; getProcSta s (?cur_part_id,proc_id) &ne; Some FAULTED)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2308 </font></span><font color="#ff00cc">                &and; &not;(isSuspended s (?cur_part_id,proc_id) = False &and; getProcSta s (?cur_part_id,proc_id) &ne; Some FAULTED)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2309 </font></span><font color="#ff00cc">               &and; isWaitTimeOrRsc s (?cur_part_id,proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2310 </font></span>      <font color="#006699"><strong>hence</strong></font> a2<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?s_r = (?s_suspDel_D , NO_ERROR)&quot;</font>   
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2311 </font></span>        <font color="#006699"><strong>unfolding</strong></font> RESUME_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2312 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;(isInSuspQ s (?cur_part_id,proc_id) = False &#10230; ?suspend' = None)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2313 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis a2 case_bool_if fst_conv suspInfoAllDel_D_def suspendFeild_rstsuspProc<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2314 </font></span>      <font color="#006699"><strong>ultimately</strong></font> <font color="#006699"><strong>have</strong></font>  <font color="#ff00cc">&quot;?s_r = (?s_suspDel_D , NO_ERROR)&and; (isInSuspQ s (?cur_part_id,proc_id) = False &#10230; ?suspend' = None)&quot;</font>   
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2315 </font></span>        <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2316 </font></span>    <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2317 </font></span>    <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2318 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2319 </font></span>  <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2320 </font></span>    <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2321 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2322 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2323 </font></span>        
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2324 </font></span><font color="#006699"><strong>lemma</strong></font> STOP_SELF<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2325 </font></span>  <font color="#ff00cc">&quot;let s' = STOP_SELF s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2326 </font></span><font color="#ff00cc">      cur_part_id = the(curPartID s core_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2327 </font></span><font color="#ff00cc">      cur_proc_id = the(curProcID_Core s core_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2328 </font></span><font color="#ff00cc">      hmCalled = getHMCalled s cur_part_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2329 </font></span><font color="#ff00cc">      hmStatusCalled = getHMStatusCalled s cur_part_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2330 </font></span><font color="#ff00cc">       s_resetMtxL = if isProcOwnPreemptMtx s  cur_part_id  cur_proc_id  then </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2331 </font></span><font color="#ff00cc">                        let s_reserLPMtx = resetLockPreemptMtx s core_id cur_part_id; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2332 </font></span><font color="#ff00cc">                            s_setPartLock = setCurPartLock s_reserLPMtx core_id 0</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2333 </font></span><font color="#ff00cc">                         in s_setPartLock</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2334 </font></span><font color="#ff00cc">                     else s;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2335 </font></span><font color="#ff00cc">       s_setCurProcSta = setCurProcSta s_resetMtxL core_id DORMANT;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2336 </font></span><font color="#ff00cc">       s_reset_part_alone = readyDel_s_D s_setCurProcSta cur_part_id cur_proc_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2337 </font></span><font color="#ff00cc">       s_rstPrio = rstPriority s_reset_part_alone (cur_part_id,cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2338 </font></span><font color="#ff00cc">       s_rstDdl = rstDeadline s_rstPrio (cur_part_id,cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2339 </font></span><font color="#ff00cc">       s_rstDdl_rstStaCaleed = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2340 </font></span><font color="#ff00cc">        case cur_proc_id = HM_PROC_ID of</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2341 </font></span><font color="#ff00cc">            True &rArr; rstHMCalled s_rstDdl cur_part_id |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2342 </font></span><font color="#ff00cc">           False &rArr; s_rstDdl;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2343 </font></span><font color="#ff00cc">      s_detectError = case hmCalled = Some False &and; hmStatusCalled = Some True of</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2344 </font></span><font color="#ff00cc">            False &rArr; s_rstDdl_rstStaCaleed |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2345 </font></span><font color="#ff00cc">             True &rArr; fst(hmDetectedError_ProcAct s_rstDdl_rstStaCaleed core_id PART_ERROR0);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2346 </font></span><font color="#ff00cc">      PLMtxL' = getPartLock s' cur_part_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2347 </font></span><font color="#ff00cc">      curSta' = getProcSta s' (cur_part_id,cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2348 </font></span><font color="#ff00cc">      proc_prio' = getPriority s' (cur_part_id, cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2349 </font></span><font color="#ff00cc">      proc_ddl'  = (deadline(procs_' s'))(cur_part_id, cur_proc_id) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2350 </font></span><font color="#ff00cc">     (s' = schedule_Abs s_detectError core_id) &and; (((hmCalled = Some False &and; hmStatusCalled = Some True) = False) &#10230; proc_prio' = None &and; proc_ddl' = None)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2351 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2352 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2353 </font></span>  <font color="#006699"><strong>let</strong></font> ?s' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;STOP_SELF s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2354 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;the(curPartID s core_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2355 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_proc_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;the(curProcID_Core s core_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2356 </font></span>  <font color="#006699"><strong>let</strong></font> ?hmCalled <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getHMCalled s ?cur_part_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2357 </font></span>  <font color="#006699"><strong>let</strong></font> ?hmStatusCalled <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getHMStatusCalled s ?cur_part_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2358 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_resetMtxL <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;if isProcOwnPreemptMtx s  ?cur_part_id  ?cur_proc_id  then </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2359 </font></span><font color="#ff00cc">                          let rpl = resetLockPreemptMtx s core_id ?cur_part_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2360 </font></span><font color="#ff00cc">                         setpl = setCurPartLock rpl core_id 0 in setpl</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2361 </font></span><font color="#ff00cc">                      else s&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2362 </font></span>   <font color="#006699"><strong>let</strong></font> ?s_setCurProcSta <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setCurProcSta ?s_resetMtxL core_id DORMANT&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2363 </font></span>   <font color="#006699"><strong>let</strong></font> ?s_reset_part_alone <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;readyDel_s_D ?s_setCurProcSta ?cur_part_id ?cur_proc_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2364 </font></span>   <font color="#006699"><strong>let</strong></font> ?s_rstPrio <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;rstPriority ?s_reset_part_alone (?cur_part_id,?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2365 </font></span>   <font color="#006699"><strong>let</strong></font> ?s_rstDdl <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;rstDeadline ?s_rstPrio (?cur_part_id,?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2366 </font></span>   <font color="#006699"><strong>let</strong></font> ?s_rstDdl_rstStaCaleed <font color="#000000"><strong>=</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2367 </font></span>        <font color="#ff00cc">&quot;case ?cur_proc_id = HM_PROC_ID of</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2368 </font></span><font color="#ff00cc">            True &rArr; rstHMCalled ?s_rstDdl ?cur_part_id |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2369 </font></span><font color="#ff00cc">           False &rArr; ?s_rstDdl&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2370 </font></span>   <font color="#006699"><strong>let</strong></font> ?s_detectError <font color="#000000"><strong>=</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2371 </font></span>          <font color="#ff00cc">&quot;case ?hmCalled = Some False &and; ?hmStatusCalled = Some True of</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2372 </font></span><font color="#ff00cc">            False &rArr; ?s_rstDdl_rstStaCaleed |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2373 </font></span><font color="#ff00cc">             True &rArr; fst(hmDetectedError_ProcAct ?s_rstDdl_rstStaCaleed core_id PART_ERROR0)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2374 </font></span>  <font color="#006699"><strong>let</strong></font> ?PLMtxL' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getPartLock ?s' ?cur_part_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2375 </font></span>  <font color="#006699"><strong>let</strong></font> ?curSta <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getProcSta ?s' (?cur_part_id,?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2376 </font></span>  <font color="#006699"><strong>let</strong></font> ?proc_prio' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getPriority ?s' (?cur_part_id, ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2377 </font></span>  <font color="#006699"><strong>let</strong></font> ?proc_ddl'  <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;(deadline(procs_' ?s'))(?cur_part_id, ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2378 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2379 </font></span>  <font color="#006699"><strong>have</strong></font> a1<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;(?s' = schedule_Abs ?s_detectError core_id) &and; (((?hmCalled = Some False &and; ?hmStatusCalled = Some True) = False) &#10230;  ?proc_prio' = None &and; ?proc_ddl' = None)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2380 </font></span>  <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2381 </font></span>    <font color="#006699"><strong>{</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2382 </font></span>       <font color="#006699"><strong>have</strong></font> a11<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;(?s' = schedule_Abs ?s_detectError core_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2383 </font></span>        <font color="#006699"><strong>unfolding</strong></font> STOP_SELF_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2384 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;((?hmCalled = Some False &and; ?hmStatusCalled = Some True) = False) &#10230;?proc_prio' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2385 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt a11 getPrio_rstDeadline getPrio_rstHMCalled getPrio_rstPriority_None getPrio_sd<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2386 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;((?hmCalled = Some False &and; ?hmStatusCalled = Some True) = False) &#10230; ?proc_ddl' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2387 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt getProcDDL_def a11 getddl_rstDeadline_None getddl_rstHMCalled getddl_sd<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2388 </font></span>      <font color="#006699"><strong>ultimately</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;(?s' = schedule_Abs ?s_detectError core_id)&and; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2389 </font></span><font color="#ff00cc">        (((?hmCalled = Some False &and; ?hmStatusCalled = Some True) = False) &#10230;  ?proc_prio' = None &and; ?proc_ddl' = None)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2390 </font></span>        <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2391 </font></span>    <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2392 </font></span>  <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2393 </font></span>  <font color="#006699"><strong>qed</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2394 </font></span>  <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2395 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> a1<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2396 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2397 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2398 </font></span><font color="#006699"><strong>lemma</strong></font> getPrio_procStop_setNone<font color="#000000"><strong>:</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2399 </font></span>  <font color="#ff00cc">&quot; getPriority (procStop s pp) pp = None&quot;</font> <font color="#006699"><strong>using</strong></font> procStop_rst
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2400 </font></span>  <font color="#006699"><strong>by</strong></font> metis 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2401 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2402 </font></span><font color="#006699"><strong>lemma</strong></font> STOP_prio_sub<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;let</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2403 </font></span><font color="#ff00cc">      proc_sta = procs_' s;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2404 </font></span><font color="#ff00cc">      cur_part_id = the(curPartID s core_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2405 </font></span><font color="#ff00cc">      cur_proc_id = the(curProcID_Core s core_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2406 </font></span><font color="#ff00cc">      get_proc_sta = getProcSta s (cur_part_id,proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2407 </font></span><font color="#ff00cc">      s_resetMtxL = if isProcOwnPreemptMtx s cur_part_id cur_proc_id then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2408 </font></span><font color="#ff00cc">                        let s_setPartLock = setCurPartLock s core_id 0;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2409 </font></span><font color="#ff00cc">                            s_reserLPMtx = resetLockPreemptMtx s_setPartLock core_id  cur_part_id </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2410 </font></span><font color="#ff00cc">                         in s_reserLPMtx else s;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2411 </font></span><font color="#ff00cc">      s_reset_part_alone = procStop s_resetMtxL (cur_part_id,proc_id) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2412 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2413 </font></span><font color="#ff00cc">      curPartID s core_id &ne; None &and; curProcID_Core s core_id &ne; None &and;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2414 </font></span><font color="#ff00cc">      &not; (getProcAttr s (cur_part_id,proc_id) = None &or; cur_proc_id = proc_id) &and;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2415 </font></span><font color="#ff00cc">      proc_id &ne; HM_PROC_ID &and; getProcSta s (cur_part_id,proc_id) &ne; Some DORMANT &#10230; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2416 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2417 </font></span><font color="#ff00cc">      getPriority s_reset_part_alone (cur_part_id,proc_id) = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2418 </font></span>  <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> getPrio_procStop_setNone  getSta_setCurPartLock<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2419 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2420 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2421 </font></span><font color="#006699"><strong>lemma</strong></font> STOP_prio<font color="#000000"><strong>:</strong></font><font color="#ff00cc">&quot;let s_r = STOP s core_id proc_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2422 </font></span><font color="#ff00cc">      proc_sta = procs_' s;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2423 </font></span><font color="#ff00cc">      cur_part_id = the(curPartID s core_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2424 </font></span><font color="#ff00cc">      cur_proc_id = the(curProcID_Core s core_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2425 </font></span><font color="#ff00cc">      get_proc_sta = getProcSta s (cur_part_id,proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2426 </font></span><font color="#ff00cc">      s_resetMtxL = if isProcOwnPreemptMtx s cur_part_id cur_proc_id then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2427 </font></span><font color="#ff00cc">                        let s_setPartLock = setCurPartLock s core_id 0;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2428 </font></span><font color="#ff00cc">                            s_reserLPMtx = resetLockPreemptMtx s_setPartLock core_id  cur_part_id </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2429 </font></span><font color="#ff00cc">                         in s_reserLPMtx else s;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2430 </font></span><font color="#ff00cc">      s_reset_part_alone = procStop s_resetMtxL (cur_part_id,proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2431 </font></span><font color="#ff00cc">      proc_prio' = getPriority (fst s_r) (cur_part_id, proc_id) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2432 </font></span><font color="#ff00cc">      curPartID s core_id &ne; None &and; curProcID_Core s core_id &ne; None &and;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2433 </font></span><font color="#ff00cc">      &not; (getProcAttr s (cur_part_id,proc_id) = None &or; cur_proc_id = proc_id) &and;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2434 </font></span><font color="#ff00cc">      proc_id &ne; HM_PROC_ID &and; get_proc_sta &ne; Some DORMANT &#10230; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2435 </font></span><font color="#ff00cc">      proc_prio' = None&quot;</font><font color="#006699"><strong>using</strong></font> getPrio_sd STOP_prio_sub
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2436 </font></span>  <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>verit<font color="#000000"><strong>,</strong></font> best<font color="#000000"><strong>)</strong></font> STOP_def fst_conv<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2437 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2438 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2439 </font></span><font color="#006699"><strong>lemma</strong></font> STOP<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2440 </font></span>  <font color="#ff00cc">&quot;let s_r = STOP s core_id proc_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2441 </font></span><font color="#ff00cc">      proc_sta = procs_' s;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2442 </font></span><font color="#ff00cc">      cur_part_id = the(curPartID s core_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2443 </font></span><font color="#ff00cc">      cur_proc_id = the(curProcID_Core s core_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2444 </font></span><font color="#ff00cc">      get_proc_sta = getProcSta s (cur_part_id,proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2445 </font></span><font color="#ff00cc">      s_resetMtxL = if isProcOwnPreemptMtx s cur_part_id cur_proc_id then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2446 </font></span><font color="#ff00cc">                        let s_setPartLock = setCurPartLock s core_id 0;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2447 </font></span><font color="#ff00cc">                            s_reserLPMtx = resetLockPreemptMtx s_setPartLock core_id  cur_part_id </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2448 </font></span><font color="#ff00cc">                         in s_reserLPMtx else s;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2449 </font></span><font color="#ff00cc">      s_reset_part_alone = procStop s_resetMtxL (cur_part_id,proc_id); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2450 </font></span><font color="#ff00cc">      </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2451 </font></span><font color="#ff00cc">      PLMtxL' = getPartLock (fst s_r) cur_part_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2452 </font></span><font color="#ff00cc">      curSta' = getProcSta (fst s_r) (cur_part_id,proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2453 </font></span><font color="#ff00cc">      proc_prio' = getPriority (fst s_r) (cur_part_id, proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2454 </font></span><font color="#ff00cc">      proc_ddl'  = getProcDDL (fst s_r) (cur_part_id, proc_id) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2455 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2456 </font></span><font color="#ff00cc">    curPartID s core_id &ne; None &and; curProcID_Core s core_id &ne; None &#10230;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2457 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2458 </font></span><font color="#ff00cc">    (if getProcAttr s (cur_part_id,proc_id) = None &or; cur_proc_id = proc_id then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2459 </font></span><font color="#ff00cc">       s_r = (s , INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2460 </font></span><font color="#ff00cc">    else if proc_id = HM_PROC_ID then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2461 </font></span><font color="#ff00cc">        s_r = (s , NOT_AVAILABLE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2462 </font></span><font color="#ff00cc">    else if get_proc_sta = Some DORMANT then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2463 </font></span><font color="#ff00cc">       s_r = (s , NO_ACTION)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2464 </font></span><font color="#ff00cc">    else s_r = (schedule_Abs s_reset_part_alone core_id,NO_ERROR) &and;  proc_prio' = None &and; (proc_ddl' = None))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2465 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2466 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_r <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;STOP s core_id proc_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2467 </font></span>  <font color="#006699"><strong>let</strong></font> ?proc_sta <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;procs_' s&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2468 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;the(curPartID s core_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2469 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_proc_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;the(curProcID_Core s core_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2470 </font></span>  <font color="#006699"><strong>let</strong></font> ?get_proc_sta <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getProcSta s (?cur_part_id,proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2471 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_resetMtxL <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;if isProcOwnPreemptMtx s ?cur_part_id ?cur_proc_id then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2472 </font></span><font color="#ff00cc">                        let s_setPartLock = setCurPartLock s core_id 0;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2473 </font></span><font color="#ff00cc">                            s_reserLPMtx = resetLockPreemptMtx s_setPartLock core_id  ?cur_part_id </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2474 </font></span><font color="#ff00cc">                         in s_reserLPMtx else s&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2475 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_reset_part_alone <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;procStop ?s_resetMtxL (?cur_part_id,proc_id)&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2476 </font></span> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2477 </font></span>  <font color="#006699"><strong>let</strong></font> ?PLMtxL' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getPartLock (fst ?s_r) ?cur_part_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2478 </font></span>  <font color="#006699"><strong>let</strong></font> ?curSta' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getProcSta (fst ?s_r) (?cur_part_id,proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2479 </font></span>  <font color="#006699"><strong>let</strong></font> ?proc_prio' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getPriority (fst ?s_r) (?cur_part_id, proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2480 </font></span>  <font color="#006699"><strong>let</strong></font> ?proc_ddl'  <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getProcDDL (fst ?s_r) (?cur_part_id, proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2481 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2482 </font></span>  <font color="#006699"><strong>have</strong></font> a10<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;curPartID s core_id &ne; None &and; curProcID_Core s core_id &ne; None&and;getProcAttr s (?cur_part_id,proc_id) = None &or; ?cur_proc_id = proc_id</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2483 </font></span><font color="#ff00cc">            &#10230; ?s_r = (s , INVALID_PARAM)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2484 </font></span>    <font color="#006699"><strong>unfolding</strong></font> STOP_def <font color="#006699"><strong>by</strong></font> auto 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2485 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font>  <font color="#ff00cc">&quot;curPartID s core_id &ne; None &and; curProcID_Core s core_id &ne; None &and; &not;(getProcAttr s (?cur_part_id,proc_id) = None &or; ?cur_proc_id = proc_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2486 </font></span><font color="#ff00cc">                  &and; (proc_id = HM_PROC_ID)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2487 </font></span><font color="#ff00cc">            &#10230; ?s_r = (s , NOT_AVAILABLE)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2488 </font></span>    <font color="#006699"><strong>unfolding</strong></font> STOP_def <font color="#006699"><strong>by</strong></font> auto 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2489 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font>  <font color="#ff00cc">&quot;curPartID s core_id &ne; None &and; curProcID_Core s core_id &ne; None&and;&not;(getProcAttr s (?cur_part_id,proc_id) = None &or; ?cur_proc_id = proc_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2490 </font></span><font color="#ff00cc">                 &and; &not;(proc_id = HM_PROC_ID)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2491 </font></span><font color="#ff00cc">                 &and; ?get_proc_sta = Some DORMANT</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2492 </font></span><font color="#ff00cc">            &#10230; ?s_r = (s , NO_ACTION)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2493 </font></span>    <font color="#006699"><strong>unfolding</strong></font> STOP_def <font color="#006699"><strong>by</strong></font> auto 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2494 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a11<font color="#000000"><strong>:</strong></font>  <font color="#ff00cc">&quot;curPartID s core_id &ne; None &and; curProcID_Core s core_id &ne; None&and;&not;(getProcAttr s (?cur_part_id,proc_id) = None &or; ?cur_proc_id = proc_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2495 </font></span><font color="#ff00cc">                 &and; &not;(proc_id = HM_PROC_ID)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2496 </font></span><font color="#ff00cc">                 &and; &not;(?get_proc_sta =Some DORMANT)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2497 </font></span><font color="#ff00cc">            &#10230; ?s_r = (schedule_Abs ?s_reset_part_alone core_id,NO_ERROR) &and; ?proc_prio' = None &and; ?proc_ddl' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2498 </font></span>    <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2499 </font></span>      <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>assume</strong></font> a11_1<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;curPartID s core_id &ne; None &and; curProcID_Core s core_id &ne; None&and;&not;(getProcAttr s (?cur_part_id,proc_id) = None &or; ?cur_proc_id = proc_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2500 </font></span><font color="#ff00cc">                 &and; &not;(proc_id = HM_PROC_ID)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2501 </font></span><font color="#ff00cc">                 &and; &not;(?get_proc_sta =Some DORMANT)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2502 </font></span>        <font color="#006699"><strong>hence</strong></font> a11_2<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?s_r = (schedule_Abs ?s_reset_part_alone core_id,NO_ERROR)&quot;</font> <font color="#006699"><strong>unfolding</strong></font> STOP_def <font color="#006699"><strong>by</strong></font> smt 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2503 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2504 </font></span>        <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?proc_prio' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2505 </font></span>          <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis a11_1 STOP_prio<font color="#000000"><strong>)</strong></font>  
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2506 </font></span>        <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?proc_ddl' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2507 </font></span>          <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis Process_FT.getddl_sd a11_2 fst_conv procStop_rst<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2508 </font></span>        <font color="#006699"><strong>ultimately</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?s_r = (schedule_Abs ?s_reset_part_alone core_id,NO_ERROR) &and; ?proc_prio' = None &and; ?proc_ddl' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2509 </font></span>          <font color="#006699"><strong>by</strong></font> metis 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2510 </font></span>      <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2511 </font></span>      <font color="#0099ff"><strong>thus</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2512 </font></span>        <font color="#006699"><strong>by</strong></font> metis 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2513 </font></span>    <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2514 </font></span>    <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2515 </font></span>      <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2516 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2517 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2518 </font></span><font color="#006699"><strong>lemma</strong></font> START<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2519 </font></span>  <font color="#ff00cc">&quot;let s_r = START s core_id proc_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2520 </font></span><font color="#ff00cc">  cur_part_id = curPartID s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2521 </font></span><font color="#ff00cc">  proc_attr = getProcAttr s (the cur_part_id, proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2522 </font></span><font color="#ff00cc">  proc_sta = getProcSta s (the cur_part_id, proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2523 </font></span><font color="#ff00cc">  proc_periodic = isPeriodic s (the cur_part_id, proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2524 </font></span><font color="#ff00cc">  part_mode = getPartMode s (the cur_part_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2525 </font></span><font color="#ff00cc">  proc_prio' = getPriority (fst s_r) (the cur_part_id, proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2526 </font></span><font color="#ff00cc">  proc_ctx' = getCntxt (fst s_r) (the cur_part_id, proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2527 </font></span><font color="#ff00cc">  proc_sta' = getProcSta (fst s_r) (the cur_part_id, proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2528 </font></span><font color="#ff00cc">  proc_rlsp' = getRlsPoint (fst s_r) (the cur_part_id, proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2529 </font></span><font color="#ff00cc">  proc_ddl' = getProcDDL (fst s_r) (the cur_part_id, proc_id) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2530 </font></span><font color="#ff00cc">  if proc_attr = None then s_r = (s , INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2531 </font></span><font color="#ff00cc">  else if the proc_sta &ne; DORMANT then s_r = (s , NO_ACTION)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2532 </font></span><font color="#ff00cc">  else if &not; proc_periodic then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2533 </font></span><font color="#ff00cc">    if part_mode = Some NORMAL then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2534 </font></span><font color="#ff00cc">      (TIME_CAPACITY(the proc_attr)&gt;0 &#10230; proc_ddl' &ne; None) &and; proc_ctx' = None &and;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2535 </font></span><font color="#ff00cc">        proc_prio' &ne; None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2536 </font></span><font color="#ff00cc">    else proc_sta' = Some WAITING  &and; proc_ctx' = None &and; proc_prio' &ne; None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2537 </font></span><font color="#ff00cc">  else if part_mode = Some NORMAL then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2538 </font></span><font color="#ff00cc">      (TIME_CAPACITY(the proc_attr)&gt;0 &#10230; proc_ddl' &ne; None) &and; proc_rlsp' &ne; None &and; proc_sta' = Some WAITING </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2539 </font></span><font color="#ff00cc">       &and; proc_ctx' = None &and; proc_prio' &ne; None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2540 </font></span><font color="#ff00cc">      else proc_sta' = Some WAITING &and; proc_ctx' = None &and; proc_prio' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2541 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2542 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_r <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;START s core_id proc_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2543 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curPartID s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2544 </font></span>  <font color="#006699"><strong>let</strong></font> ?proc_attr <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getProcAttr s (the ?cur_part_id, proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2545 </font></span>  <font color="#006699"><strong>let</strong></font> ?proc_sta <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getProcSta s (the ?cur_part_id, proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2546 </font></span>  <font color="#006699"><strong>let</strong></font> ?proc_periodic <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;isPeriodic s (the ?cur_part_id, proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2547 </font></span>  <font color="#006699"><strong>let</strong></font> ?part_mode <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getPartMode s (the ?cur_part_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2548 </font></span>  <font color="#006699"><strong>let</strong></font> ?proc_prio' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getPriority (fst ?s_r) (the ?cur_part_id, proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2549 </font></span>  <font color="#006699"><strong>let</strong></font> ?proc_ctx' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getCntxt (fst ?s_r) (the ?cur_part_id, proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2550 </font></span>  <font color="#006699"><strong>let</strong></font> ?proc_sta' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getProcSta (fst ?s_r) (the ?cur_part_id, proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2551 </font></span>  <font color="#006699"><strong>let</strong></font> ?proc_rlsp' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getRlsPoint (fst ?s_r) (the ?cur_part_id, proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2552 </font></span>  <font color="#006699"><strong>let</strong></font> ?proc_ddl' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getProcDDL (fst ?s_r) (the ?cur_part_id, proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2553 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2554 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_set_priority <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setPriority s (the ?cur_part_id, proc_id) (BASE_PRIORITY(the ?proc_attr))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2555 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_reset_procCn <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;resetCntxt ?s_set_priority (the ?cur_part_id, proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2556 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2557 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_toReay <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;procReady ?s_reset_procCn (the ?cur_part_id, proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2558 </font></span>  <font color="#006699"><strong>let</strong></font> ?t <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;(Int.int(timer_'  ?s_toReay + Int.nat(TIME_CAPACITY(the ?proc_attr))))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2559 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_toReay_ddl <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;case TIME_CAPACITY(the ?proc_attr)&gt;0 of </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2560 </font></span><font color="#ff00cc">                                            True &rArr; setProcDDL ?s_toReay (the ?cur_part_id, proc_id) ?t |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2561 </font></span><font color="#ff00cc">                                             False &rArr; ?s_toReay&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2562 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2563 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_set_waiting <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setProcSta ?s_reset_procCn (the ?cur_part_id, proc_id) WAITING&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2564 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2565 </font></span>  <font color="#cc0000">(* periodic *)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2566 </font></span>  <font color="#006699"><strong>let</strong></font> ?firstRls <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;partSchedNextTime core_id (the ?cur_part_id) (int(timer_' ?s_set_waiting))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2567 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_set_firstRls <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setRlsPoint ?s_set_waiting (the ?cur_part_id, proc_id) ?firstRls&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2568 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_set_firstRls_ddl <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;case TIME_CAPACITY(the ?proc_attr)&gt;0 of </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2569 </font></span><font color="#ff00cc">                                 True &rArr; setProcDDL ?s_set_firstRls (the ?cur_part_id, proc_id) (Int.int(Int.nat(TIME_CAPACITY(the ?proc_attr))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2570 </font></span><font color="#ff00cc">                                                                 + Int.nat(?firstRls))) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2571 </font></span><font color="#ff00cc">                                 False &rArr; ?s_set_firstRls&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2572 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2573 </font></span>  <font color="#006699"><strong>have</strong></font> a10<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?proc_attr = None &#10230; ?s_r = (s , INVALID_PARAM)&quot;</font> <font color="#006699"><strong>unfolding</strong></font> START_def start_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2574 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a11<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&not; ?proc_attr = None &and; the ?proc_sta &ne; DORMANT &#10230; ?s_r = (s , NO_ACTION)&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2575 </font></span>    <font color="#006699"><strong>unfolding</strong></font> START_def start_def <font color="#006699"><strong>by</strong></font> auto  
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2576 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a12<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&not; ?proc_attr = None &and; &not; (the ?proc_sta &ne; DORMANT) &and; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2577 </font></span><font color="#ff00cc">          &not; ?proc_periodic &and; ?part_mode = Some NORMAL &#10230; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2578 </font></span><font color="#ff00cc">        ?proc_prio' &ne; None &and; ?proc_ctx' = None &and;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2579 </font></span><font color="#ff00cc">        (TIME_CAPACITY(the ?proc_attr)&gt;0 &#10230; ?proc_ddl' &ne; None)&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2580 </font></span>    <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2581 </font></span>      <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>assume</strong></font> a12_0<font color="#000000"><strong>:</strong></font><font color="#ff00cc">&quot;&not; ?proc_attr = None &and; &not; (the ?proc_sta &ne; DORMANT) &and; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2582 </font></span><font color="#ff00cc">          &not; ?proc_periodic &and; ?part_mode = Some NORMAL&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2583 </font></span>      <font color="#006699"><strong>hence</strong></font> a12_1<font color="#000000"><strong>:</strong></font><font color="#ff00cc">&quot;?s_r = (schedule_Abs ?s_toReay_ddl core_id , NO_ERROR)&quot;</font> <font color="#006699"><strong>unfolding</strong></font> START_def start_def Let_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2584 </font></span>      <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?proc_prio' &ne; None&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2585 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> bool.case_eq_if getPrio_petDdl getPrio_procRdy getPrio_rstCtx getPrio_sd set_NotNone a12_1<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2586 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?proc_ctx' = None&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2587 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font>bool.case_eq_if getCtx_rst_None getCtx_procRdy getCtx_petDdl getCtx_sd a12_1<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2588 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;(TIME_CAPACITY(the ?proc_attr)&gt;0 &#10230; ?proc_ddl' &ne; None)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2589 </font></span>          <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> getddl_set_NotNone getddl_sd bool.case_eq_if set_NotNone a12_1<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2590 </font></span>  
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2591 </font></span>      <font color="#006699"><strong>ultimately</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?proc_prio' &ne; None &and; ?proc_ctx' = None &and; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2592 </font></span><font color="#ff00cc">            (TIME_CAPACITY(the ?proc_attr)&gt;0 &#10230; ?proc_ddl' &ne; None)&quot;</font> <font color="#006699"><strong>by</strong></font> blast
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2593 </font></span>      <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2594 </font></span>      <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2595 </font></span>    <font color="#006699"><strong>qed</strong></font>    
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2596 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not; ?proc_attr = None &and; &not; (the ?proc_sta &ne; DORMANT) &and;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2597 </font></span><font color="#ff00cc">       &not; ?proc_periodic &and; &not; ?part_mode = Some NORMAL &#10230; ?proc_sta' = Some WAITING &and;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2598 </font></span><font color="#ff00cc">        ?proc_prio' &ne; None &and; ?proc_ctx' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2599 </font></span>    <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2600 </font></span>      <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>assume</strong></font> <font color="#ff00cc">&quot;&not; ?proc_attr = None &and; &not; (the ?proc_sta &ne; DORMANT) &and;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2601 </font></span><font color="#ff00cc">       &not; ?proc_periodic &and; &not; ?part_mode = Some NORMAL&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2602 </font></span>      <font color="#006699"><strong>hence</strong></font> a13_1 <font color="#000000"><strong>:</strong></font><font color="#ff00cc">&quot;?s_r = (?s_set_waiting, NO_ERROR)&quot;</font> <font color="#006699"><strong>unfolding</strong></font> START_def start_def Let_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2603 </font></span>      <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;?proc_sta' = Some WAITING&quot;</font> <font color="#006699"><strong>unfolding</strong></font> setProcSta_def getProcSta_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2604 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?proc_prio' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2605 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font>  getPrio_rstCtx set_NotNone getPrio_setSta a13_1<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2606 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?proc_ctx' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2607 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font>  getCtx_rst_None getCtx_setSta a13_1 fstI<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2608 </font></span>      <font color="#006699"><strong>ultimately</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?proc_sta' = Some WAITING &and;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2609 </font></span><font color="#ff00cc">           ?proc_prio' &ne; None &and; ?proc_ctx' = None&quot;</font> <font color="#006699"><strong>by</strong></font> blast 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2610 </font></span>      <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2611 </font></span>      <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2612 </font></span>    <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2613 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not; ?proc_attr = None &and; &not; (the ?proc_sta &ne; DORMANT) &and; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2614 </font></span><font color="#ff00cc">          ?proc_periodic &and; ?part_mode = Some NORMAL &#10230; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2615 </font></span><font color="#ff00cc">        (TIME_CAPACITY(the ?proc_attr)&gt;0 &#10230; ?proc_ddl' &ne; None) &and;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2616 </font></span><font color="#ff00cc">        ?proc_rlsp' &ne; None &and; ?proc_sta' = Some WAITING &and; ?proc_prio' &ne; None &and; ?proc_ctx' = None&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2617 </font></span>   <font color="#006699"><strong>proof</strong></font> -
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2618 </font></span>    <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>assume</strong></font>  a14_0<font color="#000000"><strong>:</strong></font><font color="#ff00cc">&quot;&not; ?proc_attr = None &and; &not; (the ?proc_sta &ne; DORMANT) &and; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2619 </font></span><font color="#ff00cc">          ?proc_periodic &and; ?part_mode = Some NORMAL&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2620 </font></span>      <font color="#006699"><strong>hence</strong></font> a14_1<font color="#000000"><strong>:</strong></font><font color="#ff00cc">&quot;?s_r = (?s_set_firstRls_ddl , NO_ERROR)&quot;</font> <font color="#006699"><strong>unfolding</strong></font> START_def start_def Let_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2621 </font></span>      <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?proc_sta' = Some WAITING&quot;</font> <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> getSta_set_Waiting getSta_setrls getSta_setddl bool.case_eq_if a14_1<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2622 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;(TIME_CAPACITY(the ?proc_attr)&gt;0 &#10230; ?proc_ddl' &ne; None)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2623 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> getddl_set_NotNone  a14_1<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2624 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?proc_rlsp' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2625 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt  bool.case_eq_if getfrls_setddl getfrls_set_NotNone a14_1 fstI<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2626 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?proc_prio' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2627 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> bool.case_eq_if getPrio_petDdl getPrio_setrls getPrio_setSta getPrio_rstCtx set_NotNone a14_1<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2628 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?proc_ctx' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2629 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> bool.case_eq_if getCtx_petDdl getCtx_petrls getCtx_setSta getCtx_rst_None a14_1 fstI<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2630 </font></span>      <font color="#006699"><strong>ultimately</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;(TIME_CAPACITY(the ?proc_attr)&gt;0 &#10230; ?proc_ddl' &ne; None) &and;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2631 </font></span><font color="#ff00cc">        ?proc_rlsp' &ne; None &and; ?proc_sta' = Some WAITING&and; ?proc_prio' &ne; None &and; ?proc_ctx' = None&quot;</font> <font color="#006699"><strong>by</strong></font> blast
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2632 </font></span>    <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2633 </font></span>    <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2634 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2635 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2636 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not; ?proc_attr = None &and; &not; (the ?proc_sta &ne; DORMANT) &and; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2637 </font></span><font color="#ff00cc">          ?proc_periodic &and; &not; ?part_mode = Some NORMAL &#10230; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2638 </font></span><font color="#ff00cc">        ?proc_sta' = Some WAITING &and; ?proc_prio' &ne; None &and; ?proc_ctx' = None&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2639 </font></span>  <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2640 </font></span>   <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>assume</strong></font> <font color="#ff00cc">&quot;&not; ?proc_attr = None &and; &not; (the ?proc_sta &ne; DORMANT) &and; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2641 </font></span><font color="#ff00cc">          ?proc_periodic &and; &not; ?part_mode = Some NORMAL&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2642 </font></span>     <font color="#006699"><strong>hence</strong></font> a15_1 <font color="#000000"><strong>:</strong></font><font color="#ff00cc">&quot;?s_r = (?s_set_waiting, NO_ERROR)&quot;</font> <font color="#006699"><strong>unfolding</strong></font> START_def start_def Let_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2643 </font></span>     <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;?proc_sta' = Some WAITING&quot;</font> <font color="#006699"><strong>unfolding</strong></font> setProcSta_def getProcSta_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2644 </font></span>     <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?proc_prio' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2645 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font>  getPrio_rstCtx set_NotNone getPrio_setSta a15_1<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2646 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?proc_ctx' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2647 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font>  getCtx_rst_None getCtx_setSta a15_1 fstI<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2648 </font></span>      <font color="#006699"><strong>ultimately</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?proc_sta' = Some WAITING &and;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2649 </font></span><font color="#ff00cc">           ?proc_prio' &ne; None &and; ?proc_ctx' = None&quot;</font> <font color="#006699"><strong>by</strong></font> blast 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2650 </font></span>    <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2651 </font></span>    <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2652 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2653 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2654 </font></span>  <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2655 </font></span>  <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2656 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2657 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2658 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2659 </font></span><font color="#006699"><strong>lemma</strong></font> DELAYED_START<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2660 </font></span><font color="#ff00cc">&quot;let s_r = DELAYED_START s core_id proc_id delayt;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2661 </font></span><font color="#ff00cc">      cur_part_id = the(curPartID s core_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2662 </font></span><font color="#ff00cc">      proc_attr = getProcAttr s (cur_part_id,proc_id); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2663 </font></span><font color="#ff00cc">      period = PERIOD (the proc_attr);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2664 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2665 </font></span><font color="#ff00cc">      proc_prio' = getPriority (fst s_r) (cur_part_id, proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2666 </font></span><font color="#ff00cc">       proc_ctx' = getCntxt (fst s_r) (cur_part_id, proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2667 </font></span><font color="#ff00cc">       proc_sta' = getProcSta (fst s_r)  (cur_part_id, proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2668 </font></span><font color="#ff00cc">       proc_rlsp' = getRlsPoint (fst s_r) (cur_part_id, proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2669 </font></span><font color="#ff00cc">       proc_ddl' = getProcDDL (fst s_r) (cur_part_id, proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2670 </font></span><font color="#ff00cc">       delayedT' =  getDelayT (fst s_r) (cur_part_id, proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2671 </font></span><font color="#ff00cc">       waitDiff' = getWaitDiff (fst s_r) (cur_part_id, proc_id) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2672 </font></span><font color="#ff00cc">    if proc_attr = None  then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2673 </font></span><font color="#ff00cc">      s_r = (s , INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2674 </font></span><font color="#ff00cc">    else if getProcSta s (cur_part_id,proc_id) &ne; Some DORMANT then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2675 </font></span><font color="#ff00cc">      s_r = (s , NO_ACTION)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2676 </font></span><font color="#ff00cc">    else if delayt &gt; INVALID_TIMEOUT_VALUE then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2677 </font></span><font color="#ff00cc">      s_r = (s , INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2678 </font></span><font color="#ff00cc">    else if isPeriodic s (cur_part_id,proc_id) &and; delayt &ge;  Int.nat period then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2679 </font></span><font color="#ff00cc">      s_r = (s , INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2680 </font></span><font color="#ff00cc">    else if isPeriodic s (cur_part_id,proc_id) = False then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2681 </font></span><font color="#ff00cc">               if getPartMode s  cur_part_id = Some NORMAL then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2682 </font></span><font color="#ff00cc">                  if delayt = 0 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2683 </font></span><font color="#ff00cc">                      (TIME_CAPACITY(the proc_attr)&gt;0 &#10230; proc_ddl' &ne; None)&and; proc_ctx' = None &and;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2684 </font></span><font color="#ff00cc">                          proc_prio' &ne; None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2685 </font></span><font color="#ff00cc">                  else </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2686 </font></span><font color="#ff00cc">                      (TIME_CAPACITY(the proc_attr)&gt;0 &#10230; proc_ddl' &ne; None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2687 </font></span><font color="#ff00cc">                          &and; delayedT' &ne; None &and; waitDiff' &ne; None &and; proc_ctx' = None &and; proc_prio' &ne; None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2688 </font></span><font color="#ff00cc">               else  </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2689 </font></span><font color="#ff00cc">                        delayedT' &ne; None &and; proc_ctx' = None &and; proc_prio' &ne; None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2690 </font></span><font color="#ff00cc">    else </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2691 </font></span><font color="#ff00cc">           if getPartMode s  cur_part_id = Some NORMAL then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2692 </font></span><font color="#ff00cc">             </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2693 </font></span><font color="#ff00cc">             proc_rlsp' &ne; None &and; (TIME_CAPACITY(the proc_attr)&gt;0 &#10230; proc_ddl' &ne; None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2694 </font></span><font color="#ff00cc">              &and; proc_ctx' = None &and; proc_prio' &ne; None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2695 </font></span><font color="#ff00cc">            else  delayedT' &ne; None &and; proc_ctx' = None &and; proc_prio' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2696 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2697 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2698 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2699 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_r <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;DELAYED_START s core_id proc_id delayt&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2700 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;the(curPartID s core_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2701 </font></span>  <font color="#006699"><strong>let</strong></font> ?proc_attr <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getProcAttr s (?cur_part_id,proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2702 </font></span>  <font color="#006699"><strong>let</strong></font> ?period <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;PERIOD (the ?proc_attr)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2703 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_set_priority <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setPriority s (?cur_part_id,proc_id) (BASE_PRIORITY(the ?proc_attr))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2704 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_reset_procCn <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;resetCntxt ?s_set_priority (?cur_part_id,proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2705 </font></span>  <font color="#006699"><strong>let</strong></font> ?proc_prio' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getPriority (fst ?s_r) (?cur_part_id, proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2706 </font></span>  <font color="#006699"><strong>let</strong></font> ?proc_ctx' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getCntxt (fst ?s_r) (?cur_part_id, proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2707 </font></span>  <font color="#006699"><strong>let</strong></font> ?proc_sta' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getProcSta (fst ?s_r)  (?cur_part_id, proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2708 </font></span>  <font color="#006699"><strong>let</strong></font> ?proc_rlsp' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getRlsPoint (fst ?s_r) (?cur_part_id, proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2709 </font></span>  <font color="#006699"><strong>let</strong></font> ?proc_ddl' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getProcDDL (fst ?s_r) (?cur_part_id, proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2710 </font></span>  <font color="#006699"><strong>let</strong></font> ?delayedT' <font color="#000000"><strong>=</strong></font>  <font color="#ff00cc">&quot;getDelayT (fst ?s_r) (?cur_part_id, proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2711 </font></span>  <font color="#006699"><strong>let</strong></font> ?waitDiff' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getWaitDiff (fst ?s_r) (?cur_part_id, proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2712 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2713 </font></span>  <font color="#006699"><strong>have</strong></font> a10<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?proc_attr = None </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2714 </font></span><font color="#ff00cc">            &#10230; ?s_r = (s , INVALID_PARAM)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2715 </font></span>    <font color="#006699"><strong>unfolding</strong></font> DELAYED_START_def Let_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2716 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a11<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&not;(?proc_attr = None )</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2717 </font></span><font color="#ff00cc">            &and; getProcSta s (?cur_part_id,proc_id) &ne; Some DORMANT</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2718 </font></span><font color="#ff00cc">            &#10230; ?s_r = (s , NO_ACTION)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2719 </font></span>    <font color="#006699"><strong>unfolding</strong></font> DELAYED_START_def Let_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2720 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a12<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&not;(?proc_attr = None) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2721 </font></span><font color="#ff00cc">            &and; &not;(getProcSta s (?cur_part_id,proc_id) &ne; Some DORMANT)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2722 </font></span><font color="#ff00cc">            &and; delayt &gt; INVALID_TIMEOUT_VALUE</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2723 </font></span><font color="#ff00cc">            &#10230; ?s_r = (s , INVALID_PARAM)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2724 </font></span>    <font color="#006699"><strong>unfolding</strong></font> DELAYED_START_def Let_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2725 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a13<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&not;(?proc_attr = None) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2726 </font></span><font color="#ff00cc">            &and; &not;(getProcSta s (?cur_part_id,proc_id) &ne; Some DORMANT)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2727 </font></span><font color="#ff00cc">            &and; &not;(delayt &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2728 </font></span><font color="#ff00cc">            &and; isPeriodic s (?cur_part_id,proc_id) &and; delayt &ge;  Int.nat ?period</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2729 </font></span><font color="#ff00cc">            &#10230; ?s_r = (s , INVALID_PARAM)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2730 </font></span>    <font color="#006699"><strong>unfolding</strong></font> DELAYED_START_def Let_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2731 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a14<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&not;?proc_attr = None </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2732 </font></span><font color="#ff00cc">                &and; &not;(getProcSta s (?cur_part_id,proc_id) &ne; Some DORMANT)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2733 </font></span><font color="#ff00cc">                &and; &not;(delayt &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2734 </font></span><font color="#ff00cc">                &and; &not;(isPeriodic s (?cur_part_id,proc_id) &and; delayt &ge;  Int.nat ?period)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2735 </font></span><font color="#ff00cc">                &and; (isPeriodic s (?cur_part_id,proc_id) = False)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2736 </font></span><font color="#ff00cc">                   &and; (getPartMode s  ?cur_part_id = Some NORMAL)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2737 </font></span><font color="#ff00cc">                      &and;delayt = 0</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2738 </font></span><font color="#ff00cc">             &#10230;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2739 </font></span><font color="#ff00cc">                  (TIME_CAPACITY(the ?proc_attr)&gt;0 &#10230; ?proc_ddl' &ne; None) &and; ?proc_ctx' = None &and;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2740 </font></span><font color="#ff00cc">                          ?proc_prio' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2741 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2742 </font></span>  <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2743 </font></span>    <font color="#006699"><strong>{</strong></font><font color="#006699"><strong>let</strong></font> ?s_toReay <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;procReady ?s_reset_procCn (?cur_part_id,proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2744 </font></span>    
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2745 </font></span>      <font color="#006699"><strong>let</strong></font> ?t <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;(Int.int(timer_'  ?s_toReay + Int.nat(TIME_CAPACITY(the ?proc_attr))))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2746 </font></span>      <font color="#006699"><strong>let</strong></font> ?s_toReay_ddl <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;case TIME_CAPACITY(the ?proc_attr)&gt;0 of </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2747 </font></span><font color="#ff00cc">                                            True &rArr; setProcDDL ?s_toReay (?cur_part_id,proc_id) ?t |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2748 </font></span><font color="#ff00cc">                                             False &rArr; ?s_toReay&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2749 </font></span>      <font color="#0099ff"><strong>assume</strong></font>   <font color="#ff00cc">&quot;&not;?proc_attr = None </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2750 </font></span><font color="#ff00cc">                &and; &not;(getProcSta s (?cur_part_id,proc_id) &ne; Some DORMANT)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2751 </font></span><font color="#ff00cc">                &and; &not;(delayt &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2752 </font></span><font color="#ff00cc">                &and; &not;(isPeriodic s (?cur_part_id,proc_id) &and; delayt &ge;  Int.nat ?period)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2753 </font></span><font color="#ff00cc">                &and; (isPeriodic s (?cur_part_id,proc_id) = False)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2754 </font></span><font color="#ff00cc">                   &and; (getPartMode s  ?cur_part_id = Some NORMAL)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2755 </font></span><font color="#ff00cc">                      &and;delayt = 0&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2756 </font></span>      <font color="#006699"><strong>hence</strong></font> a14_1<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?s_r = (schedule_Abs ?s_toReay_ddl core_id , NO_ERROR)&quot;</font> <font color="#006699"><strong>unfolding</strong></font> DELAYED_START_def Let_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2757 </font></span>      <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;(TIME_CAPACITY(the ?proc_attr)&gt;0 &#10230; ?proc_ddl' &ne; None)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2758 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> getddl_set_NotNone getddl_sd a14_1<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2759 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?proc_ctx' = None&quot;</font>  
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2760 </font></span>         <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font>bool.case_eq_if getCtx_rst_None getCtx_procRdy getCtx_petDdl getCtx_sd a14_1 fstI<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2761 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?proc_prio' &ne; None&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2762 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> bool.case_eq_if getPrio_petDdl getPrio_procRdy getPrio_rstCtx getPrio_sd set_NotNone a14_1<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2763 </font></span>      <font color="#006699"><strong>ultimately</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;(TIME_CAPACITY(the ?proc_attr)&gt;0 &#10230; ?proc_ddl' &ne; None) &and; ?proc_ctx' = None &and;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2764 </font></span><font color="#ff00cc">                          ?proc_prio' &ne; None&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2765 </font></span>        <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2766 </font></span>    <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2767 </font></span>    <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2768 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2769 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a15<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&not;?proc_attr = None </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2770 </font></span><font color="#ff00cc">                &and; &not;(getProcSta s (?cur_part_id,proc_id) &ne; Some DORMANT)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2771 </font></span><font color="#ff00cc">                &and; &not;(delayt &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2772 </font></span><font color="#ff00cc">                &and; &not;(isPeriodic s (?cur_part_id,proc_id) &and; delayt &ge;  Int.nat ?period)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2773 </font></span><font color="#ff00cc">                &and; (isPeriodic s (?cur_part_id,proc_id) = False)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2774 </font></span><font color="#ff00cc">                   &and; (getPartMode s  ?cur_part_id = Some NORMAL)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2775 </font></span><font color="#ff00cc">                      &and; &not;(delayt = 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2776 </font></span><font color="#ff00cc">             &#10230; (TIME_CAPACITY(the ?proc_attr)&gt;0 &#10230; ?proc_ddl' &ne; None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2777 </font></span><font color="#ff00cc">                          &and; ?delayedT' &ne; None &and; ?waitDiff' &ne; None &and; ?proc_ctx' = None &and; ?proc_prio' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2778 </font></span>  <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2779 </font></span>    <font color="#006699"><strong>{</strong></font><font color="#006699"><strong>let</strong></font> ?s_set_waiting <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setProcSta ?s_reset_procCn (?cur_part_id,proc_id) WAITING&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2780 </font></span>     <font color="#006699"><strong>let</strong></font> ?s_set_waiting_ddl <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;case TIME_CAPACITY(the ?proc_attr)&gt;0 of </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2781 </font></span><font color="#ff00cc">                                            True &rArr; setProcDDL ?s_set_waiting (?cur_part_id,proc_id) (Int.int(timer_'  ?s_set_waiting + Int.nat(TIME_CAPACITY(the ?proc_attr)) + delayt)) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2782 </font></span><font color="#ff00cc">                                             False &rArr; ?s_set_waiting&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2783 </font></span>     <font color="#006699"><strong>let</strong></font> ?s_setDt <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setDelayT ?s_set_waiting_ddl (?cur_part_id,proc_id) delayt&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2784 </font></span>     <font color="#006699"><strong>let</strong></font> ?s_setWaitDiff <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setWaitDiff ?s_setDt (?cur_part_id,proc_id) (int delayt)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2785 </font></span>     <font color="#006699"><strong>let</strong></font> ?s_addTimeQ <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;waitAdd_D ?s_setWaitDiff (?cur_part_id,proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2786 </font></span>      <font color="#0099ff"><strong>assume</strong></font> <font color="#ff00cc">&quot;&not;?proc_attr = None </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2787 </font></span><font color="#ff00cc">                &and; &not;(getProcSta s (?cur_part_id,proc_id) &ne; Some DORMANT)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2788 </font></span><font color="#ff00cc">                &and; &not;(delayt &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2789 </font></span><font color="#ff00cc">                &and; &not;(isPeriodic s (?cur_part_id,proc_id) &and; delayt &ge;  Int.nat ?period)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2790 </font></span><font color="#ff00cc">                &and; (isPeriodic s (?cur_part_id,proc_id) = False)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2791 </font></span><font color="#ff00cc">                   &and; (getPartMode s  ?cur_part_id = Some NORMAL)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2792 </font></span><font color="#ff00cc">                      &and; &not;(delayt = 0)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2793 </font></span>      <font color="#006699"><strong>hence</strong></font> a15_1<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?s_r = (schedule_Abs ?s_addTimeQ core_id, NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2794 </font></span>        <font color="#006699"><strong>unfolding</strong></font> DELAYED_START_def Let_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2795 </font></span>      <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?proc_ctx' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2796 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt a15_1 fstI getCtx_petDdl getCtx_rst_None getCtx_sd getCtx_setDelayT getCtx_setSta getCtx_setWaitDiff getCtx_waitAdd_D<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2797 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?delayedT' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2798 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt a15_1 fstI getDelayT_setDelayT_NotNone getDelayT_setWaitDiff getDelayT_waitAdd_D getDelayT_schedule_Abs<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2799 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?waitDiff' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2800 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> a15_1 fstI getWaitDiff_def getWaitDiff_schedule_Abs getWaitDiff_setWaitDiff_NotNone waitAdd_D waitAdd_D_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2801 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?proc_prio' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2802 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> a15_1 fstI getPrio_petDdl getPrio_rstCtx getPrio_sd getPrio_setDelayT getPrio_setSta getPrio_setWaitDiff getPrio_waitAdd_D option.simps<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font> set_NotNone<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2803 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;(TIME_CAPACITY(the ?proc_attr)&gt;0 &#10230; ?proc_ddl' &ne; None)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2804 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> a15_1 fstI getddl_sd getddl_setDelayT getddl_setWaitDiff getddl_set_NotNone getddl_waitAdd_D<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2805 </font></span>      <font color="#006699"><strong>ultimately</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;(TIME_CAPACITY(the ?proc_attr)&gt;0 &#10230; ?proc_ddl' &ne; None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2806 </font></span><font color="#ff00cc">                          &and; ?delayedT' &ne; None &and; ?waitDiff' &ne; None &and; ?proc_ctx' = None &and; ?proc_prio' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2807 </font></span>        <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2808 </font></span>      <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2809 </font></span>      <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2810 </font></span>    <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2811 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2812 </font></span>   <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a16<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&not;?proc_attr = None </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2813 </font></span><font color="#ff00cc">                &and; &not;(getProcSta s (?cur_part_id,proc_id) &ne; Some DORMANT)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2814 </font></span><font color="#ff00cc">                &and; &not;(delayt &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2815 </font></span><font color="#ff00cc">                &and; &not;(isPeriodic s (?cur_part_id,proc_id) &and; delayt &ge;  Int.nat ?period)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2816 </font></span><font color="#ff00cc">                &and; (isPeriodic s (?cur_part_id,proc_id) = False)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2817 </font></span><font color="#ff00cc">                   &and; &not;(getPartMode s  ?cur_part_id = Some NORMAL)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2818 </font></span><font color="#ff00cc">             &#10230;  ?delayedT' &ne; None &and; ?proc_ctx' = None &and; ?proc_prio' &ne; None &and; ?proc_sta' = Some WAITING&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2819 </font></span>   <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2820 </font></span>     <font color="#006699"><strong>{</strong></font><font color="#006699"><strong>let</strong></font> ?s_set_waiting <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setProcSta ?s_reset_procCn (?cur_part_id,proc_id) WAITING&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2821 </font></span>      <font color="#006699"><strong>let</strong></font> ?s_setDt <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setDelayT ?s_set_waiting (?cur_part_id,proc_id) delayt&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2822 </font></span>       <font color="#0099ff"><strong>assume</strong></font> <font color="#ff00cc">&quot;&not;?proc_attr = None </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2823 </font></span><font color="#ff00cc">                &and; &not;(getProcSta s (?cur_part_id,proc_id) &ne; Some DORMANT)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2824 </font></span><font color="#ff00cc">                &and; &not;(delayt &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2825 </font></span><font color="#ff00cc">                &and; &not;(isPeriodic s (?cur_part_id,proc_id) &and; delayt &ge;  Int.nat ?period)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2826 </font></span><font color="#ff00cc">                &and; (isPeriodic s (?cur_part_id,proc_id) = False)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2827 </font></span><font color="#ff00cc">                   &and; &not;(getPartMode s  ?cur_part_id = Some NORMAL)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2828 </font></span>       <font color="#006699"><strong>hence</strong></font> a16_1<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?s_r = (?s_setDt , NO_ERROR)&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2829 </font></span>         <font color="#006699"><strong>unfolding</strong></font> DELAYED_START_def Let_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2830 </font></span>       <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;?proc_sta' = Some WAITING&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2831 </font></span>         <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> a16_1 fstI getSta_setDelayT getSta_set_Waiting<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2832 </font></span>       <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?delayedT' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2833 </font></span>        <font color="#cc0000">(* by (metis a16_1 fstI getDelayT_setDelayT_NotNone)*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2834 </font></span>         <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt fstI a16_1 getDelayT_setDelayT_NotNone<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2835 </font></span>       <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?proc_ctx' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2836 </font></span>         <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis a16_1 fst_conv getCtx_rst_None getCtx_setDelayT getCtx_setSta<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2837 </font></span>       <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?proc_prio' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2838 </font></span>         <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis a16_1 fstI getPrio_rstCtx getPrio_setDelayT getPrio_setSta option.simps<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font> set_NotNone<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2839 </font></span>       <font color="#006699"><strong>ultimately</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?delayedT' &ne; None &and; ?proc_ctx' = None &and; ?proc_prio' &ne; None &and; ?proc_sta' = Some WAITING&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2840 </font></span>         <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2841 </font></span>     <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2842 </font></span>     <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2843 </font></span>    <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2844 </font></span>    <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a16<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&not;?proc_attr = None </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2845 </font></span><font color="#ff00cc">                &and; &not;(getProcSta s (?cur_part_id,proc_id) &ne; Some DORMANT)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2846 </font></span><font color="#ff00cc">                &and; &not;(delayt &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2847 </font></span><font color="#ff00cc">                &and; &not;(isPeriodic s (?cur_part_id,proc_id) &and; delayt &ge;  Int.nat ?period)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2848 </font></span><font color="#ff00cc">                &and; &not;(isPeriodic s (?cur_part_id,proc_id) = False)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2849 </font></span><font color="#ff00cc">                   &and; (getPartMode s  ?cur_part_id = Some NORMAL)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2850 </font></span><font color="#ff00cc">             &#10230; ?proc_rlsp'&ne; None &and; (TIME_CAPACITY(the ?proc_attr)&gt;0 &#10230; ?proc_ddl' &ne; None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2851 </font></span><font color="#ff00cc">                 &and; ?proc_ctx' = None &and; ?proc_prio' &ne; None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2852 </font></span><font color="#ff00cc">                &and; ?proc_sta' = Some WAITING&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2853 </font></span>    <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2854 </font></span>      <font color="#006699"><strong>{</strong></font><font color="#006699"><strong>let</strong></font> ?set_waiting <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setProcSta ?s_reset_procCn (?cur_part_id,proc_id) WAITING&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2855 </font></span>       <font color="#006699"><strong>let</strong></font> ?firstRls <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;partSchedNextTime core_id ?cur_part_id (int(timer_' ?set_waiting))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2856 </font></span>       <font color="#006699"><strong>let</strong></font> ?s_set_firstRls <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setRlsPoint ?set_waiting (?cur_part_id,proc_id) (?firstRls + int(delayt))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2857 </font></span>       <font color="#006699"><strong>let</strong></font> ?s_set_firstRls_ddl <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;case TIME_CAPACITY(the ?proc_attr)&gt;0 of </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2858 </font></span><font color="#ff00cc">                                            True &rArr; setProcDDL ?s_set_firstRls (?cur_part_id,proc_id) (Int.int(Int.nat(TIME_CAPACITY(the ?proc_attr)) + Int.nat(?firstRls))) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2859 </font></span><font color="#ff00cc">                                             False &rArr; ?s_set_firstRls&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2860 </font></span>        <font color="#0099ff"><strong>assume</strong></font> <font color="#ff00cc">&quot;&not;?proc_attr = None </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2861 </font></span><font color="#ff00cc">                &and; &not;(getProcSta s (?cur_part_id,proc_id) &ne; Some DORMANT)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2862 </font></span><font color="#ff00cc">                &and; &not;(delayt &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2863 </font></span><font color="#ff00cc">                &and; &not;(isPeriodic s (?cur_part_id,proc_id) &and; delayt &ge;  Int.nat ?period)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2864 </font></span><font color="#ff00cc">                &and; &not;(isPeriodic s (?cur_part_id,proc_id) = False)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2865 </font></span><font color="#ff00cc">                   &and; (getPartMode s  ?cur_part_id = Some NORMAL)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2866 </font></span>        <font color="#006699"><strong>hence</strong></font> a16_1<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?s_r = (?s_set_firstRls_ddl , NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2867 </font></span>          <font color="#006699"><strong>unfolding</strong></font> DELAYED_START_def Let_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2868 </font></span>        <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?proc_rlsp'&ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2869 </font></span>          <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> a16_1 fstI getfrls_set_NotNone getfrls_setddl<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2870 </font></span>        <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;(TIME_CAPACITY(the ?proc_attr)&gt;0 &#10230; ?proc_ddl' &ne; None)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2871 </font></span>          <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> a16_1 fstI getddl_set_NotNone<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2872 </font></span>        <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?proc_ctx' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2873 </font></span>          <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> a16_1 fstI getCtx_petDdl getCtx_petrls getCtx_rst_None getCtx_setSta<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2874 </font></span>        <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?proc_prio' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2875 </font></span>          <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> a16_1 fstI getPrio_petDdl getPrio_rstCtx getPrio_setSta getPrio_setrls option.simps<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font> set_NotNone<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2876 </font></span>        <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?proc_sta' = Some WAITING&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2877 </font></span>          <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> a16_1 fstI getSta_set_Waiting getSta_setddl getSta_setrls<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2878 </font></span>        <font color="#006699"><strong>ultimately</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?proc_rlsp'&ne; None &and; (TIME_CAPACITY(the ?proc_attr)&gt;0 &#10230; ?proc_ddl' &ne; None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2879 </font></span><font color="#ff00cc">                 &and; ?proc_ctx' = None &and; ?proc_prio' &ne; None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2880 </font></span><font color="#ff00cc">                &and; ?proc_sta' = Some WAITING&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2881 </font></span>          <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2882 </font></span>      <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2883 </font></span>      <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2884 </font></span>    <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2885 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2886 </font></span>    <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a17<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&not;?proc_attr = None </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2887 </font></span><font color="#ff00cc">                &and; &not;(getProcSta s (?cur_part_id,proc_id) &ne; Some DORMANT)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2888 </font></span><font color="#ff00cc">                &and; &not;(delayt &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2889 </font></span><font color="#ff00cc">                &and; &not;(isPeriodic s (?cur_part_id,proc_id) &and; delayt &ge;  Int.nat ?period)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2890 </font></span><font color="#ff00cc">                &and; &not;(isPeriodic s (?cur_part_id,proc_id) = False)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2891 </font></span><font color="#ff00cc">                   &and; &not;(getPartMode s  ?cur_part_id = Some NORMAL)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2892 </font></span><font color="#ff00cc">             &#10230; ?delayedT' &ne; None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2893 </font></span><font color="#ff00cc">                 &and;?proc_ctx' = None &and; ?proc_prio' &ne; None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2894 </font></span><font color="#ff00cc">                &and; ?proc_sta' = Some WAITING&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2895 </font></span>    <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2896 </font></span>      <font color="#006699"><strong>{</strong></font><font color="#006699"><strong>let</strong></font> ?s_set_waiting <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setProcSta ?s_reset_procCn (?cur_part_id,proc_id) WAITING&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2897 </font></span>        <font color="#006699"><strong>let</strong></font> ?s_setDt <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setDelayT ?s_set_waiting (?cur_part_id,proc_id) delayt&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2898 </font></span>        <font color="#0099ff"><strong>assume</strong></font> <font color="#ff00cc">&quot;&not;?proc_attr = None </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2899 </font></span><font color="#ff00cc">                &and; &not;(getProcSta s (?cur_part_id,proc_id) &ne; Some DORMANT)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2900 </font></span><font color="#ff00cc">                &and; &not;(delayt &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2901 </font></span><font color="#ff00cc">                &and; &not;(isPeriodic s (?cur_part_id,proc_id) &and; delayt &ge;  Int.nat ?period)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2902 </font></span><font color="#ff00cc">                &and; &not;(isPeriodic s (?cur_part_id,proc_id) = False)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2903 </font></span><font color="#ff00cc">                   &and; &not;(getPartMode s  ?cur_part_id = Some NORMAL)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2904 </font></span>        <font color="#006699"><strong>hence</strong></font> a17_1<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?s_r = (?s_setDt , NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2905 </font></span>          <font color="#006699"><strong>unfolding</strong></font> DELAYED_START_def Let_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2906 </font></span>        <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?proc_sta' = Some WAITING&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2907 </font></span>          <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis a17_1 fstI getSta_setDelayT getSta_set_STATE<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2908 </font></span>        <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?delayedT' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2909 </font></span>          <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt a17_1 fstI getDelayT_setDelayT_NotNone<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2910 </font></span>        <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?proc_ctx' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2911 </font></span>          <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt a17_1 fstI getCtx_rst_None getCtx_setDelayT getCtx_setSta<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2912 </font></span>        <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?proc_prio' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2913 </font></span>          <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis a17_1 fst_conv getPrio_rstCtx getPrio_setDelayT getPrio_setSta option.simps<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font> set_NotNone<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2914 </font></span>        <font color="#006699"><strong>ultimately</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?delayedT' &ne; None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2915 </font></span><font color="#ff00cc">                &and; ?proc_ctx' = None &and; ?proc_prio' &ne; None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2916 </font></span><font color="#ff00cc">                &and; ?proc_sta' = Some WAITING&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2917 </font></span>          <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2918 </font></span>      <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2919 </font></span>      <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2920 </font></span>    <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2921 </font></span>    <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2922 </font></span>  <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2923 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2924 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2925 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2926 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2927 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2928 </font></span><font color="#006699"><strong>lemma</strong></font> LOCK_PREEMPTION<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2929 </font></span><font color="#ff00cc">&quot;let s_l_r = LOCK_PREEMPTION s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2930 </font></span><font color="#ff00cc">     cur_part_id = the(curPartID s core_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2931 </font></span><font color="#ff00cc">     cur_proc_id = curProcID_Core s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2932 </font></span><font color="#ff00cc">     cur_lockLvl = the(lockLvl(partitions_' s)cur_part_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2933 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2934 </font></span><font color="#ff00cc">     curLock' = getPartLock (fst s_l_r) cur_part_id</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2935 </font></span><font color="#ff00cc">      in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2936 </font></span><font color="#ff00cc">     if getUserPLMtxAttrByID s (cur_part_id,PREEMPT_MUTEX_ID_TYPE) = None then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2937 </font></span><font color="#ff00cc">        s_l_r = (s , cur_lockLvl ,  INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2938 </font></span><font color="#ff00cc">     else if the cur_proc_id = HM_PROC_ID &or; getPartMode s cur_part_id &ne; Some NORMAL then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2939 </font></span><font color="#ff00cc">        s_l_r = (s ,cur_lockLvl,  NO_ACTION)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2940 </font></span><font color="#ff00cc">     else </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2941 </font></span><font color="#ff00cc">        let s_aqLPMtx = acquireLockPreemptMtx s core_id in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2942 </font></span><font color="#ff00cc">            if snd s_aqLPMtx = None  then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2943 </font></span><font color="#ff00cc">                s_l_r = (schedule_Abs (fst s_aqLPMtx) core_id , cur_lockLvl , NO_ERROR)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2944 </font></span><font color="#ff00cc">            else if snd s_aqLPMtx = Some INVALID_CONFIG then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2945 </font></span><font color="#ff00cc">                s_l_r = (s , cur_lockLvl , INVALID_CONFIG)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2946 </font></span><font color="#ff00cc">            else let mtx_lock_count = the(getUserPLMtxLckCount (fst s_aqLPMtx) (cur_part_id,PREEMPT_MUTEX_ID_TYPE));</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2947 </font></span><font color="#ff00cc">                    s_setPartLock = setCurPartLock s core_id mtx_lock_count in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2948 </font></span><font color="#ff00cc">                s_l_r = (s_setPartLock , mtx_lock_count ,  NO_ERROR) &and; curLock' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2949 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2950 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_l_r <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;LOCK_PREEMPTION s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2951 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;the(curPartID s core_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2952 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_proc_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curProcID_Core s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2953 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_lockLvl <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;the(lockLvl(partitions_' s)?cur_part_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2954 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_aqLPMtx <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;acquireLockPreemptMtx s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2955 </font></span>  <font color="#006699"><strong>let</strong></font> ?mtx_lock_count <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;the(getUserPLMtxLckCount (fst ?s_aqLPMtx) (?cur_part_id,PREEMPT_MUTEX_ID_TYPE))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2956 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setPartLock <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setCurPartLock s core_id ?mtx_lock_count&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2957 </font></span>  <font color="#006699"><strong>let</strong></font> ?curLock' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getPartLock (fst ?s_l_r) ?cur_part_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2958 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getUserPLMtxAttrByID s (?cur_part_id,PREEMPT_MUTEX_ID_TYPE) = None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2959 </font></span><font color="#ff00cc">      &#10230; ?s_l_r = (s , ?cur_lockLvl ,  INVALID_PARAM)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2960 </font></span>    <font color="#006699"><strong>unfolding</strong></font> LOCK_PREEMPTION_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2961 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getUserPLMtxAttrByID s (?cur_part_id,PREEMPT_MUTEX_ID_TYPE) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2962 </font></span><font color="#ff00cc">                &and; (the ?cur_proc_id = HM_PROC_ID &or; getPartMode s ?cur_part_id &ne; Some NORMAL)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2963 </font></span><font color="#ff00cc">              &#10230; ?s_l_r = (s ,?cur_lockLvl,  NO_ACTION)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2964 </font></span>    <font color="#006699"><strong>unfolding</strong></font> LOCK_PREEMPTION_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2965 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getUserPLMtxAttrByID s (?cur_part_id,PREEMPT_MUTEX_ID_TYPE) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2966 </font></span><font color="#ff00cc">                &and; &not;(the ?cur_proc_id = HM_PROC_ID &or; getPartMode s ?cur_part_id &ne; Some NORMAL)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2967 </font></span><font color="#ff00cc">                &and; snd ?s_aqLPMtx = None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2968 </font></span><font color="#ff00cc">              &#10230; ?s_l_r = (schedule_Abs (fst ?s_aqLPMtx) core_id , ?cur_lockLvl , NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2969 </font></span>    <font color="#006699"><strong>unfolding</strong></font> LOCK_PREEMPTION_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2970 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getUserPLMtxAttrByID s (?cur_part_id,PREEMPT_MUTEX_ID_TYPE) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2971 </font></span><font color="#ff00cc">                &and; &not;(the ?cur_proc_id = HM_PROC_ID &or; getPartMode s ?cur_part_id &ne; Some NORMAL)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2972 </font></span><font color="#ff00cc">                &and; &not;(snd ?s_aqLPMtx = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2973 </font></span><font color="#ff00cc">                &and; snd ?s_aqLPMtx = Some INVALID_CONFIG</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2974 </font></span><font color="#ff00cc">              &#10230; ?s_l_r = (s , ?cur_lockLvl , INVALID_CONFIG)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2975 </font></span>    <font color="#006699"><strong>unfolding</strong></font> LOCK_PREEMPTION_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2976 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getUserPLMtxAttrByID s (?cur_part_id,PREEMPT_MUTEX_ID_TYPE) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2977 </font></span><font color="#ff00cc">                &and; &not;(the ?cur_proc_id = HM_PROC_ID &or; getPartMode s ?cur_part_id &ne; Some NORMAL)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2978 </font></span><font color="#ff00cc">                &and; &not;(snd ?s_aqLPMtx = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2979 </font></span><font color="#ff00cc">                &and; &not;(snd ?s_aqLPMtx = Some INVALID_CONFIG)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2980 </font></span><font color="#ff00cc">              &#10230; ?s_l_r = (?s_setPartLock , ?mtx_lock_count ,  NO_ERROR) &and; ?curLock' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2981 </font></span>  <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2982 </font></span>    <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>assume</strong></font> <font color="#ff00cc">&quot;&not;(getUserPLMtxAttrByID s (?cur_part_id,PREEMPT_MUTEX_ID_TYPE) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2983 </font></span><font color="#ff00cc">                &and; &not;(the ?cur_proc_id = HM_PROC_ID &or; getPartMode s ?cur_part_id &ne; Some NORMAL)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2984 </font></span><font color="#ff00cc">                &and; &not;(snd ?s_aqLPMtx = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2985 </font></span><font color="#ff00cc">                &and; &not;(snd ?s_aqLPMtx = Some INVALID_CONFIG)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2986 </font></span>      <font color="#006699"><strong>hence</strong></font> a1<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?s_l_r = (?s_setPartLock , ?mtx_lock_count ,  NO_ERROR)&quot;</font>  
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2987 </font></span>        <font color="#006699"><strong>unfolding</strong></font> LOCK_PREEMPTION_def Let_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2988 </font></span>      <font color="#006699"><strong>hence</strong></font>  <font color="#ff00cc">&quot;?curLock' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2989 </font></span>        <font color="#006699"><strong>unfolding</strong></font> LOCK_PREEMPTION_def Let_def setCurPartLock_def
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2990 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> curPartID_def getlock_setPartLockS_NotNone<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2991 </font></span>    <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2992 </font></span>    <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt LOCK_PREEMPTION_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2993 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2994 </font></span>  <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2995 </font></span>  <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2996 </font></span><font color="#006699"><strong>qed</strong></font>     
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2997 </font></span>                                         
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2998 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2999 </font></span><font color="#006699"><strong>lemma</strong></font> UNLOCK_PREEMPTION<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">3000 </font></span>  <font color="#ff00cc">&quot;let s_l_r = UNLOCK_PREEMPTION s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3001 </font></span><font color="#ff00cc">      cur_part_id = curPartID s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3002 </font></span><font color="#ff00cc">      cur_proc_id = curProcID_Core s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3003 </font></span><font color="#ff00cc">      curLock' = getPartLock (fst s_l_r) (the cur_part_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3004 </font></span><font color="#ff00cc">      cur_lockLvl = the(lockLvl(partitions_' s)(the cur_part_id))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">3005 </font></span><font color="#ff00cc">      in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3006 </font></span><font color="#ff00cc">    if getUserPLMtxAttrByID s (the cur_part_id,PREEMPT_MUTEX_ID_TYPE) = None then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3007 </font></span><font color="#ff00cc">        s_l_r = (s , cur_lockLvl , INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3008 </font></span><font color="#ff00cc">    else if (the cur_proc_id) = HM_PROC_ID &or; the(curMode(partitions_' s)(the cur_part_id)) &ne;  NORMAL</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3009 </font></span><font color="#ff00cc">                         &or;  getUserPLMtxOwner s (the cur_part_id,PREEMPT_MUTEX_ID_TYPE) = None then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">3010 </font></span><font color="#ff00cc">       s_l_r = (s , cur_lockLvl , NO_ACTION)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3011 </font></span><font color="#ff00cc">    else if &not;isProcOwnPreemptMtx s (the cur_part_id) (the cur_proc_id) then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3012 </font></span><font color="#ff00cc">       s_l_r = (s , cur_lockLvl , INVALID_MODE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3013 </font></span><font color="#ff00cc">    else </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3014 </font></span><font color="#ff00cc">       let s_release = releaseLockPeemptMtx s core_id in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">3015 </font></span><font color="#ff00cc">       if (snd s_release) &ne; None then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3016 </font></span><font color="#ff00cc">          let mtx_lock_count = the(getUserPLMtxLckCount (fst s_release) (the cur_part_id,PREEMPT_MUTEX_ID_TYPE));</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3017 </font></span><font color="#ff00cc">            s_setPartLock = setPartLockS s (the cur_part_id)  mtx_lock_count in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3018 </font></span><font color="#ff00cc">            s_l_r = (s_setPartLock , mtx_lock_count , NO_ERROR) &and; curLock' = Some mtx_lock_count</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3019 </font></span><font color="#ff00cc">       else</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">3020 </font></span><font color="#ff00cc">          let s_setPartLock = setPartLockS (fst s_release) (the cur_part_id) 0 in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3021 </font></span><font color="#ff00cc">          s_l_r = (schedule_Abs s_setPartLock core_id , 0 , NO_ERROR)&and; curLock' = Some 0&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3022 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3023 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_l_r <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;UNLOCK_PREEMPTION s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3024 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curPartID s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">3025 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_proc_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curProcID_Core s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3026 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_lockLvl <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;the(lockLvl(partitions_' s)(the ?cur_part_id))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3027 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_release <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;releaseLockPeemptMtx s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3028 </font></span>  <font color="#006699"><strong>let</strong></font> ?mtx_lock_count <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;the(getUserPLMtxLckCount (fst ?s_release) (the ?cur_part_id,PREEMPT_MUTEX_ID_TYPE))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3029 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setPartLock <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setPartLockS s (the ?cur_part_id)  ?mtx_lock_count&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">3030 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setPartLockz <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setPartLockS (fst ?s_release) (the ?cur_part_id) 0&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3031 </font></span>  <font color="#006699"><strong>let</strong></font> ?curLock' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getPartLock (fst ?s_l_r) (the ?cur_part_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3032 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3033 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getUserPLMtxAttrByID s (the ?cur_part_id,PREEMPT_MUTEX_ID_TYPE) = None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3034 </font></span><font color="#ff00cc">        &#10230; ?s_l_r = (s , ?cur_lockLvl , INVALID_PARAM)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">3035 </font></span>    <font color="#006699"><strong>unfolding</strong></font> UNLOCK_PREEMPTION_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3036 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getUserPLMtxAttrByID s (the ?cur_part_id,PREEMPT_MUTEX_ID_TYPE) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3037 </font></span><font color="#ff00cc">                &and; ((the ?cur_proc_id) = HM_PROC_ID &or; the(curMode(partitions_' s)(the ?cur_part_id)) &ne;  NORMAL</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3038 </font></span><font color="#ff00cc">                         &or;  getUserPLMtxOwner s (the ?cur_part_id,PREEMPT_MUTEX_ID_TYPE) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3039 </font></span><font color="#ff00cc">                &#10230; ?s_l_r = (s , ?cur_lockLvl , NO_ACTION)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">3040 </font></span>    <font color="#006699"><strong>unfolding</strong></font> UNLOCK_PREEMPTION_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3041 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getUserPLMtxAttrByID s (the ?cur_part_id,PREEMPT_MUTEX_ID_TYPE) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3042 </font></span><font color="#ff00cc">                &and; &not;((the ?cur_proc_id) = HM_PROC_ID &or; the(curMode(partitions_' s)(the ?cur_part_id)) &ne;  NORMAL</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3043 </font></span><font color="#ff00cc">                         &or;  getUserPLMtxOwner s (the ?cur_part_id,PREEMPT_MUTEX_ID_TYPE) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3044 </font></span><font color="#ff00cc">                &and; &not;isProcOwnPreemptMtx s (the ?cur_part_id) (the ?cur_proc_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">3045 </font></span><font color="#ff00cc">                &#10230; ?s_l_r = (s , ?cur_lockLvl , INVALID_MODE)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3046 </font></span>    <font color="#006699"><strong>unfolding</strong></font> UNLOCK_PREEMPTION_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3047 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getUserPLMtxAttrByID s (the ?cur_part_id,PREEMPT_MUTEX_ID_TYPE) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3048 </font></span><font color="#ff00cc">                &and; &not;((the ?cur_proc_id) = HM_PROC_ID &or; the(curMode(partitions_' s)(the ?cur_part_id)) &ne;  NORMAL</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3049 </font></span><font color="#ff00cc">                         &or;  getUserPLMtxOwner s (the ?cur_part_id,PREEMPT_MUTEX_ID_TYPE) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">3050 </font></span><font color="#ff00cc">                &and; isProcOwnPreemptMtx s (the ?cur_part_id) (the ?cur_proc_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3051 </font></span><font color="#ff00cc">                &and; (snd ?s_release) &ne; None </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3052 </font></span><font color="#ff00cc">                &#10230; ?s_l_r = (?s_setPartLock , ?mtx_lock_count , NO_ERROR)&and; ?curLock' = Some ?mtx_lock_count&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3053 </font></span>  <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3054 </font></span>    <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>assume</strong></font> <font color="#ff00cc">&quot;&not;(getUserPLMtxAttrByID s (the ?cur_part_id,PREEMPT_MUTEX_ID_TYPE) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">3055 </font></span><font color="#ff00cc">                &and; &not;((the ?cur_proc_id) = HM_PROC_ID &or; the(curMode(partitions_' s)(the ?cur_part_id)) &ne;  NORMAL</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3056 </font></span><font color="#ff00cc">                         &or;  getUserPLMtxOwner s (the ?cur_part_id,PREEMPT_MUTEX_ID_TYPE) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3057 </font></span><font color="#ff00cc">                &and; isProcOwnPreemptMtx s (the ?cur_part_id) (the ?cur_proc_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3058 </font></span><font color="#ff00cc">                &and; (snd ?s_release) &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3059 </font></span>      <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;?s_l_r = (?s_setPartLock , ?mtx_lock_count , NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">3060 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> UNLOCK_PREEMPTION_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3061 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?curLock' = Some ?mtx_lock_count&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3062 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis calculation fst_conv getlock_setPartLockS_NotNone<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3063 </font></span>      <font color="#006699"><strong>ultimately</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?s_l_r = (?s_setPartLock , ?mtx_lock_count , NO_ERROR)&and; ?curLock' = Some ?mtx_lock_count&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3064 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> hide_lams<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">3065 </font></span>      <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3066 </font></span>      <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3067 </font></span>    <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3068 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getUserPLMtxAttrByID s (the ?cur_part_id,PREEMPT_MUTEX_ID_TYPE) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3069 </font></span><font color="#ff00cc">                &and; &not;((the ?cur_proc_id) = HM_PROC_ID &or; the(curMode(partitions_' s)(the ?cur_part_id)) &ne;  NORMAL</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">3070 </font></span><font color="#ff00cc">                         &or;  getUserPLMtxOwner s (the ?cur_part_id,PREEMPT_MUTEX_ID_TYPE) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3071 </font></span><font color="#ff00cc">                &and; isProcOwnPreemptMtx s (the ?cur_part_id) (the ?cur_proc_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3072 </font></span><font color="#ff00cc">                &and; &not;((snd ?s_release) &ne; None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3073 </font></span><font color="#ff00cc">                &#10230;?s_l_r = (schedule_Abs ?s_setPartLockz core_id , 0 , NO_ERROR)&and; ?curLock' = Some 0&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3074 </font></span>  <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">3075 </font></span>    <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>assume</strong></font> <font color="#ff00cc">&quot;&not;(getUserPLMtxAttrByID s (the ?cur_part_id,PREEMPT_MUTEX_ID_TYPE) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3076 </font></span><font color="#ff00cc">                &and; &not;((the ?cur_proc_id) = HM_PROC_ID &or; the(curMode(partitions_' s)(the ?cur_part_id)) &ne;  NORMAL</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3077 </font></span><font color="#ff00cc">                         &or;  getUserPLMtxOwner s (the ?cur_part_id,PREEMPT_MUTEX_ID_TYPE) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3078 </font></span><font color="#ff00cc">                &and; isProcOwnPreemptMtx s (the ?cur_part_id) (the ?cur_proc_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3079 </font></span><font color="#ff00cc">                &and; &not;((snd ?s_release) &ne; None)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">3080 </font></span>      <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;?s_l_r = (schedule_Abs ?s_setPartLockz core_id , 0 , NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3081 </font></span>        <font color="#006699"><strong>unfolding</strong></font> UNLOCK_PREEMPTION_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3082 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?curLock' = Some 0&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3083 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> hide_lams<font color="#000000"><strong>)</strong></font> calculation fst_conv getlock_schedule_Abs getlock_setPartLockS_NotNone<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3084 </font></span>      <font color="#006699"><strong>ultimately</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?s_l_r = (schedule_Abs ?s_setPartLockz core_id , 0 , NO_ERROR)&and; ?curLock' = Some 0&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">3085 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> hide_lams<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3086 </font></span>      <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3087 </font></span>      <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3088 </font></span>    <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3089 </font></span>  <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">3090 </font></span>  <font color="#006699"><strong>by</strong></font> smt  
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3091 </font></span><font color="#006699"><strong>qed</strong></font>   
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3092 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3093 </font></span><font color="#006699"><strong>lemma</strong></font> GET_MY_ID<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3094 </font></span>  <font color="#ff00cc">&quot;let s_p_r = GET_MY_ID s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">3095 </font></span><font color="#ff00cc">      cur_part_id = curPartID s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3096 </font></span><font color="#ff00cc">      cur_proc_id = curProcID_Core s core_id in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3097 </font></span><font color="#ff00cc">    if (the cur_proc_id) = HM_PROC_ID then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3098 </font></span><font color="#ff00cc">      s_p_r = (s , None , INVALID_MODE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3099 </font></span><font color="#ff00cc">    else </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">3100 </font></span><font color="#ff00cc">      s_p_r = (s, Some (the cur_proc_id) , NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3101 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3102 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_p_r <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;GET_MY_ID s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3103 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curPartID s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3104 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_proc_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curProcID_Core s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">3105 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;(the ?cur_proc_id) = HM_PROC_ID</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3106 </font></span><font color="#ff00cc">        &#10230; ?s_p_r = (s , None , INVALID_MODE)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3107 </font></span>    <font color="#006699"><strong>unfolding</strong></font> GET_MY_ID_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3108 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;((the ?cur_proc_id) = HM_PROC_ID)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3109 </font></span><font color="#ff00cc">                &#10230; ?s_p_r = (s, Some (the ?cur_proc_id) , NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">3110 </font></span>    <font color="#006699"><strong>unfolding</strong></font> GET_MY_ID_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3111 </font></span>  <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3112 </font></span>  <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3113 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3114 </font></span>   
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">3115 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3116 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3117 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3118 </font></span><font color="#009966"><strong>end</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3119 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">3120 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3121 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3122 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">3123 </font></span>
</font></pre>
</body>
</html>
