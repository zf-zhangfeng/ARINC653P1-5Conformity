<html>
<head>
<title>IntraCom_FT.thy</title>
</head>
<body bgcolor="#ffffff">



<pre><font color="#333333"><span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">   1 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">   2 </font></span><font color="#006699"><strong>section</strong></font><font color="#6600cc">&lsaquo;</font><font color="#6600cc">C</font><font color="#6600cc">o</font><font color="#6600cc">n</font><font color="#6600cc">f</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">m</font><font color="#6600cc">i</font><font color="#6600cc">t</font><font color="#6600cc">y</font><font color="#6600cc"> </font><font color="#6600cc">P</font><font color="#6600cc">r</font><font color="#6600cc">o</font><font color="#6600cc">o</font><font color="#6600cc">f</font><font color="#6600cc"> </font><font color="#6600cc">o</font><font color="#6600cc">f</font><font color="#6600cc"> </font><font color="#6600cc">I</font><font color="#6600cc">n</font><font color="#6600cc">t</font><font color="#6600cc">r</font><font color="#6600cc">a</font><font color="#6600cc">P</font><font color="#6600cc">a</font><font color="#6600cc">r</font><font color="#6600cc">t</font><font color="#6600cc">i</font><font color="#6600cc">t</font><font color="#6600cc">i</font><font color="#6600cc">o</font><font color="#6600cc">n</font><font color="#6600cc"> </font><font color="#6600cc">C</font><font color="#6600cc">o</font><font color="#6600cc">m</font><font color="#6600cc">m</font><font color="#6600cc">u</font><font color="#6600cc">n</font><font color="#6600cc">i</font><font color="#6600cc">c</font><font color="#6600cc">a</font><font color="#6600cc">t</font><font color="#6600cc">i</font><font color="#6600cc">o</font><font color="#6600cc">n</font><font color="#6600cc">s</font><font color="#6600cc">&rsaquo;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">   3 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">   4 </font></span><font color="#006699"><strong>theory</strong></font> IntraCom_FT
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">   5 </font></span>  <font color="#009966"><strong>imports</strong></font> <font color="#ff00cc">&quot;../Services_R/IntraCom&quot;</font> <font color="#ff00cc">&quot;./Process_FT&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">   6 </font></span><font color="#009966"><strong>begin</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">   7 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">   8 </font></span><font color="#006699"><strong>lemma</strong></font> setBufAttr<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getBufAttrByID (createBuffer s cur_part_id buffer_id buffer_attr) (cur_part_id,buffer_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">   9 </font></span><font color="#ff00cc">               = Some buffer_attr&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  10 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getBufAttrByID_def createBuffer_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  11 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  12 </font></span><font color="#006699"><strong>lemma</strong></font> getWaitDiff_rstWaitDiff<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getWaitDiff (rstWaitDiff s pp) pp = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  13 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getWaitDiff_def rstWaitDiff_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  14 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  15 </font></span><font color="#006699"><strong>lemma</strong></font> getWaitDiff_stopCterRsc<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getWaitDiff (stopCterRsc s pp) pp = getWaitDiff s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  16 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getWaitDiff_def stopCterRsc_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  17 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  18 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  19 </font></span><font color="#006699"><strong>lemma</strong></font> <font color="#ff00cc">&quot;pp&ne; p1&#10230; ( (s(pp := None))(p1 := Some ee)) pp = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  20 </font></span>  <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis fun_upd_apply<font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  21 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  22 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  23 </font></span><font color="#006699"><strong>lemma</strong></font> waitDiff_timedLDel<font color="#000000"><strong>:</strong></font><font color="#ff00cc">&quot;(snd (timedLDel pl pd pp) pp = None)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  24 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  25 </font></span>  <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  26 </font></span>  <font color="#006699"><strong>proof</strong></font><font color="#000000"><strong>(</strong></font>induction pl<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  27 </font></span>    <font color="#0099ff"><strong>case</strong></font> Nil
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  28 </font></span>    <font color="#006699"><strong>then</strong></font> <font color="#0099ff"><strong>show</strong></font> ?case
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  29 </font></span>      <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis fun_upd_apply snd_conv timedLDel.simps<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  30 </font></span>  <font color="#006699"><strong>next</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  31 </font></span>    <font color="#0099ff"><strong>case</strong></font> <font color="#000000"><strong>(</strong></font>Cons p pl<font color="#000000"><strong>)</strong></font> <font color="#006699"><strong>thm</strong></font> Cons
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  32 </font></span>    <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;snd (timedLDel pl pd pp) pp = None&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  33 </font></span>      <font color="#006699"><strong>using</strong></font> Cons <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  34 </font></span>    <font color="#006699"><strong>{</strong></font><font color="#006699"><strong>let</strong></font> ?new_pwl_pd <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;timedLDel (p#pl) pd pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  35 </font></span>      <font color="#006699"><strong>have</strong></font> a10<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?new_pwl_pd =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  36 </font></span><font color="#ff00cc">       (let new_pl_pd = timedLDel pl pd pp in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  37 </font></span><font color="#ff00cc">        if p = pp then </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  38 </font></span><font color="#ff00cc">           let delProc_Wd = pd pp; pd_del = pd(pp := None) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  39 </font></span><font color="#ff00cc">           if pl=[] then([],pd_del) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  40 </font></span><font color="#ff00cc">            else (pl, (pd_del((pl!0) := Some (the delProc_Wd + the (pd (pl!0)))))(pp := None)) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  41 </font></span><font color="#ff00cc">         else (p#(fst new_pl_pd), snd new_pl_pd))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  42 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis timedLDel.simps<font color="#000000"><strong>(</strong></font>2<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  43 </font></span>      <font color="#006699"><strong>have</strong></font> a11<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;snd ?new_pwl_pd pp = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  44 </font></span><font color="#ff00cc">           (let new_pl_pd = timedLDel pl pd pp in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  45 </font></span><font color="#ff00cc">              if p = pp then </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  46 </font></span><font color="#ff00cc">                 let delProc_Wd = pd pp; pd_del = pd(pp := None) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  47 </font></span><font color="#ff00cc">                  if pl=[] then pd_del pp</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  48 </font></span><font color="#ff00cc">                  else  ((pd_del((pl!0) := Some (the delProc_Wd + the (pd (pl!0)))))(pp := None)) pp</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  49 </font></span><font color="#ff00cc">              else  (snd new_pl_pd) pp)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  50 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> a10 snd_conv<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  51 </font></span>      <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;snd ?new_pwl_pd pp = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  52 </font></span>      <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  53 </font></span>        <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;p = pp&and; (pl=[]) &#10230; snd ?new_pwl_pd pp =None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  54 </font></span>          <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> a11 fun_upd_same<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  55 </font></span>        <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;p = pp &and; &not;(pl=[])  &#10230; snd ?new_pwl_pd pp = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  56 </font></span>          <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>mono_tags<font color="#000000"><strong>)</strong></font> a11 fun_upd_same<font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  57 </font></span>        <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(p = pp) &#10230;snd ?new_pwl_pd pp = None &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  58 </font></span>           <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis Cons.IH a11<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  59 </font></span>        <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  60 </font></span>          <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis Cons.IH a11<font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  61 </font></span>      <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  62 </font></span>    <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  63 </font></span>    <font color="#006699"><strong>then</strong></font> <font color="#0099ff"><strong>show</strong></font> ?case
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  64 </font></span>      <font color="#006699"><strong>by</strong></font> metis 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  65 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  66 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  67 </font></span>  
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  68 </font></span><font color="#006699"><strong>lemma</strong></font> waitDel_D<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  69 </font></span>  <font color="#ff00cc">&quot;let s' = waitDel_D s pp;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  70 </font></span><font color="#ff00cc">      cid = the (procBlngCore pp); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  71 </font></span><font color="#ff00cc">      vpwl = waitQue (cores_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  72 </font></span><font color="#ff00cc">      pd = waitDiff(rscPendProcs_' s); </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  73 </font></span><font color="#ff00cc">      new_vp_pd = waitQ_SuspQDel vpwl pd cid pp  in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  74 </font></span><font color="#ff00cc">    getWaitDiff s' pp = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  75 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  76 </font></span>  <font color="#006699"><strong>let</strong></font> ?s' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;waitDel_D s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  77 </font></span>  <font color="#006699"><strong>let</strong></font> ?cid <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;the (procBlngCore pp)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  78 </font></span>  <font color="#006699"><strong>let</strong></font> ?vpwl <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;waitQue (cores_' s)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  79 </font></span>  <font color="#006699"><strong>let</strong></font> ?pd <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;waitDiff(rscPendProcs_' s)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  80 </font></span>  <font color="#006699"><strong>let</strong></font> ?new_vp_pd <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;waitQ_SuspQDel ?vpwl ?pd ?cid pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  81 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?new_vp_pd = (let new_tq_pd = timedLDel (the(?vpwl ?cid)) ?pd pp in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  82 </font></span><font color="#ff00cc">  (?vpwl(?cid := Some (fst new_tq_pd)), snd new_tq_pd))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  83 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis waitQ_SuspQDel_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  84 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getWaitDiff ?s' pp = snd ?new_vp_pd pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  85 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> PROCS_STATE_PENDING_TYPE.select_convs<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> PROCS_STATE_PENDING_TYPE.surjective PROCS_STATE_PENDING_TYPE.update_convs<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> StaProc.simps<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font> StaProc.simps<font color="#000000"><strong>(</strong></font>7<font color="#000000"><strong>)</strong></font> StaProc.surjective getWaitDiff_def waitDel_D_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  86 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getWaitDiff ?s' pp = snd (timedLDel (the(?vpwl ?cid)) ?pd pp) pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  87 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> <font color="#6600cc">&lsaquo;</font><font color="#6600cc">w</font><font color="#6600cc">a</font><font color="#6600cc">i</font><font color="#6600cc">t</font><font color="#6600cc">Q</font><font color="#6600cc">_</font><font color="#6600cc">S</font><font color="#6600cc">u</font><font color="#6600cc">s</font><font color="#6600cc">p</font><font color="#6600cc">Q</font><font color="#6600cc">D</font><font color="#6600cc">e</font><font color="#6600cc">l</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">w</font><font color="#6600cc">a</font><font color="#6600cc">i</font><font color="#6600cc">t</font><font color="#6600cc">Q</font><font color="#6600cc">u</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">c</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc">s</font><font color="#6600cc">_</font><font color="#6600cc">'</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc">)</font><font color="#6600cc">)</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">w</font><font color="#6600cc">a</font><font color="#6600cc">i</font><font color="#6600cc">t</font><font color="#6600cc">D</font><font color="#6600cc">i</font><font color="#6600cc">f</font><font color="#6600cc">f</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">r</font><font color="#6600cc">s</font><font color="#6600cc">c</font><font color="#6600cc">P</font><font color="#6600cc">e</font><font color="#6600cc">n</font><font color="#6600cc">d</font><font color="#6600cc">P</font><font color="#6600cc">r</font><font color="#6600cc">o</font><font color="#6600cc">c</font><font color="#6600cc">s</font><font color="#6600cc">_</font><font color="#6600cc">'</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc">)</font><font color="#6600cc">)</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">t</font><font color="#6600cc">h</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">p</font><font color="#6600cc">r</font><font color="#6600cc">o</font><font color="#6600cc">c</font><font color="#6600cc">B</font><font color="#6600cc">l</font><font color="#6600cc">n</font><font color="#6600cc">g</font><font color="#6600cc">C</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">p</font><font color="#6600cc">p</font><font color="#6600cc">)</font><font color="#6600cc">)</font><font color="#6600cc"> </font><font color="#6600cc">p</font><font color="#6600cc">p</font><font color="#6600cc"> </font><font color="#6600cc">=</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">l</font><font color="#6600cc">e</font><font color="#6600cc">t</font><font color="#6600cc"> </font><font color="#6600cc">n</font><font color="#6600cc">e</font><font color="#6600cc">w</font><font color="#6600cc">_</font><font color="#6600cc">t</font><font color="#6600cc">q</font><font color="#6600cc">_</font><font color="#6600cc">p</font><font color="#6600cc">d</font><font color="#6600cc"> </font><font color="#6600cc">=</font><font color="#6600cc"> </font><font color="#6600cc">t</font><font color="#6600cc">i</font><font color="#6600cc">m</font><font color="#6600cc">e</font><font color="#6600cc">d</font><font color="#6600cc">L</font><font color="#6600cc">D</font><font color="#6600cc">e</font><font color="#6600cc">l</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">t</font><font color="#6600cc">h</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">w</font><font color="#6600cc">a</font><font color="#6600cc">i</font><font color="#6600cc">t</font><font color="#6600cc">Q</font><font color="#6600cc">u</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">c</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc">s</font><font color="#6600cc">_</font><font color="#6600cc">'</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc">)</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">t</font><font color="#6600cc">h</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">p</font><font color="#6600cc">r</font><font color="#6600cc">o</font><font color="#6600cc">c</font><font color="#6600cc">B</font><font color="#6600cc">l</font><font color="#6600cc">n</font><font color="#6600cc">g</font><font color="#6600cc">C</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">p</font><font color="#6600cc">p</font><font color="#6600cc">)</font><font color="#6600cc">)</font><font color="#6600cc">)</font><font color="#6600cc">)</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">w</font><font color="#6600cc">a</font><font color="#6600cc">i</font><font color="#6600cc">t</font><font color="#6600cc">D</font><font color="#6600cc">i</font><font color="#6600cc">f</font><font color="#6600cc">f</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">r</font><font color="#6600cc">s</font><font color="#6600cc">c</font><font color="#6600cc">P</font><font color="#6600cc">e</font><font color="#6600cc">n</font><font color="#6600cc">d</font><font color="#6600cc">P</font><font color="#6600cc">r</font><font color="#6600cc">o</font><font color="#6600cc">c</font><font color="#6600cc">s</font><font color="#6600cc">_</font><font color="#6600cc">'</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc">)</font><font color="#6600cc">)</font><font color="#6600cc"> </font><font color="#6600cc">p</font><font color="#6600cc">p</font><font color="#6600cc"> </font><font color="#6600cc">i</font><font color="#6600cc">n</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">w</font><font color="#6600cc">a</font><font color="#6600cc">i</font><font color="#6600cc">t</font><font color="#6600cc">Q</font><font color="#6600cc">u</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">c</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc">s</font><font color="#6600cc">_</font><font color="#6600cc">'</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc">)</font><font color="#6600cc">(</font><font color="#6600cc">t</font><font color="#6600cc">h</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">p</font><font color="#6600cc">r</font><font color="#6600cc">o</font><font color="#6600cc">c</font><font color="#6600cc">B</font><font color="#6600cc">l</font><font color="#6600cc">n</font><font color="#6600cc">g</font><font color="#6600cc">C</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">p</font><font color="#6600cc">p</font><font color="#6600cc">)</font><font color="#6600cc"> </font><font color="#6600cc">&#8614;</font><font color="#6600cc"> </font><font color="#6600cc">f</font><font color="#6600cc">s</font><font color="#6600cc">t</font><font color="#6600cc"> </font><font color="#6600cc">n</font><font color="#6600cc">e</font><font color="#6600cc">w</font><font color="#6600cc">_</font><font color="#6600cc">t</font><font color="#6600cc">q</font><font color="#6600cc">_</font><font color="#6600cc">p</font><font color="#6600cc">d</font><font color="#6600cc">)</font><font color="#6600cc">,</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc">n</font><font color="#6600cc">d</font><font color="#6600cc"> </font><font color="#6600cc">n</font><font color="#6600cc">e</font><font color="#6600cc">w</font><font color="#6600cc">_</font><font color="#6600cc">t</font><font color="#6600cc">q</font><font color="#6600cc">_</font><font color="#6600cc">p</font><font color="#6600cc">d</font><font color="#6600cc">)</font><font color="#6600cc">)</font><font color="#6600cc">&rsaquo;</font> snd_conv<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  88 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;getWaitDiff ?s' pp = None&quot;</font> <font color="#006699"><strong>using</strong></font> waitDiff_timedLDel
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  89 </font></span>    <font color="#006699"><strong>by</strong></font> metis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  90 </font></span>  <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  91 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  92 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  93 </font></span><font color="#006699"><strong>lemma</strong></font> getCterRsc_reset_None<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getCterRsc (stopCterRsc s pp ) pp = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  94 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getCterRsc_def stopCterRsc_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">  95 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  96 </font></span><font color="#006699"><strong>lemma</strong></font> StopTCounter<font color="#000000"><strong>:</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  97 </font></span>  <font color="#ff00cc">&quot;let s' =  StopTCounter s pp;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  98 </font></span><font color="#ff00cc">        waitDiff' = getWaitDiff s' pp;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">  99 </font></span><font color="#ff00cc">        stopCterRsc' = getCterRsc s' pp;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 100 </font></span><font color="#ff00cc">        t_waitDiff = getWaitDiff s pp;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 101 </font></span><font color="#ff00cc">        s_waitQue_waitDiff_Del = waitDel_D s pp;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 102 </font></span><font color="#ff00cc">        s_waitDiff_Del = rstWaitDiff s pp;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 103 </font></span><font color="#ff00cc">        delT = if the(t_waitDiff) = -1 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 104 </font></span><font color="#ff00cc">                s_waitDiff_Del</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 105 </font></span><font color="#ff00cc">               else s_waitQue_waitDiff_Del;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 106 </font></span><font color="#ff00cc">        delCterRsc =  stopCterRsc delT pp in </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 107 </font></span><font color="#ff00cc">        waitDiff' = None &and; stopCterRsc' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 108 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 109 </font></span>  <font color="#006699"><strong>let</strong></font> ?s' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;StopTCounter s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 110 </font></span>  <font color="#006699"><strong>let</strong></font> ?waitDiff' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getWaitDiff ?s' pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 111 </font></span>  <font color="#006699"><strong>let</strong></font> ?stopCterRsc' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getCterRsc ?s' pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 112 </font></span>  <font color="#006699"><strong>have</strong></font> a1<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getWaitDiff s pp = Some (-1) &#10230; ?waitDiff' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 113 </font></span>    <font color="#006699"><strong>using</strong></font> StopTCounter_def   
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 114 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>verit<font color="#000000"><strong>,</strong></font> del_insts<font color="#000000"><strong>)</strong></font> getWaitDiff_rstWaitDiff getWaitDiff_stopCterRsc option.sel<font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 115 </font></span>  <font color="#006699"><strong>hence</strong></font> a2<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getWaitDiff s pp &ne; Some (-1) &#10230; ?waitDiff' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 116 </font></span>    <font color="#006699"><strong>using</strong></font> waitDel_D
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 117 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>full_types<font color="#000000"><strong>)</strong></font> StopTCounter_def getWaitDiff_rstWaitDiff getWaitDiff_stopCterRsc<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 118 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;?waitDiff' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 119 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> a1<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 120 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?stopCterRsc' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 121 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis StopTCounter_def getCterRsc_reset_None<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 122 </font></span>  <font color="#0099ff"><strong>thus</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 123 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#6600cc">&lsaquo;</font><font color="#6600cc">g</font><font color="#6600cc">e</font><font color="#6600cc">t</font><font color="#6600cc">W</font><font color="#6600cc">a</font><font color="#6600cc">i</font><font color="#6600cc">t</font><font color="#6600cc">D</font><font color="#6600cc">i</font><font color="#6600cc">f</font><font color="#6600cc">f</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">S</font><font color="#6600cc">t</font><font color="#6600cc">o</font><font color="#6600cc">p</font><font color="#6600cc">T</font><font color="#6600cc">C</font><font color="#6600cc">o</font><font color="#6600cc">u</font><font color="#6600cc">n</font><font color="#6600cc">t</font><font color="#6600cc">e</font><font color="#6600cc">r</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc"> </font><font color="#6600cc">p</font><font color="#6600cc">p</font><font color="#6600cc">)</font><font color="#6600cc"> </font><font color="#6600cc">p</font><font color="#6600cc">p</font><font color="#6600cc"> </font><font color="#6600cc">=</font><font color="#6600cc"> </font><font color="#6600cc">N</font><font color="#6600cc">o</font><font color="#6600cc">n</font><font color="#6600cc">e</font><font color="#6600cc">&rsaquo;</font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 124 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 125 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 126 </font></span><font color="#006699"><strong>lemma</strong></font> setCntxt_notNone<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getCntxt (setCntxt s pp cnt) pp = Some cnt&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 127 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getCntxt_def setCntxt_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 128 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 129 </font></span><font color="#006699"><strong>lemma</strong></font> getCntxt_waitDel_D<font color="#000000"><strong>:</strong></font><font color="#ff00cc">&quot;getCntxt (waitDel_D s pl) pp = getCntxt s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 130 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getCntxt_def waitDel_D_def
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 131 </font></span>  <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> PROCS_STATE_PENDING_TYPE.select_convs<font color="#000000"><strong>(</strong></font>7<font color="#000000"><strong>)</strong></font> PROCS_STATE_PENDING_TYPE.surjective PROCS_STATE_PENDING_TYPE.update_convs<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> StaProc.simps<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font> StaProc.simps<font color="#000000"><strong>(</strong></font>7<font color="#000000"><strong>)</strong></font> StaProc.surjective<font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 132 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 133 </font></span><font color="#006699"><strong>lemma</strong></font> getCntxt_rstWaitDiff<font color="#000000"><strong>:</strong></font><font color="#ff00cc">&quot;getCntxt (rstWaitDiff s pl) pp = getCntxt s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 134 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getCntxt_def rstWaitDiff_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 135 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 136 </font></span><font color="#006699"><strong>lemma</strong></font> getCntxt_stopCterRsc<font color="#000000"><strong>:</strong></font><font color="#ff00cc">&quot;getCntxt (stopCterRsc s pl) pp = getCntxt s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 137 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getCntxt_def stopCterRsc_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 138 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 139 </font></span><font color="#006699"><strong>lemma</strong></font> getCntxt_StopTCounter<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getCntxt (StopTCounter s pl) pp = getCntxt s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 140 </font></span>  <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>full_types<font color="#000000"><strong>)</strong></font> StopTCounter_def getCntxt_rstWaitDiff getCntxt_stopCterRsc getCntxt_waitDel_D<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 141 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 142 </font></span><font color="#006699"><strong>lemma</strong></font> getWaitDiff_readyDel_s_D<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 143 </font></span>  <font color="#ff00cc">&quot;getWaitDiff (readyDel_s_D s (fst pp) (snd pp)) pp = getWaitDiff s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 144 </font></span>  <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> getWaitDiff_def readyDel_s_D_def<font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 145 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 146 </font></span><font color="#cc0000">(*</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 147 </font></span><font color="#cc0000">lemma getWaitDiff_procAlone:</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 148 </font></span><font color="#cc0000">  &quot;getWaitDiff (procAlone s pp) pp = getWaitDiff s pp&quot; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 149 </font></span><font color="#cc0000">proof-</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 150 </font></span><font color="#cc0000">  have &quot;getWaitDiff (procAlone s pp) pp = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 151 </font></span><font color="#cc0000">        waitDiff(rscPendProcs_' </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 152 </font></span><font color="#cc0000">        (let proc_id_sta = procSta (procs_' s) pp in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 153 </font></span><font color="#cc0000">  case proc_id_sta of </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 154 </font></span><font color="#cc0000">      Some READY &rArr; readyDel_s_D s (fst pp) (snd pp) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 155 </font></span><font color="#cc0000">      Some WAITING &rArr; if isInWaitQ s pp then waitDel_D s pp</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 156 </font></span><font color="#cc0000">                      else s |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 157 </font></span><font color="#cc0000">      _ &rArr; s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 158 </font></span><font color="#cc0000">        )pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 159 </font></span><font color="#cc0000">    unfolding getWaitDiff_def procAlone_def by auto</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 160 </font></span><font color="#cc0000">  hence &quot;getWaitDiff (procAlone s pp) pp = </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 161 </font></span><font color="#cc0000">        waitDiff(rscPendProcs_' </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 162 </font></span><font color="#cc0000">        (let proc_id_sta = procSta (procs_' s) pp in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 163 </font></span><font color="#cc0000">  case proc_id_sta of </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 164 </font></span><font color="#cc0000">      Some READY &rArr; readyDel_s_D s (fst pp) (snd pp) |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 165 </font></span><font color="#cc0000">      Some WAITING &rArr; if isInWaitQ s pp then waitDel_D s pp</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 166 </font></span><font color="#cc0000">                      else s |</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 167 </font></span><font color="#cc0000">      _ &rArr; s)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 168 </font></span><font color="#cc0000">        )pp&quot;*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 169 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 170 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 171 </font></span><font color="#006699"><strong>lemma</strong></font> getWaitDiff_procReady<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 172 </font></span>  <font color="#ff00cc">&quot;getWaitDiff (procReady s pp) pp = getWaitDiff s pp&quot;</font> <font color="#006699"><strong>sorry</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 173 </font></span><font color="#cc0000">(*proof-</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 174 </font></span><font color="#cc0000">  have &quot;getWaitDiff (procReady s pp) pp =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 175 </font></span><font color="#cc0000">        waitDiff(rscPendProcs_' </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 176 </font></span><font color="#cc0000">        (let s_alone = procAlone s pp; s_alone_rdAdd = readyAdd s_alone pp;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 177 </font></span><font color="#cc0000">          s_alone_rdAdd_SetRd = setProcSta s_alone_rdAdd pp READY in s_alone_rdAdd_SetRd)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 178 </font></span><font color="#cc0000">        ) pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 179 </font></span><font color="#cc0000">    unfolding getWaitDiff_def procReady_def by auto</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 180 </font></span><font color="#cc0000">  hence &quot;getWaitDiff (procReady s pp) pp =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 181 </font></span><font color="#cc0000">        waitDiff(rscPendProcs_' </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 182 </font></span><font color="#cc0000">        (let s_alone = procAlone s pp; s_alone_rdAdd = readyAdd s_alone pp;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 183 </font></span><font color="#cc0000">          s_alone_rdAdd_SetRd = s_alone_rdAdd&#10631;procs_' := (procs_' s_alone_rdAdd) &#10631;procSta := (procSta (procs_' s_alone_rdAdd))(pp := Some READY)&#10632;&#10632;  in s_alone_rdAdd_SetRd)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 184 </font></span><font color="#cc0000">        ) pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 185 </font></span><font color="#cc0000">    unfolding  setProcSta_def by auto</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 186 </font></span><font color="#cc0000">  hence &quot;getWaitDiff (procReady s pp) pp =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 187 </font></span><font color="#cc0000">        </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 188 </font></span><font color="#cc0000">        (let s_alone = procAlone s pp; s_alone_rdAdd = readyAdd s_alone pp;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 189 </font></span><font color="#cc0000">          s_alone_rdAdd_SetRd = waitDiff(rscPendProcs_' (s_alone_rdAdd&#10631;procs_' := (procs_' s_alone_rdAdd) &#10631;procSta := (procSta (procs_' s_alone_rdAdd))(pp := Some READY)&#10632;&#10632;)) pp   in s_alone_rdAdd_SetRd)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 190 </font></span><font color="#cc0000">        &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 191 </font></span><font color="#cc0000">    by meson</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 192 </font></span><font color="#cc0000">    hence &quot;getWaitDiff (procReady s pp) pp =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 193 </font></span><font color="#cc0000">        </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 194 </font></span><font color="#cc0000">        (let s_alone = procAlone s pp; s_alone_rdAdd = readyAdd s_alone pp;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 195 </font></span><font color="#cc0000">          s_alone_rdAdd_SetRd = waitDiff(rscPendProcs_' s_alone_rdAdd) pp   in s_alone_rdAdd_SetRd)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 196 </font></span><font color="#cc0000">        &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 197 </font></span><font color="#cc0000">      by simp</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 198 </font></span><font color="#cc0000">    hence &quot;getWaitDiff (procReady s pp) pp =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 199 </font></span><font color="#cc0000">        </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 200 </font></span><font color="#cc0000">        (let s_alone = procAlone s pp; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 201 </font></span><font color="#cc0000">          s_alone_rdAdd_SetRd = waitDiff(rscPendProcs_' (readyAdd s_alone pp)) pp   in s_alone_rdAdd_SetRd)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 202 </font></span><font color="#cc0000">        &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 203 </font></span><font color="#cc0000">      by simp</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 204 </font></span><font color="#cc0000">    hence &quot;getWaitDiff (procReady s pp) pp =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 205 </font></span><font color="#cc0000">        </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 206 </font></span><font color="#cc0000">        (let s_alone = procAlone s pp; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 207 </font></span><font color="#cc0000">          s_alone_rdAdd_SetRd = waitDiff(rscPendProcs_' (let f_readyQue = readyQue(partitions_' s); part_id = fst pp; proc_id = snd pp;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 208 </font></span><font color="#cc0000">      prio = the(getPriority s pp); f_readyQue' = readyAddTail_D f_readyQue part_id prio proc_id in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 209 </font></span><font color="#cc0000">  s&#10631;partitions_' := (partitions_' s)&#10631;readyQue := f_readyQue'&#10632;&#10632;)) pp   in s_alone_rdAdd_SetRd)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 210 </font></span><font color="#cc0000">        &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 211 </font></span><font color="#cc0000">      by simp</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 212 </font></span><font color="#cc0000">  hence &quot;getWaitDiff (procReady s pp) pp</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 213 </font></span><font color="#cc0000">        = waitDiff(rscPendProcs_' s) pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 214 </font></span><font color="#cc0000">    by (simp add: getWaitDiff_def procReady_def)*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 215 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 216 </font></span><font color="#006699"><strong>lemma</strong></font> createBlackbd_Suc<font color="#000000"><strong>:</strong></font><font color="#ff00cc">&quot;getBbdAttrByID (createBlackbd s p b bbd_attr) (p,b) = Some bbd_attr&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 217 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getBbdAttrByID_def createBlackbd_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 218 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 219 </font></span><font color="#006699"><strong>lemma</strong></font> getEmptyId_set<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 220 </font></span>  <font color="#ff00cc">&quot;getEmptyId (setEmptyId s pb oc) pb = Some oc&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 221 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getEmptyId_def setEmptyId_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 222 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 223 </font></span><font color="#006699"><strong>lemma</strong></font> getEmptyId_clearBbdMsg<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 224 </font></span>  <font color="#ff00cc">&quot;getEmptyId (clearBbdMsg s pb) pb = getEmptyId s pb&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 225 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getEmptyId_def clearBbdMsg_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 226 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 227 </font></span><font color="#006699"><strong>lemma</strong></font> getEmptyId_owrtBbdMsg<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 228 </font></span>  <font color="#ff00cc">&quot;getEmptyId (owrtBbdMsg s pb msg) pb = getEmptyId s pb&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 229 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getEmptyId_def owrtBbdMsg_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 230 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 231 </font></span><font color="#006699"><strong>lemma</strong></font> getEmptyId_waitDel_D<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 232 </font></span>  <font color="#ff00cc">&quot;getEmptyId (waitDel_D s pp) pb = getEmptyId s pb&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 233 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getEmptyId_def waitDel_D_def
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 234 </font></span>  <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis STATE.simps<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font> STATE.surjective StaProc.simps<font color="#000000"><strong>(</strong></font>6<font color="#000000"><strong>)</strong></font> StaProc.simps<font color="#000000"><strong>(</strong></font>7<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 235 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 236 </font></span><font color="#006699"><strong>lemma</strong></font> getEmptyId_rstWaitDiff<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 237 </font></span>  <font color="#ff00cc">&quot;getEmptyId (rstWaitDiff s pp) pb = getEmptyId s pb&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 238 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getEmptyId_def rstWaitDiff_def
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 239 </font></span>  <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 240 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 241 </font></span><font color="#006699"><strong>lemma</strong></font> getEmptyId_stopCterRsc<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 242 </font></span>  <font color="#ff00cc">&quot;getEmptyId (stopCterRsc s pp) pb = getEmptyId s pb&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 243 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getEmptyId_def stopCterRsc_def
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 244 </font></span>  <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 245 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 246 </font></span><font color="#006699"><strong>lemma</strong></font> getEmptyId_StopTCounter<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 247 </font></span>  <font color="#ff00cc">&quot;getEmptyId (StopTCounter s p) pb = getEmptyId s pb&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 248 </font></span>  <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>full_types<font color="#000000"><strong>,</strong></font> hide_lams<font color="#000000"><strong>)</strong></font> StopTCounter_def getEmptyId_rstWaitDiff getEmptyId_stopCterRsc getEmptyId_waitDel_D<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 249 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 250 </font></span><font color="#006699"><strong>lemma</strong></font> getEmptyId_stopProcLTCtr1<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 251 </font></span>  <font color="#ff00cc">&quot;getEmptyId (stopProcLTCtr s pl) pb = getEmptyId s pb&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 252 </font></span>  <font color="#006699"><strong>apply</strong></font><font color="#000000"><strong>(</strong></font>induction pl arbitrary<font color="#000000"><strong>:</strong></font> s<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 253 </font></span>  <font color="#006699"><strong>apply</strong></font> auto<font color="#000000"><strong>[</strong></font>1<font color="#000000"><strong>]</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 254 </font></span>  <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis getEmptyId_StopTCounter stopProcLTCtr.simps<font color="#000000"><strong>(</strong></font>2<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 255 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 256 </font></span><font color="#006699"><strong>lemma</strong></font> getEmptyId_clearPendProcs<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 257 </font></span>  <font color="#ff00cc">&quot;getEmptyId (clearPendProcs s rsc) pb = getEmptyId s pb&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 258 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getEmptyId_def stopCterRsc_def
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 259 </font></span>  <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis STATE.simps<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font> STATE.surjective StaProc.simps<font color="#000000"><strong>(</strong></font>7<font color="#000000"><strong>)</strong></font> clearPendProcs_def<font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 260 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 261 </font></span><font color="#006699"><strong>lemma</strong></font> getEmptyId_procsReady<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 262 </font></span>  <font color="#ff00cc">&quot;getEmptyId (procsReady s pt ppl) pb = getEmptyId s pb&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 263 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getEmptyId_def procsReady_def
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 264 </font></span>  <font color="#006699"><strong>sorry</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 265 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 266 </font></span><font color="#006699"><strong>lemma</strong></font> getEmptyId_schedule_Abs<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 267 </font></span>  <font color="#ff00cc">&quot;getEmptyId (schedule_Abs s core_id) pb = getEmptyId s pb&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 268 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getEmptyId_def schedule_Abs_def
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 269 </font></span>  <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>mono_tags<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> STATE.simps<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font> STATE.surjective StaPart_Sched.update_convs<font color="#000000"><strong>(</strong></font>2<font color="#000000"><strong>)</strong></font> StaProc_sched.simps<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 270 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 271 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 272 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 273 </font></span><font color="#006699"><strong>lemma</strong></font> readBbdMsg_set<font color="#000000"><strong>:</strong></font><font color="#ff00cc">&quot;readBbdMsg (owrtBbdMsg s pb msg) pb = Some msg &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 274 </font></span>  <font color="#006699"><strong>unfolding</strong></font> readBbdMsg_def owrtBbdMsg_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 275 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 276 </font></span><font color="#006699"><strong>lemma</strong></font> readBbdMsg_clearNone<font color="#000000"><strong>:</strong></font><font color="#ff00cc">&quot;readBbdMsg (clearBbdMsg s pb) pb = None &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 277 </font></span>  <font color="#006699"><strong>unfolding</strong></font> readBbdMsg_def clearBbdMsg_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 278 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 279 </font></span><font color="#006699"><strong>lemma</strong></font> readBbdMsg_waitDel_D<font color="#000000"><strong>:</strong></font><font color="#ff00cc">&quot;readBbdMsg (waitDel_D s pp) pb = readBbdMsg s pb &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 280 </font></span>  <font color="#006699"><strong>unfolding</strong></font> readBbdMsg_def waitDel_D_def
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 281 </font></span>  <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis STATE.simps<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font> STATE.surjective StaProc.simps<font color="#000000"><strong>(</strong></font>6<font color="#000000"><strong>)</strong></font> StaProc.simps<font color="#000000"><strong>(</strong></font>7<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 282 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 283 </font></span><font color="#006699"><strong>lemma</strong></font> readBbdMsg_rstWaitDiff<font color="#000000"><strong>:</strong></font><font color="#ff00cc">&quot;readBbdMsg (rstWaitDiff s pp) pb = readBbdMsg s pb &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 284 </font></span>  <font color="#006699"><strong>unfolding</strong></font> readBbdMsg_def rstWaitDiff_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 285 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 286 </font></span><font color="#006699"><strong>lemma</strong></font> readBbdMsg_stopCterRsc<font color="#000000"><strong>:</strong></font><font color="#ff00cc">&quot;readBbdMsg (stopCterRsc s pp) pb = readBbdMsg s pb &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 287 </font></span>  <font color="#006699"><strong>unfolding</strong></font> readBbdMsg_def stopCterRsc_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 288 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 289 </font></span><font color="#006699"><strong>lemma</strong></font> readBbdMsg_stopProcLTCtr<font color="#000000"><strong>:</strong></font><font color="#ff00cc">&quot;readBbdMsg (stopProcLTCtr s pl) pb = readBbdMsg s pb &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 290 </font></span>  <font color="#006699"><strong>apply</strong></font><font color="#000000"><strong>(</strong></font>induction pl arbitrary<font color="#000000"><strong>:</strong></font> s<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 291 </font></span>  <font color="#006699"><strong>apply</strong></font> auto<font color="#000000"><strong>[</strong></font>1<font color="#000000"><strong>]</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 292 </font></span>  <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>full_types<font color="#000000"><strong>,</strong></font> hide_lams<font color="#000000"><strong>)</strong></font> StopTCounter_def readBbdMsg_rstWaitDiff readBbdMsg_stopCterRsc readBbdMsg_waitDel_D stopProcLTCtr.simps<font color="#000000"><strong>(</strong></font>2<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 293 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 294 </font></span><font color="#006699"><strong>lemma</strong></font> readBbdMsg_clearPendProcs<font color="#000000"><strong>:</strong></font><font color="#ff00cc">&quot;readBbdMsg (clearPendProcs s rsc) pb = readBbdMsg s pb &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 295 </font></span>  <font color="#006699"><strong>unfolding</strong></font> readBbdMsg_def clearPendProcs_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 296 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 297 </font></span><font color="#006699"><strong>lemma</strong></font> readBbdMsg_procsReady<font color="#000000"><strong>:</strong></font><font color="#ff00cc">&quot;readBbdMsg (procsReady s p pl) pb = readBbdMsg s pb &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 298 </font></span>  <font color="#006699"><strong>sorry</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 299 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 300 </font></span><font color="#006699"><strong>lemma</strong></font> readBbdMsg_schedule_Abs<font color="#000000"><strong>:</strong></font><font color="#ff00cc">&quot;readBbdMsg (schedule_Abs s rsc) pb = readBbdMsg s pb &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 301 </font></span>  <font color="#006699"><strong>unfolding</strong></font> readBbdMsg_def schedule_Abs_def
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 302 </font></span>  <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>mono_tags<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> STATE.simps<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font> STATE.surjective StaPart_Sched.update_convs<font color="#000000"><strong>(</strong></font>2<font color="#000000"><strong>)</strong></font> StaProc_sched.simps<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 303 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 304 </font></span><font color="#006699"><strong>lemma</strong></font> waitDiff_setCntxt<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 305 </font></span>  <font color="#ff00cc">&quot;getWaitDiff (setCntxt s pp cn) pp = getWaitDiff s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 306 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getWaitDiff_def setCntxt_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 307 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 308 </font></span><font color="#006699"><strong>lemma</strong></font> waitDiff_setCterRsc<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 309 </font></span>  <font color="#ff00cc">&quot;getWaitDiff (setCterRsc s pp t) pp = getWaitDiff s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 310 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getWaitDiff_def setCterRsc_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 311 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 312 </font></span><font color="#006699"><strong>lemma</strong></font> setAddWaitDiff_NotNone<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 313 </font></span>  <font color="#ff00cc">&quot;getWaitDiff (setAddWaitDiff s pp t) pp &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 314 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getWaitDiff_def setAddWaitDiff_def
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 315 </font></span>  <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> getWaitDiff_def getWaitDiff_setWaitDiff_NotNone waitAdd_D waitAdd_D_def<font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 316 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 317 </font></span><font color="#006699"><strong>lemma</strong></font> setCterRsc_NotNone<font color="#000000"><strong>:</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 318 </font></span>  <font color="#ff00cc">&quot;getCterRsc (setCterRsc s pp t) pp = Some t&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 319 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getCterRsc_def setCterRsc_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 320 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 321 </font></span><font color="#006699"><strong>lemma</strong></font> getCterRsc_setCntxt<font color="#000000"><strong>:</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 322 </font></span>  <font color="#ff00cc">&quot;getCterRsc (setCntxt s pp cn) pp = getCterRsc s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 323 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getCterRsc_def setCntxt_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 324 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 325 </font></span><font color="#006699"><strong>lemma</strong></font> getCterRsc_procReady<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getCterRsc (procReady s pp ) pp = getCterRsc s pp&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 326 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getCterRsc_def procReady_def <font color="#006699"><strong>sorry</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 327 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 328 </font></span><font color="#006699"><strong>definition</strong></font> getSemaCurVal <font color="#000000"><strong>::</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 329 </font></span>  <font color="#ff00cc">&quot;'a STATE_scheme  &rArr; PART_ID_TYPE &times; SEMA_ID_TYPE &rArr; SEMPAPH_VALUE_TYPE option&quot;</font> <font color="#009966"><strong>where</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 330 </font></span>  <font color="#ff00cc">&quot;getSemaCurVal s ps =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 331 </font></span><font color="#ff00cc">         curValue(sema_' s)ps&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 332 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 333 </font></span><font color="#006699"><strong>lemma</strong></font> addSemaCurVal<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 334 </font></span>  <font color="#ff00cc">&quot;getSemaCurVal (addSemaCurVal s ps) ps = Some (the(getSemaCurVal s ps)+1)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 335 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getSemaCurVal_def  addSemaCurVal_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 336 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 337 </font></span><font color="#006699"><strong>definition</strong></font> getEventSta <font color="#000000"><strong>::</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 338 </font></span>  <font color="#ff00cc">&quot;'a STATE_scheme &rArr; PART_ID_TYPE &times; EVENT_ID_TYPE &rArr; EVENT_STA_TYPE option&quot;</font> <font color="#009966"><strong>where</strong></font>  
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 339 </font></span>  <font color="#ff00cc">&quot;getEventSta s pe =</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 340 </font></span><font color="#ff00cc">    (eventSta(event_' s))pe&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 341 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 342 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 343 </font></span><font color="#006699"><strong>lemma</strong></font> setEventSta_NotNone<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 344 </font></span>  <font color="#ff00cc">&quot;getEventSta (setEventSta s pe sta) pe = Some sta&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 345 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getEventSta_def setEventSta_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 346 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 347 </font></span><font color="#006699"><strong>lemma</strong></font> EventSta_waitDel_D<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 348 </font></span>  <font color="#ff00cc">&quot;getEventSta (waitDel_D s pp) pe = getEventSta s pe&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 349 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getEventSta_def waitDel_D_def
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 350 </font></span>  <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis STATE.simps<font color="#000000"><strong>(</strong></font>5<font color="#000000"><strong>)</strong></font> STATE.surjective StaProc.simps<font color="#000000"><strong>(</strong></font>6<font color="#000000"><strong>)</strong></font> StaProc.simps<font color="#000000"><strong>(</strong></font>7<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 351 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 352 </font></span><font color="#006699"><strong>lemma</strong></font> EventSta_rstWaitDiff<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 353 </font></span>  <font color="#ff00cc">&quot;getEventSta (rstWaitDiff s pp) pe = getEventSta s pe&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 354 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getEventSta_def rstWaitDiff_def
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 355 </font></span>  <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 356 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 357 </font></span><font color="#006699"><strong>lemma</strong></font> EventSta_stopCterRsc<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 358 </font></span>  <font color="#ff00cc">&quot;getEventSta (stopCterRsc s pp) pe = getEventSta s pe&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 359 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getEventSta_def stopCterRsc_def
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 360 </font></span>  <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 361 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 362 </font></span><font color="#006699"><strong>lemma</strong></font> getEventSta_stopProcLTCtr1<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 363 </font></span>  <font color="#ff00cc">&quot;getEventSta (stopProcLTCtr s pl) pe = getEventSta s pe&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 364 </font></span>  <font color="#006699"><strong>apply</strong></font><font color="#000000"><strong>(</strong></font>induction pl arbitrary<font color="#000000"><strong>:</strong></font> s<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 365 </font></span>  <font color="#006699"><strong>apply</strong></font> auto<font color="#000000"><strong>[</strong></font>1<font color="#000000"><strong>]</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 366 </font></span>  <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> EventSta_rstWaitDiff EventSta_stopCterRsc EventSta_waitDel_D StopTCounter_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 367 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 368 </font></span><font color="#006699"><strong>lemma</strong></font> EventSta_clearPendProcs<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 369 </font></span>  <font color="#ff00cc">&quot;getEventSta (clearPendProcs s pp) pe = getEventSta s pe&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 370 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getEventSta_def clearPendProcs_def
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 371 </font></span>  <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 372 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 373 </font></span><font color="#006699"><strong>lemma</strong></font> EventSta_procsReady<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 374 </font></span>  <font color="#ff00cc">&quot;getEventSta (procsReady s p pl) pe = getEventSta s pe&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 375 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getEventSta_def procsReady_def
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 376 </font></span>  <font color="#006699"><strong>sorry</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 377 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 378 </font></span><font color="#006699"><strong>lemma</strong></font> EventSta_schedule<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 379 </font></span>  <font color="#ff00cc">&quot;getEventSta (schedule_Abs s core) pe = getEventSta s pe&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 380 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getEventSta_def schedule_Abs_def
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 381 </font></span>  <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>mono_tags<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> STATE.simps<font color="#000000"><strong>(</strong></font>5<font color="#000000"><strong>)</strong></font> STATE.surjective StaPart_Sched.update_convs<font color="#000000"><strong>(</strong></font>2<font color="#000000"><strong>)</strong></font> StaProc_sched.simps<font color="#000000"><strong>(</strong></font>3<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 382 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 383 </font></span><font color="#006699"><strong>lemma</strong></font> CREATE_BUFFER<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 384 </font></span>  <font color="#ff00cc">&quot;let s_b_r = CREATE_BUFFER s core_id buffer_attr; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 385 </font></span><font color="#ff00cc">      cur_part_id = curPartID s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 386 </font></span><font color="#ff00cc">      buffer_name = BUFFER_NAME buffer_attr;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 387 </font></span><font color="#ff00cc">      mag_sz = BUFFER_ATTR_TYPE.MAX_MSG_SZ buffer_attr;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 388 </font></span><font color="#ff00cc">      msg_nb = BUFFER_ATTR_TYPE.MAX_NB_MSG buffer_attr;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 389 </font></span><font color="#ff00cc">      que_discip = BUFFER_ATTR_TYPE.QUE_DISCIPLINE buffer_attr;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 390 </font></span><font color="#ff00cc">      created_bufs = size_set (getBuffsOfPart s (the cur_part_id)) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 391 </font></span><font color="#ff00cc">   if created_bufs &ge; MAX_NUM_OF_BUFS   then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 392 </font></span><font color="#ff00cc">       s_b_r = (s , None , INVALID_CONFIG)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 393 </font></span><font color="#ff00cc">   else if getBufIDByName s (the cur_part_id) buffer_name &ne; None then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 394 </font></span><font color="#ff00cc">       s_b_r = (s , None , NO_ACTION)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 395 </font></span><font color="#ff00cc">   else if mag_sz = 0 &or; mag_sz &lt; 0 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 396 </font></span><font color="#ff00cc">       s_b_r = (s , None , INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 397 </font></span><font color="#ff00cc">   else if msg_nb &lt; 0 &or; msg_nb &gt; MAX_NUM_OF_MSGS then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 398 </font></span><font color="#ff00cc">       s_b_r = (s , None , INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 399 </font></span><font color="#ff00cc">   else if getPartMode s (the cur_part_id) = Some NORMAL then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 400 </font></span><font color="#ff00cc">       s_b_r = (s , None , INVALID_MODE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 401 </font></span><font color="#ff00cc">   else </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 402 </font></span><font color="#ff00cc">        let buffer_id = newBufferID s (the cur_part_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 403 </font></span><font color="#ff00cc">            buf_attr' = getBufAttrByID (fst s_b_r) (the cur_part_id,buffer_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 404 </font></span><font color="#ff00cc">            s_new = createBuffer s (the cur_part_id) buffer_id buffer_attr in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 405 </font></span><font color="#ff00cc">          s_b_r =(s_new ,Some buffer_id, NO_ERROR)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 406 </font></span><font color="#ff00cc">         &and; buf_attr' = Some buffer_attr &and; (fst(snd (s_b_r))) = Some buffer_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 407 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 408 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_b_r <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;CREATE_BUFFER s core_id buffer_attr&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 409 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curPartID s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 410 </font></span>  <font color="#006699"><strong>let</strong></font> ?buffer_name <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;BUFFER_NAME buffer_attr&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 411 </font></span>  <font color="#006699"><strong>let</strong></font> ?mag_sz <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;BUFFER_ATTR_TYPE.MAX_MSG_SZ buffer_attr&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 412 </font></span>  <font color="#006699"><strong>let</strong></font> ?msg_nb <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;BUFFER_ATTR_TYPE.MAX_NB_MSG buffer_attr&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 413 </font></span>  <font color="#006699"><strong>let</strong></font> ?que_discip <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;BUFFER_ATTR_TYPE.QUE_DISCIPLINE buffer_attr&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 414 </font></span>  <font color="#006699"><strong>let</strong></font> ?created_bufs <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;size_set (getBuffsOfPart s (the ?cur_part_id))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 415 </font></span>  <font color="#006699"><strong>let</strong></font> ?buffer_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;newBufferID s (the ?cur_part_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 416 </font></span>  <font color="#006699"><strong>let</strong></font> ?buf_attr' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getBufAttrByID (fst ?s_b_r) (the ?cur_part_id,?buffer_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 417 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_new <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;createBuffer s (the ?cur_part_id) ?buffer_id buffer_attr&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 418 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 419 </font></span>  <font color="#006699"><strong>have</strong></font> a10<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?created_bufs &ge; MAX_NUM_OF_BUFS</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 420 </font></span><font color="#ff00cc">            &#10230; ?s_b_r = (s , None , INVALID_CONFIG)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 421 </font></span>    <font color="#006699"><strong>unfolding</strong></font> CREATE_BUFFER_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 422 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a11<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&not;(?created_bufs &ge; MAX_NUM_OF_BUFS)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 423 </font></span><font color="#ff00cc">                      &and; (getBufIDByName s (the ?cur_part_id) ?buffer_name &ne; None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 424 </font></span><font color="#ff00cc">                    &#10230;  ?s_b_r = (s , None , NO_ACTION)&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 425 </font></span>    <font color="#006699"><strong>unfolding</strong></font> CREATE_BUFFER_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 426 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a12<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&not;(?created_bufs &ge; MAX_NUM_OF_BUFS)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 427 </font></span><font color="#ff00cc">                      &and; &not;(getBufIDByName s (the ?cur_part_id) ?buffer_name &ne; None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 428 </font></span><font color="#ff00cc">                     &and; (?mag_sz = 0 &or; ?mag_sz &lt; 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 429 </font></span><font color="#ff00cc">                  &#10230; ?s_b_r = (s , None , INVALID_PARAM)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 430 </font></span>    <font color="#006699"><strong>unfolding</strong></font> CREATE_BUFFER_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 431 </font></span>   <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a13<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&not;(?created_bufs &ge; MAX_NUM_OF_BUFS)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 432 </font></span><font color="#ff00cc">                      &and; &not;(getBufIDByName s (the ?cur_part_id) ?buffer_name &ne; None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 433 </font></span><font color="#ff00cc">                     &and; &not;(?mag_sz = 0 &or; ?mag_sz &lt; 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 434 </font></span><font color="#ff00cc">                    &and; (?msg_nb &lt; 0 &or; ?msg_nb &gt; MAX_NUM_OF_MSGS)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 435 </font></span><font color="#ff00cc">               &#10230; ?s_b_r = (s , None , INVALID_PARAM)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 436 </font></span>    <font color="#006699"><strong>unfolding</strong></font> CREATE_BUFFER_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 437 </font></span>   <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a14<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&not;(?created_bufs &ge; MAX_NUM_OF_BUFS)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 438 </font></span><font color="#ff00cc">                      &and; &not;(getBufIDByName s (the ?cur_part_id) ?buffer_name &ne; None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 439 </font></span><font color="#ff00cc">                     &and; &not;(?mag_sz = 0 &or; ?mag_sz &lt; 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 440 </font></span><font color="#ff00cc">                    &and; &not;(?msg_nb &lt; 0 &or; ?msg_nb &gt; MAX_NUM_OF_MSGS)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 441 </font></span><font color="#ff00cc">                    &and;  (getPartMode s (the ?cur_part_id) = Some NORMAL)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 442 </font></span><font color="#ff00cc">              &#10230;  ?s_b_r = (s , None , INVALID_MODE)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 443 </font></span>     <font color="#006699"><strong>unfolding</strong></font> CREATE_BUFFER_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 444 </font></span>    <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> a15<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&not;(?created_bufs &ge; MAX_NUM_OF_BUFS)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 445 </font></span><font color="#ff00cc">                      &and; &not;(getBufIDByName s (the ?cur_part_id) ?buffer_name &ne; None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 446 </font></span><font color="#ff00cc">                     &and; &not;(?mag_sz = 0 &or; ?mag_sz &lt; 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 447 </font></span><font color="#ff00cc">                    &and; &not;(?msg_nb &lt; 0 &or; ?msg_nb &gt; MAX_NUM_OF_MSGS)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 448 </font></span><font color="#ff00cc">                  &and; &not;(getPartMode s (the ?cur_part_id) = Some NORMAL)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 449 </font></span><font color="#ff00cc">              &#10230; ?s_b_r =(?s_new ,Some ?buffer_id, NO_ERROR)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 450 </font></span><font color="#ff00cc">         &and; ?buf_attr' = Some buffer_attr &and; (fst(snd (?s_b_r))) = Some ?buffer_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 451 </font></span>    <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 452 </font></span>      <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>assume</strong></font> <font color="#ff00cc">&quot;&not;(?created_bufs &ge; MAX_NUM_OF_BUFS)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 453 </font></span><font color="#ff00cc">                      &and; &not;(getBufIDByName s (the ?cur_part_id) ?buffer_name &ne; None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 454 </font></span><font color="#ff00cc">                     &and; &not;(?mag_sz = 0 &or; ?mag_sz &lt; 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 455 </font></span><font color="#ff00cc">                    &and; &not;(?msg_nb &lt; 0 &or; ?msg_nb &gt; MAX_NUM_OF_MSGS)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 456 </font></span><font color="#ff00cc">                  &and; &not;(getPartMode s (the ?cur_part_id) = Some NORMAL)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 457 </font></span>        <font color="#006699"><strong>hence</strong></font> a15_1<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?s_b_r =(?s_new ,Some ?buffer_id, NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 458 </font></span>          <font color="#006699"><strong>unfolding</strong></font> CREATE_BUFFER_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 459 </font></span>        <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?buf_attr' = Some buffer_attr&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 460 </font></span>          <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis a15_1 fstI setBufAttr<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 461 </font></span>        <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;(fst(snd (?s_b_r))) = Some ?buffer_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 462 </font></span>          <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt a15_1 fstI sndI<font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 463 </font></span>        <font color="#006699"><strong>ultimately</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?s_b_r =(?s_new ,Some ?buffer_id, NO_ERROR)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 464 </font></span><font color="#ff00cc">         &and; ?buf_attr' = Some buffer_attr &and; (fst(snd (?s_b_r))) = Some ?buffer_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 465 </font></span>          <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis a15_1<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 466 </font></span>      <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 467 </font></span>      <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 468 </font></span>    <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 469 </font></span>    <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 470 </font></span>      <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 471 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 472 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 473 </font></span><font color="#006699"><strong>lemma</strong></font> SEND_BUFFER<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 474 </font></span>  <font color="#ff00cc">&quot;let s_r = SEND_BUFFER s core_id buf_id msg tout;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 475 </font></span><font color="#ff00cc">      cur_part_id = curPartID s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 476 </font></span><font color="#ff00cc">      cur_proc_id = curProcID_Core s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 477 </font></span><font color="#ff00cc">      lastMsg' = getBufLstMsg (fst s_r) (the cur_part_id,buf_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 478 </font></span><font color="#ff00cc">      waitDiff' = getWaitDiff (fst s_r) (the cur_part_id,the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 479 </font></span><font color="#ff00cc">      cterRsc' = getCterRsc (fst s_r) (the cur_part_id,the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 480 </font></span><font color="#ff00cc">      cntxt' = getCntxt (fst s_r) (the cur_part_id,the cur_proc_id)  in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 481 </font></span><font color="#ff00cc">   if getBufAttrByID s (the cur_part_id,buf_id) = None then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 482 </font></span><font color="#ff00cc">      s_r = (s , Some INVALID_PARAM)              </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 483 </font></span><font color="#ff00cc">   else if msg &gt; getBufMaxMsgSz s (the cur_part_id,buf_id) then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 484 </font></span><font color="#ff00cc">      s_r = (s , Some INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 485 </font></span><font color="#ff00cc">   else if msg = 0 &or; msg &lt; 0 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 486 </font></span><font color="#ff00cc">      s_r = (s , Some INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 487 </font></span><font color="#ff00cc">   else if (nat tout) &gt; INVALID_TIMEOUT_VALUE then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 488 </font></span><font color="#ff00cc">      s_r = (s , Some INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 489 </font></span><font color="#ff00cc">   else if &not; bufFull s (the cur_part_id,buf_id)  then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 490 </font></span><font color="#ff00cc">           if rscProcQueEmpty s (buf (the cur_part_id,buf_id)) then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 491 </font></span><font color="#ff00cc">              s_r = (insertBufMsg s (the cur_part_id,buf_id) msg , Some NO_ERROR) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 492 </font></span><font color="#ff00cc">           else </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 493 </font></span><font color="#ff00cc">               let sRemov_pt_recP = rscQPop s (buf (the cur_part_id,buf_id));</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 494 </font></span><font color="#ff00cc">                  s_cxt = setCntxt (fst sRemov_pt_recP) (the(snd sRemov_pt_recP)) (recvBuf((the cur_part_id,buf_id), Some msg));</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 495 </font></span><font color="#ff00cc">                  s_stopTimeCt = StopTCounter s_cxt (the(snd sRemov_pt_recP));</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 496 </font></span><font color="#ff00cc">                  s_setToReady =  if &not;isSuspended s_stopTimeCt (the(snd sRemov_pt_recP)) then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 497 </font></span><font color="#ff00cc">                                    procReady s_stopTimeCt (the(snd sRemov_pt_recP))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 498 </font></span><font color="#ff00cc">                                else  s_stopTimeCt;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 499 </font></span><font color="#ff00cc">                  s_sxt' = getCntxt (fst s_r) (the(snd sRemov_pt_recP));</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 500 </font></span><font color="#ff00cc">                  s_waitDiff' = getWaitDiff (fst s_r) (the(snd sRemov_pt_recP)) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 501 </font></span><font color="#ff00cc">                s_r =  (schedule_Abs s_setToReady core_id , Some NO_ERROR)   </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 502 </font></span><font color="#ff00cc">                   &and; s_waitDiff' = None                </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 503 </font></span><font color="#ff00cc">   else if tout = 0 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 504 </font></span><font color="#ff00cc">           s_r = (s , Some NOT_AVAILABLE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 505 </font></span><font color="#ff00cc">   else if getProcUserPLMtx s (the cur_part_id,the cur_proc_id) &ne; None  &or; (the cur_proc_id) = HM_PROC_ID then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 506 </font></span><font color="#ff00cc">           s_r = (s , Some INVALID_MODE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 507 </font></span><font color="#ff00cc">   else if tout = -1 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 508 </font></span><font color="#ff00cc">            let s_setWaiting = setProcSta s (the cur_part_id,the cur_proc_id) WAITING;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 509 </font></span><font color="#ff00cc">               s_insertBufQue = rscQPush s_setWaiting (buf (the cur_part_id,buf_id)) (the cur_part_id,the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 510 </font></span><font color="#ff00cc">               s_setwf = setWaitDiff s_insertBufQue (the cur_part_id,the cur_proc_id) tout in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 511 </font></span><font color="#ff00cc">            s_r = (schedule_Abs s_setwf core_id , Some NO_ERROR) &and; waitDiff' &ne; None &and; waitDiff' = Some tout</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 512 </font></span><font color="#ff00cc">   else  let s_setWaiting = setProcSta s (the cur_part_id,the cur_proc_id) WAITING;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 513 </font></span><font color="#ff00cc">              s_insertBufQue = rscQPush s_setWaiting (buf (the cur_part_id,buf_id)) (the cur_part_id,the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 514 </font></span><font color="#ff00cc">              s_setWaitDiff = setWaitDiff s_insertBufQue (the cur_part_id,the cur_proc_id) tout;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 515 </font></span><font color="#ff00cc">              s_waitAddTimeQ = waitAdd_D s_setWaitDiff  (the cur_part_id,the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 516 </font></span><font color="#ff00cc">              s_setTCtrRsc = setCterRsc s_waitAddTimeQ (the cur_part_id,the cur_proc_id) (Int.int(timer_' s_waitAddTimeQ) +  tout);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 517 </font></span><font color="#ff00cc">              s_setCntxt = setCntxt s_setTCtrRsc (the cur_part_id,the cur_proc_id) (sendBuf ((the cur_part_id,buf_id),msg)) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 518 </font></span><font color="#ff00cc">          s_r = (schedule_Abs s_setCntxt core_id , None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 519 </font></span><font color="#ff00cc">          &and; waitDiff' &ne; None  &and; cterRsc' &ne; None &and; cterRsc' = Some (Int.int(timer_' s_waitAddTimeQ) +  tout) &and; cntxt' &ne; None &and;  cntxt' = Some (sendBuf ((the cur_part_id,buf_id),msg))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 520 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 521 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 522 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_r <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;SEND_BUFFER s core_id buf_id msg tout&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 523 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curPartID s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 524 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_proc_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curProcID_Core s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 525 </font></span>  <font color="#006699"><strong>let</strong></font> ?lastMsg' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getBufLstMsg (fst ?s_r) (the ?cur_part_id,buf_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 526 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 527 </font></span>  <font color="#006699"><strong>let</strong></font> ?sRemov_pt_recP <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;rscQPop s (buf (the ?cur_part_id,buf_id))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 528 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_cxt <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setCntxt (fst ?sRemov_pt_recP) (the(snd ?sRemov_pt_recP)) (recvBuf((the ?cur_part_id,buf_id), Some msg))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 529 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_stopTimeCt <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;StopTCounter ?s_cxt (the(snd ?sRemov_pt_recP))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 530 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setToReady <font color="#000000"><strong>=</strong></font>  <font color="#ff00cc">&quot;if &not;isSuspended ?s_stopTimeCt (the(snd ?sRemov_pt_recP)) then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 531 </font></span><font color="#ff00cc">                            procReady ?s_stopTimeCt (the(snd ?sRemov_pt_recP))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 532 </font></span><font color="#ff00cc">                       else  ?s_stopTimeCt&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 533 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_sxt' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getCntxt (fst ?s_r) (the(snd ?sRemov_pt_recP))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 534 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_waitDiff' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getWaitDiff (fst ?s_r) (the(snd ?sRemov_pt_recP))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 535 </font></span>  <font color="#006699"><strong>let</strong></font> ?waitDiff' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getWaitDiff (fst ?s_r) (the ?cur_part_id,the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 536 </font></span>  <font color="#006699"><strong>let</strong></font> ?cterRsc' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getCterRsc (fst ?s_r) (the ?cur_part_id,the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 537 </font></span>  <font color="#006699"><strong>let</strong></font> ?cntxt' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getCntxt (fst ?s_r) (the ?cur_part_id,the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 538 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 539 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setWaiting <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setProcSta s (the ?cur_part_id,the ?cur_proc_id) WAITING&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 540 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_insertBufQue <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;rscQPush ?s_setWaiting (buf (the ?cur_part_id,buf_id)) (the ?cur_part_id,the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 541 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setwf <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setWaitDiff ?s_insertBufQue (the ?cur_part_id,the ?cur_proc_id) tout&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 542 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 543 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setWaiting <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setProcSta s (the ?cur_part_id,the ?cur_proc_id) WAITING&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 544 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_insertBufQue <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;rscQPush ?s_setWaiting (buf (the ?cur_part_id,buf_id)) (the ?cur_part_id,the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 545 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setWaitDiff <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setWaitDiff ?s_insertBufQue (the ?cur_part_id,the ?cur_proc_id) tout&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 546 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_waitAddTimeQ <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;waitAdd_D ?s_setWaitDiff  (the ?cur_part_id,the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 547 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setTCtrRsc <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setCterRsc ?s_waitAddTimeQ (the ?cur_part_id,the ?cur_proc_id) (Int.int(timer_' ?s_waitAddTimeQ) +  tout)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 548 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setCntxt <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setCntxt ?s_setTCtrRsc (the ?cur_part_id,the ?cur_proc_id) (sendBuf ((the ?cur_part_id,buf_id),msg))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 549 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getBufAttrByID s (the ?cur_part_id,buf_id) = None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 550 </font></span><font color="#ff00cc">      &#10230; ?s_r = (s , Some INVALID_PARAM)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 551 </font></span>    <font color="#006699"><strong>unfolding</strong></font> SEND_BUFFER_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 552 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getBufAttrByID s (the ?cur_part_id,buf_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 553 </font></span><font color="#ff00cc">                &and; (msg &gt; getBufMaxMsgSz s (the ?cur_part_id,buf_id))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 554 </font></span><font color="#ff00cc">      &#10230; ?s_r = (s , Some INVALID_PARAM)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 555 </font></span>    <font color="#006699"><strong>unfolding</strong></font> SEND_BUFFER_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 556 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getBufAttrByID s (the ?cur_part_id,buf_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 557 </font></span><font color="#ff00cc">                &and; &not;(msg &gt; getBufMaxMsgSz s (the ?cur_part_id,buf_id))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 558 </font></span><font color="#ff00cc">                &and; (msg = 0 &or; msg &lt; 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 559 </font></span><font color="#ff00cc">      &#10230; ?s_r = (s , Some INVALID_PARAM)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 560 </font></span>    <font color="#006699"><strong>unfolding</strong></font> SEND_BUFFER_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 561 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getBufAttrByID s (the ?cur_part_id,buf_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 562 </font></span><font color="#ff00cc">                &and; &not;(msg &gt; getBufMaxMsgSz s (the ?cur_part_id,buf_id))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 563 </font></span><font color="#ff00cc">                &and; &not;(msg = 0 &or; msg &lt; 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 564 </font></span><font color="#ff00cc">                &and; ((nat tout) &gt; INVALID_TIMEOUT_VALUE)     </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 565 </font></span><font color="#ff00cc">      &#10230; ?s_r = (s , Some INVALID_PARAM)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 566 </font></span>    <font color="#006699"><strong>unfolding</strong></font> SEND_BUFFER_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 567 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getBufAttrByID s (the ?cur_part_id,buf_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 568 </font></span><font color="#ff00cc">                &and; &not;(msg &gt; getBufMaxMsgSz s (the ?cur_part_id,buf_id))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 569 </font></span><font color="#ff00cc">                &and; &not;(msg = 0 &or; msg &lt; 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 570 </font></span><font color="#ff00cc">                &and; &not;((nat tout) &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 571 </font></span><font color="#ff00cc">                &and; &not; bufFull s (the ?cur_part_id,buf_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 572 </font></span><font color="#ff00cc">                   &and; rscProcQueEmpty s (buf (the ?cur_part_id,buf_id))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 573 </font></span><font color="#ff00cc">      &#10230; ?s_r =  (insertBufMsg s (the ?cur_part_id,buf_id) msg , Some NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 574 </font></span>    <font color="#006699"><strong>unfolding</strong></font> SEND_BUFFER_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 575 </font></span>  
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 576 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getBufAttrByID s (the ?cur_part_id,buf_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 577 </font></span><font color="#ff00cc">                &and; &not;(msg &gt; getBufMaxMsgSz s (the ?cur_part_id,buf_id))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 578 </font></span><font color="#ff00cc">                &and; &not;(msg = 0 &or; msg &lt; 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 579 </font></span><font color="#ff00cc">                &and; &not;((nat tout) &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 580 </font></span><font color="#ff00cc">                &and; &not; bufFull s (the ?cur_part_id,buf_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 581 </font></span><font color="#ff00cc">                   &and; &not;(rscProcQueEmpty s (buf (the ?cur_part_id,buf_id)))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 582 </font></span><font color="#ff00cc">      &#10230; ?s_r =  (schedule_Abs ?s_setToReady core_id , Some NO_ERROR) &and; ?s_waitDiff' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 583 </font></span>  <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 584 </font></span>    <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>assume</strong></font> <font color="#ff00cc">&quot;&not;(getBufAttrByID s (the ?cur_part_id,buf_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 585 </font></span><font color="#ff00cc">                &and; &not;(msg &gt; getBufMaxMsgSz s (the ?cur_part_id,buf_id))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 586 </font></span><font color="#ff00cc">                &and; &not;(msg = 0 &or; msg &lt; 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 587 </font></span><font color="#ff00cc">                &and; &not;((nat tout) &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 588 </font></span><font color="#ff00cc">                &and; &not; bufFull s (the ?cur_part_id,buf_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 589 </font></span><font color="#ff00cc">                   &and; &not;(rscProcQueEmpty s (buf (the ?cur_part_id,buf_id)))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 590 </font></span>      <font color="#006699"><strong>hence</strong></font> a1<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?s_r =  (schedule_Abs ?s_setToReady core_id , Some NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 591 </font></span>        <font color="#006699"><strong>unfolding</strong></font> SEND_BUFFER_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 592 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?s_waitDiff' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 593 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> StopTCounter calculation fst_conv getWaitDiff_procReady getWaitDiff_schedule_Abs<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 594 </font></span>      <font color="#006699"><strong>ultimately</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?s_r =  (schedule_Abs ?s_setToReady core_id , Some NO_ERROR) &and; ?s_waitDiff' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 595 </font></span>        <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 596 </font></span>    <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 597 </font></span>    <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 598 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 599 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getBufAttrByID s (the ?cur_part_id,buf_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 600 </font></span><font color="#ff00cc">                &and; &not;(msg &gt; getBufMaxMsgSz s (the ?cur_part_id,buf_id))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 601 </font></span><font color="#ff00cc">                &and; &not;(msg = 0 &or; msg &lt; 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 602 </font></span><font color="#ff00cc">                &and; &not;((nat tout) &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 603 </font></span><font color="#ff00cc">                &and;  bufFull s (the ?cur_part_id,buf_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 604 </font></span><font color="#ff00cc">                &and;tout = 0 &#10230;?s_r= (s , Some NOT_AVAILABLE)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 605 </font></span>    <font color="#006699"><strong>unfolding</strong></font> SEND_BUFFER_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 606 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getBufAttrByID s (the ?cur_part_id,buf_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 607 </font></span><font color="#ff00cc">                &and; &not;(msg &gt; getBufMaxMsgSz s (the ?cur_part_id,buf_id))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 608 </font></span><font color="#ff00cc">                &and; &not;(msg = 0 &or; msg &lt; 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 609 </font></span><font color="#ff00cc">                &and; &not;((nat tout) &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 610 </font></span><font color="#ff00cc">                &and;  bufFull s (the ?cur_part_id,buf_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 611 </font></span><font color="#ff00cc">                &and; &not;(tout = 0) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 612 </font></span><font color="#ff00cc">                &and;(getProcUserPLMtx s (the ?cur_part_id,the ?cur_proc_id) &ne; None  &or; (the ?cur_proc_id) = HM_PROC_ID)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 613 </font></span><font color="#ff00cc">                &#10230; ?s_r = (s , Some INVALID_MODE)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 614 </font></span>    <font color="#006699"><strong>unfolding</strong></font> SEND_BUFFER_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 615 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getBufAttrByID s (the ?cur_part_id,buf_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 616 </font></span><font color="#ff00cc">                &and; &not;(msg &gt; getBufMaxMsgSz s (the ?cur_part_id,buf_id))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 617 </font></span><font color="#ff00cc">                &and; &not;(msg = 0 &or; msg &lt; 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 618 </font></span><font color="#ff00cc">                &and; &not;((nat tout) &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 619 </font></span><font color="#ff00cc">                &and;  bufFull s (the ?cur_part_id,buf_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 620 </font></span><font color="#ff00cc">                &and; &not;(tout = 0) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 621 </font></span><font color="#ff00cc">                &and; &not;(getProcUserPLMtx s (the ?cur_part_id,the ?cur_proc_id) &ne; None  &or; (the ?cur_proc_id) = HM_PROC_ID)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 622 </font></span><font color="#ff00cc">                &and; tout = -1</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 623 </font></span><font color="#ff00cc">            &#10230; ?s_r = (schedule_Abs ?s_setwf core_id , Some NO_ERROR) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 624 </font></span><font color="#ff00cc">                &and; ?waitDiff' &ne; None &and; ?waitDiff' = Some tout&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 625 </font></span>    <font color="#006699"><strong>unfolding</strong></font> SEND_BUFFER_def
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 626 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> getWaitDiff_setWaitDiff_NotNone fst_conv getWaitDiff_schedule_Abs getWaitDiff_setWaitDiff<font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 627 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getBufAttrByID s (the ?cur_part_id,buf_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 628 </font></span><font color="#ff00cc">                &and; &not;(msg &gt; getBufMaxMsgSz s (the ?cur_part_id,buf_id))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 629 </font></span><font color="#ff00cc">                &and; &not;(msg = 0 &or; msg &lt; 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 630 </font></span><font color="#ff00cc">                &and; &not;((nat tout) &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 631 </font></span><font color="#ff00cc">                &and;  bufFull s (the ?cur_part_id,buf_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 632 </font></span><font color="#ff00cc">                &and; &not;(tout = 0) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 633 </font></span><font color="#ff00cc">                &and; &not;(getProcUserPLMtx s (the ?cur_part_id,the ?cur_proc_id) &ne; None  &or; (the ?cur_proc_id) = HM_PROC_ID)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 634 </font></span><font color="#ff00cc">                &and; &not;(tout = -1)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 635 </font></span><font color="#ff00cc">          &#10230; ?s_r = (schedule_Abs ?s_setCntxt core_id , None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 636 </font></span><font color="#ff00cc">              &and; ?waitDiff' &ne; None  &and; ?cterRsc' &ne; None &and;  ?cterRsc' = Some (Int.int(timer_' ?s_waitAddTimeQ) +  tout) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 637 </font></span><font color="#ff00cc">            &and; ?cntxt' &ne; None &and;  ?cntxt' = Some (sendBuf ((the ?cur_part_id,buf_id),msg))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 638 </font></span>  <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 639 </font></span>    <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>assume</strong></font> <font color="#ff00cc">&quot;&not;(getBufAttrByID s (the ?cur_part_id,buf_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 640 </font></span><font color="#ff00cc">                &and; &not;(msg &gt; getBufMaxMsgSz s (the ?cur_part_id,buf_id))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 641 </font></span><font color="#ff00cc">                &and; &not;(msg = 0 &or; msg &lt; 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 642 </font></span><font color="#ff00cc">                &and; &not;((nat tout) &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 643 </font></span><font color="#ff00cc">                &and;  bufFull s (the ?cur_part_id,buf_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 644 </font></span><font color="#ff00cc">                &and; &not;(tout = 0) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 645 </font></span><font color="#ff00cc">                &and; &not;(getProcUserPLMtx s (the ?cur_part_id,the ?cur_proc_id) &ne; None  &or; (the ?cur_proc_id) = HM_PROC_ID)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 646 </font></span><font color="#ff00cc">                &and; &not;(tout = -1)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 647 </font></span>      <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;?s_r = (schedule_Abs ?s_setCntxt core_id , None)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 648 </font></span>        <font color="#006699"><strong>unfolding</strong></font> SEND_BUFFER_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 649 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?waitDiff' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 650 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis calculation fstI getWaitDiff_schedule_Abs getWaitDiff_setCntxt_Eq setAddWaitDiff_NotNone setAddWaitDiff_def waitDiff_setCterRsc<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 651 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?cterRsc' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 652 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> IntraCom_FT.getCterRsc_setCntxt calculation<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> getCterRsc_schedule_Abs getCterRsc_set_NotNone<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 653 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?cntxt' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 654 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> Process_FT.getCtx_sd calculation<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> setCtx_Not_None<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 655 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?cterRsc' = Some (Int.int(timer_' ?s_waitAddTimeQ) +  tout)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 656 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> IntraCom_FT.getCterRsc_setCntxt calculation<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> getCterRsc_schedule_Abs setCterRsc_NotNone<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 657 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?cntxt' = Some (sendBuf ((the ?cur_part_id,buf_id),msg))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 658 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> Process_FT.getCtx_sd calculation<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> setCntxt_notNone<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 659 </font></span>      <font color="#006699"><strong>ultimately</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?s_r = (schedule_Abs ?s_setCntxt core_id , None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 660 </font></span><font color="#ff00cc">              &and; ?waitDiff' &ne; None  &and; ?cterRsc' &ne; None &and;  ?cterRsc' = Some (Int.int(timer_' ?s_waitAddTimeQ) +  tout) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 661 </font></span><font color="#ff00cc">            &and; ?cntxt' &ne; None &and;  ?cntxt' = Some (sendBuf ((the ?cur_part_id,buf_id),msg))&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 662 </font></span>        <font color="#006699"><strong>by</strong></font> simp     
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 663 </font></span>    <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 664 </font></span>    <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 665 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 666 </font></span>  <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 667 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> case_prod_unfold<font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 668 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 669 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 670 </font></span><font color="#006699"><strong>lemma</strong></font> RECEIVE_BUFFER<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 671 </font></span>  <font color="#ff00cc">&quot;let s_m_r = RECEIVE_BUFFER s core_id buf_id tout;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 672 </font></span><font color="#ff00cc">      cur_part_id = curPartID s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 673 </font></span><font color="#ff00cc">      cur_proc_id = curProcID_Core s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 674 </font></span><font color="#ff00cc">      waitDiff' = getWaitDiff (fst s_m_r) (the cur_part_id,the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 675 </font></span><font color="#ff00cc">      cterRsc' = getCterRsc (fst s_m_r) (the cur_part_id,the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 676 </font></span><font color="#ff00cc">      cntxt' = getCntxt (fst s_m_r) (the cur_part_id,the cur_proc_id)  in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 677 </font></span><font color="#ff00cc">     if getBufAttrByID s (the cur_part_id,buf_id) = None then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 678 </font></span><font color="#ff00cc">         s_m_r = (s , None , Some INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 679 </font></span><font color="#ff00cc">     else if (nat tout) &gt; INVALID_TIMEOUT_VALUE  then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 680 </font></span><font color="#ff00cc">         s_m_r = (s , None , Some INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 681 </font></span><font color="#ff00cc">     else if &not; bufEmpty s (the cur_part_id,buf_id) then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 682 </font></span><font color="#ff00cc">             let sRemovFst_msg = removeFstMsg s (the cur_part_id,buf_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 683 </font></span><font color="#ff00cc">                mlength = MSG_SZ (the (snd sRemovFst_msg)) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 684 </font></span><font color="#ff00cc">              if &not; rscProcQueEmpty s (buf (the cur_part_id,buf_id)) then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 685 </font></span><font color="#ff00cc">                  let s_pt_rmvPid= rscQPop (fst sRemovFst_msg) (buf (the cur_part_id,buf_id));</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 686 </font></span><font color="#ff00cc">                      sendProcCntxt = getCntxt (fst s_pt_rmvPid) (the (snd s_pt_rmvPid));</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 687 </font></span><font color="#ff00cc">                      sendMsg = getSendbufCntxtMsg (the sendProcCntxt);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 688 </font></span><font color="#ff00cc">                      s_insertBufM = insertBufMsg (fst s_pt_rmvPid) (the cur_part_id,buf_id) sendMsg ;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 689 </font></span><font color="#ff00cc">                      s_stopTimeCt =  StopTCounter s_insertBufM (the (snd s_pt_rmvPid));</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 690 </font></span><font color="#ff00cc">                      s_setToReady =  if &not;isSuspended s_stopTimeCt (the (snd s_pt_rmvPid)) then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 691 </font></span><font color="#ff00cc">                                        procReady s_stopTimeCt (the (snd s_pt_rmvPid))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 692 </font></span><font color="#ff00cc">                                    else  s_stopTimeCt in  </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 693 </font></span><font color="#ff00cc">                 s_m_r = (schedule_Abs s_setToReady core_id , Some mlength , Some NO_ERROR)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 694 </font></span><font color="#ff00cc">               else s_m_r = ((fst sRemovFst_msg) , Some mlength , Some NO_ERROR)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 695 </font></span><font color="#ff00cc">     else if tout = 0 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 696 </font></span><font color="#ff00cc">            s_m_r =(s , Some 0 , Some NOT_AVAILABLE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 697 </font></span><font color="#ff00cc">     else if getProcUserPLMtx s (the cur_part_id,the cur_proc_id) &ne; None &or; (the cur_proc_id) = HM_PROC_ID then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 698 </font></span><font color="#ff00cc">           s_m_r = (s , Some 0 , Some INVALID_MODE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 699 </font></span><font color="#ff00cc">     else if tout = -1 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 700 </font></span><font color="#ff00cc">             let s_setWaiting = setProcSta s (the cur_part_id,the cur_proc_id) WAITING;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 701 </font></span><font color="#ff00cc">                 s_insertBufQue = rscQPush s_setWaiting (buf (the cur_part_id,buf_id)) (the cur_part_id,the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 702 </font></span><font color="#ff00cc">                 s_setWd = setWaitDiff s_insertBufQue (the cur_part_id,the cur_proc_id) tout in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 703 </font></span><font color="#ff00cc">            s_m_r = (schedule_Abs s_setWd core_id , None , Some NO_ERROR)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 704 </font></span><font color="#ff00cc">              &and; waitDiff' &ne; None </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 705 </font></span><font color="#ff00cc">     else  let s_setWaiting = setProcSta s (the cur_part_id,the cur_proc_id) WAITING;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 706 </font></span><font color="#ff00cc">               s_insertBufQue = rscQPush s_setWaiting (buf (the cur_part_id,buf_id)) (the cur_part_id,the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 707 </font></span><font color="#ff00cc">               s_setWaitDiff = setWaitDiff s_insertBufQue (the cur_part_id,the cur_proc_id) tout;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 708 </font></span><font color="#ff00cc">               s_waitAddTimeQ = waitAdd_D s_setWaitDiff  (the cur_part_id,the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 709 </font></span><font color="#ff00cc">               s_setTCtrRsc = setCterRsc s_waitAddTimeQ (the cur_part_id,the cur_proc_id) (Int.int(timer_' s_waitAddTimeQ) +  tout);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 710 </font></span><font color="#ff00cc">               s_setCntxt = setCntxt s_setTCtrRsc (the cur_part_id,the cur_proc_id) (recvBuf ((the cur_part_id,buf_id), None)) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 711 </font></span><font color="#ff00cc">          s_m_r = (schedule_Abs s_setCntxt core_id , None , None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 712 </font></span><font color="#ff00cc">          &and; waitDiff' &ne; None  &and; cterRsc' &ne; None &and; cterRsc' = Some (Int.int(timer_' s_waitAddTimeQ) +  tout) &and; cntxt' &ne; None &and;  cntxt' = Some (recvBuf ((the cur_part_id,buf_id), None)) &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 713 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 714 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_m_r <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;RECEIVE_BUFFER s core_id buf_id tout&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 715 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curPartID s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 716 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_proc_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curProcID_Core s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 717 </font></span>  <font color="#006699"><strong>let</strong></font> ?sRemovFst_msg <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;removeFstMsg s (the ?cur_part_id,buf_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 718 </font></span>  <font color="#006699"><strong>let</strong></font> ?mlength <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;MSG_SZ (the (snd ?sRemovFst_msg))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 719 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_pt_rmvPid<font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;rscQPop (fst ?sRemovFst_msg) (buf (the ?cur_part_id,buf_id))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 720 </font></span>  <font color="#006699"><strong>let</strong></font> ?sendProcCntxt <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getCntxt (fst ?s_pt_rmvPid) (the (snd ?s_pt_rmvPid))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 721 </font></span>  <font color="#006699"><strong>let</strong></font> ?sendMsg <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getSendbufCntxtMsg (the ?sendProcCntxt)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 722 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_insertBufM <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;insertBufMsg (fst ?s_pt_rmvPid) (the ?cur_part_id,buf_id) ?sendMsg&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 723 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_stopTimeCt <font color="#000000"><strong>=</strong></font>  <font color="#ff00cc">&quot;StopTCounter ?s_insertBufM (the (snd ?s_pt_rmvPid))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 724 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setToReady <font color="#000000"><strong>=</strong></font>  <font color="#ff00cc">&quot;if &not;isSuspended ?s_stopTimeCt (the (snd ?s_pt_rmvPid)) then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 725 </font></span><font color="#ff00cc">                           procReady ?s_stopTimeCt (the (snd ?s_pt_rmvPid))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 726 </font></span><font color="#ff00cc">                        else  ?s_stopTimeCt&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 727 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 728 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setWaiting <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setProcSta s (the ?cur_part_id,the ?cur_proc_id) WAITING&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 729 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_insertBufQue <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;rscQPush ?s_setWaiting (buf (the ?cur_part_id,buf_id)) (the ?cur_part_id,the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 730 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setWd <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setWaitDiff ?s_insertBufQue (the ?cur_part_id,the ?cur_proc_id) tout&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 731 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 732 </font></span>  <font color="#006699"><strong>let</strong></font> ?waitDiff' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getWaitDiff (fst ?s_m_r) (the ?cur_part_id,the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 733 </font></span>  <font color="#006699"><strong>let</strong></font> ?cterRsc' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getCterRsc (fst ?s_m_r) (the ?cur_part_id,the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 734 </font></span>  <font color="#006699"><strong>let</strong></font> ?cntxt' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getCntxt (fst ?s_m_r) (the ?cur_part_id,the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 735 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 736 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setWaiting <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setProcSta s (the ?cur_part_id,the ?cur_proc_id) WAITING&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 737 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_insertBufQue <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;rscQPush ?s_setWaiting (buf (the ?cur_part_id,buf_id)) (the ?cur_part_id,the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 738 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setWaitDiff <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setWaitDiff ?s_insertBufQue (the ?cur_part_id,the ?cur_proc_id) tout&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 739 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_waitAddTimeQ <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;waitAdd_D ?s_setWaitDiff  (the ?cur_part_id,the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 740 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setTCtrRsc <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setCterRsc ?s_waitAddTimeQ (the ?cur_part_id,the ?cur_proc_id) (Int.int(timer_' ?s_waitAddTimeQ) +  tout)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 741 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setCntxt <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setCntxt ?s_setTCtrRsc (the ?cur_part_id,the ?cur_proc_id) (recvBuf ((the ?cur_part_id,buf_id), None))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 742 </font></span>  
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 743 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getBufAttrByID s (the ?cur_part_id,buf_id) = None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 744 </font></span><font color="#ff00cc">        &#10230; ?s_m_r = (s , None , Some INVALID_PARAM)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 745 </font></span>    <font color="#006699"><strong>unfolding</strong></font> RECEIVE_BUFFER_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 746 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getBufAttrByID s (the ?cur_part_id,buf_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 747 </font></span><font color="#ff00cc">               &and; ((nat tout) &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 748 </font></span><font color="#ff00cc">              &#10230; ?s_m_r = (s , None , Some INVALID_PARAM)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 749 </font></span>    <font color="#006699"><strong>unfolding</strong></font> RECEIVE_BUFFER_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 750 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getBufAttrByID s (the ?cur_part_id,buf_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 751 </font></span><font color="#ff00cc">               &and; &not;((nat tout) &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 752 </font></span><font color="#ff00cc">               &and; &not; bufEmpty s (the ?cur_part_id,buf_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 753 </font></span><font color="#ff00cc">                  &and; &not; rscProcQueEmpty s (buf (the ?cur_part_id,buf_id))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 754 </font></span><font color="#ff00cc">              &#10230; ?s_m_r = (schedule_Abs ?s_setToReady core_id , Some ?mlength , Some NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 755 </font></span>    <font color="#006699"><strong>unfolding</strong></font> RECEIVE_BUFFER_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 756 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getBufAttrByID s (the ?cur_part_id,buf_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 757 </font></span><font color="#ff00cc">               &and; &not;((nat tout) &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 758 </font></span><font color="#ff00cc">               &and; &not; bufEmpty s (the ?cur_part_id,buf_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 759 </font></span><font color="#ff00cc">                  &and;  rscProcQueEmpty s (buf (the ?cur_part_id,buf_id))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 760 </font></span><font color="#ff00cc">              &#10230;?s_m_r = ((fst ?sRemovFst_msg) , Some ?mlength , Some NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 761 </font></span>    <font color="#006699"><strong>unfolding</strong></font> RECEIVE_BUFFER_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 762 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getBufAttrByID s (the ?cur_part_id,buf_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 763 </font></span><font color="#ff00cc">               &and; &not;((nat tout) &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 764 </font></span><font color="#ff00cc">               &and; bufEmpty s (the ?cur_part_id,buf_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 765 </font></span><font color="#ff00cc">               &and; (tout = 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 766 </font></span><font color="#ff00cc">              &#10230; ?s_m_r =(s , Some 0 , Some NOT_AVAILABLE)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 767 </font></span>    <font color="#006699"><strong>unfolding</strong></font> RECEIVE_BUFFER_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 768 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getBufAttrByID s (the ?cur_part_id,buf_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 769 </font></span><font color="#ff00cc">               &and; &not;((nat tout) &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 770 </font></span><font color="#ff00cc">               &and; bufEmpty s (the ?cur_part_id,buf_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 771 </font></span><font color="#ff00cc">               &and; &not;(tout = 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 772 </font></span><font color="#ff00cc">               &and; (getProcUserPLMtx s (the ?cur_part_id,the ?cur_proc_id) &ne; None &or; (the ?cur_proc_id) = HM_PROC_ID)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 773 </font></span><font color="#ff00cc">              &#10230; ?s_m_r = (s , Some 0 , Some INVALID_MODE)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 774 </font></span>    <font color="#006699"><strong>unfolding</strong></font> RECEIVE_BUFFER_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 775 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getBufAttrByID s (the ?cur_part_id,buf_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 776 </font></span><font color="#ff00cc">               &and; &not;((nat tout) &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 777 </font></span><font color="#ff00cc">               &and; bufEmpty s (the ?cur_part_id,buf_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 778 </font></span><font color="#ff00cc">               &and; &not;(tout = 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 779 </font></span><font color="#ff00cc">               &and; &not;(getProcUserPLMtx s (the ?cur_part_id,the ?cur_proc_id) &ne; None &or; (the ?cur_proc_id) = HM_PROC_ID)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 780 </font></span><font color="#ff00cc">               &and; (tout = -1)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 781 </font></span><font color="#ff00cc">             &#10230;?s_m_r = (schedule_Abs ?s_setWd core_id , None , Some NO_ERROR)&and; ?waitDiff' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 782 </font></span>    <font color="#006699"><strong>unfolding</strong></font> RECEIVE_BUFFER_def
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 783 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> fst_conv getWaitDiff_schedule_Abs getWaitDiff_setWaitDiff option.distinct<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 784 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getBufAttrByID s (the ?cur_part_id,buf_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 785 </font></span><font color="#ff00cc">               &and; &not;((nat tout) &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 786 </font></span><font color="#ff00cc">               &and; bufEmpty s (the ?cur_part_id,buf_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 787 </font></span><font color="#ff00cc">               &and; &not;(tout = 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 788 </font></span><font color="#ff00cc">               &and; &not;(getProcUserPLMtx s (the ?cur_part_id,the ?cur_proc_id) &ne; None &or; (the ?cur_proc_id) = HM_PROC_ID)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 789 </font></span><font color="#ff00cc">               &and; &not;(tout = -1)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 790 </font></span><font color="#ff00cc">             &#10230;?s_m_r = (schedule_Abs ?s_setCntxt core_id , None , None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 791 </font></span><font color="#ff00cc">          &and; ?waitDiff' &ne; None  &and; ?cterRsc' &ne; None &and; ?cterRsc' = Some (Int.int(timer_' ?s_waitAddTimeQ) +  tout) &and; ?cntxt' &ne; None &and;  ?cntxt' = Some (recvBuf ((the ?cur_part_id,buf_id), None))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 792 </font></span>  <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 793 </font></span>    <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>assume</strong></font> <font color="#ff00cc">&quot;&not;(getBufAttrByID s (the ?cur_part_id,buf_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 794 </font></span><font color="#ff00cc">               &and; &not;((nat tout) &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 795 </font></span><font color="#ff00cc">               &and; bufEmpty s (the ?cur_part_id,buf_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 796 </font></span><font color="#ff00cc">               &and; &not;(tout = 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 797 </font></span><font color="#ff00cc">               &and; &not;(getProcUserPLMtx s (the ?cur_part_id,the ?cur_proc_id) &ne; None &or; (the ?cur_proc_id) = HM_PROC_ID)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 798 </font></span><font color="#ff00cc">               &and; &not;(tout = -1)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 799 </font></span>      <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;?s_m_r = (schedule_Abs ?s_setCntxt core_id , None , None)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 800 </font></span>        <font color="#006699"><strong>unfolding</strong></font> RECEIVE_BUFFER_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 801 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?waitDiff' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 802 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis calculation fst_conv getWaitDiff_schedule_Abs getWaitDiff_setCntxt_Eq setAddWaitDiff_NotNone setAddWaitDiff_def waitDiff_setCterRsc<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 803 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?cterRsc' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 804 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> IntraCom_FT.getCterRsc_setCntxt calculation<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> getCterRsc_schedule_Abs getCterRsc_set_NotNone<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 805 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?cterRsc' = Some (Int.int(timer_' ?s_waitAddTimeQ) +  tout)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 806 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> getCterRsc_setCntxt calculation<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> getCterRsc_schedule_Abs setCterRsc_NotNone<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 807 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?cntxt' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 808 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> Process_FT.getCtx_sd calculation<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> setCtx_Not_None<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 809 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?cntxt' = Some (recvBuf ((the ?cur_part_id,buf_id), None))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 810 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> Process_FT.getCtx_sd calculation<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> setCntxt_notNone<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 811 </font></span>      <font color="#006699"><strong>ultimately</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?s_m_r = (schedule_Abs ?s_setCntxt core_id , None , None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 812 </font></span><font color="#ff00cc">          &and; ?waitDiff' &ne; None  &and; ?cterRsc' &ne; None &and; ?cterRsc' = Some (Int.int(timer_' ?s_waitAddTimeQ) +  tout) &and; ?cntxt' &ne; None &and;  ?cntxt' = Some (recvBuf ((the ?cur_part_id,buf_id), None))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 813 </font></span>        <font color="#006699"><strong>by</strong></font> blast
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 814 </font></span>    <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 815 </font></span>    <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 816 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 817 </font></span>  <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 818 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 819 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 820 </font></span><font color="#006699"><strong>lemma</strong></font> GET_BUFFER_ID<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 821 </font></span>  <font color="#ff00cc">&quot;let s_r = GET_BUFFER_ID s core_id buffer_name;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 822 </font></span><font color="#ff00cc">        cur_part_id = curPartID s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 823 </font></span><font color="#ff00cc">        buf_id_op = getBufIDByName s (the cur_part_id) buffer_name in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 824 </font></span><font color="#ff00cc">     if buf_id_op = None then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 825 </font></span><font color="#ff00cc">         s_r = (s , None,INVALID_CONFIG)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 826 </font></span><font color="#ff00cc">      else </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 827 </font></span><font color="#ff00cc">         s_r = (s, buf_id_op, NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 828 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 829 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_r <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;GET_BUFFER_ID s core_id buffer_name&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 830 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curPartID s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 831 </font></span>  <font color="#006699"><strong>let</strong></font> ?buf_id_op <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getBufIDByName s (the ?cur_part_id) buffer_name&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 832 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?buf_id_op = None&#10230;?s_r = (s , None,INVALID_CONFIG)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 833 </font></span>    <font color="#006699"><strong>unfolding</strong></font> GET_BUFFER_ID_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 834 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(?buf_id_op = None) &#10230; ?s_r = (s, ?buf_id_op, NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 835 </font></span>    <font color="#006699"><strong>unfolding</strong></font> GET_BUFFER_ID_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 836 </font></span>  <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 837 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 838 </font></span>  
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 839 </font></span><font color="#006699"><strong>lemma</strong></font> GET_BUFFER_STATUS<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 840 </font></span>  <font color="#ff00cc">&quot;let s_r = GET_BUFFER_STATUS s core_id buf_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 841 </font></span><font color="#ff00cc">      cur_part_id = curPartID s core_id in </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 842 </font></span><font color="#ff00cc">      if getBufAttrByID s (the cur_part_id,buf_id) = None then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 843 </font></span><font color="#ff00cc">        s_r = (s , None , INVALID_PARAM )</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 844 </font></span><font color="#ff00cc">      else</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 845 </font></span><font color="#ff00cc">        s_r = (s , Some (getBufStatus s core_id (the cur_part_id,buf_id)), NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 846 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 847 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_r <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;GET_BUFFER_STATUS s core_id buf_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 848 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curPartID s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 849 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getBufAttrByID s (the ?cur_part_id,buf_id) = None &#10230; ?s_r = (s , None , INVALID_PARAM )&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 850 </font></span>    <font color="#006699"><strong>unfolding</strong></font> GET_BUFFER_STATUS_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 851 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getBufAttrByID s (the ?cur_part_id,buf_id) = None)&#10230; ?s_r = (s , Some (getBufStatus s core_id (the ?cur_part_id,buf_id)), NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 852 </font></span>    <font color="#006699"><strong>unfolding</strong></font> GET_BUFFER_STATUS_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 853 </font></span>  <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 854 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 855 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 856 </font></span><font color="#006699"><strong>lemma</strong></font> CREATE_BLACKBOARD<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 857 </font></span>  <font color="#ff00cc">&quot;let s_b_r = CREATE_BLACKBOARD s core_id bbd_attr;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 858 </font></span><font color="#ff00cc">      cur_part_id = curPartID s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 859 </font></span><font color="#ff00cc">      blackbdName = BLACKBD_NAME bbd_attr;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 860 </font></span><font color="#ff00cc">      mag_sz = BLACKBD_ATTR_TYPE.MAX_MSG_SZ bbd_attr;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 861 </font></span><font color="#ff00cc">      created_bbds = size_set (getBbdsOfPart s (the cur_part_id))  in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 862 </font></span><font color="#ff00cc">  if created_bbds &ge;  MAX_NUM_OF_BBDS then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 863 </font></span><font color="#ff00cc">        s_b_r = (s , None , INVALID_CONFIG)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 864 </font></span><font color="#ff00cc">   else if getBbdIDByName s (the cur_part_id) blackbdName &ne; None  then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 865 </font></span><font color="#ff00cc">        s_b_r = (s , None , NO_ACTION)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 866 </font></span><font color="#ff00cc">   else if mag_sz = 0 &or; mag_sz &lt; 0 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 867 </font></span><font color="#ff00cc">        s_b_r = (s , None , INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 868 </font></span><font color="#ff00cc">   else if getPartMode s (the cur_part_id) = Some NORMAL then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 869 </font></span><font color="#ff00cc">        s_b_r = (s , None , INVALID_MODE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 870 </font></span><font color="#ff00cc">   else</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 871 </font></span><font color="#ff00cc">        let blackbd_id = newBlackbdID s (the cur_part_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 872 </font></span><font color="#ff00cc">            s_new = createBlackbd s (the cur_part_id) blackbd_id bbd_attr;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 873 </font></span><font color="#ff00cc">            bbd_attr' = getBbdAttrByID (fst s_b_r) (the cur_part_id, blackbd_id) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 874 </font></span><font color="#ff00cc">          s_b_r = (s_new , Some blackbd_id , NO_ERROR)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 875 </font></span><font color="#ff00cc">          &and; bbd_attr'= Some bbd_attr  &and; (fst(snd (s_b_r))) = Some blackbd_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 876 </font></span><font color="#006699"><strong>proof</strong></font>- 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 877 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_b_r <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;CREATE_BLACKBOARD s core_id bbd_attr&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 878 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curPartID s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 879 </font></span>  <font color="#006699"><strong>let</strong></font> ?blackbdName <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;BLACKBD_NAME bbd_attr&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 880 </font></span>  <font color="#006699"><strong>let</strong></font> ?mag_sz <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;BLACKBD_ATTR_TYPE.MAX_MSG_SZ bbd_attr&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 881 </font></span>  <font color="#006699"><strong>let</strong></font> ?created_bbds <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;size_set (getBbdsOfPart s (the ?cur_part_id))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 882 </font></span>  <font color="#006699"><strong>let</strong></font> ?blackbd_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;newBlackbdID s (the ?cur_part_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 883 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_new <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;createBlackbd s (the ?cur_part_id) ?blackbd_id bbd_attr&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 884 </font></span>  <font color="#006699"><strong>let</strong></font> ?bbd_attr' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getBbdAttrByID (fst ?s_b_r) (the ?cur_part_id, ?blackbd_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 885 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?created_bbds &ge;  MAX_NUM_OF_BBDS&#10230;?s_b_r = (s , None , INVALID_CONFIG)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 886 </font></span>    <font color="#006699"><strong>unfolding</strong></font> CREATE_BLACKBOARD_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 887 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(?created_bbds &ge;  MAX_NUM_OF_BBDS)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 888 </font></span><font color="#ff00cc">        &and; getBbdIDByName s (the ?cur_part_id) ?blackbdName &ne; None </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 889 </font></span><font color="#ff00cc">        &#10230;?s_b_r = (s , None , NO_ACTION)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 890 </font></span>    <font color="#006699"><strong>unfolding</strong></font> CREATE_BLACKBOARD_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 891 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(?created_bbds &ge;  MAX_NUM_OF_BBDS)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 892 </font></span><font color="#ff00cc">        &and; &not;(getBbdIDByName s (the ?cur_part_id) ?blackbdName &ne; None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 893 </font></span><font color="#ff00cc">        &and; ?mag_sz = 0 &or; ?mag_sz &lt; 0</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 894 </font></span><font color="#ff00cc">        &#10230; ?s_b_r = (s , None , INVALID_PARAM)&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 895 </font></span>    <font color="#006699"><strong>unfolding</strong></font> CREATE_BLACKBOARD_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 896 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(?created_bbds &ge;  MAX_NUM_OF_BBDS)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 897 </font></span><font color="#ff00cc">             &and; &not;(getBbdIDByName s (the ?cur_part_id) ?blackbdName &ne; None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 898 </font></span><font color="#ff00cc">             &and; &not;(?mag_sz = 0 &or; ?mag_sz &lt; 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 899 </font></span><font color="#ff00cc">             &and; getPartMode s (the ?cur_part_id)= Some NORMAL</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 900 </font></span><font color="#ff00cc">            &#10230; ?s_b_r = (s , None , INVALID_MODE)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 901 </font></span>    <font color="#006699"><strong>unfolding</strong></font> CREATE_BLACKBOARD_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 902 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(?created_bbds &ge;  MAX_NUM_OF_BBDS)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 903 </font></span><font color="#ff00cc">             &and; &not;(getBbdIDByName s (the ?cur_part_id) ?blackbdName &ne; None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 904 </font></span><font color="#ff00cc">             &and; &not;(?mag_sz = 0 &or; ?mag_sz &lt; 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 905 </font></span><font color="#ff00cc">             &and; &not;(getPartMode s (the ?cur_part_id)= Some NORMAL)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 906 </font></span><font color="#ff00cc">          &#10230; ?s_b_r = (?s_new , Some ?blackbd_id , NO_ERROR)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 907 </font></span><font color="#ff00cc">          &and; ?bbd_attr' = Some bbd_attr   &and; (fst(snd (?s_b_r))) = Some ?blackbd_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 908 </font></span>  <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 909 </font></span>    <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>assume</strong></font> a0<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&not;(?created_bbds &ge;  MAX_NUM_OF_BBDS)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 910 </font></span><font color="#ff00cc">             &and; &not;(getBbdIDByName s (the ?cur_part_id) ?blackbdName &ne; None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 911 </font></span><font color="#ff00cc">             &and; &not;(?mag_sz = 0 &or; ?mag_sz &lt; 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 912 </font></span><font color="#ff00cc">             &and; &not;(getPartMode s (the ?cur_part_id)= Some NORMAL)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 913 </font></span>      <font color="#006699"><strong>hence</strong></font> a1<font color="#000000"><strong>:</strong></font><font color="#ff00cc">&quot;?s_b_r = (?s_new , Some ?blackbd_id , NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 914 </font></span>        <font color="#006699"><strong>unfolding</strong></font> CREATE_BLACKBOARD_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 915 </font></span>      <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?bbd_attr' = Some bbd_attr&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 916 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis a1 createBlackbd_Suc fst_conv<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 917 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;(fst(snd (?s_b_r))) = Some ?blackbd_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 918 </font></span>        <font color="#006699"><strong>using</strong></font> a1 <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 919 </font></span>      <font color="#006699"><strong>ultimately</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?s_b_r = (?s_new , Some ?blackbd_id , NO_ERROR)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 920 </font></span><font color="#ff00cc">          &and; ?bbd_attr' = Some bbd_attr   &and; (fst(snd (?s_b_r))) = Some ?blackbd_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 921 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis a1<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 922 </font></span>    <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 923 </font></span>    <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 924 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 925 </font></span>  <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis  <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 926 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 927 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 928 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 929 </font></span><font color="#006699"><strong>lemma</strong></font> DISPLAY_BLACKBOARD<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 930 </font></span>  <font color="#ff00cc">&quot;let s_r= DISPLAY_BLACKBOARD s core_id bbd_id msg;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 931 </font></span><font color="#ff00cc">     cur_part_id = curPartID s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 932 </font></span><font color="#ff00cc">    bbdEmptyId' = getEmptyId (fst s_r) (the cur_part_id,bbd_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 933 </font></span><font color="#ff00cc">    bbdMsg' =  readBbdMsg (fst s_r) (the cur_part_id,bbd_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 934 </font></span><font color="#ff00cc">    bbdRscQue' = getRscQueList (fst s_r) (bbd (the cur_part_id,bbd_id)) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 935 </font></span><font color="#ff00cc">    if getBbdAttrByID s (the cur_part_id,bbd_id) = None then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 936 </font></span><font color="#ff00cc">       s_r=(s , INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 937 </font></span><font color="#ff00cc">    else if msg &gt; getBbdMaxMsgSz s (the cur_part_id,bbd_id) then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 938 </font></span><font color="#ff00cc">       s_r=(s , INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 939 </font></span><font color="#ff00cc">    else if msg = 0 &or; msg &lt; 0 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 940 </font></span><font color="#ff00cc">       s_r=(s , INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 941 </font></span><font color="#ff00cc">    else </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 942 </font></span><font color="#ff00cc">       let s_setOccip = setEmptyId s (the cur_part_id,bbd_id) OCCUPIED;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 943 </font></span><font color="#ff00cc">           s_owrtBbdMsg = owrtBbdMsg s_setOccip (the cur_part_id,bbd_id) msg in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 944 </font></span><font color="#ff00cc">           if rscProcQueEmpty s (bbd (the cur_part_id,bbd_id)) then </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 945 </font></span><font color="#ff00cc">               let pendingProcs = getRscQueList s_owrtBbdMsg (bbd (the cur_part_id,bbd_id));</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 946 </font></span><font color="#ff00cc">                   s_stopQuetCtr = stopProcLTCtr s_owrtBbdMsg (the pendingProcs);                   </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 947 </font></span><font color="#ff00cc">                   s_clearPendProcs = clearPendProcs s_stopQuetCtr (bbd (the cur_part_id,bbd_id));</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 948 </font></span><font color="#ff00cc">                   s_setReady = procsReady s_clearPendProcs (the cur_part_id) (getProcList (the pendingProcs)) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 949 </font></span><font color="#ff00cc">               s_r=(schedule_Abs s_setReady core_id ,NO_ERROR) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 950 </font></span><font color="#ff00cc">                &and; bbdEmptyId' = Some OCCUPIED &and; bbdMsg' &ne; None &and; bbdMsg'=Some msg &and; bbdRscQue' = None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 951 </font></span><font color="#ff00cc">           else </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 952 </font></span><font color="#ff00cc">               s_r=(s_owrtBbdMsg,NO_ERROR)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 953 </font></span><font color="#ff00cc">              &and; bbdEmptyId' = Some OCCUPIED &and; bbdMsg' &ne; None &and; bbdMsg'=Some msg&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 954 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 955 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_r<font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;DISPLAY_BLACKBOARD s core_id bbd_id msg&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 956 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curPartID s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 957 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setOccip <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setEmptyId s (the ?cur_part_id,bbd_id) OCCUPIED&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 958 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_owrtBbdMsg <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;owrtBbdMsg ?s_setOccip (the ?cur_part_id,bbd_id) msg&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 959 </font></span>  <font color="#006699"><strong>let</strong></font> ?pendingProcs <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getRscQueList ?s_owrtBbdMsg (bbd (the ?cur_part_id,bbd_id))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 960 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_stopQuetCtr <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;stopProcLTCtr ?s_owrtBbdMsg (the ?pendingProcs)&quot;</font>                   
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 961 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_clearPendProcs <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;clearPendProcs ?s_stopQuetCtr (bbd (the ?cur_part_id,bbd_id))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 962 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setReady <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;procsReady ?s_clearPendProcs (the ?cur_part_id) (getProcList (the ?pendingProcs))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 963 </font></span>  <font color="#006699"><strong>let</strong></font> ?bbdEmptyId' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getEmptyId (fst ?s_r) (the ?cur_part_id,bbd_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 964 </font></span>  <font color="#006699"><strong>let</strong></font> ?bbdMsg' <font color="#000000"><strong>=</strong></font>  <font color="#ff00cc">&quot;readBbdMsg (fst ?s_r) (the ?cur_part_id,bbd_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 965 </font></span>  <font color="#006699"><strong>let</strong></font> ?bbdRscQue' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getRscQueList (fst ?s_r) (bbd (the ?cur_part_id,bbd_id))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 966 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getBbdAttrByID s (the ?cur_part_id,bbd_id) = None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 967 </font></span><font color="#ff00cc">        &#10230; ?s_r=(s , INVALID_PARAM)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 968 </font></span>    <font color="#006699"><strong>unfolding</strong></font> DISPLAY_BLACKBOARD_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 969 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getBbdAttrByID s (the ?cur_part_id,bbd_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 970 </font></span><font color="#ff00cc">               &and; (msg &gt; getBbdMaxMsgSz s (the ?cur_part_id,bbd_id))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 971 </font></span><font color="#ff00cc">              &#10230; ?s_r=(s , INVALID_PARAM)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 972 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> DISPLAY_BLACKBOARD_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 973 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getBbdAttrByID s (the ?cur_part_id,bbd_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 974 </font></span><font color="#ff00cc">               &and; &not;(msg &gt; getBbdMaxMsgSz s (the ?cur_part_id,bbd_id))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 975 </font></span><font color="#ff00cc">               &and; msg = 0 &or; msg &lt; 0 </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 976 </font></span><font color="#ff00cc">          &#10230; ?s_r=(s , INVALID_PARAM)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 977 </font></span>    <font color="#006699"><strong>unfolding</strong></font> DISPLAY_BLACKBOARD_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 978 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getBbdAttrByID s (the ?cur_part_id,bbd_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 979 </font></span><font color="#ff00cc">               &and; &not;(msg &gt; getBbdMaxMsgSz s (the ?cur_part_id,bbd_id))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 980 </font></span><font color="#ff00cc">               &and; &not;(msg = 0 &or; msg &lt; 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 981 </font></span><font color="#ff00cc">                  &and; rscProcQueEmpty s (bbd (the ?cur_part_id,bbd_id))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 982 </font></span><font color="#ff00cc">              &#10230; ?s_r=(schedule_Abs ?s_setReady core_id ,NO_ERROR) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 983 </font></span><font color="#ff00cc">                &and; ?bbdEmptyId' = Some OCCUPIED &and; ?bbdMsg' &ne; None &and; ?bbdMsg'=Some msg &and; ?bbdRscQue' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 984 </font></span>  <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 985 </font></span>    <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>assume</strong></font> <font color="#ff00cc">&quot;&not;(getBbdAttrByID s (the ?cur_part_id,bbd_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 986 </font></span><font color="#ff00cc">               &and; &not;(msg &gt; getBbdMaxMsgSz s (the ?cur_part_id,bbd_id))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 987 </font></span><font color="#ff00cc">               &and; &not;(msg = 0 &or; msg &lt; 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 988 </font></span><font color="#ff00cc">                  &and; rscProcQueEmpty s (bbd (the ?cur_part_id,bbd_id))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 989 </font></span>      <font color="#006699"><strong>hence</strong></font> a1<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?s_r=(schedule_Abs ?s_setReady core_id ,NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 990 </font></span>        <font color="#006699"><strong>unfolding</strong></font> DISPLAY_BLACKBOARD_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 991 </font></span>      <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?bbdEmptyId' = Some OCCUPIED&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 992 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis a1 eq_fst_iff getEmptyId_clearPendProcs getEmptyId_owrtBbdMsg getEmptyId_procsReady getEmptyId_schedule_Abs getEmptyId_set getEmptyId_stopProcLTCtr1<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 993 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?bbdMsg' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 994 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis a1 fst_conv option.discI readBbdMsg_clearPendProcs readBbdMsg_procsReady readBbdMsg_schedule_Abs readBbdMsg_set readBbdMsg_stopProcLTCtr<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066"> 995 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?bbdMsg'=Some msg&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 996 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis a1 fst_conv readBbdMsg_clearPendProcs readBbdMsg_procsReady readBbdMsg_schedule_Abs readBbdMsg_set readBbdMsg_stopProcLTCtr<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 997 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?bbdRscQue' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 998 </font></span>        <font color="#006699"><strong>sorry</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000"> 999 </font></span>      <font color="#006699"><strong>ultimately</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?s_r=(schedule_Abs ?s_setReady core_id ,NO_ERROR) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1000 </font></span><font color="#ff00cc">                &and; ?bbdEmptyId' = Some OCCUPIED &and; ?bbdMsg' &ne; None &and; ?bbdMsg'=Some msg &and; ?bbdRscQue' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1001 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis a1<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1002 </font></span>    <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1003 </font></span>    <font color="#0099ff"><strong>thus</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1004 </font></span>      <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> hide_lams<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1005 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1006 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getBbdAttrByID s (the ?cur_part_id,bbd_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1007 </font></span><font color="#ff00cc">               &and; &not;(msg &gt; getBbdMaxMsgSz s (the ?cur_part_id,bbd_id))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1008 </font></span><font color="#ff00cc">               &and; &not;(msg = 0 &or; msg &lt; 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1009 </font></span><font color="#ff00cc">                  &and; &not;(rscProcQueEmpty s (bbd (the ?cur_part_id,bbd_id)))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1010 </font></span><font color="#ff00cc">         &#10230;?s_r=(?s_owrtBbdMsg,NO_ERROR)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1011 </font></span><font color="#ff00cc">              &and; ?bbdEmptyId' = Some OCCUPIED &and; ?bbdMsg' &ne; None &and; ?bbdMsg'=Some msg&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1012 </font></span>  <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1013 </font></span>    <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>assume</strong></font> <font color="#ff00cc">&quot;&not;(getBbdAttrByID s (the ?cur_part_id,bbd_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1014 </font></span><font color="#ff00cc">               &and; &not;(msg &gt; getBbdMaxMsgSz s (the ?cur_part_id,bbd_id))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1015 </font></span><font color="#ff00cc">               &and; &not;(msg = 0 &or; msg &lt; 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1016 </font></span><font color="#ff00cc">                  &and; &not;(rscProcQueEmpty s (bbd (the ?cur_part_id,bbd_id)))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1017 </font></span>      <font color="#006699"><strong>hence</strong></font> a1<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?s_r=(?s_owrtBbdMsg,NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1018 </font></span>        <font color="#006699"><strong>unfolding</strong></font> DISPLAY_BLACKBOARD_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1019 </font></span>      <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?bbdEmptyId' = Some OCCUPIED&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1020 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis a1 fstI getEmptyId_owrtBbdMsg getEmptyId_set<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1021 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?bbdMsg' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1022 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis a1 fst_conv option.discI readBbdMsg_set<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1023 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?bbdMsg'=Some msg&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1024 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis a1 fst_conv readBbdMsg_set<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1025 </font></span>      <font color="#006699"><strong>ultimately</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?s_r=(?s_owrtBbdMsg,NO_ERROR)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1026 </font></span><font color="#ff00cc">              &and; ?bbdEmptyId' = Some OCCUPIED &and; ?bbdMsg' &ne; None &and; ?bbdMsg'=Some msg&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1027 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>mono_tags<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font> a1<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1028 </font></span>    <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1029 </font></span>    <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1030 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1031 </font></span>  <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1032 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#000000"><strong>(</strong></font>no_types<font color="#000000"><strong>,</strong></font> lifting<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1033 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1034 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1035 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1036 </font></span><font color="#006699"><strong>lemma</strong></font> READ_BLACKBOARD<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1037 </font></span>  <font color="#ff00cc">&quot;let s_m_r = READ_BLACKBOARD s core_id bbd_id tout;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1038 </font></span><font color="#ff00cc">      cur_part_id = curPartID s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1039 </font></span><font color="#ff00cc">      cur_proc_id = curProcID_Core s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1040 </font></span><font color="#ff00cc">      getCntxt' = getCntxt (fst s_m_r) (the cur_part_id,the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1041 </font></span><font color="#ff00cc">      getWaitDiff' = getWaitDiff (fst s_m_r) (the cur_part_id,the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1042 </font></span><font color="#ff00cc">      getCterRsc' = getCterRsc (fst s_m_r) (the cur_part_id,the cur_proc_id) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1043 </font></span><font color="#ff00cc">    if getBbdAttrByID s (the cur_part_id,bbd_id) = None then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1044 </font></span><font color="#ff00cc">        s_m_r =(s ,None, Some INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1045 </font></span><font color="#ff00cc">    else if (nat tout) &gt; INVALID_TIMEOUT_VALUE  then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1046 </font></span><font color="#ff00cc">        s_m_r =(s ,None, Some INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1047 </font></span><font color="#ff00cc">    else if emptyID(blackBD_' s)(the cur_part_id,bbd_id) = Some OCCUPIED then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1048 </font></span><font color="#ff00cc">           let msg = the(readBbdMsg s (the cur_part_id,bbd_id));</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1049 </font></span><font color="#ff00cc">              mlength = MSG_SZ msg in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1050 </font></span><font color="#ff00cc">         s_m_r = (s ,Some mlength ,Some NO_ERROR) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1051 </font></span><font color="#ff00cc">    else if tout = 0 then                      </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1052 </font></span><font color="#ff00cc">         s_m_r = (s , Some 0 ,Some NOT_AVAILABLE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1053 </font></span><font color="#ff00cc">    else if getProcUserPLMtx s (the cur_part_id,the cur_proc_id) &ne; None &or; (the cur_proc_id) = HM_PROC_ID then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1054 </font></span><font color="#ff00cc">         s_m_r = (s , Some 0 ,Some INVALID_MODE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1055 </font></span><font color="#ff00cc">    else if tout = -1 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1056 </font></span><font color="#ff00cc">           let s_setWaiting = setProcSta s (the cur_part_id,the cur_proc_id) WAITING;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1057 </font></span><font color="#ff00cc">              s_insertQue = rscQPush s_setWaiting (bbd (the cur_part_id,bbd_id)) (the cur_part_id,the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1058 </font></span><font color="#ff00cc">              s_setWd = setWaitDiff s_insertQue (the cur_part_id,the cur_proc_id) tout;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1059 </font></span><font color="#ff00cc">              s_setCntxt = setCntxt s_setWd (the cur_part_id,the cur_proc_id) (rdBbd (the cur_part_id,bbd_id)) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1060 </font></span><font color="#ff00cc">        s_m_r =  (schedule_Abs s_setCntxt core_id , None , None) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1061 </font></span><font color="#ff00cc">          &and; getCntxt' &ne; None &and; getWaitDiff' &ne; None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1062 </font></span><font color="#ff00cc">    else let s_setWaiting = setProcSta s (the cur_part_id, the cur_proc_id) WAITING;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1063 </font></span><font color="#ff00cc">              s_insertQue = rscQPush s_setWaiting (bbd (the cur_part_id,bbd_id)) (the cur_part_id,the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1064 </font></span><font color="#ff00cc">              s_setTimeCtr = setAddWaitDiff s_insertQue (the cur_part_id,the cur_proc_id) tout;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1065 </font></span><font color="#ff00cc">              s_setTCtrRsc = setCterRsc s_setTimeCtr (the cur_part_id,the cur_proc_id) (Int.int(timer_' s_setTimeCtr) +  tout);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1066 </font></span><font color="#ff00cc">              s_setCntxt = setCntxt s_setTCtrRsc (the cur_part_id,the cur_proc_id) (rdBbd (the cur_part_id,bbd_id)) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1067 </font></span><font color="#ff00cc">        s_m_r =  (schedule_Abs s_setCntxt core_id , None , None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1068 </font></span><font color="#ff00cc">          &and; getCntxt' &ne; None &and; getWaitDiff' &ne; None &and; getCterRsc' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1069 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1070 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_m_r <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;READ_BLACKBOARD s core_id bbd_id tout&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1071 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curPartID s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1072 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_proc_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curProcID_Core s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1073 </font></span>  <font color="#006699"><strong>let</strong></font> ?getCntxt' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getCntxt (fst ?s_m_r) (the ?cur_part_id,the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1074 </font></span>  <font color="#006699"><strong>let</strong></font> ?getWaitDiff' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getWaitDiff (fst ?s_m_r) (the ?cur_part_id,the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1075 </font></span>  <font color="#006699"><strong>let</strong></font> ?getCterRsc' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getCterRsc (fst ?s_m_r) (the ?cur_part_id,the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1076 </font></span>  <font color="#006699"><strong>let</strong></font> ?msg <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;the(readBbdMsg s (the ?cur_part_id,bbd_id))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1077 </font></span>  <font color="#006699"><strong>let</strong></font> ?mlength <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;MSG_SZ ?msg&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1078 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setWaiting <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setProcSta s (the ?cur_part_id,the ?cur_proc_id) WAITING&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1079 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_insertQue <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;rscQPush ?s_setWaiting (bbd (the ?cur_part_id,bbd_id)) (the ?cur_part_id,the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1080 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setWd <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setWaitDiff ?s_insertQue (the ?cur_part_id,the ?cur_proc_id) tout&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1081 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setCntxt <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setCntxt ?s_setWd (the ?cur_part_id,the ?cur_proc_id) (rdBbd (the ?cur_part_id,bbd_id))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1082 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setWaiting1 <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setProcSta s (the ?cur_part_id, the ?cur_proc_id) WAITING&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1083 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_insertQue1 <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;rscQPush ?s_setWaiting1 (bbd (the ?cur_part_id,bbd_id)) (the ?cur_part_id,the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1084 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setTimeCtr1 <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setAddWaitDiff ?s_insertQue1 (the ?cur_part_id,the ?cur_proc_id) tout&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1085 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setTCtrRsc1 <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setCterRsc ?s_setTimeCtr1 (the ?cur_part_id,the ?cur_proc_id) (Int.int(timer_' ?s_setTimeCtr1) +  tout)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1086 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setCntxt1 <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setCntxt ?s_setTCtrRsc1 (the ?cur_part_id,the ?cur_proc_id) (rdBbd (the ?cur_part_id,bbd_id))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1087 </font></span>  
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1088 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getBbdAttrByID s (the ?cur_part_id,bbd_id) = None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1089 </font></span><font color="#ff00cc">        &#10230; ?s_m_r =(s ,None, Some INVALID_PARAM)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1090 </font></span>    <font color="#006699"><strong>unfolding</strong></font> READ_BLACKBOARD_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1091 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getBbdAttrByID s (the ?cur_part_id,bbd_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1092 </font></span><font color="#ff00cc">                &and; (nat tout) &gt; INVALID_TIMEOUT_VALUE</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1093 </font></span><font color="#ff00cc">        &#10230; ?s_m_r =(s ,None, Some INVALID_PARAM)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1094 </font></span>    <font color="#006699"><strong>unfolding</strong></font> READ_BLACKBOARD_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1095 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getBbdAttrByID s (the ?cur_part_id,bbd_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1096 </font></span><font color="#ff00cc">                &and; &not;((nat tout) &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1097 </font></span><font color="#ff00cc">               &and; ( emptyID(blackBD_' s)(the ?cur_part_id,bbd_id) = Some OCCUPIED)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1098 </font></span><font color="#ff00cc">        &#10230; ?s_m_r = (s ,Some ?mlength ,Some NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1099 </font></span>    <font color="#006699"><strong>unfolding</strong></font> READ_BLACKBOARD_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1100 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getBbdAttrByID s (the ?cur_part_id,bbd_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1101 </font></span><font color="#ff00cc">                &and; &not;((nat tout) &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1102 </font></span><font color="#ff00cc">               &and; &not;( emptyID(blackBD_' s)(the ?cur_part_id,bbd_id) = Some OCCUPIED)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1103 </font></span><font color="#ff00cc">              &and; ( tout = 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1104 </font></span><font color="#ff00cc">        &#10230; ?s_m_r = (s , Some 0 ,Some NOT_AVAILABLE)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1105 </font></span>    <font color="#006699"><strong>unfolding</strong></font> READ_BLACKBOARD_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1106 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getBbdAttrByID s (the ?cur_part_id,bbd_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1107 </font></span><font color="#ff00cc">                &and; &not;((nat tout) &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1108 </font></span><font color="#ff00cc">               &and; &not;( emptyID(blackBD_' s)(the ?cur_part_id,bbd_id) = Some OCCUPIED)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1109 </font></span><font color="#ff00cc">              &and; &not;( tout = 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1110 </font></span><font color="#ff00cc">              &and; (getProcUserPLMtx s (the ?cur_part_id,the ?cur_proc_id) &ne; None &or; (the ?cur_proc_id) = HM_PROC_ID)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1111 </font></span><font color="#ff00cc">        &#10230;?s_m_r = (s , Some 0 ,Some INVALID_MODE)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1112 </font></span>    <font color="#006699"><strong>unfolding</strong></font> READ_BLACKBOARD_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1113 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getBbdAttrByID s (the ?cur_part_id,bbd_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1114 </font></span><font color="#ff00cc">                &and; &not;((nat tout) &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1115 </font></span><font color="#ff00cc">               &and; &not;( emptyID(blackBD_' s)(the ?cur_part_id,bbd_id) = Some OCCUPIED)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1116 </font></span><font color="#ff00cc">              &and; &not;( tout = 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1117 </font></span><font color="#ff00cc">              &and; &not;(getProcUserPLMtx s (the ?cur_part_id,the ?cur_proc_id) &ne; None &or; (the ?cur_proc_id) = HM_PROC_ID)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1118 </font></span><font color="#ff00cc">              &and; tout = -1</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1119 </font></span><font color="#ff00cc">          &#10230;?s_m_r =  (schedule_Abs ?s_setCntxt core_id , None , None) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1120 </font></span><font color="#ff00cc">          &and; ?getCntxt' &ne; None &and; ?getWaitDiff' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1121 </font></span>  <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1122 </font></span>    <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>assume</strong></font> <font color="#ff00cc">&quot;&not;(getBbdAttrByID s (the ?cur_part_id,bbd_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1123 </font></span><font color="#ff00cc">                &and; &not;((nat tout) &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1124 </font></span><font color="#ff00cc">               &and; &not;( emptyID(blackBD_' s)(the ?cur_part_id,bbd_id) = Some OCCUPIED)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1125 </font></span><font color="#ff00cc">              &and; &not;( tout = 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1126 </font></span><font color="#ff00cc">              &and; &not;(getProcUserPLMtx s (the ?cur_part_id,the ?cur_proc_id) &ne; None &or; (the ?cur_proc_id) = HM_PROC_ID)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1127 </font></span><font color="#ff00cc">              &and; tout = -1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1128 </font></span>      <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;?s_m_r =  (schedule_Abs ?s_setCntxt core_id , None , None)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1129 </font></span>        <font color="#006699"><strong>unfolding</strong></font> READ_BLACKBOARD_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1130 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?getCntxt' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1131 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> getCtx_sd calculation setCtx_Not_None<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1132 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?getWaitDiff' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1133 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> calculation<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> getWaitDiff_schedule_Abs getWaitDiff_setWaitDiff_NotNone waitDiff_setCntxt<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1134 </font></span>      <font color="#006699"><strong>ultimately</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?s_m_r =  (schedule_Abs ?s_setCntxt core_id , None , None) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1135 </font></span><font color="#ff00cc">          &and; ?getCntxt' &ne; None &and; ?getWaitDiff' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1136 </font></span>        <font color="#006699"><strong>by</strong></font> simp
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1137 </font></span>    <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1138 </font></span>    <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1139 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1140 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getBbdAttrByID s (the ?cur_part_id,bbd_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1141 </font></span><font color="#ff00cc">                &and; &not;((nat tout) &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1142 </font></span><font color="#ff00cc">               &and; &not;( emptyID(blackBD_' s)(the ?cur_part_id,bbd_id) = Some OCCUPIED)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1143 </font></span><font color="#ff00cc">              &and; &not;( tout = 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1144 </font></span><font color="#ff00cc">              &and; &not;(getProcUserPLMtx s (the ?cur_part_id,the ?cur_proc_id) &ne; None &or; (the ?cur_proc_id) = HM_PROC_ID)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1145 </font></span><font color="#ff00cc">              &and; &not;(tout = -1)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1146 </font></span><font color="#ff00cc">          &#10230;?s_m_r =  (schedule_Abs ?s_setCntxt1 core_id , None , None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1147 </font></span><font color="#ff00cc">          &and; ?getCntxt' &ne; None &and; ?getWaitDiff' &ne; None &and; ?getCterRsc' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1148 </font></span>  <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1149 </font></span>    <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>assume</strong></font> <font color="#ff00cc">&quot;&not;(getBbdAttrByID s (the ?cur_part_id,bbd_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1150 </font></span><font color="#ff00cc">                &and; &not;((nat tout) &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1151 </font></span><font color="#ff00cc">               &and; &not;( emptyID(blackBD_' s)(the ?cur_part_id,bbd_id) = Some OCCUPIED)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1152 </font></span><font color="#ff00cc">              &and; &not;( tout = 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1153 </font></span><font color="#ff00cc">              &and; &not;(getProcUserPLMtx s (the ?cur_part_id,the ?cur_proc_id) &ne; None &or; (the ?cur_proc_id) = HM_PROC_ID)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1154 </font></span><font color="#ff00cc">              &and; &not;(tout = -1)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1155 </font></span>      <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;?s_m_r =  (schedule_Abs ?s_setCntxt1 core_id , None , None)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1156 </font></span>        <font color="#006699"><strong>unfolding</strong></font> READ_BLACKBOARD_def <font color="#006699"><strong>by</strong></font> smt 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1157 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?getCntxt' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1158 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> getCtx_sd calculation setCtx_Not_None<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1159 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?getWaitDiff' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1160 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis calculation<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> fstI getWaitDiff_schedule_Abs setAddWaitDiff_NotNone waitDiff_setCntxt waitDiff_setCterRsc<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1161 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?getCterRsc' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1162 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> IntraCom_FT.getCterRsc_setCntxt calculation<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> getCterRsc_schedule_Abs getCterRsc_set_NotNone<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1163 </font></span>      <font color="#006699"><strong>ultimately</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?s_m_r =  (schedule_Abs ?s_setCntxt1 core_id , None , None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1164 </font></span><font color="#ff00cc">          &and; ?getCntxt' &ne; None &and; ?getWaitDiff' &ne; None &and; ?getCterRsc' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1165 </font></span>        <font color="#006699"><strong>by</strong></font> simp
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1166 </font></span>    <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1167 </font></span>    <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1168 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1169 </font></span>  <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1170 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1171 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1172 </font></span><font color="#006699"><strong>lemma</strong></font> READ_BLACKBOARD'<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1173 </font></span>  <font color="#ff00cc">&quot;let s_m_r =  READ_BLACKBOARD' s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1174 </font></span><font color="#ff00cc">      cur_proc_id = the(curProcID_Core s core_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1175 </font></span><font color="#ff00cc">      cur_part_id = the(curPartID s core_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1176 </font></span><font color="#ff00cc">      t_waitDiff = the(getWaitDiff s (cur_part_id,cur_proc_id));</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1177 </font></span><font color="#ff00cc">      Cntxt = the(getCntxt s (cur_part_id,cur_proc_id));</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1178 </font></span><font color="#ff00cc">      bbd_id = getRdBbdCntxtBbdID Cntxt;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1179 </font></span><font color="#ff00cc">      Cntxt' = getCntxt (fst s_m_r) (cur_part_id,cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1180 </font></span><font color="#ff00cc">      t_getCterRsc = getCterRsc s (cur_part_id,cur_proc_id) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1181 </font></span><font color="#ff00cc">    if t_waitDiff = -1 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1182 </font></span><font color="#ff00cc">         let msg = the(readBbdMsg s (cur_part_id,bbd_id));</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1183 </font></span><font color="#ff00cc">             mlength = MSG_SZ msg in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1184 </font></span><font color="#ff00cc">        s_m_r =(resetCntxt s (cur_part_id,cur_proc_id), mlength , NO_ERROR)&and; Cntxt' = None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1185 </font></span><font color="#ff00cc">    else</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1186 </font></span><font color="#ff00cc">        if the t_getCterRsc  &lt;= Int.int(timer_' s) then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1187 </font></span><font color="#ff00cc">          s_m_r = (resetCntxt s (cur_part_id,cur_proc_id) ,0 , TIMED_OUT)&and; Cntxt' = None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1188 </font></span><font color="#ff00cc">        else </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1189 </font></span><font color="#ff00cc">           let mes = the(readBbdMsg s (cur_part_id,bbd_id));</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1190 </font></span><font color="#ff00cc">               mlength = MSG_SZ mes in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1191 </font></span><font color="#ff00cc">           s_m_r =(resetCntxt s (cur_part_id,cur_proc_id), mlength , NO_ERROR)&and; Cntxt' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1192 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1193 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_m_r <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;READ_BLACKBOARD' s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1194 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_proc_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;the(curProcID_Core s core_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1195 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;the(curPartID s core_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1196 </font></span>  <font color="#006699"><strong>let</strong></font> ?t_waitDiff <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;the(getWaitDiff s (?cur_part_id,?cur_proc_id))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1197 </font></span>  <font color="#006699"><strong>let</strong></font> ?Cntxt <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;the(getCntxt s (?cur_part_id,?cur_proc_id))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1198 </font></span>  <font color="#006699"><strong>let</strong></font> ?bbd_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getRdBbdCntxtBbdID ?Cntxt&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1199 </font></span>  <font color="#006699"><strong>let</strong></font> ?Cntxt' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getCntxt (fst ?s_m_r) (?cur_part_id,?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1200 </font></span>  <font color="#006699"><strong>let</strong></font> ?t_getCterRsc <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getCterRsc s (?cur_part_id,?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1201 </font></span>  <font color="#006699"><strong>let</strong></font> ?msg <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;the(readBbdMsg s (?cur_part_id,?bbd_id))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1202 </font></span>  <font color="#006699"><strong>let</strong></font> ?mlength <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;MSG_SZ ?msg&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1203 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?t_waitDiff = -1 &#10230;?s_m_r =(resetCntxt s (?cur_part_id,?cur_proc_id), ?mlength , NO_ERROR)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1204 </font></span><font color="#ff00cc">        &and; ?Cntxt' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1205 </font></span>  <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1206 </font></span>    <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>assume</strong></font> <font color="#ff00cc">&quot;?t_waitDiff = -1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1207 </font></span>      <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;?s_m_r =(resetCntxt s (?cur_part_id,?cur_proc_id), ?mlength , NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1208 </font></span>        <font color="#006699"><strong>unfolding</strong></font> READ_BLACKBOARD'_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1209 </font></span>      <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;?Cntxt' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1210 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> getCtx_rst_None<font color="#000000"><strong>)</strong></font>    
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1211 </font></span>    <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1212 </font></span>    <font color="#0099ff"><strong>thus</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1213 </font></span>      <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> READ_BLACKBOARD'_def<font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1214 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1215 </font></span>  <font color="#006699"><strong>hence</strong></font>  <font color="#ff00cc">&quot;&not;(?t_waitDiff = -1)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1216 </font></span><font color="#ff00cc">      &and; (the ?t_getCterRsc  &lt;= Int.int(timer_' s))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1217 </font></span><font color="#ff00cc">       &#10230;?s_m_r = (resetCntxt s (?cur_part_id,?cur_proc_id) ,0 , TIMED_OUT)&and; ?Cntxt' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1218 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> getCtx_rst_None READ_BLACKBOARD'_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1219 </font></span>  <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;&not;(?t_waitDiff = -1)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1220 </font></span><font color="#ff00cc">      &and; &not;(the ?t_getCterRsc  &lt;= Int.int(timer_' s))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1221 </font></span><font color="#ff00cc">       &#10230;?s_m_r =(resetCntxt s (?cur_part_id,?cur_proc_id), ?mlength , NO_ERROR)&and; ?Cntxt' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1222 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> Process_FT.getCtx_rst_None READ_BLACKBOARD'_def fst_conv<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1223 </font></span>  <font color="#0099ff"><strong>thus</strong></font> ?thesis 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1224 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis <font color="#6600cc">&lsaquo;</font><font color="#6600cc">t</font><font color="#6600cc">h</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">g</font><font color="#6600cc">e</font><font color="#6600cc">t</font><font color="#6600cc">W</font><font color="#6600cc">a</font><font color="#6600cc">i</font><font color="#6600cc">t</font><font color="#6600cc">D</font><font color="#6600cc">i</font><font color="#6600cc">f</font><font color="#6600cc">f</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">t</font><font color="#6600cc">h</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">c</font><font color="#6600cc">u</font><font color="#6600cc">r</font><font color="#6600cc">P</font><font color="#6600cc">a</font><font color="#6600cc">r</font><font color="#6600cc">t</font><font color="#6600cc">I</font><font color="#6600cc">D</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc"> </font><font color="#6600cc">c</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc">_</font><font color="#6600cc">i</font><font color="#6600cc">d</font><font color="#6600cc">)</font><font color="#6600cc">,</font><font color="#6600cc"> </font><font color="#6600cc">t</font><font color="#6600cc">h</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">c</font><font color="#6600cc">u</font><font color="#6600cc">r</font><font color="#6600cc">P</font><font color="#6600cc">r</font><font color="#6600cc">o</font><font color="#6600cc">c</font><font color="#6600cc">I</font><font color="#6600cc">D</font><font color="#6600cc">_</font><font color="#6600cc">C</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc"> </font><font color="#6600cc">c</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc">_</font><font color="#6600cc">i</font><font color="#6600cc">d</font><font color="#6600cc">)</font><font color="#6600cc">)</font><font color="#6600cc">)</font><font color="#6600cc"> </font><font color="#6600cc">=</font><font color="#6600cc"> </font><font color="#6600cc">-</font><font color="#6600cc"> </font><font color="#6600cc">1</font><font color="#6600cc"> </font><font color="#6600cc">&#10230;</font><font color="#6600cc"> </font><font color="#6600cc">R</font><font color="#6600cc">E</font><font color="#6600cc">A</font><font color="#6600cc">D</font><font color="#6600cc">_</font><font color="#6600cc">B</font><font color="#6600cc">L</font><font color="#6600cc">A</font><font color="#6600cc">C</font><font color="#6600cc">K</font><font color="#6600cc">B</font><font color="#6600cc">O</font><font color="#6600cc">A</font><font color="#6600cc">R</font><font color="#6600cc">D</font><font color="#6600cc">'</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc"> </font><font color="#6600cc">c</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc">_</font><font color="#6600cc">i</font><font color="#6600cc">d</font><font color="#6600cc"> </font><font color="#6600cc">=</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc">s</font><font color="#6600cc">e</font><font color="#6600cc">t</font><font color="#6600cc">C</font><font color="#6600cc">n</font><font color="#6600cc">t</font><font color="#6600cc">x</font><font color="#6600cc">t</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">t</font><font color="#6600cc">h</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">c</font><font color="#6600cc">u</font><font color="#6600cc">r</font><font color="#6600cc">P</font><font color="#6600cc">a</font><font color="#6600cc">r</font><font color="#6600cc">t</font><font color="#6600cc">I</font><font color="#6600cc">D</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc"> </font><font color="#6600cc">c</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc">_</font><font color="#6600cc">i</font><font color="#6600cc">d</font><font color="#6600cc">)</font><font color="#6600cc">,</font><font color="#6600cc"> </font><font color="#6600cc">t</font><font color="#6600cc">h</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">c</font><font color="#6600cc">u</font><font color="#6600cc">r</font><font color="#6600cc">P</font><font color="#6600cc">r</font><font color="#6600cc">o</font><font color="#6600cc">c</font><font color="#6600cc">I</font><font color="#6600cc">D</font><font color="#6600cc">_</font><font color="#6600cc">C</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc"> </font><font color="#6600cc">c</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc">_</font><font color="#6600cc">i</font><font color="#6600cc">d</font><font color="#6600cc">)</font><font color="#6600cc">)</font><font color="#6600cc">,</font><font color="#6600cc"> </font><font color="#6600cc">M</font><font color="#6600cc">S</font><font color="#6600cc">G</font><font color="#6600cc">_</font><font color="#6600cc">S</font><font color="#6600cc">Z</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">t</font><font color="#6600cc">h</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc">a</font><font color="#6600cc">d</font><font color="#6600cc">B</font><font color="#6600cc">b</font><font color="#6600cc">d</font><font color="#6600cc">M</font><font color="#6600cc">s</font><font color="#6600cc">g</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">t</font><font color="#6600cc">h</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">c</font><font color="#6600cc">u</font><font color="#6600cc">r</font><font color="#6600cc">P</font><font color="#6600cc">a</font><font color="#6600cc">r</font><font color="#6600cc">t</font><font color="#6600cc">I</font><font color="#6600cc">D</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc"> </font><font color="#6600cc">c</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc">_</font><font color="#6600cc">i</font><font color="#6600cc">d</font><font color="#6600cc">)</font><font color="#6600cc">,</font><font color="#6600cc"> </font><font color="#6600cc">g</font><font color="#6600cc">e</font><font color="#6600cc">t</font><font color="#6600cc">R</font><font color="#6600cc">d</font><font color="#6600cc">B</font><font color="#6600cc">b</font><font color="#6600cc">d</font><font color="#6600cc">C</font><font color="#6600cc">n</font><font color="#6600cc">t</font><font color="#6600cc">x</font><font color="#6600cc">t</font><font color="#6600cc">B</font><font color="#6600cc">b</font><font color="#6600cc">d</font><font color="#6600cc">I</font><font color="#6600cc">D</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">t</font><font color="#6600cc">h</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">g</font><font color="#6600cc">e</font><font color="#6600cc">t</font><font color="#6600cc">C</font><font color="#6600cc">n</font><font color="#6600cc">t</font><font color="#6600cc">x</font><font color="#6600cc">t</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">t</font><font color="#6600cc">h</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">c</font><font color="#6600cc">u</font><font color="#6600cc">r</font><font color="#6600cc">P</font><font color="#6600cc">a</font><font color="#6600cc">r</font><font color="#6600cc">t</font><font color="#6600cc">I</font><font color="#6600cc">D</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc"> </font><font color="#6600cc">c</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc">_</font><font color="#6600cc">i</font><font color="#6600cc">d</font><font color="#6600cc">)</font><font color="#6600cc">,</font><font color="#6600cc"> </font><font color="#6600cc">t</font><font color="#6600cc">h</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">c</font><font color="#6600cc">u</font><font color="#6600cc">r</font><font color="#6600cc">P</font><font color="#6600cc">r</font><font color="#6600cc">o</font><font color="#6600cc">c</font><font color="#6600cc">I</font><font color="#6600cc">D</font><font color="#6600cc">_</font><font color="#6600cc">C</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc"> </font><font color="#6600cc">c</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc">_</font><font color="#6600cc">i</font><font color="#6600cc">d</font><font color="#6600cc">)</font><font color="#6600cc">)</font><font color="#6600cc">)</font><font color="#6600cc">)</font><font color="#6600cc">)</font><font color="#6600cc">)</font><font color="#6600cc">)</font><font color="#6600cc">,</font><font color="#6600cc"> </font><font color="#6600cc">N</font><font color="#6600cc">O</font><font color="#6600cc">_</font><font color="#6600cc">E</font><font color="#6600cc">R</font><font color="#6600cc">R</font><font color="#6600cc">O</font><font color="#6600cc">R</font><font color="#6600cc">)</font><font color="#6600cc"> </font><font color="#6600cc">&and;</font><font color="#6600cc"> </font><font color="#6600cc">g</font><font color="#6600cc">e</font><font color="#6600cc">t</font><font color="#6600cc">C</font><font color="#6600cc">n</font><font color="#6600cc">t</font><font color="#6600cc">x</font><font color="#6600cc">t</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">f</font><font color="#6600cc">s</font><font color="#6600cc">t</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">R</font><font color="#6600cc">E</font><font color="#6600cc">A</font><font color="#6600cc">D</font><font color="#6600cc">_</font><font color="#6600cc">B</font><font color="#6600cc">L</font><font color="#6600cc">A</font><font color="#6600cc">C</font><font color="#6600cc">K</font><font color="#6600cc">B</font><font color="#6600cc">O</font><font color="#6600cc">A</font><font color="#6600cc">R</font><font color="#6600cc">D</font><font color="#6600cc">'</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc"> </font><font color="#6600cc">c</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc">_</font><font color="#6600cc">i</font><font color="#6600cc">d</font><font color="#6600cc">)</font><font color="#6600cc">)</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">t</font><font color="#6600cc">h</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">c</font><font color="#6600cc">u</font><font color="#6600cc">r</font><font color="#6600cc">P</font><font color="#6600cc">a</font><font color="#6600cc">r</font><font color="#6600cc">t</font><font color="#6600cc">I</font><font color="#6600cc">D</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc"> </font><font color="#6600cc">c</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc">_</font><font color="#6600cc">i</font><font color="#6600cc">d</font><font color="#6600cc">)</font><font color="#6600cc">,</font><font color="#6600cc"> </font><font color="#6600cc">t</font><font color="#6600cc">h</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">c</font><font color="#6600cc">u</font><font color="#6600cc">r</font><font color="#6600cc">P</font><font color="#6600cc">r</font><font color="#6600cc">o</font><font color="#6600cc">c</font><font color="#6600cc">I</font><font color="#6600cc">D</font><font color="#6600cc">_</font><font color="#6600cc">C</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc"> </font><font color="#6600cc">c</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc">_</font><font color="#6600cc">i</font><font color="#6600cc">d</font><font color="#6600cc">)</font><font color="#6600cc">)</font><font color="#6600cc"> </font><font color="#6600cc">=</font><font color="#6600cc"> </font><font color="#6600cc">N</font><font color="#6600cc">o</font><font color="#6600cc">n</font><font color="#6600cc">e</font><font color="#6600cc">&rsaquo;</font> <font color="#6600cc">&lsaquo;</font><font color="#6600cc">t</font><font color="#6600cc">h</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">g</font><font color="#6600cc">e</font><font color="#6600cc">t</font><font color="#6600cc">W</font><font color="#6600cc">a</font><font color="#6600cc">i</font><font color="#6600cc">t</font><font color="#6600cc">D</font><font color="#6600cc">i</font><font color="#6600cc">f</font><font color="#6600cc">f</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">t</font><font color="#6600cc">h</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">c</font><font color="#6600cc">u</font><font color="#6600cc">r</font><font color="#6600cc">P</font><font color="#6600cc">a</font><font color="#6600cc">r</font><font color="#6600cc">t</font><font color="#6600cc">I</font><font color="#6600cc">D</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc"> </font><font color="#6600cc">c</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc">_</font><font color="#6600cc">i</font><font color="#6600cc">d</font><font color="#6600cc">)</font><font color="#6600cc">,</font><font color="#6600cc"> </font><font color="#6600cc">t</font><font color="#6600cc">h</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">c</font><font color="#6600cc">u</font><font color="#6600cc">r</font><font color="#6600cc">P</font><font color="#6600cc">r</font><font color="#6600cc">o</font><font color="#6600cc">c</font><font color="#6600cc">I</font><font color="#6600cc">D</font><font color="#6600cc">_</font><font color="#6600cc">C</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc"> </font><font color="#6600cc">c</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc">_</font><font color="#6600cc">i</font><font color="#6600cc">d</font><font color="#6600cc">)</font><font color="#6600cc">)</font><font color="#6600cc">)</font><font color="#6600cc"> </font><font color="#6600cc">&ne;</font><font color="#6600cc"> </font><font color="#6600cc">-</font><font color="#6600cc"> </font><font color="#6600cc">1</font><font color="#6600cc"> </font><font color="#6600cc">&and;</font><font color="#6600cc"> </font><font color="#6600cc">t</font><font color="#6600cc">h</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">g</font><font color="#6600cc">e</font><font color="#6600cc">t</font><font color="#6600cc">C</font><font color="#6600cc">t</font><font color="#6600cc">e</font><font color="#6600cc">r</font><font color="#6600cc">R</font><font color="#6600cc">s</font><font color="#6600cc">c</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">t</font><font color="#6600cc">h</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">c</font><font color="#6600cc">u</font><font color="#6600cc">r</font><font color="#6600cc">P</font><font color="#6600cc">a</font><font color="#6600cc">r</font><font color="#6600cc">t</font><font color="#6600cc">I</font><font color="#6600cc">D</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc"> </font><font color="#6600cc">c</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc">_</font><font color="#6600cc">i</font><font color="#6600cc">d</font><font color="#6600cc">)</font><font color="#6600cc">,</font><font color="#6600cc"> </font><font color="#6600cc">t</font><font color="#6600cc">h</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">c</font><font color="#6600cc">u</font><font color="#6600cc">r</font><font color="#6600cc">P</font><font color="#6600cc">r</font><font color="#6600cc">o</font><font color="#6600cc">c</font><font color="#6600cc">I</font><font color="#6600cc">D</font><font color="#6600cc">_</font><font color="#6600cc">C</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc"> </font><font color="#6600cc">c</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc">_</font><font color="#6600cc">i</font><font color="#6600cc">d</font><font color="#6600cc">)</font><font color="#6600cc">)</font><font color="#6600cc">)</font><font color="#6600cc"> </font><font color="#6600cc">&le;</font><font color="#6600cc"> </font><font color="#6600cc">i</font><font color="#6600cc">n</font><font color="#6600cc">t</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">t</font><font color="#6600cc">i</font><font color="#6600cc">m</font><font color="#6600cc">e</font><font color="#6600cc">r</font><font color="#6600cc">_</font><font color="#6600cc">'</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc">)</font><font color="#6600cc"> </font><font color="#6600cc">&#10230;</font><font color="#6600cc"> </font><font color="#6600cc">R</font><font color="#6600cc">E</font><font color="#6600cc">A</font><font color="#6600cc">D</font><font color="#6600cc">_</font><font color="#6600cc">B</font><font color="#6600cc">L</font><font color="#6600cc">A</font><font color="#6600cc">C</font><font color="#6600cc">K</font><font color="#6600cc">B</font><font color="#6600cc">O</font><font color="#6600cc">A</font><font color="#6600cc">R</font><font color="#6600cc">D</font><font color="#6600cc">'</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc"> </font><font color="#6600cc">c</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc">_</font><font color="#6600cc">i</font><font color="#6600cc">d</font><font color="#6600cc"> </font><font color="#6600cc">=</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc">s</font><font color="#6600cc">e</font><font color="#6600cc">t</font><font color="#6600cc">C</font><font color="#6600cc">n</font><font color="#6600cc">t</font><font color="#6600cc">x</font><font color="#6600cc">t</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">t</font><font color="#6600cc">h</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">c</font><font color="#6600cc">u</font><font color="#6600cc">r</font><font color="#6600cc">P</font><font color="#6600cc">a</font><font color="#6600cc">r</font><font color="#6600cc">t</font><font color="#6600cc">I</font><font color="#6600cc">D</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc"> </font><font color="#6600cc">c</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc">_</font><font color="#6600cc">i</font><font color="#6600cc">d</font><font color="#6600cc">)</font><font color="#6600cc">,</font><font color="#6600cc"> </font><font color="#6600cc">t</font><font color="#6600cc">h</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">c</font><font color="#6600cc">u</font><font color="#6600cc">r</font><font color="#6600cc">P</font><font color="#6600cc">r</font><font color="#6600cc">o</font><font color="#6600cc">c</font><font color="#6600cc">I</font><font color="#6600cc">D</font><font color="#6600cc">_</font><font color="#6600cc">C</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc"> </font><font color="#6600cc">c</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc">_</font><font color="#6600cc">i</font><font color="#6600cc">d</font><font color="#6600cc">)</font><font color="#6600cc">)</font><font color="#6600cc">,</font><font color="#6600cc"> </font><font color="#6600cc">0</font><font color="#6600cc">,</font><font color="#6600cc"> </font><font color="#6600cc">T</font><font color="#6600cc">I</font><font color="#6600cc">M</font><font color="#6600cc">E</font><font color="#6600cc">D</font><font color="#6600cc">_</font><font color="#6600cc">O</font><font color="#6600cc">U</font><font color="#6600cc">T</font><font color="#6600cc">)</font><font color="#6600cc"> </font><font color="#6600cc">&and;</font><font color="#6600cc"> </font><font color="#6600cc">g</font><font color="#6600cc">e</font><font color="#6600cc">t</font><font color="#6600cc">C</font><font color="#6600cc">n</font><font color="#6600cc">t</font><font color="#6600cc">x</font><font color="#6600cc">t</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">f</font><font color="#6600cc">s</font><font color="#6600cc">t</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">R</font><font color="#6600cc">E</font><font color="#6600cc">A</font><font color="#6600cc">D</font><font color="#6600cc">_</font><font color="#6600cc">B</font><font color="#6600cc">L</font><font color="#6600cc">A</font><font color="#6600cc">C</font><font color="#6600cc">K</font><font color="#6600cc">B</font><font color="#6600cc">O</font><font color="#6600cc">A</font><font color="#6600cc">R</font><font color="#6600cc">D</font><font color="#6600cc">'</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc"> </font><font color="#6600cc">c</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc">_</font><font color="#6600cc">i</font><font color="#6600cc">d</font><font color="#6600cc">)</font><font color="#6600cc">)</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">t</font><font color="#6600cc">h</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">c</font><font color="#6600cc">u</font><font color="#6600cc">r</font><font color="#6600cc">P</font><font color="#6600cc">a</font><font color="#6600cc">r</font><font color="#6600cc">t</font><font color="#6600cc">I</font><font color="#6600cc">D</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc"> </font><font color="#6600cc">c</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc">_</font><font color="#6600cc">i</font><font color="#6600cc">d</font><font color="#6600cc">)</font><font color="#6600cc">,</font><font color="#6600cc"> </font><font color="#6600cc">t</font><font color="#6600cc">h</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">(</font><font color="#6600cc">c</font><font color="#6600cc">u</font><font color="#6600cc">r</font><font color="#6600cc">P</font><font color="#6600cc">r</font><font color="#6600cc">o</font><font color="#6600cc">c</font><font color="#6600cc">I</font><font color="#6600cc">D</font><font color="#6600cc">_</font><font color="#6600cc">C</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc"> </font><font color="#6600cc">s</font><font color="#6600cc"> </font><font color="#6600cc">c</font><font color="#6600cc">o</font><font color="#6600cc">r</font><font color="#6600cc">e</font><font color="#6600cc">_</font><font color="#6600cc">i</font><font color="#6600cc">d</font><font color="#6600cc">)</font><font color="#6600cc">)</font><font color="#6600cc"> </font><font color="#6600cc">=</font><font color="#6600cc"> </font><font color="#6600cc">N</font><font color="#6600cc">o</font><font color="#6600cc">n</font><font color="#6600cc">e</font><font color="#6600cc">&rsaquo;</font><font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1225 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1226 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1227 </font></span><font color="#006699"><strong>lemma</strong></font> CLEAR_BLACKBOARD<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1228 </font></span>  <font color="#ff00cc">&quot;let s_r = CLEAR_BLACKBOARD s core_id bbd_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1229 </font></span><font color="#ff00cc">      cur_part_id = curPartID s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1230 </font></span><font color="#ff00cc">      s_setEmptyId = setEmptyId s (the cur_part_id,bbd_id) EMPTY;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1231 </font></span><font color="#ff00cc">      s_clearBbdMsg =  clearBbdMsg s_setEmptyId (the cur_part_id,bbd_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1232 </font></span><font color="#ff00cc">      emptyId' = getEmptyId (fst s_r) (the cur_part_id,bbd_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1233 </font></span><font color="#ff00cc">      bbdMsg' =  readBbdMsg (fst s_r) (the cur_part_id,bbd_id) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1234 </font></span><font color="#ff00cc">  if getBbdAttrByID s (the cur_part_id,bbd_id) = None then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1235 </font></span><font color="#ff00cc">      s_r =(s , INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1236 </font></span><font color="#ff00cc">  else </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1237 </font></span><font color="#ff00cc">      s_r =(s_clearBbdMsg , NO_ERROR) &and; emptyId' = Some EMPTY &and; bbdMsg' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1238 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1239 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_r <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;CLEAR_BLACKBOARD s core_id bbd_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1240 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curPartID s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1241 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setEmptyId <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setEmptyId s (the ?cur_part_id,bbd_id) EMPTY&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1242 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_clearBbdMsg <font color="#000000"><strong>=</strong></font>  <font color="#ff00cc">&quot;clearBbdMsg ?s_setEmptyId (the ?cur_part_id,bbd_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1243 </font></span>  <font color="#006699"><strong>let</strong></font> ?emptyId' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getEmptyId (fst ?s_r) (the ?cur_part_id,bbd_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1244 </font></span>  <font color="#006699"><strong>let</strong></font> ?bbdMsg' <font color="#000000"><strong>=</strong></font>  <font color="#ff00cc">&quot;readBbdMsg (fst ?s_r) (the ?cur_part_id,bbd_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1245 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getBbdAttrByID s (the ?cur_part_id,bbd_id) = None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1246 </font></span><font color="#ff00cc">        &#10230;?s_r =(s , INVALID_PARAM)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1247 </font></span>    <font color="#006699"><strong>unfolding</strong></font> CLEAR_BLACKBOARD_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1248 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getBbdAttrByID s (the ?cur_part_id,bbd_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1249 </font></span><font color="#ff00cc">        &#10230; ?s_r =(?s_clearBbdMsg , NO_ERROR) &and; ?emptyId' = Some EMPTY &and; ?bbdMsg' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1250 </font></span>  <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1251 </font></span>    <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>assume</strong></font> <font color="#ff00cc">&quot;&not;(getBbdAttrByID s (the ?cur_part_id,bbd_id) = None)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1252 </font></span>      <font color="#006699"><strong>hence</strong></font> a1<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?s_r =(?s_clearBbdMsg , NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1253 </font></span>        <font color="#006699"><strong>unfolding</strong></font> CLEAR_BLACKBOARD_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1254 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?emptyId' = Some EMPTY&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1255 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis calculation fst_conv getEmptyId_clearBbdMsg getEmptyId_set<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1256 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?bbdMsg' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1257 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>metis a1 fstI readBbdMsg_clearNone<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1258 </font></span>      <font color="#006699"><strong>ultimately</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?s_r =(?s_clearBbdMsg , NO_ERROR) &and; ?emptyId' = Some EMPTY &and; ?bbdMsg' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1259 </font></span>        <font color="#006699"><strong>by</strong></font> metis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1260 </font></span>    <font color="#006699"><strong>}</strong></font>         
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1261 </font></span>    <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> metis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1262 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1263 </font></span>  <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1264 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1265 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1266 </font></span><font color="#006699"><strong>lemma</strong></font> GET_BLACKBOARD_ID<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1267 </font></span>  <font color="#ff00cc">&quot;let  s_b_r = GET_BLACKBOARD_ID s core_id bbd_name;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1268 </font></span><font color="#ff00cc">        cur_part_id = curPartID s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1269 </font></span><font color="#ff00cc">        bbd_id_op = getBbdIDByName s (the cur_part_id) bbd_name in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1270 </font></span><font color="#ff00cc">   if bbd_id_op = None then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1271 </font></span><font color="#ff00cc">      s_b_r = (s , None,INVALID_CONFIG)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1272 </font></span><font color="#ff00cc">   else </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1273 </font></span><font color="#ff00cc">      s_b_r = (s, bbd_id_op,NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1274 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1275 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_b_r <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;GET_BLACKBOARD_ID s core_id bbd_name&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1276 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curPartID s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1277 </font></span>  <font color="#006699"><strong>let</strong></font> ?bbd_id_op <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getBbdIDByName s (the ?cur_part_id) bbd_name&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1278 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?bbd_id_op = None&#10230;?s_b_r = (s , None,INVALID_CONFIG)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1279 </font></span>    <font color="#006699"><strong>unfolding</strong></font> GET_BLACKBOARD_ID_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1280 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;?bbd_id_op = None&#10230;?s_b_r = (s, ?bbd_id_op,NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1281 </font></span>    <font color="#006699"><strong>unfolding</strong></font> GET_BLACKBOARD_ID_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1282 </font></span>  <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1283 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1284 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1285 </font></span><font color="#006699"><strong>lemma</strong></font> GET_BLACKBOARD_STATUS<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1286 </font></span>  <font color="#ff00cc">&quot;let s_bstus_r = GET_BLACKBOARD_STATUS s core_id bbd_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1287 </font></span><font color="#ff00cc">      cur_part_id = curPartID s core_id in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1288 </font></span><font color="#ff00cc">  if getBbdAttrByID s (the cur_part_id,bbd_id) = None  then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1289 </font></span><font color="#ff00cc">      s_bstus_r =(s, None ,INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1290 </font></span><font color="#ff00cc">  else </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1291 </font></span><font color="#ff00cc">      s_bstus_r =(s , Some (getBbdStatus s (the cur_part_id,bbd_id)) , NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1292 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1293 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_bstus_r <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;GET_BLACKBOARD_STATUS s core_id bbd_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1294 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curPartID s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1295 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1296 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getBbdAttrByID s (the ?cur_part_id,bbd_id) = None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1297 </font></span><font color="#ff00cc">      &#10230; ?s_bstus_r =(s, None ,INVALID_PARAM)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1298 </font></span>    <font color="#006699"><strong>unfolding</strong></font> GET_BLACKBOARD_STATUS_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1299 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;getBbdAttrByID s (the ?cur_part_id,bbd_id) = None  </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1300 </font></span><font color="#ff00cc">     &#10230; ?s_bstus_r =(s , Some (getBbdStatus s (the ?cur_part_id,bbd_id)) , NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1301 </font></span>    <font color="#006699"><strong>unfolding</strong></font> GET_BLACKBOARD_STATUS_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1302 </font></span>  <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1303 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1304 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1305 </font></span><font color="#006699"><strong>lemma</strong></font> CREATE_SEMAPHORE<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1306 </font></span>  <font color="#ff00cc">&quot;let s_semid_r = CREATE_SEMAPHORE s core_id userMtx_attr; </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1307 </font></span><font color="#ff00cc">      cur_part_id = curPartID s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1308 </font></span><font color="#ff00cc">      sema_name = USER_SEMA_ATTR_TYPE.SEMA_NAME userMtx_attr;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1309 </font></span><font color="#ff00cc">      curVal = USER_SEMA_ATTR_TYPE.CUR_VALUE userMtx_attr;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1310 </font></span><font color="#ff00cc">      MaxNVal = USER_SEMA_ATTR_TYPE.MAX_VALUE userMtx_attr;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1311 </font></span><font color="#ff00cc">      que_discip = USER_SEMA_ATTR_TYPE.QUE_DISCIPLINE userMtx_attr;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1312 </font></span><font color="#ff00cc">      created_semas = size_set (getUserSemasOfPart s (the cur_part_id)) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1313 </font></span><font color="#ff00cc">    if  created_semas &ge; MAX_NUM_OF_SEMA then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1314 </font></span><font color="#ff00cc">        s_semid_r = (s , None , INVALID_CONFIG )</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1315 </font></span><font color="#ff00cc">    else if getUserSemaIDByName s (the cur_part_id) sema_name &ne; None then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1316 </font></span><font color="#ff00cc">        s_semid_r = (s , None , NO_ACTION)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1317 </font></span><font color="#ff00cc">    else if curVal &gt;  MAX_SEMA_VALUE &or; curVal &lt; 0  then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1318 </font></span><font color="#ff00cc">        s_semid_r = (s , None , INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1319 </font></span><font color="#ff00cc">    else if  MaxNVal &gt; MAX_SEMA_VALUE &or; MaxNVal &lt;0 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1320 </font></span><font color="#ff00cc">        s_semid_r = (s , None , INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1321 </font></span><font color="#ff00cc">    else if curVal &gt; MaxNVal then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1322 </font></span><font color="#ff00cc">        s_semid_r = (s , None , INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1323 </font></span><font color="#ff00cc">    else if getPartMode s (the cur_part_id) = Some NORMAL then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1324 </font></span><font color="#ff00cc">        s_semid_r = (s , None , INVALID_MODE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1325 </font></span><font color="#ff00cc">    else </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1326 </font></span><font color="#ff00cc">        (let sema_id = newSemaID s (the cur_part_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1327 </font></span><font color="#ff00cc">            s_new = createUserSema s (the cur_part_id)  sema_id userMtx_attr;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1328 </font></span><font color="#ff00cc">            s_initSema = initSema s_new (the cur_part_id,sema_id) curVal MaxNVal in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1329 </font></span><font color="#ff00cc">         s_semid_r = (s_initSema ,Some sema_id , NO_ERROR)  )&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1330 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1331 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_semid_r <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;CREATE_SEMAPHORE s core_id userMtx_attr&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1332 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curPartID s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1333 </font></span>  <font color="#006699"><strong>let</strong></font> ?sema_name <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;USER_SEMA_ATTR_TYPE.SEMA_NAME userMtx_attr&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1334 </font></span>  <font color="#006699"><strong>let</strong></font> ?curVal <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;USER_SEMA_ATTR_TYPE.CUR_VALUE userMtx_attr&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1335 </font></span>  <font color="#006699"><strong>let</strong></font> ?MaxNVal <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;USER_SEMA_ATTR_TYPE.MAX_VALUE userMtx_attr&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1336 </font></span>  <font color="#006699"><strong>let</strong></font> ?que_discip <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;USER_SEMA_ATTR_TYPE.QUE_DISCIPLINE userMtx_attr&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1337 </font></span>  <font color="#006699"><strong>let</strong></font> ?created_semas <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;size_set (getUserSemasOfPart s (the ?cur_part_id))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1338 </font></span>  <font color="#006699"><strong>let</strong></font> ?sema_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;newSemaID s (the ?cur_part_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1339 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_new <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;createUserSema s (the ?cur_part_id)  ?sema_id userMtx_attr&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1340 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_initSema <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;initSema ?s_new (the ?cur_part_id,?sema_id) ?curVal ?MaxNVal&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1341 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?created_semas &ge; MAX_NUM_OF_SEMA</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1342 </font></span><font color="#ff00cc">      &#10230; ?s_semid_r = (s , None , INVALID_CONFIG)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1343 </font></span>    <font color="#006699"><strong>unfolding</strong></font> CREATE_SEMAPHORE_def
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1344 </font></span>    <font color="#006699"><strong>by</strong></font> presburger
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1345 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(?created_semas &ge; MAX_NUM_OF_SEMA)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1346 </font></span><font color="#ff00cc">               &and; getUserSemaIDByName s (the ?cur_part_id) ?sema_name &ne; None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1347 </font></span><font color="#ff00cc">      &#10230; ?s_semid_r = (s , None , NO_ACTION)&quot;</font>  
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1348 </font></span>    <font color="#006699"><strong>unfolding</strong></font> CREATE_SEMAPHORE_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1349 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(?created_semas &ge; MAX_NUM_OF_SEMA)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1350 </font></span><font color="#ff00cc">               &and; &not;(getUserSemaIDByName s (the ?cur_part_id) ?sema_name &ne; None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1351 </font></span><font color="#ff00cc">              &and; ?curVal &gt;  MAX_SEMA_VALUE &or; ?curVal &lt; 0</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1352 </font></span><font color="#ff00cc">      &#10230;  ?s_semid_r = (s , None , INVALID_PARAM)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1353 </font></span>    <font color="#006699"><strong>unfolding</strong></font> CREATE_SEMAPHORE_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1354 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(?created_semas &ge; MAX_NUM_OF_SEMA)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1355 </font></span><font color="#ff00cc">               &and; &not;(getUserSemaIDByName s (the ?cur_part_id) ?sema_name &ne; None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1356 </font></span><font color="#ff00cc">              &and; &not;(?curVal &gt;  MAX_SEMA_VALUE &or; ?curVal &lt; 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1357 </font></span><font color="#ff00cc">              &and; ?MaxNVal &gt; MAX_SEMA_VALUE &or; ?MaxNVal &lt;0</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1358 </font></span><font color="#ff00cc">      &#10230; ?s_semid_r = (s , None , INVALID_PARAM)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1359 </font></span>    <font color="#006699"><strong>unfolding</strong></font> CREATE_SEMAPHORE_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1360 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(?created_semas &ge; MAX_NUM_OF_SEMA)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1361 </font></span><font color="#ff00cc">               &and; &not;(getUserSemaIDByName s (the ?cur_part_id) ?sema_name &ne; None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1362 </font></span><font color="#ff00cc">              &and; &not;(?curVal &gt;  MAX_SEMA_VALUE &or; ?curVal &lt; 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1363 </font></span><font color="#ff00cc">              &and; &not;(?MaxNVal &gt; MAX_SEMA_VALUE &or; ?MaxNVal &lt;0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1364 </font></span><font color="#ff00cc">              &and; ?curVal &gt; ?MaxNVal</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1365 </font></span><font color="#ff00cc">      &#10230; ?s_semid_r = (s , None , INVALID_PARAM)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1366 </font></span>    <font color="#006699"><strong>unfolding</strong></font> CREATE_SEMAPHORE_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1367 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(?created_semas &ge; MAX_NUM_OF_SEMA)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1368 </font></span><font color="#ff00cc">               &and; &not;(getUserSemaIDByName s (the ?cur_part_id) ?sema_name &ne; None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1369 </font></span><font color="#ff00cc">              &and; &not;(?curVal &gt;  MAX_SEMA_VALUE &or; ?curVal &lt; 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1370 </font></span><font color="#ff00cc">              &and; &not;(?MaxNVal &gt; MAX_SEMA_VALUE &or; ?MaxNVal &lt;0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1371 </font></span><font color="#ff00cc">              &and; &not;(?curVal &gt; ?MaxNVal)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1372 </font></span><font color="#ff00cc">              &and; getPartMode s (the ?cur_part_id) = Some NORMAL</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1373 </font></span><font color="#ff00cc">      &#10230; ?s_semid_r = (s , None , INVALID_MODE)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1374 </font></span>    <font color="#006699"><strong>unfolding</strong></font> CREATE_SEMAPHORE_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1375 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(?created_semas &ge; MAX_NUM_OF_SEMA)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1376 </font></span><font color="#ff00cc">               &and; &not;(getUserSemaIDByName s (the ?cur_part_id) ?sema_name &ne; None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1377 </font></span><font color="#ff00cc">              &and; &not;(?curVal &gt;  MAX_SEMA_VALUE &or; ?curVal &lt; 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1378 </font></span><font color="#ff00cc">              &and; &not;(?MaxNVal &gt; MAX_SEMA_VALUE &or; ?MaxNVal &lt;0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1379 </font></span><font color="#ff00cc">              &and; &not;(?curVal &gt; ?MaxNVal)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1380 </font></span><font color="#ff00cc">              &and; &not;(getPartMode s (the ?cur_part_id) = Some NORMAL)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1381 </font></span><font color="#ff00cc">       &#10230; ?s_semid_r = (?s_initSema ,Some ?sema_id , NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1382 </font></span>    <font color="#006699"><strong>unfolding</strong></font> CREATE_SEMAPHORE_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1383 </font></span>  <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1384 </font></span>    <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1385 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1386 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1387 </font></span><font color="#006699"><strong>lemma</strong></font> WAIT_SEMAPHORE<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1388 </font></span>  <font color="#ff00cc">&quot;let s_r = WAIT_SEMAPHORE s core_id sema_id tout;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1389 </font></span><font color="#ff00cc">      cur_part_id = curPartID s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1390 </font></span><font color="#ff00cc">      cur_proc_id = curProcID_Core s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1391 </font></span><font color="#ff00cc">      waitDiff' = getWaitDiff (fst s_r) (the cur_part_id,the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1392 </font></span><font color="#ff00cc">      cntxt' = getCntxt (fst s_r) (the cur_part_id,the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1393 </font></span><font color="#ff00cc">      cterRsc' = getCterRsc (fst s_r) (the cur_part_id,the cur_proc_id) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1394 </font></span><font color="#ff00cc">    if  getUserSemaAttrByID s (the cur_part_id,sema_id) = None then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1395 </font></span><font color="#ff00cc">       s_r = (s , Some INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1396 </font></span><font color="#ff00cc">    else if (nat tout) &gt; INVALID_TIMEOUT_VALUE then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1397 </font></span><font color="#ff00cc">       s_r = (s , Some INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1398 </font></span><font color="#ff00cc">    else if (the (curValue(sema_' s)(the cur_part_id,sema_id))) &gt; 0 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1399 </font></span><font color="#ff00cc">       s_r = (subSemaCurVal s (the cur_part_id,sema_id) ,Some NO_ERROR)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1400 </font></span><font color="#ff00cc">    else if tout = 0 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1401 </font></span><font color="#ff00cc">       s_r = (s , Some NOT_AVAILABLE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1402 </font></span><font color="#ff00cc">    else if getProcUserPLMtx s (the cur_part_id,the cur_proc_id) &ne; None &or; (the cur_proc_id) = HM_PROC_ID then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1403 </font></span><font color="#ff00cc">       s_r = (s , Some INVALID_MODE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1404 </font></span><font color="#ff00cc">    else if tout = -1 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1405 </font></span><font color="#ff00cc">        (let s_setWaiting = setProcSta s (the cur_part_id,the cur_proc_id) WAITING;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1406 </font></span><font color="#ff00cc">            s_insertQue = rscQPush s_setWaiting (sema (the cur_part_id,sema_id)) (the cur_part_id,the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1407 </font></span><font color="#ff00cc">            s_infiniteWd = setWaitDiff s_insertQue (the cur_part_id,the cur_proc_id) tout in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1408 </font></span><font color="#ff00cc">        s_r = (schedule_Abs s_infiniteWd core_id , Some NO_ERROR)  &and; waitDiff'&ne; None )</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1409 </font></span><font color="#ff00cc">    else (let s_setWaiting = setProcSta s (the cur_part_id,the cur_proc_id) WAITING;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1410 </font></span><font color="#ff00cc">            s_insertQue = rscQPush s_setWaiting (sema (the cur_part_id,sema_id)) (the cur_part_id,the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1411 </font></span><font color="#ff00cc">            s_setTimeCtr = setAddWaitDiff s_insertQue (the cur_part_id,the cur_proc_id) tout;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1412 </font></span><font color="#ff00cc">            s_setTCtrRsc = setCterRsc s_setTimeCtr (the cur_part_id,the cur_proc_id) (Int.int(timer_' s_setTimeCtr) +  tout);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1413 </font></span><font color="#ff00cc">            s_setCntxt = setCntxt s_setTCtrRsc (the cur_part_id,the cur_proc_id) (waitSema (the cur_part_id,sema_id)) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1414 </font></span><font color="#ff00cc">        s_r = (schedule_Abs s_setCntxt core_id, None)&and; waitDiff'&ne; None &and; cntxt' &ne; None  ) &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1415 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1416 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_r <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;WAIT_SEMAPHORE s core_id sema_id tout&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1417 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curPartID s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1418 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_proc_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curProcID_Core s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1419 </font></span>  <font color="#006699"><strong>let</strong></font> ?waitDiff' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getWaitDiff (fst ?s_r) (the ?cur_part_id,the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1420 </font></span>  <font color="#006699"><strong>let</strong></font> ?cntxt' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getCntxt (fst ?s_r) (the ?cur_part_id,the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1421 </font></span>  <font color="#006699"><strong>let</strong></font> ?cterRsc' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getCterRsc (fst ?s_r) (the ?cur_part_id,the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1422 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1423 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setWaiting <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setProcSta s (the ?cur_part_id,the ?cur_proc_id) WAITING&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1424 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_insertQue <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;rscQPush ?s_setWaiting (sema (the ?cur_part_id,sema_id)) (the ?cur_part_id,the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1425 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_infiniteWd <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setWaitDiff ?s_insertQue (the ?cur_part_id,the ?cur_proc_id) tout&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1426 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1427 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setWaiting1 <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setProcSta s (the ?cur_part_id,the ?cur_proc_id) WAITING&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1428 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_insertQue1 <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;rscQPush ?s_setWaiting1 (sema (the ?cur_part_id,sema_id)) (the ?cur_part_id,the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1429 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setTimeCtr1 <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setAddWaitDiff ?s_insertQue1 (the ?cur_part_id,the ?cur_proc_id) tout&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1430 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setTCtrRsc1 <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setCterRsc ?s_setTimeCtr1 (the ?cur_part_id,the ?cur_proc_id) (Int.int(timer_' ?s_setTimeCtr1) +  tout)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1431 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setCntxt1 <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setCntxt ?s_setTCtrRsc1 (the ?cur_part_id,the ?cur_proc_id) (waitSema (the ?cur_part_id,sema_id))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1432 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1433 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getUserSemaAttrByID s (the ?cur_part_id,sema_id) = None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1434 </font></span><font color="#ff00cc">      &#10230; ?s_r = (s , Some INVALID_PARAM)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1435 </font></span>    <font color="#006699"><strong>unfolding</strong></font> WAIT_SEMAPHORE_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1436 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getUserSemaAttrByID s (the ?cur_part_id,sema_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1437 </font></span><font color="#ff00cc">      &and; ((nat tout) &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1438 </font></span><font color="#ff00cc">      &#10230; ?s_r = (s , Some INVALID_PARAM)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1439 </font></span>    <font color="#006699"><strong>unfolding</strong></font> WAIT_SEMAPHORE_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1440 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getUserSemaAttrByID s (the ?cur_part_id,sema_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1441 </font></span><font color="#ff00cc">      &and; &not;((nat tout) &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1442 </font></span><font color="#ff00cc">      &and; ((the (curValue(sema_' s)(the ?cur_part_id,sema_id))) &gt; 0 )</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1443 </font></span><font color="#ff00cc">    &#10230; ?s_r = (subSemaCurVal s (the ?cur_part_id,sema_id) ,Some NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1444 </font></span>    <font color="#006699"><strong>unfolding</strong></font> WAIT_SEMAPHORE_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1445 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getUserSemaAttrByID s (the ?cur_part_id,sema_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1446 </font></span><font color="#ff00cc">      &and; &not;((nat tout) &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1447 </font></span><font color="#ff00cc">      &and; &not;((the (curValue(sema_' s)(the ?cur_part_id,sema_id))) &gt; 0 )</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1448 </font></span><font color="#ff00cc">      &and; (tout = 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1449 </font></span><font color="#ff00cc">    &#10230; ?s_r = (s , Some NOT_AVAILABLE)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1450 </font></span>    <font color="#006699"><strong>unfolding</strong></font> WAIT_SEMAPHORE_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1451 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getUserSemaAttrByID s (the ?cur_part_id,sema_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1452 </font></span><font color="#ff00cc">      &and; &not;((nat tout) &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1453 </font></span><font color="#ff00cc">      &and; &not;((the (curValue(sema_' s)(the ?cur_part_id,sema_id))) &gt; 0 )</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1454 </font></span><font color="#ff00cc">      &and; &not;(tout = 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1455 </font></span><font color="#ff00cc">      &and; (getProcUserPLMtx s (the ?cur_part_id,the ?cur_proc_id) &ne; None &or; (the ?cur_proc_id) = HM_PROC_ID)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1456 </font></span><font color="#ff00cc">    &#10230; ?s_r = (s , Some INVALID_MODE)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1457 </font></span>    <font color="#006699"><strong>unfolding</strong></font> WAIT_SEMAPHORE_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1458 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getUserSemaAttrByID s (the ?cur_part_id,sema_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1459 </font></span><font color="#ff00cc">      &and; &not;((nat tout) &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1460 </font></span><font color="#ff00cc">      &and; &not;((the (curValue(sema_' s)(the ?cur_part_id,sema_id))) &gt; 0 )</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1461 </font></span><font color="#ff00cc">      &and; &not;(tout = 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1462 </font></span><font color="#ff00cc">      &and; &not;(getProcUserPLMtx s (the ?cur_part_id,the ?cur_proc_id) &ne; None &or; (the ?cur_proc_id) = HM_PROC_ID)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1463 </font></span><font color="#ff00cc">      &and; tout = -1</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1464 </font></span><font color="#ff00cc">    &#10230; ?s_r = (schedule_Abs ?s_infiniteWd core_id , Some NO_ERROR) &and; ?waitDiff'&ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1465 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> WAIT_SEMAPHORE_def fst_conv getWaitDiff_schedule_Abs getWaitDiff_setWaitDiff_NotNone<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1466 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getUserSemaAttrByID s (the ?cur_part_id,sema_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1467 </font></span><font color="#ff00cc">      &and; &not;((nat tout) &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1468 </font></span><font color="#ff00cc">      &and; &not;((the (curValue(sema_' s)(the ?cur_part_id,sema_id))) &gt; 0 )</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1469 </font></span><font color="#ff00cc">      &and; &not;(tout = 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1470 </font></span><font color="#ff00cc">      &and; &not;(getProcUserPLMtx s (the ?cur_part_id,the ?cur_proc_id) &ne; None &or; (the ?cur_proc_id) = HM_PROC_ID)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1471 </font></span><font color="#ff00cc">      &and; &not;(tout = -1)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1472 </font></span><font color="#ff00cc">    &#10230; ?s_r = (schedule_Abs ?s_setCntxt1 core_id, None)&and; ?waitDiff'&ne; None &and; ?cntxt' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1473 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> Process_FT.getCtx_sd WAIT_SEMAPHORE_def fst_conv getWaitDiff_schedule_Abs setAddWaitDiff_NotNone setCtx_Not_None waitDiff_setCntxt waitDiff_setCterRsc<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1474 </font></span>  <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1475 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1476 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1477 </font></span><font color="#006699"><strong>lemma</strong></font> WAIT_SEMAPHORE'<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1478 </font></span>  <font color="#ff00cc">&quot;let s_r = WAIT_SEMAPHORE' s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1479 </font></span><font color="#ff00cc">        cur_proc_id = curProcID_Core s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1480 </font></span><font color="#ff00cc">        cur_part_id = curPartID s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1481 </font></span><font color="#ff00cc">       t_getCterRsc = getCterRsc s (the cur_part_id,the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1482 </font></span><font color="#ff00cc">        Cntxt' = getCntxt (fst s_r) (the cur_part_id,the cur_proc_id) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1483 </font></span><font color="#ff00cc">    if the t_getCterRsc  &lt;= Int.int(timer_' s) then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1484 </font></span><font color="#ff00cc">     s_r = (resetCntxt s (the cur_part_id,the cur_proc_id)  , TIMED_OUT) &and; Cntxt'= None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1485 </font></span><font color="#ff00cc">    else </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1486 </font></span><font color="#ff00cc">      s_r =(resetCntxt s (the cur_part_id,the cur_proc_id)  , NO_ERROR) &and; Cntxt'= None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1487 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1488 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_r <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;WAIT_SEMAPHORE' s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1489 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_proc_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curProcID_Core s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1490 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curPartID s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1491 </font></span>  <font color="#006699"><strong>let</strong></font> ?t_getCterRsc <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getCterRsc s (the ?cur_part_id,the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1492 </font></span>  <font color="#006699"><strong>let</strong></font> ?Cntxt' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getCntxt (fst ?s_r) (the ?cur_part_id,the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1493 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;(the ?t_getCterRsc  &lt;= Int.int(timer_' s))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1494 </font></span><font color="#ff00cc">      &#10230; ?s_r = (resetCntxt s (the ?cur_part_id,the ?cur_proc_id)  , TIMED_OUT) &and; ?Cntxt'= None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1495 </font></span>    <font color="#006699"><strong>unfolding</strong></font> WAIT_SEMAPHORE'_def
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1496 </font></span>    <font color="#006699"><strong>using</strong></font> getCtx_rst_None <font color="#006699"><strong>by</strong></font> auto 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1497 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(the ?t_getCterRsc  &lt;= Int.int(timer_' s))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1498 </font></span><font color="#ff00cc">      &#10230; ?s_r =(resetCntxt s (the ?cur_part_id,the ?cur_proc_id)  , NO_ERROR) &and; ?Cntxt'= None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1499 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> Process_FT.getCtx_rst_None WAIT_SEMAPHORE'_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1500 </font></span>  <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1501 </font></span>    <font color="#006699"><strong>by</strong></font> metis 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1502 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1503 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1504 </font></span><font color="#006699"><strong>lemma</strong></font> SIGNAL_SEMAPHORE<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1505 </font></span>  <font color="#ff00cc">&quot;let s_r = SIGNAL_SEMAPHORE s core_id sema_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1506 </font></span><font color="#ff00cc">      cur_part_id = curPartID s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1507 </font></span><font color="#ff00cc">      cur_proc_id = curProcID_Core s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1508 </font></span><font color="#ff00cc">      semaCurVal = getSemaCurVal s (the cur_part_id,sema_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1509 </font></span><font color="#ff00cc">      semaCurVal' = getSemaCurVal (fst s_r) (the cur_part_id,sema_id) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1510 </font></span><font color="#ff00cc">    if  getUserSemaAttrByID s (the cur_part_id,sema_id) = None  then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1511 </font></span><font color="#ff00cc">        s_r =(s ,  INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1512 </font></span><font color="#ff00cc">    else if the (curValue(sema_' s)(the cur_part_id,sema_id)) = the (maxValue(sema_' s)(the cur_part_id,sema_id)) then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1513 </font></span><font color="#ff00cc">        s_r =(s , NO_ACTION)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1514 </font></span><font color="#ff00cc">    else if rscProcQueEmpty s (sema (the cur_part_id,sema_id))  then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1515 </font></span><font color="#ff00cc">        s_r =(addSemaCurVal s (the cur_part_id,sema_id) , NO_ERROR) &and; semaCurVal' = Some ((the semaCurVal)+1)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1516 </font></span><font color="#ff00cc">    else </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1517 </font></span><font color="#ff00cc">         let s_pt_recHeadProcID = rscQPop s (sema (the cur_part_id,sema_id));</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1518 </font></span><font color="#ff00cc">            s_stopTimeCt = StopTCounter (fst s_pt_recHeadProcID) (the (snd s_pt_recHeadProcID));</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1519 </font></span><font color="#ff00cc">            waitDiff' = getWaitDiff (fst s_r) (the (snd s_pt_recHeadProcID));</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1520 </font></span><font color="#ff00cc">            stopCterRsc' = getCterRsc (fst s_r) (the (snd s_pt_recHeadProcID));</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1521 </font></span><font color="#ff00cc">            s_setToReady = if &not;isSuspended s_stopTimeCt (the (snd s_pt_recHeadProcID)) then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1522 </font></span><font color="#ff00cc">                              procReady s_stopTimeCt (the (snd s_pt_recHeadProcID))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1523 </font></span><font color="#ff00cc">                           else  s_stopTimeCt in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1524 </font></span><font color="#ff00cc">         s_r = (schedule_Abs s_setToReady core_id , NO_ERROR)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1525 </font></span><font color="#ff00cc">          &and; waitDiff' = None  &and; stopCterRsc' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1526 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1527 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_r <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;SIGNAL_SEMAPHORE s core_id sema_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1528 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curPartID s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1529 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_proc_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curProcID_Core s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1530 </font></span>  <font color="#006699"><strong>let</strong></font> ?semaCurVal <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getSemaCurVal s (the ?cur_part_id,sema_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1531 </font></span>  <font color="#006699"><strong>let</strong></font> ?semaCurVal' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getSemaCurVal (fst ?s_r) (the ?cur_part_id,sema_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1532 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_pt_recHeadProcID <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;rscQPop s (sema (the ?cur_part_id,sema_id))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1533 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_stopTimeCt <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;StopTCounter (fst ?s_pt_recHeadProcID) (the (snd ?s_pt_recHeadProcID))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1534 </font></span>  <font color="#006699"><strong>let</strong></font> ?waitDiff' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getWaitDiff (fst ?s_r) (the (snd ?s_pt_recHeadProcID))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1535 </font></span>  <font color="#006699"><strong>let</strong></font> ?stopCterRsc' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getCterRsc (fst ?s_r) (the (snd ?s_pt_recHeadProcID))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1536 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setToReady <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;if &not;isSuspended ?s_stopTimeCt (the (snd ?s_pt_recHeadProcID)) then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1537 </font></span><font color="#ff00cc">                              procReady ?s_stopTimeCt (the (snd ?s_pt_recHeadProcID))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1538 </font></span><font color="#ff00cc">                           else  ?s_stopTimeCt&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1539 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getUserSemaAttrByID s (the ?cur_part_id,sema_id) = None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1540 </font></span><font color="#ff00cc">      &#10230; ?s_r =(s ,  INVALID_PARAM)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1541 </font></span>    <font color="#006699"><strong>unfolding</strong></font> SIGNAL_SEMAPHORE_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1542 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getUserSemaAttrByID s (the ?cur_part_id,sema_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1543 </font></span><font color="#ff00cc">                &and; (the (curValue(sema_' s)(the ?cur_part_id,sema_id)) = the (maxValue(sema_' s)(the ?cur_part_id,sema_id)))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1544 </font></span><font color="#ff00cc">          &#10230; ?s_r =(s , NO_ACTION)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1545 </font></span>    <font color="#006699"><strong>unfolding</strong></font> SIGNAL_SEMAPHORE_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1546 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getUserSemaAttrByID s (the ?cur_part_id,sema_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1547 </font></span><font color="#ff00cc">                &and; &not;(the (curValue(sema_' s)(the ?cur_part_id,sema_id)) = the (maxValue(sema_' s)(the ?cur_part_id,sema_id)))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1548 </font></span><font color="#ff00cc">                &and;  rscProcQueEmpty s (sema (the ?cur_part_id,sema_id))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1549 </font></span><font color="#ff00cc">          &#10230; ?s_r =(addSemaCurVal s (the ?cur_part_id,sema_id) , NO_ERROR) &and; ?semaCurVal' = Some ((the ?semaCurVal)+1)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1550 </font></span>  <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1551 </font></span>    <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>assume</strong></font> <font color="#ff00cc">&quot;&not;(getUserSemaAttrByID s (the ?cur_part_id,sema_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1552 </font></span><font color="#ff00cc">                &and; &not;(the (curValue(sema_' s)(the ?cur_part_id,sema_id)) = the (maxValue(sema_' s)(the ?cur_part_id,sema_id)))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1553 </font></span><font color="#ff00cc">                &and;  rscProcQueEmpty s (sema (the ?cur_part_id,sema_id))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1554 </font></span>      <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;?s_r =(addSemaCurVal s (the ?cur_part_id,sema_id) , NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1555 </font></span>        <font color="#006699"><strong>unfolding</strong></font> SIGNAL_SEMAPHORE_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1556 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?semaCurVal' = Some ((the ?semaCurVal)+1)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1557 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> addSemaCurVal calculation<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1558 </font></span>      <font color="#006699"><strong>ultimately</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?s_r =(addSemaCurVal s (the ?cur_part_id,sema_id) , NO_ERROR) &and; ?semaCurVal' = Some ((the ?semaCurVal)+1)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1559 </font></span>        <font color="#006699"><strong>by</strong></font> simp
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1560 </font></span>    <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1561 </font></span>    <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1562 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1563 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getUserSemaAttrByID s (the ?cur_part_id,sema_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1564 </font></span><font color="#ff00cc">                &and; &not;(the (curValue(sema_' s)(the ?cur_part_id,sema_id)) = the (maxValue(sema_' s)(the ?cur_part_id,sema_id)))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1565 </font></span><font color="#ff00cc">                &and; &not;(rscProcQueEmpty s (sema (the ?cur_part_id,sema_id)))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1566 </font></span><font color="#ff00cc">          &#10230; ?s_r = (schedule_Abs ?s_setToReady core_id , NO_ERROR)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1567 </font></span><font color="#ff00cc">          &and; ?waitDiff' = None  &and; ?stopCterRsc' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1568 </font></span>  <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1569 </font></span>    <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>assume</strong></font> <font color="#ff00cc">&quot;&not;(getUserSemaAttrByID s (the ?cur_part_id,sema_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1570 </font></span><font color="#ff00cc">                &and; &not;(the (curValue(sema_' s)(the ?cur_part_id,sema_id)) = the (maxValue(sema_' s)(the ?cur_part_id,sema_id)))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1571 </font></span><font color="#ff00cc">                &and; &not;(rscProcQueEmpty s (sema (the ?cur_part_id,sema_id)))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1572 </font></span>      <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;?s_r = (schedule_Abs ?s_setToReady core_id , NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1573 </font></span>        <font color="#006699"><strong>unfolding</strong></font> SIGNAL_SEMAPHORE_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1574 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?waitDiff' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1575 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> StopTCounter calculation fst_conv getWaitDiff_procReady getWaitDiff_schedule_Abs<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1576 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?stopCterRsc' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1577 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> StopTCounter calculation<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> fst_conv getCterRsc_procReady getCterRsc_schedule_Abs<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1578 </font></span>      <font color="#006699"><strong>ultimately</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?s_r = (schedule_Abs ?s_setToReady core_id , NO_ERROR)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1579 </font></span><font color="#ff00cc">          &and; ?waitDiff' = None  &and; ?stopCterRsc' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1580 </font></span>        <font color="#006699"><strong>by</strong></font> simp
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1581 </font></span>    <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1582 </font></span>    <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1583 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1584 </font></span>  <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1585 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1586 </font></span>  
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1587 </font></span><font color="#006699"><strong>lemma</strong></font> GET_SEMAPHORE_ID<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1588 </font></span>  <font color="#ff00cc">&quot;let s_id_r = GET_SEMAPHORE_ID s core_id sema_name;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1589 </font></span><font color="#ff00cc">    cur_part_id = curPartID s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1590 </font></span><font color="#ff00cc">        sema_id_op = getUserSemaIDByName s (the cur_part_id) sema_name in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1591 </font></span><font color="#ff00cc">    if sema_id_op = None then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1592 </font></span><font color="#ff00cc">      s_id_r = (s , None ,INVALID_CONFIG)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1593 </font></span><font color="#ff00cc">    else </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1594 </font></span><font color="#ff00cc">      s_id_r = (s, sema_id_op, NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1595 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1596 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_id_r <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;GET_SEMAPHORE_ID s core_id sema_name&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1597 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curPartID s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1598 </font></span>  <font color="#006699"><strong>let</strong></font> ?sema_id_op <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getUserSemaIDByName s (the ?cur_part_id) sema_name&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1599 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?sema_id_op = None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1600 </font></span><font color="#ff00cc">      &#10230; ?s_id_r = (s , None ,INVALID_CONFIG)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1601 </font></span>    <font color="#006699"><strong>unfolding</strong></font> GET_SEMAPHORE_ID_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1602 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(?sema_id_op = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1603 </font></span><font color="#ff00cc">            &#10230; ?s_id_r = (s, ?sema_id_op, NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1604 </font></span>    <font color="#006699"><strong>unfolding</strong></font> GET_SEMAPHORE_ID_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1605 </font></span>  <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1606 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1607 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1608 </font></span><font color="#006699"><strong>lemma</strong></font> GET_SEMAPHORE_STATUS<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1609 </font></span>  <font color="#ff00cc">&quot;let s_stus_r = GET_SEMAPHORE_STATUS s core_id sema_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1610 </font></span><font color="#ff00cc">    cur_part_id = curPartID s core_id in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1611 </font></span><font color="#ff00cc">    if getUserSemaAttrByID s (the cur_part_id,sema_id) = None then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1612 </font></span><font color="#ff00cc">     s_stus_r = (s , None , INVALID_PARAM )</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1613 </font></span><font color="#ff00cc">    else</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1614 </font></span><font color="#ff00cc">     s_stus_r = (s , Some (getSemaStatus s (the cur_part_id,sema_id)) , NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1615 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1616 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_stus_r <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;GET_SEMAPHORE_STATUS s core_id sema_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1617 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curPartID s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1618 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getUserSemaAttrByID s (the ?cur_part_id,sema_id) = None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1619 </font></span><font color="#ff00cc">      &#10230; ?s_stus_r = (s , None , INVALID_PARAM )&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1620 </font></span>    <font color="#006699"><strong>unfolding</strong></font> GET_SEMAPHORE_STATUS_def  <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1621 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getUserSemaAttrByID s (the ?cur_part_id,sema_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1622 </font></span><font color="#ff00cc">      &#10230; ?s_stus_r = (s , Some (getSemaStatus s (the ?cur_part_id,sema_id)) , NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1623 </font></span>    <font color="#006699"><strong>unfolding</strong></font> GET_SEMAPHORE_STATUS_def  <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1624 </font></span>  <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1625 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1626 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1627 </font></span><font color="#006699"><strong>lemma</strong></font> CREATE_EVENT<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1628 </font></span>  <font color="#ff00cc">&quot;let s_id_r = CREATE_EVENT s core_id event_name;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1629 </font></span><font color="#ff00cc">      cur_part_id = curPartID s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1630 </font></span><font color="#ff00cc">      created_evts = size_set (getEvntsOfPart s (the cur_part_id)) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1631 </font></span><font color="#ff00cc">    if  created_evts &ge; MAX_NUM_OF_EVENTS  then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1632 </font></span><font color="#ff00cc">       s_id_r = (s , None , INVALID_CONFIG )</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1633 </font></span><font color="#ff00cc">    else if getEvtIDByName s (the cur_part_id) event_name &ne; None then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1634 </font></span><font color="#ff00cc">        s_id_r =(s , None , NO_ACTION)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1635 </font></span><font color="#ff00cc">    else if getPartMode s (the cur_part_id) = Some NORMAL then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1636 </font></span><font color="#ff00cc">       s_id_r = (s , None , INVALID_MODE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1637 </font></span><font color="#ff00cc">    else let event_id = newEventID s (the cur_part_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1638 </font></span><font color="#ff00cc">            s_new = createEvent s core_id (the cur_part_id) event_id event_name;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1639 </font></span><font color="#ff00cc">            s_setEventSta = setEventSta s_new (the cur_part_id,event_id) DOWN in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1640 </font></span><font color="#ff00cc">       s_id_r =   (s_setEventSta ,Some event_id, NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1641 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1642 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_id_r <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;CREATE_EVENT s core_id event_name&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1643 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curPartID s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1644 </font></span>  <font color="#006699"><strong>let</strong></font> ?created_evts <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;size_set (getEvntsOfPart s (the ?cur_part_id))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1645 </font></span>  <font color="#006699"><strong>let</strong></font> ?event_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;newEventID s (the ?cur_part_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1646 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_new <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;createEvent s core_id (the ?cur_part_id) ?event_id event_name&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1647 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setEventSta <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setEventSta ?s_new (the ?cur_part_id,?event_id) DOWN&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1648 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?created_evts &ge; MAX_NUM_OF_EVENTS</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1649 </font></span><font color="#ff00cc">      &#10230; ?s_id_r = (s , None , INVALID_CONFIG )&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1650 </font></span>    <font color="#006699"><strong>unfolding</strong></font> CREATE_EVENT_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1651 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(?created_evts &ge; MAX_NUM_OF_EVENTS)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1652 </font></span><font color="#ff00cc">                &and; getEvtIDByName s (the ?cur_part_id) event_name &ne; None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1653 </font></span><font color="#ff00cc">        &#10230;?s_id_r =(s , None , NO_ACTION)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1654 </font></span>    <font color="#006699"><strong>unfolding</strong></font> CREATE_EVENT_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1655 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(?created_evts &ge; MAX_NUM_OF_EVENTS)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1656 </font></span><font color="#ff00cc">                &and; &not;(getEvtIDByName s (the ?cur_part_id) event_name &ne; None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1657 </font></span><font color="#ff00cc">                &and; getPartMode s (the ?cur_part_id) = Some NORMAL</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1658 </font></span><font color="#ff00cc">        &#10230;?s_id_r = (s , None , INVALID_MODE)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1659 </font></span>    <font color="#006699"><strong>unfolding</strong></font> CREATE_EVENT_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1660 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(?created_evts &ge; MAX_NUM_OF_EVENTS)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1661 </font></span><font color="#ff00cc">                &and; &not;(getEvtIDByName s (the ?cur_part_id) event_name &ne; None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1662 </font></span><font color="#ff00cc">                &and; &not;(getPartMode s (the ?cur_part_id) = Some NORMAL)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1663 </font></span><font color="#ff00cc">        &#10230;?s_id_r =   (?s_setEventSta ,Some ?event_id, NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1664 </font></span>    <font color="#006699"><strong>unfolding</strong></font> CREATE_EVENT_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1665 </font></span>  <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1666 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1667 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1668 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1669 </font></span><font color="#006699"><strong>lemma</strong></font> SET_EVENT<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1670 </font></span>  <font color="#ff00cc">&quot;let s_r = SET_EVENT s core_id evt_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1671 </font></span><font color="#ff00cc">    cur_part_id = curPartID s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1672 </font></span><font color="#ff00cc">    eventSta' = getEventSta (fst s_r) (the cur_part_id,evt_id)  in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1673 </font></span><font color="#ff00cc">    if getEvtAttrByID s (the cur_part_id,evt_id) = None then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1674 </font></span><font color="#ff00cc">       s_r = (s , INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1675 </font></span><font color="#ff00cc">    else </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1676 </font></span><font color="#ff00cc">         let s_setEvtSta = setEventSta s (the cur_part_id,evt_id) UP in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1677 </font></span><font color="#ff00cc">          if rscProcQueEmpty s_setEvtSta (evt (the cur_part_id,evt_id)) &ne; True then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1678 </font></span><font color="#ff00cc">             let pendingProcs = getRscQueList s_setEvtSta (evt (the cur_part_id,evt_id));</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1679 </font></span><font color="#ff00cc">                 s_delTctrs = stopProcLTCtr s_setEvtSta (the pendingProcs);                 </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1680 </font></span><font color="#ff00cc">                 s_delRscQueProcs = clearPendProcs s_delTctrs (evt (the cur_part_id,evt_id));</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1681 </font></span><font color="#ff00cc">                 s_setReady = procsReady s_delRscQueProcs (the cur_part_id) (getProcList (the pendingProcs)) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1682 </font></span><font color="#ff00cc">              s_r = (schedule_Abs s_setReady core_id , NO_ERROR) &and; eventSta' = Some UP</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1683 </font></span><font color="#ff00cc">           else s_r = (s_setEvtSta , NO_ERROR) &and; eventSta' = Some UP  &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1684 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1685 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_r <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;SET_EVENT s core_id evt_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1686 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curPartID s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1687 </font></span>  <font color="#006699"><strong>let</strong></font> ?eventSta' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getEventSta (fst ?s_r) (the ?cur_part_id,evt_id)&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1688 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setEvtSta <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setEventSta s (the ?cur_part_id,evt_id) UP&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1689 </font></span>  <font color="#006699"><strong>let</strong></font> ?pendingProcs <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getRscQueList ?s_setEvtSta (evt (the ?cur_part_id,evt_id))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1690 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_delTctrs <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;stopProcLTCtr ?s_setEvtSta (the ?pendingProcs)&quot;</font>   
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1691 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_delRscQueProcs <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;clearPendProcs ?s_delTctrs (evt (the ?cur_part_id,evt_id))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1692 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setReady <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;procsReady ?s_delRscQueProcs (the ?cur_part_id) (getProcList (the ?pendingProcs))&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1693 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1694 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getEvtAttrByID s (the ?cur_part_id,evt_id) = None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1695 </font></span><font color="#ff00cc">       &#10230; ?s_r = (s , INVALID_PARAM)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1696 </font></span>    <font color="#006699"><strong>unfolding</strong></font> SET_EVENT_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1697 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getEvtAttrByID s (the ?cur_part_id,evt_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1698 </font></span><font color="#ff00cc">                &and;rscProcQueEmpty ?s_setEvtSta (evt (the ?cur_part_id,evt_id)) &ne; True</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1699 </font></span><font color="#ff00cc">        &#10230; ?s_r = (schedule_Abs ?s_setReady core_id , NO_ERROR) &and; ?eventSta' = Some UP&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1700 </font></span>  <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1701 </font></span>    <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>assume</strong></font> a0<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&not;(getEvtAttrByID s (the ?cur_part_id,evt_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1702 </font></span><font color="#ff00cc">                &and;rscProcQueEmpty ?s_setEvtSta (evt (the ?cur_part_id,evt_id)) &ne; True&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1703 </font></span>      <font color="#006699"><strong>hence</strong></font> a1<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?s_r = (schedule_Abs ?s_setReady core_id , NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1704 </font></span>        <font color="#006699"><strong>unfolding</strong></font> SET_EVENT_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1705 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?eventSta' = Some UP&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1706 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> EventSta_clearPendProcs EventSta_procsReady EventSta_schedule calculation getEventSta_stopProcLTCtr1 setEventSta_NotNone<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1707 </font></span>      <font color="#006699"><strong>ultimately</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?s_r = (schedule_Abs ?s_setReady core_id , NO_ERROR) &and; ?eventSta' = Some UP&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1708 </font></span>      <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1709 </font></span>   <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1710 </font></span>   <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1711 </font></span> <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1712 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getEvtAttrByID s (the ?cur_part_id,evt_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1713 </font></span><font color="#ff00cc">                &and;&not;(rscProcQueEmpty ?s_setEvtSta (evt (the ?cur_part_id,evt_id)) &ne; True)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1714 </font></span><font color="#ff00cc">        &#10230; ?s_r = (?s_setEvtSta , NO_ERROR) &and; ?eventSta' = Some UP &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1715 </font></span>  <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1716 </font></span>    <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>assume</strong></font> a0<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&not;(getEvtAttrByID s (the ?cur_part_id,evt_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1717 </font></span><font color="#ff00cc">                &and;&not;(rscProcQueEmpty ?s_setEvtSta (evt (the ?cur_part_id,evt_id)) &ne; True)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1718 </font></span>      <font color="#006699"><strong>hence</strong></font> a1<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?s_r = (?s_setEvtSta , NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1719 </font></span>        <font color="#006699"><strong>unfolding</strong></font> SET_EVENT_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1720 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?eventSta' = Some UP&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1721 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> calculation setEventSta_NotNone<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1722 </font></span>      <font color="#006699"><strong>ultimately</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?s_r = (?s_setEvtSta , NO_ERROR) &and; ?eventSta' = Some UP&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1723 </font></span>        <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1724 </font></span>    <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1725 </font></span>    <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1726 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1727 </font></span>  <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1728 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1729 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1730 </font></span><font color="#006699"><strong>lemma</strong></font> RESET_EVENT<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1731 </font></span>  <font color="#ff00cc">&quot;let s_r = RESET_EVENT s core_id evt_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1732 </font></span><font color="#ff00cc">    cur_part_id = curPartID s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1733 </font></span><font color="#ff00cc">    eventSta' = getEventSta (fst s_r) (the cur_part_id,evt_id) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1734 </font></span><font color="#ff00cc">    if getEvtAttrByID s (the cur_part_id,evt_id) = None then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1735 </font></span><font color="#ff00cc">        s_r =(s , INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1736 </font></span><font color="#ff00cc">    else s_r = (setEventSta s (the cur_part_id,evt_id) DOWN , NO_ERROR )</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1737 </font></span><font color="#ff00cc">          &and; eventSta' = Some DOWN&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1738 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1739 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1740 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_r <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;RESET_EVENT s core_id evt_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1741 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curPartID s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1742 </font></span>  <font color="#006699"><strong>let</strong></font> ?eventSta' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getEventSta (fst ?s_r) (the ?cur_part_id,evt_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1743 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getEvtAttrByID s (the ?cur_part_id,evt_id) = None &#10230;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1744 </font></span><font color="#ff00cc">      ?s_r =(s , INVALID_PARAM)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1745 </font></span>    <font color="#006699"><strong>unfolding</strong></font>  RESET_EVENT_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1746 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getEvtAttrByID s (the ?cur_part_id,evt_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1747 </font></span><font color="#ff00cc">       &#10230;?s_r = (setEventSta s (the ?cur_part_id,evt_id) DOWN , NO_ERROR )</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1748 </font></span><font color="#ff00cc">      &and; ?eventSta' = Some DOWN&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1749 </font></span>  <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1750 </font></span>    <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>assume</strong></font> a0<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;&not;(getEvtAttrByID s (the ?cur_part_id,evt_id) = None)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1751 </font></span>      <font color="#006699"><strong>hence</strong></font> a1<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;?s_r = (setEventSta s (the ?cur_part_id,evt_id) DOWN , NO_ERROR )&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1752 </font></span>        <font color="#006699"><strong>unfolding</strong></font> RESET_EVENT_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1753 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?eventSta' = Some DOWN&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1754 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> calculation setEventSta_NotNone<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1755 </font></span>      <font color="#006699"><strong>ultimately</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?s_r = (setEventSta s (the ?cur_part_id,evt_id) DOWN , NO_ERROR )</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1756 </font></span><font color="#ff00cc">      &and; ?eventSta' = Some DOWN&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1757 </font></span>        <font color="#006699"><strong>by</strong></font> fastforce
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1758 </font></span>      <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1759 </font></span>      <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1760 </font></span>    <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1761 </font></span>    <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1762 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1763 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1764 </font></span><font color="#cc0000">(*lemma &quot;isInList (the(getRscQueList (rscQPush s pe pp) pe)) pp= True&quot;*)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1765 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1766 </font></span><font color="#006699"><strong>lemma</strong></font> WAIT_EVENT<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1767 </font></span>  <font color="#ff00cc">&quot;let s_r = WAIT_EVENT s core_id evt_id tout;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1768 </font></span><font color="#ff00cc">      cur_part_id = curPartID s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1769 </font></span><font color="#ff00cc">      cur_proc_id = curProcID_Core s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1770 </font></span><font color="#ff00cc">      waitDiff' = getWaitDiff (fst s_r) (the cur_part_id,the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1771 </font></span><font color="#ff00cc">      bbdRscQue' = getRscQueList (fst s_r) (evt (the cur_part_id,evt_id));</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1772 </font></span><font color="#ff00cc">      cterRsc' = getCterRsc (fst s_r) (the cur_part_id,the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1773 </font></span><font color="#ff00cc">      cntxt' = getCntxt (fst s_r) (the cur_part_id,the cur_proc_id) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1774 </font></span><font color="#ff00cc">    if getEvtAttrByID s (the cur_part_id,evt_id) = None then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1775 </font></span><font color="#ff00cc">       s_r = (s , INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1776 </font></span><font color="#ff00cc">    else if (nat tout) &gt; INVALID_TIMEOUT_VALUE then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1777 </font></span><font color="#ff00cc">       s_r = (s , INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1778 </font></span><font color="#ff00cc">    else if the (eventSta(event_' s)(the cur_part_id,evt_id)) = UP then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1779 </font></span><font color="#ff00cc">       s_r = (s , NO_ERROR)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1780 </font></span><font color="#ff00cc">    else if tout = 0 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1781 </font></span><font color="#ff00cc">       s_r = (s , NOT_AVAILABLE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1782 </font></span><font color="#ff00cc">    else if (the cur_proc_id) = HM_PROC_ID then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1783 </font></span><font color="#ff00cc">       s_r = (s , INVALID_MODE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1784 </font></span><font color="#ff00cc">    else if tout = -1 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1785 </font></span><font color="#ff00cc">         let s_setWaiting = setProcSta s (the cur_part_id,the cur_proc_id) WAITING;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1786 </font></span><font color="#ff00cc">            s_insertQue = rscQPush s_setWaiting (evt (the cur_part_id,evt_id)) (the cur_part_id,the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1787 </font></span><font color="#ff00cc">            s_infiniteWd = setWaitDiff s_insertQue (the cur_part_id,the cur_proc_id) tout in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1788 </font></span><font color="#ff00cc">           s_r =(schedule_Abs s_infiniteWd core_id , NO_ERROR) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1789 </font></span><font color="#ff00cc">          &and; waitDiff' &ne; None &and; isInList (the bbdRscQue') (the cur_part_id,the cur_proc_id)  = True</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1790 </font></span><font color="#ff00cc">    else</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1791 </font></span><font color="#ff00cc">         let s_setWaiting = setProcSta s (the cur_part_id,the cur_proc_id) WAITING;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1792 </font></span><font color="#ff00cc">            s_insertQue = rscQPush s_setWaiting (evt (the cur_part_id,evt_id)) (the cur_part_id,the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1793 </font></span><font color="#ff00cc">            s_setTimeCtr = setAddWaitDiff s_insertQue (the cur_part_id,the cur_proc_id) tout;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1794 </font></span><font color="#ff00cc">            s_setTCtrRsc = setCterRsc s_setTimeCtr (the cur_part_id,the cur_proc_id) (Int.int(timer_' s_setTimeCtr) +  tout);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1795 </font></span><font color="#ff00cc">            s_setCntxt = setCntxt s_setTCtrRsc (the cur_part_id,the cur_proc_id) (waitEvt (the cur_part_id,evt_id))  in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1796 </font></span><font color="#ff00cc">          s_r = (schedule_Abs s_setCntxt core_id , NO_ERROR)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1797 </font></span><font color="#ff00cc">        &and; waitDiff' &ne; None &and; cterRsc' &ne; None &and; cntxt' &ne; None &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1798 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1799 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_r <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;WAIT_EVENT s core_id evt_id tout&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1800 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curPartID s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1801 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_proc_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curProcID_Core s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1802 </font></span>  <font color="#006699"><strong>let</strong></font> ?waitDiff' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getWaitDiff (fst ?s_r) (the ?cur_part_id,the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1803 </font></span>  <font color="#006699"><strong>let</strong></font> ?bbdRscQue' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getRscQueList (fst ?s_r) (evt (the ?cur_part_id,evt_id))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1804 </font></span>  <font color="#006699"><strong>let</strong></font> ?cterRsc' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getCterRsc (fst ?s_r) (the ?cur_part_id,the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1805 </font></span>  <font color="#006699"><strong>let</strong></font> ?cntxt' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getCntxt (fst ?s_r) (the ?cur_part_id,the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1806 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setWaiting <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setProcSta s (the ?cur_part_id,the ?cur_proc_id) WAITING&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1807 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_insertQue <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;rscQPush ?s_setWaiting (evt (the ?cur_part_id,evt_id)) (the ?cur_part_id,the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1808 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_infiniteWd <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setWaitDiff ?s_insertQue (the ?cur_part_id,the ?cur_proc_id) tout&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1809 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1810 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setWaiting1 <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setProcSta s (the ?cur_part_id,the ?cur_proc_id) WAITING&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1811 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_insertQue1 <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;rscQPush ?s_setWaiting1 (evt (the ?cur_part_id,evt_id)) (the ?cur_part_id,the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1812 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setTimeCtr1 <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setAddWaitDiff ?s_insertQue1 (the ?cur_part_id,the ?cur_proc_id) tout&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1813 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setTCtrRsc1 <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setCterRsc ?s_setTimeCtr1 (the ?cur_part_id,the ?cur_proc_id) (Int.int(timer_' ?s_setTimeCtr1) +  tout)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1814 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setCntxt1 <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setCntxt ?s_setTCtrRsc1 (the ?cur_part_id,the ?cur_proc_id) (waitEvt (the ?cur_part_id,evt_id))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1815 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getEvtAttrByID s (the ?cur_part_id,evt_id) = None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1816 </font></span><font color="#ff00cc">       &#10230; ?s_r = (s , INVALID_PARAM)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1817 </font></span>    <font color="#006699"><strong>unfolding</strong></font> WAIT_EVENT_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1818 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getEvtAttrByID s (the ?cur_part_id,evt_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1819 </font></span><font color="#ff00cc">                &and; ((nat tout) &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1820 </font></span><font color="#ff00cc">      &#10230; ?s_r = (s , INVALID_PARAM)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1821 </font></span>    <font color="#006699"><strong>unfolding</strong></font> WAIT_EVENT_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1822 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getEvtAttrByID s (the ?cur_part_id,evt_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1823 </font></span><font color="#ff00cc">                &and; &not;((nat tout) &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1824 </font></span><font color="#ff00cc">                &and; (the (eventSta(event_' s)(the ?cur_part_id,evt_id)) = UP)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1825 </font></span><font color="#ff00cc">      &#10230; ?s_r = (s , NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1826 </font></span>    <font color="#006699"><strong>unfolding</strong></font> WAIT_EVENT_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1827 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getEvtAttrByID s (the ?cur_part_id,evt_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1828 </font></span><font color="#ff00cc">                &and; &not;((nat tout) &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1829 </font></span><font color="#ff00cc">                &and; &not;(the (eventSta(event_' s)(the ?cur_part_id,evt_id)) = UP)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1830 </font></span><font color="#ff00cc">                &and; tout = 0</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1831 </font></span><font color="#ff00cc">      &#10230; ?s_r = (s , NOT_AVAILABLE)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1832 </font></span>    <font color="#006699"><strong>unfolding</strong></font> WAIT_EVENT_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1833 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getEvtAttrByID s (the ?cur_part_id,evt_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1834 </font></span><font color="#ff00cc">                &and; &not;((nat tout) &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1835 </font></span><font color="#ff00cc">                &and; &not;(the (eventSta(event_' s)(the ?cur_part_id,evt_id)) = UP)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1836 </font></span><font color="#ff00cc">                &and; &not;(tout = 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1837 </font></span><font color="#ff00cc">                &and; (the ?cur_proc_id) = HM_PROC_ID</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1838 </font></span><font color="#ff00cc">      &#10230;?s_r = (s , INVALID_MODE) &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1839 </font></span>    <font color="#006699"><strong>unfolding</strong></font> WAIT_EVENT_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1840 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getEvtAttrByID s (the ?cur_part_id,evt_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1841 </font></span><font color="#ff00cc">                &and; &not;((nat tout) &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1842 </font></span><font color="#ff00cc">                &and; &not;(the (eventSta(event_' s)(the ?cur_part_id,evt_id)) = UP)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1843 </font></span><font color="#ff00cc">                &and; &not;(tout = 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1844 </font></span><font color="#ff00cc">                &and; &not;((the ?cur_proc_id) = HM_PROC_ID)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1845 </font></span><font color="#ff00cc">                &and; tout = -1</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1846 </font></span><font color="#ff00cc">      &#10230; ?s_r =(schedule_Abs ?s_infiniteWd core_id , NO_ERROR) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1847 </font></span><font color="#ff00cc">          &and; ?waitDiff' &ne; None &and; isInList (the ?bbdRscQue') (the ?cur_part_id,the ?cur_proc_id)  = True&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1848 </font></span>  <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1849 </font></span>    <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>assume</strong></font> <font color="#ff00cc">&quot;&not;(getEvtAttrByID s (the ?cur_part_id,evt_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1850 </font></span><font color="#ff00cc">                &and; &not;((nat tout) &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1851 </font></span><font color="#ff00cc">                &and; &not;(the (eventSta(event_' s)(the ?cur_part_id,evt_id)) = UP)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1852 </font></span><font color="#ff00cc">                &and; &not;(tout = 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1853 </font></span><font color="#ff00cc">                &and; &not;((the ?cur_proc_id) = HM_PROC_ID)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1854 </font></span><font color="#ff00cc">                &and; tout = -1&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1855 </font></span>      <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;?s_r =(schedule_Abs ?s_infiniteWd core_id , NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1856 </font></span>        <font color="#006699"><strong>unfolding</strong></font> WAIT_EVENT_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1857 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?waitDiff' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1858 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> getWaitDiff_setWaitDiff_NotNone calculation getWaitDiff_schedule_Abs<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1859 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;isInList (the ?bbdRscQue') (the ?cur_part_id,the ?cur_proc_id)  = True&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1860 </font></span>        <font color="#006699"><strong>sorry</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1861 </font></span>      <font color="#006699"><strong>ultimately</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot; ?s_r =(schedule_Abs ?s_infiniteWd core_id , NO_ERROR) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1862 </font></span><font color="#ff00cc">          &and; ?waitDiff' &ne; None &and; isInList (the ?bbdRscQue') (the ?cur_part_id,the ?cur_proc_id)  = True&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1863 </font></span>        <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1864 </font></span>    <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1865 </font></span>    <font color="#0099ff"><strong>thus</strong></font> ?thesis 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1866 </font></span>      <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1867 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1868 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getEvtAttrByID s (the ?cur_part_id,evt_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1869 </font></span><font color="#ff00cc">                &and; &not;((nat tout) &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1870 </font></span><font color="#ff00cc">                &and; &not;(the (eventSta(event_' s)(the ?cur_part_id,evt_id)) = UP)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1871 </font></span><font color="#ff00cc">                &and; &not;(tout = 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1872 </font></span><font color="#ff00cc">                &and; &not;((the ?cur_proc_id) = HM_PROC_ID)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1873 </font></span><font color="#ff00cc">                &and; &not;(tout = -1)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1874 </font></span><font color="#ff00cc">      &#10230;?s_r = (schedule_Abs ?s_setCntxt1 core_id , NO_ERROR)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1875 </font></span><font color="#ff00cc">        &and; ?waitDiff' &ne; None &and; ?cterRsc' &ne; None &and; ?cntxt' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1876 </font></span>  <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1877 </font></span>    <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>assume</strong></font> <font color="#ff00cc">&quot;&not;(getEvtAttrByID s (the ?cur_part_id,evt_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1878 </font></span><font color="#ff00cc">                &and; &not;((nat tout) &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1879 </font></span><font color="#ff00cc">                &and; &not;(the (eventSta(event_' s)(the ?cur_part_id,evt_id)) = UP)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1880 </font></span><font color="#ff00cc">                &and; &not;(tout = 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1881 </font></span><font color="#ff00cc">                &and; &not;((the ?cur_proc_id) = HM_PROC_ID)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1882 </font></span><font color="#ff00cc">                &and; &not;(tout = -1)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1883 </font></span>      <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;?s_r = (schedule_Abs ?s_setCntxt1 core_id , NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1884 </font></span>        <font color="#006699"><strong>unfolding</strong></font> WAIT_EVENT_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1885 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?waitDiff' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1886 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> calculation getWaitDiff_schedule_Abs setAddWaitDiff_NotNone waitDiff_setCntxt waitDiff_setCterRsc<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1887 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?cterRsc' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1888 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> getCterRsc_setCntxt calculation<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> getCterRsc_schedule_Abs getCterRsc_set_NotNone<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1889 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?cntxt' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1890 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> getCtx_sd calculation<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> setCtx_Not_None<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1891 </font></span>      <font color="#006699"><strong>ultimately</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?s_r = (schedule_Abs ?s_setCntxt1 core_id , NO_ERROR)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1892 </font></span><font color="#ff00cc">        &and; ?waitDiff' &ne; None &and; ?cterRsc' &ne; None &and; ?cntxt' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1893 </font></span>        <font color="#006699"><strong>by</strong></font> simp
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1894 </font></span>    <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1895 </font></span>    <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>unfolding</strong></font> WAIT_EVENT_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1896 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1897 </font></span>  <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1898 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1899 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1900 </font></span><font color="#006699"><strong>lemma</strong></font> WAIT_EVENT'<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1901 </font></span>  <font color="#ff00cc">&quot;let  s_r = WAIT_EVENT' s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1902 </font></span><font color="#ff00cc">        cur_proc_id = curProcID_Core s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1903 </font></span><font color="#ff00cc">        cur_part_id = curPartID s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1904 </font></span><font color="#ff00cc">        cntxt' = getCntxt (fst s_r) (the cur_part_id,the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1905 </font></span><font color="#ff00cc">      t_getCterRsc = getCterRsc s (the cur_part_id,the cur_proc_id) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1906 </font></span><font color="#ff00cc">    if the t_getCterRsc &lt;= Int.int(timer_' s)  then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1907 </font></span><font color="#ff00cc">      s_r =(resetCntxt s (the cur_part_id,the cur_proc_id)  , TIMED_OUT)&and; cntxt' = None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1908 </font></span><font color="#ff00cc">    else </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1909 </font></span><font color="#ff00cc">     s_r = (resetCntxt s (the cur_part_id,the cur_proc_id)  , NO_ERROR)&and; cntxt' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1910 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1911 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_r <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;WAIT_EVENT' s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1912 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_proc_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curProcID_Core s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1913 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curPartID s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1914 </font></span>  <font color="#006699"><strong>let</strong></font> ?cntxt' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getCntxt (fst ?s_r) (the ?cur_part_id,the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1915 </font></span>  <font color="#006699"><strong>let</strong></font> ?t_getCterRsc <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getCterRsc s (the ?cur_part_id,the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1916 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;(the ?t_getCterRsc &lt;= Int.int(timer_' s))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1917 </font></span><font color="#ff00cc">      &#10230; ?s_r =(resetCntxt s (the ?cur_part_id,the ?cur_proc_id)  , TIMED_OUT)&and; ?cntxt' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1918 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> getCtx_rst_None WAIT_EVENT'_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1919 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(the ?t_getCterRsc &lt;= Int.int(timer_' s))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1920 </font></span><font color="#ff00cc">            &#10230; ?s_r = (resetCntxt s (the ?cur_part_id,the ?cur_proc_id)  , NO_ERROR)&and; ?cntxt' = None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1921 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> getCtx_rst_None WAIT_EVENT'_def<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1922 </font></span>  <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1923 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1924 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1925 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1926 </font></span><font color="#006699"><strong>lemma</strong></font> GET_EVENT_ID<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1927 </font></span>  <font color="#ff00cc">&quot;let s_r = GET_EVENT_ID  s core_id evt_name;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1928 </font></span><font color="#ff00cc">    cur_part_id = curPartID s core_id in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1929 </font></span><font color="#ff00cc">    if getEvtIDByName s (the cur_part_id) evt_name = None then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1930 </font></span><font color="#ff00cc">      s_r = (s , None ,INVALID_CONFIG)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1931 </font></span><font color="#ff00cc">    else </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1932 </font></span><font color="#ff00cc">      s_r = (s, Some (the(getEvtIDByName s (the cur_part_id) evt_name)) , NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1933 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1934 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_r <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;GET_EVENT_ID  s core_id evt_name&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1935 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curPartID s core_id&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1936 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getEvtIDByName s (the ?cur_part_id) evt_name = None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1937 </font></span><font color="#ff00cc">        &#10230; ?s_r = (s , None ,INVALID_CONFIG)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1938 </font></span>    <font color="#006699"><strong>unfolding</strong></font> GET_EVENT_ID_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1939 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getEvtIDByName s (the ?cur_part_id) evt_name = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1940 </font></span><font color="#ff00cc">            &#10230; ?s_r = (s, Some (the(getEvtIDByName s (the ?cur_part_id) evt_name)) , NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1941 </font></span>    <font color="#006699"><strong>unfolding</strong></font> GET_EVENT_ID_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1942 </font></span>  <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1943 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1944 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1945 </font></span><font color="#006699"><strong>lemma</strong></font> GET_EVENT_STATUS<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1946 </font></span>  <font color="#ff00cc">&quot;let s_r = GET_EVENT_STATUS s core_id evt_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1947 </font></span><font color="#ff00cc">      cur_part_id = curPartID s core_id in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1948 </font></span><font color="#ff00cc">    if getEvtAttrByID s (the cur_part_id,evt_id) = None  then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1949 </font></span><font color="#ff00cc">      s_r = (s , None , INVALID_PARAM )</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1950 </font></span><font color="#ff00cc">    else</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1951 </font></span><font color="#ff00cc">      s_r = (s , Some (getEvtStatus s (the cur_part_id,evt_id)) , NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1952 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1953 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_r <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;GET_EVENT_STATUS s core_id evt_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1954 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curPartID s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1955 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getEvtAttrByID s (the ?cur_part_id,evt_id) = None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1956 </font></span><font color="#ff00cc">      &#10230; ?s_r = (s , None , INVALID_PARAM )&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1957 </font></span>    <font color="#006699"><strong>unfolding</strong></font> GET_EVENT_STATUS_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1958 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getEvtAttrByID s (the ?cur_part_id,evt_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1959 </font></span><font color="#ff00cc">      &#10230;?s_r = (s , Some (getEvtStatus s (the ?cur_part_id,evt_id)) , NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1960 </font></span>    <font color="#006699"><strong>unfolding</strong></font> GET_EVENT_STATUS_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1961 </font></span>  <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1962 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1963 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1964 </font></span><font color="#006699"><strong>lemma</strong></font> createUserMutex<font color="#000000"><strong>:</strong></font> <font color="#ff00cc">&quot;getUserPLMtxAttrByID (createUserMutex s cur_part_id umtx_id userMtx_attr) (cur_part_id,umtx_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1965 </font></span><font color="#ff00cc">               = Some userMtx_attr&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1966 </font></span>  <font color="#006699"><strong>unfolding</strong></font> getUserPLMtxAttrByID_def createUserMutex_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1967 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1968 </font></span><font color="#006699"><strong>lemma</strong></font> CREATE_MUTEX<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1969 </font></span>  <font color="#ff00cc">&quot;let s_r = CREATE_MUTEX s core_id userMtx_attr;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1970 </font></span><font color="#ff00cc">      cur_part_id = curPartID s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1971 </font></span><font color="#ff00cc">      umutex_name = USER_PL_MUTEX_ATTR_TYPE.MUTEX_NAME userMtx_attr;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1972 </font></span><font color="#ff00cc">      prio = USER_PL_MUTEX_ATTR_TYPE.MUTEX_PRIORITY userMtx_attr;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1973 </font></span><font color="#ff00cc">      que_disc = USER_PL_MUTEX_ATTR_TYPE.QUE_DISCIPLINE userMtx_attr;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1974 </font></span><font color="#ff00cc">      created_mtxs = size_set (getUserPLMtxsOfPart s (the cur_part_id)) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1975 </font></span><font color="#ff00cc">    if created_mtxs &ge; MAX_NUM_OF_MUTEXES  then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1976 </font></span><font color="#ff00cc">       s_r = (s , None , INVALID_CONFIG)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1977 </font></span><font color="#ff00cc">    else if getBufIDByName s (the cur_part_id) umutex_name &ne; None  then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1978 </font></span><font color="#ff00cc">       s_r = (s , None , NO_ACTION)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1979 </font></span><font color="#ff00cc">    else if prio &gt; MAX_PRIORITY_VALUE then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1980 </font></span><font color="#ff00cc">       s_r = (s , None , INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1981 </font></span><font color="#ff00cc">    else if  the(curMode(partitions_' s)(the cur_part_id)) = NORMAL then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1982 </font></span><font color="#ff00cc">       s_r = (s , None , INVALID_MODE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1983 </font></span><font color="#ff00cc">    else </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1984 </font></span><font color="#ff00cc">        (let umtx_id =  newUserMutexID s (the cur_part_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1985 </font></span><font color="#ff00cc">            s_new = createUserMutex s (the cur_part_id) umtx_id userMtx_attr;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1986 </font></span><font color="#ff00cc">            mtxAttr' = getUserPLMtxAttrByID (fst s_r) (the cur_part_id ,umtx_id) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1987 </font></span><font color="#ff00cc">       s_r = (s_new , Some umtx_id , NO_ERROR)&and; mtxAttr' = Some userMtx_attr  )&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1988 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1989 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_r <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;CREATE_MUTEX s core_id userMtx_attr&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1990 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curPartID s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1991 </font></span>  <font color="#006699"><strong>let</strong></font> ?umutex_name <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;USER_PL_MUTEX_ATTR_TYPE.MUTEX_NAME userMtx_attr&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1992 </font></span>  <font color="#006699"><strong>let</strong></font> ?prio <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;USER_PL_MUTEX_ATTR_TYPE.MUTEX_PRIORITY userMtx_attr&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1993 </font></span>  <font color="#006699"><strong>let</strong></font> ?que_disc <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;USER_PL_MUTEX_ATTR_TYPE.QUE_DISCIPLINE userMtx_attr&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1994 </font></span>  <font color="#006699"><strong>let</strong></font> ?created_mtxs <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;size_set (getUserPLMtxsOfPart s (the ?cur_part_id))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">1995 </font></span>  <font color="#006699"><strong>let</strong></font> ?umtx_id <font color="#000000"><strong>=</strong></font>  <font color="#ff00cc">&quot;newUserMutexID s (the ?cur_part_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1996 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_new <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;createUserMutex s (the ?cur_part_id) ?umtx_id userMtx_attr&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1997 </font></span>  <font color="#006699"><strong>let</strong></font> ?mtxAttr' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getUserPLMtxAttrByID (fst ?s_r) (the ?cur_part_id ,?umtx_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1998 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?created_mtxs &ge; MAX_NUM_OF_MUTEXES</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">1999 </font></span><font color="#ff00cc">       &#10230; ?s_r = (s , None , INVALID_CONFIG) &quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2000 </font></span>    <font color="#006699"><strong>unfolding</strong></font> CREATE_MUTEX_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2001 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(?created_mtxs &ge; MAX_NUM_OF_MUTEXES)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2002 </font></span><font color="#ff00cc">                &and; (getBufIDByName s (the ?cur_part_id) ?umutex_name &ne; None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2003 </font></span><font color="#ff00cc">          &#10230; ?s_r = (s , None , NO_ACTION)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2004 </font></span>    <font color="#006699"><strong>unfolding</strong></font> CREATE_MUTEX_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2005 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(?created_mtxs &ge; MAX_NUM_OF_MUTEXES)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2006 </font></span><font color="#ff00cc">                &and; &not;(getBufIDByName s (the ?cur_part_id) ?umutex_name &ne; None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2007 </font></span><font color="#ff00cc">                &and; (?prio &gt; MAX_PRIORITY_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2008 </font></span><font color="#ff00cc">          &#10230; ?s_r = (s , None , INVALID_PARAM)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2009 </font></span>    <font color="#006699"><strong>unfolding</strong></font> CREATE_MUTEX_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2010 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(?created_mtxs &ge; MAX_NUM_OF_MUTEXES)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2011 </font></span><font color="#ff00cc">                &and; &not;(getBufIDByName s (the ?cur_part_id) ?umutex_name &ne; None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2012 </font></span><font color="#ff00cc">                &and; &not;(?prio &gt; MAX_PRIORITY_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2013 </font></span><font color="#ff00cc">                &and; (the(curMode(partitions_' s)(the ?cur_part_id)) = NORMAL)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2014 </font></span><font color="#ff00cc">          &#10230;  ?s_r = (s , None , INVALID_MODE)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2015 </font></span>    <font color="#006699"><strong>unfolding</strong></font> CREATE_MUTEX_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2016 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(?created_mtxs &ge; MAX_NUM_OF_MUTEXES)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2017 </font></span><font color="#ff00cc">                &and; &not;(getBufIDByName s (the ?cur_part_id) ?umutex_name &ne; None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2018 </font></span><font color="#ff00cc">                &and; &not;(?prio &gt; MAX_PRIORITY_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2019 </font></span><font color="#ff00cc">                &and; &not;(the(curMode(partitions_' s)(the ?cur_part_id)) = NORMAL)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2020 </font></span><font color="#ff00cc">          &#10230; ?s_r = (?s_new , Some ?umtx_id , NO_ERROR)&and; ?mtxAttr'= Some userMtx_attr&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2021 </font></span>  <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2022 </font></span>    <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>assume</strong></font> <font color="#ff00cc">&quot;&not;(?created_mtxs &ge; MAX_NUM_OF_MUTEXES)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2023 </font></span><font color="#ff00cc">                &and; &not;(getBufIDByName s (the ?cur_part_id) ?umutex_name &ne; None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2024 </font></span><font color="#ff00cc">                &and; &not;(?prio &gt; MAX_PRIORITY_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2025 </font></span><font color="#ff00cc">                &and; &not;(the(curMode(partitions_' s)(the ?cur_part_id)) = NORMAL)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2026 </font></span>      <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;?s_r = (?s_new , Some ?umtx_id , NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2027 </font></span>        <font color="#006699"><strong>unfolding</strong></font> CREATE_MUTEX_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2028 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?mtxAttr'= Some userMtx_attr&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2029 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> calculation createUserMutex<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2030 </font></span>      <font color="#006699"><strong>ultimately</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?s_r = (?s_new , Some ?umtx_id , NO_ERROR)&and; ?mtxAttr'= Some userMtx_attr&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2031 </font></span>        <font color="#006699"><strong>by</strong></font> simp
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2032 </font></span>    <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2033 </font></span>    <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2034 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2035 </font></span>  <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2036 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2037 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2038 </font></span><font color="#006699"><strong>lemma</strong></font> ACQUIRE_MUTEX<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2039 </font></span>  <font color="#ff00cc">&quot;let s_r = ACQUIRE_MUTEX s core_id mtx_id tout;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2040 </font></span><font color="#ff00cc">      cur_part_id = curPartID s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2041 </font></span><font color="#ff00cc">      cur_proc_id = curProcID_Core s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2042 </font></span><font color="#ff00cc">      mtx_attr_op = getUserPLMtxAttrByID s (the cur_part_id,mtx_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2043 </font></span><font color="#ff00cc">      mtxPrio = USER_PL_MUTEX_ATTR_TYPE.MUTEX_PRIORITY(the mtx_attr_op);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2044 </font></span><font color="#ff00cc">      procPrio = the(getPriority s (the cur_part_id,the cur_proc_id));</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2045 </font></span><font color="#ff00cc">      waitDiff' = getWaitDiff (fst s_r) (the cur_part_id,the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2046 </font></span><font color="#ff00cc">      cterRsc' = getCterRsc (fst s_r) (the cur_part_id,the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2047 </font></span><font color="#ff00cc">      cntxt' = getCntxt (fst s_r) (the cur_part_id,the cur_proc_id)  in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2048 </font></span><font color="#ff00cc">    if mtx_attr_op = None then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2049 </font></span><font color="#ff00cc">        s_r =(s  , Some INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2050 </font></span><font color="#ff00cc">    else if mtx_id = PREEMPT_MUTEX_ID_TYPE then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2051 </font></span><font color="#ff00cc">        s_r =(s , Some INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2052 </font></span><font color="#ff00cc">    else if nat tout &gt; INVALID_TIMEOUT_VALUE then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2053 </font></span><font color="#ff00cc">       s_r = (s , Some INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2054 </font></span><font color="#ff00cc">    else if (getProcUserPLMtx s (the cur_part_id,the cur_proc_id) &ne; None &and; the(getProcUserPLMtx s (the cur_part_id,the cur_proc_id)) &ne; mtx_id) then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2055 </font></span><font color="#ff00cc">       s_r = (s , Some INVALID_MODE) </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2056 </font></span><font color="#ff00cc">    else if (the cur_proc_id) = HM_PROC_ID then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2057 </font></span><font color="#ff00cc">       s_r = (s , Some INVALID_MODE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2058 </font></span><font color="#ff00cc">    else if procPrio &gt; mtxPrio then </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2059 </font></span><font color="#ff00cc">       s_r = (s , Some INVALID_MODE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2060 </font></span><font color="#ff00cc">    else if getUserPLMtxOwner s (the cur_part_id,mtx_id) = None then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2061 </font></span><font color="#ff00cc">           let s_setOwned = setUserPLMtxOWNED s (the cur_part_id,mtx_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2062 </font></span><font color="#ff00cc">              s_setOwner = setUserPLMtxOwner s_setOwned (the cur_part_id,mtx_id) (the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2063 </font></span><font color="#ff00cc">              s_setUMtxLck = incrementUserPLMtxLck s_setOwner (the cur_part_id,mtx_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2064 </font></span><font color="#ff00cc">              s_rtnCurPrio = retainCurPrioUserPLMtx s_setUMtxLck (the cur_part_id,mtx_id) (the cur_part_id,the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2065 </font></span><font color="#ff00cc">              s_setCurPrio = setPriority s_rtnCurPrio (the cur_part_id,the cur_proc_id) mtxPrio;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2066 </font></span><font color="#ff00cc">              s_setReady =  procReadyHead s_setCurPrio (the cur_part_id,the cur_proc_id) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2067 </font></span><font color="#ff00cc">           s_r = (s_setReady , Some NO_ERROR)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2068 </font></span><font color="#ff00cc">    else if the(getUserPLMtxOwner s (the cur_part_id,mtx_id)) = (the cur_proc_id) then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2069 </font></span><font color="#ff00cc">            if the(getUserPLMtxLckCount s (the cur_part_id,mtx_id)) = MAX_LOCK_LVL then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2070 </font></span><font color="#ff00cc">              s_r = (s , Some INVALID_CONFIG)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2071 </font></span><font color="#ff00cc">            else </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2072 </font></span><font color="#ff00cc">              s_r = (incrementUserPLMtxLck s (the cur_part_id,mtx_id) , Some NO_ERROR)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2073 </font></span><font color="#ff00cc">    else if tout = 0 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2074 </font></span><font color="#ff00cc">          s_r = (s , Some NOT_AVAILABLE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2075 </font></span><font color="#ff00cc">    else if tout = -1 then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2076 </font></span><font color="#ff00cc">           let s_setSta = setProcSta s (the cur_part_id,the cur_proc_id) WAITING;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2077 </font></span><font color="#ff00cc">              s_setWd = setWaitDiff s_setSta (the cur_part_id,the cur_proc_id) tout;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2078 </font></span><font color="#ff00cc">              s_addMtxQue = rscQPush s_setWd (userPlMtx (the cur_part_id,mtx_id)) (the cur_part_id,the cur_proc_id) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2079 </font></span><font color="#ff00cc">           s_r = (schedule_Abs s_addMtxQue core_id , Some NO_ERROR) &and; waitDiff' &ne; None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2080 </font></span><font color="#ff00cc">    else let s_setSta = setProcSta s (the cur_part_id,the cur_proc_id) WAITING;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2081 </font></span><font color="#ff00cc">            s_setTCtrRsc = setCterRsc s_setSta (the cur_part_id,the cur_proc_id) (Int.int(timer_' s_setSta) +  tout);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2082 </font></span><font color="#ff00cc">            s_setWd = setWaitDiff s_setTCtrRsc (the cur_part_id,the cur_proc_id) tout;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2083 </font></span><font color="#ff00cc">            s_addMtxQ = rscQPush s_setWd (userPlMtx (the cur_part_id,mtx_id)) (the cur_part_id,the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2084 </font></span><font color="#ff00cc">            s_addTimeQ = waitAdd_D s_addMtxQ (the cur_part_id,the cur_proc_id);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2085 </font></span><font color="#ff00cc">            s_setTCtrRsc = setCterRsc s_addTimeQ (the cur_part_id,the cur_proc_id) (Int.int(timer_' s_addTimeQ) +  tout);</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2086 </font></span><font color="#ff00cc">            s_setCntxt = setCntxt s_setTCtrRsc (the cur_part_id,the cur_proc_id) acquireMtx  in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2087 </font></span><font color="#ff00cc">         s_r = (schedule_Abs s_setCntxt core_id , None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2088 </font></span><font color="#ff00cc">        &and; waitDiff' &ne; None  &and; cterRsc' &ne; None &and; cterRsc' = Some (Int.int(timer_' s_addTimeQ) +  tout) &and; cntxt' &ne; None &and;  cntxt' = Some acquireMtx&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2089 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2090 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_r <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;ACQUIRE_MUTEX s core_id mtx_id tout&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2091 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curPartID s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2092 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_proc_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curProcID_Core s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2093 </font></span>  <font color="#006699"><strong>let</strong></font> ?mtx_attr_op <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getUserPLMtxAttrByID s (the ?cur_part_id,mtx_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2094 </font></span>  <font color="#006699"><strong>let</strong></font> ?mtxPrio <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;USER_PL_MUTEX_ATTR_TYPE.MUTEX_PRIORITY(the ?mtx_attr_op)&quot;</font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2095 </font></span>  <font color="#006699"><strong>let</strong></font> ?procPrio <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;the(getPriority s (the ?cur_part_id,the ?cur_proc_id))&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2096 </font></span>  <font color="#006699"><strong>let</strong></font> ?waitDiff' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getWaitDiff (fst ?s_r) (the ?cur_part_id,the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2097 </font></span>  <font color="#006699"><strong>let</strong></font> ?cterRsc' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getCterRsc (fst ?s_r) (the ?cur_part_id,the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2098 </font></span>  <font color="#006699"><strong>let</strong></font> ?cntxt' <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getCntxt (fst ?s_r) (the ?cur_part_id,the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2099 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2100 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setOwned <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setUserPLMtxOWNED s (the ?cur_part_id,mtx_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2101 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setOwner <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setUserPLMtxOwner ?s_setOwned (the ?cur_part_id,mtx_id) (the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2102 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setUMtxLck <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;incrementUserPLMtxLck ?s_setOwner (the ?cur_part_id,mtx_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2103 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_rtnCurPrio <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;retainCurPrioUserPLMtx ?s_setUMtxLck (the ?cur_part_id,mtx_id) (the ?cur_part_id,the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2104 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setCurPrio <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setPriority ?s_rtnCurPrio (the ?cur_part_id,the ?cur_proc_id) ?mtxPrio&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2105 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setReady <font color="#000000"><strong>=</strong></font>  <font color="#ff00cc">&quot;procReadyHead ?s_setCurPrio (the ?cur_part_id,the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2106 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2107 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setSta <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setProcSta s (the ?cur_part_id,the ?cur_proc_id) WAITING&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2108 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setWd <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setWaitDiff ?s_setSta (the ?cur_part_id,the ?cur_proc_id) tout&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2109 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_addMtxQue <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;rscQPush ?s_setWd (userPlMtx (the ?cur_part_id,mtx_id)) (the ?cur_part_id,the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2110 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setSta <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setProcSta s (the ?cur_part_id,the ?cur_proc_id) WAITING&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2111 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setTCtrRsc <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setCterRsc ?s_setSta (the ?cur_part_id,the ?cur_proc_id) (Int.int(timer_' ?s_setSta) +  tout)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2112 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setWd <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setWaitDiff ?s_setTCtrRsc (the ?cur_part_id,the ?cur_proc_id) tout&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2113 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_addMtxQ <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;rscQPush ?s_setWd (userPlMtx (the ?cur_part_id,mtx_id)) (the ?cur_part_id,the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2114 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_addTimeQ <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;waitAdd_D ?s_addMtxQ (the ?cur_part_id,the ?cur_proc_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2115 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setTCtrRsc <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setCterRsc ?s_addTimeQ (the ?cur_part_id,the ?cur_proc_id) (Int.int(timer_' ?s_addTimeQ) +  tout)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2116 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_setCntxt <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;setCntxt ?s_setTCtrRsc (the ?cur_part_id,the ?cur_proc_id) acquireMtx&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2117 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?mtx_attr_op = None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2118 </font></span><font color="#ff00cc">      &#10230; ?s_r =(s  , Some INVALID_PARAM)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2119 </font></span>    <font color="#006699"><strong>unfolding</strong></font> ACQUIRE_MUTEX_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2120 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(?mtx_attr_op = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2121 </font></span><font color="#ff00cc">                &and; mtx_id = PREEMPT_MUTEX_ID_TYPE</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2122 </font></span><font color="#ff00cc">      &#10230; ?s_r =(s , Some INVALID_PARAM)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2123 </font></span>    <font color="#006699"><strong>unfolding</strong></font> ACQUIRE_MUTEX_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2124 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(?mtx_attr_op = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2125 </font></span><font color="#ff00cc">                &and; &not;(mtx_id = PREEMPT_MUTEX_ID_TYPE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2126 </font></span><font color="#ff00cc">                &and; (nat tout &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2127 </font></span><font color="#ff00cc">       &#10230; ?s_r = (s , Some INVALID_PARAM)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2128 </font></span>    <font color="#006699"><strong>unfolding</strong></font> ACQUIRE_MUTEX_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2129 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(?mtx_attr_op = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2130 </font></span><font color="#ff00cc">                &and; &not;(mtx_id = PREEMPT_MUTEX_ID_TYPE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2131 </font></span><font color="#ff00cc">                &and; &not;(nat tout &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2132 </font></span><font color="#ff00cc">                &and; (getProcUserPLMtx s (the ?cur_part_id,the ?cur_proc_id) &ne; None &and; the(getProcUserPLMtx s (the ?cur_part_id,the ?cur_proc_id)) &ne; mtx_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2133 </font></span><font color="#ff00cc">       &#10230;?s_r = (s , Some INVALID_MODE)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2134 </font></span>    <font color="#006699"><strong>unfolding</strong></font> ACQUIRE_MUTEX_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2135 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(?mtx_attr_op = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2136 </font></span><font color="#ff00cc">                &and; &not;(mtx_id = PREEMPT_MUTEX_ID_TYPE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2137 </font></span><font color="#ff00cc">                &and; &not;(nat tout &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2138 </font></span><font color="#ff00cc">                &and; &not;(getProcUserPLMtx s (the ?cur_part_id,the ?cur_proc_id) &ne; None &and; the(getProcUserPLMtx s (the ?cur_part_id,the ?cur_proc_id)) &ne; mtx_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2139 </font></span><font color="#ff00cc">                &and; ((the ?cur_proc_id) = HM_PROC_ID)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2140 </font></span><font color="#ff00cc">        &#10230;?s_r = (s , Some INVALID_MODE)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2141 </font></span>    <font color="#006699"><strong>unfolding</strong></font> ACQUIRE_MUTEX_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2142 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(?mtx_attr_op = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2143 </font></span><font color="#ff00cc">                &and; &not;(mtx_id = PREEMPT_MUTEX_ID_TYPE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2144 </font></span><font color="#ff00cc">                &and; &not;(nat tout &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2145 </font></span><font color="#ff00cc">                &and; &not;(getProcUserPLMtx s (the ?cur_part_id,the ?cur_proc_id) &ne; None &and; the(getProcUserPLMtx s (the ?cur_part_id,the ?cur_proc_id)) &ne; mtx_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2146 </font></span><font color="#ff00cc">                &and; &not;((the ?cur_proc_id) = HM_PROC_ID)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2147 </font></span><font color="#ff00cc">                &and; (?procPrio &gt; ?mtxPrio)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2148 </font></span><font color="#ff00cc">        &#10230;?s_r = (s , Some INVALID_MODE)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2149 </font></span>    <font color="#006699"><strong>unfolding</strong></font> ACQUIRE_MUTEX_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2150 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(?mtx_attr_op = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2151 </font></span><font color="#ff00cc">                &and; &not;(mtx_id = PREEMPT_MUTEX_ID_TYPE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2152 </font></span><font color="#ff00cc">                &and; &not;(nat tout &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2153 </font></span><font color="#ff00cc">                &and; &not;(getProcUserPLMtx s (the ?cur_part_id,the ?cur_proc_id) &ne; None &and; the(getProcUserPLMtx s (the ?cur_part_id,the ?cur_proc_id)) &ne; mtx_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2154 </font></span><font color="#ff00cc">                &and; &not;((the ?cur_proc_id) = HM_PROC_ID)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2155 </font></span><font color="#ff00cc">                &and; &not;(?procPrio &gt; ?mtxPrio)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2156 </font></span><font color="#ff00cc">                &and; (getUserPLMtxOwner s (the ?cur_part_id,mtx_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2157 </font></span><font color="#ff00cc">        &#10230;?s_r = (?s_setReady , Some NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2158 </font></span>    <font color="#006699"><strong>unfolding</strong></font> ACQUIRE_MUTEX_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2159 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(?mtx_attr_op = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2160 </font></span><font color="#ff00cc">                &and; &not;(mtx_id = PREEMPT_MUTEX_ID_TYPE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2161 </font></span><font color="#ff00cc">                &and; &not;(nat tout &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2162 </font></span><font color="#ff00cc">                &and; &not;(getProcUserPLMtx s (the ?cur_part_id,the ?cur_proc_id) &ne; None &and; the(getProcUserPLMtx s (the ?cur_part_id,the ?cur_proc_id)) &ne; mtx_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2163 </font></span><font color="#ff00cc">                &and; &not;((the ?cur_proc_id) = HM_PROC_ID)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2164 </font></span><font color="#ff00cc">                &and; &not;(?procPrio &gt; ?mtxPrio)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2165 </font></span><font color="#ff00cc">                &and; &not;(getUserPLMtxOwner s (the ?cur_part_id,mtx_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2166 </font></span><font color="#ff00cc">                &and; (the(getUserPLMtxOwner s (the ?cur_part_id,mtx_id)) = (the ?cur_proc_id))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2167 </font></span><font color="#ff00cc">                    &and; (the(getUserPLMtxLckCount s (the ?cur_part_id,mtx_id)) = MAX_LOCK_LVL)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2168 </font></span><font color="#ff00cc">        &#10230;?s_r = (s , Some INVALID_CONFIG)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2169 </font></span>    <font color="#006699"><strong>unfolding</strong></font> ACQUIRE_MUTEX_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2170 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(?mtx_attr_op = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2171 </font></span><font color="#ff00cc">                &and; &not;(mtx_id = PREEMPT_MUTEX_ID_TYPE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2172 </font></span><font color="#ff00cc">                &and; &not;(nat tout &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2173 </font></span><font color="#ff00cc">                &and; &not;(getProcUserPLMtx s (the ?cur_part_id,the ?cur_proc_id) &ne; None &and; the(getProcUserPLMtx s (the ?cur_part_id,the ?cur_proc_id)) &ne; mtx_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2174 </font></span><font color="#ff00cc">                &and; &not;((the ?cur_proc_id) = HM_PROC_ID)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2175 </font></span><font color="#ff00cc">                &and; &not;(?procPrio &gt; ?mtxPrio)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2176 </font></span><font color="#ff00cc">                &and; &not;(getUserPLMtxOwner s (the ?cur_part_id,mtx_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2177 </font></span><font color="#ff00cc">                &and; (the(getUserPLMtxOwner s (the ?cur_part_id,mtx_id)) = (the ?cur_proc_id))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2178 </font></span><font color="#ff00cc">                    &and; &not;(the(getUserPLMtxLckCount s (the ?cur_part_id,mtx_id)) = MAX_LOCK_LVL)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2179 </font></span><font color="#ff00cc">        &#10230;?s_r = (incrementUserPLMtxLck s (the ?cur_part_id,mtx_id) , Some NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2180 </font></span>    <font color="#006699"><strong>unfolding</strong></font> ACQUIRE_MUTEX_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2181 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(?mtx_attr_op = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2182 </font></span><font color="#ff00cc">                &and; &not;(mtx_id = PREEMPT_MUTEX_ID_TYPE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2183 </font></span><font color="#ff00cc">                &and; &not;(nat tout &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2184 </font></span><font color="#ff00cc">                &and; &not;(getProcUserPLMtx s (the ?cur_part_id,the ?cur_proc_id) &ne; None &and; the(getProcUserPLMtx s (the ?cur_part_id,the ?cur_proc_id)) &ne; mtx_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2185 </font></span><font color="#ff00cc">                &and; &not;((the ?cur_proc_id) = HM_PROC_ID)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2186 </font></span><font color="#ff00cc">                &and; &not;(?procPrio &gt; ?mtxPrio)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2187 </font></span><font color="#ff00cc">                &and; &not;(getUserPLMtxOwner s (the ?cur_part_id,mtx_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2188 </font></span><font color="#ff00cc">                &and; &not;(the(getUserPLMtxOwner s (the ?cur_part_id,mtx_id)) = (the ?cur_proc_id))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2189 </font></span><font color="#ff00cc">                &and; tout = 0</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2190 </font></span><font color="#ff00cc">        &#10230; ?s_r = (s , Some NOT_AVAILABLE)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2191 </font></span>    <font color="#006699"><strong>unfolding</strong></font> ACQUIRE_MUTEX_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2192 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(?mtx_attr_op = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2193 </font></span><font color="#ff00cc">                &and; &not;(mtx_id = PREEMPT_MUTEX_ID_TYPE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2194 </font></span><font color="#ff00cc">                &and; &not;(nat tout &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2195 </font></span><font color="#ff00cc">                &and; &not;(getProcUserPLMtx s (the ?cur_part_id,the ?cur_proc_id) &ne; None &and; the(getProcUserPLMtx s (the ?cur_part_id,the ?cur_proc_id)) &ne; mtx_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2196 </font></span><font color="#ff00cc">                &and; &not;((the ?cur_proc_id) = HM_PROC_ID)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2197 </font></span><font color="#ff00cc">                &and; &not;(?procPrio &gt; ?mtxPrio)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2198 </font></span><font color="#ff00cc">                &and; &not;(getUserPLMtxOwner s (the ?cur_part_id,mtx_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2199 </font></span><font color="#ff00cc">                &and; &not;(the(getUserPLMtxOwner s (the ?cur_part_id,mtx_id)) = (the ?cur_proc_id))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2200 </font></span><font color="#ff00cc">                &and; &not;(tout = 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2201 </font></span><font color="#ff00cc">                &and; (tout = -1)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2202 </font></span><font color="#ff00cc">        &#10230; ?s_r = (schedule_Abs ?s_addMtxQue core_id , Some NO_ERROR) &and; ?waitDiff' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2203 </font></span>    <font color="#006699"><strong>unfolding</strong></font> ACQUIRE_MUTEX_def
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2204 </font></span>    <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> getWaitDiff_setWaitDiff_NotNone fst_conv getWaitDiff_rscQPush_Eq getWaitDiff_schedule_Abs<font color="#000000"><strong>)</strong></font> 
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2205 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(?mtx_attr_op = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2206 </font></span><font color="#ff00cc">                &and; &not;(mtx_id = PREEMPT_MUTEX_ID_TYPE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2207 </font></span><font color="#ff00cc">                &and; &not;(nat tout &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2208 </font></span><font color="#ff00cc">                &and; &not;(getProcUserPLMtx s (the ?cur_part_id,the ?cur_proc_id) &ne; None &and; the(getProcUserPLMtx s (the ?cur_part_id,the ?cur_proc_id)) &ne; mtx_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2209 </font></span><font color="#ff00cc">                &and; &not;((the ?cur_proc_id) = HM_PROC_ID)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2210 </font></span><font color="#ff00cc">                &and; &not;(?procPrio &gt; ?mtxPrio)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2211 </font></span><font color="#ff00cc">                &and; &not;(getUserPLMtxOwner s (the ?cur_part_id,mtx_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2212 </font></span><font color="#ff00cc">                &and; &not;(the(getUserPLMtxOwner s (the ?cur_part_id,mtx_id)) = (the ?cur_proc_id))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2213 </font></span><font color="#ff00cc">                &and; &not;(tout = 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2214 </font></span><font color="#ff00cc">                &and; &not;(tout = -1)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2215 </font></span><font color="#ff00cc">        &#10230; ?s_r = (schedule_Abs ?s_setCntxt core_id , None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2216 </font></span><font color="#ff00cc">        &and; ?waitDiff' &ne; None  &and; ?cterRsc' &ne; None &and; ?cterRsc' = Some (Int.int(timer_' ?s_addTimeQ) +  tout) &and; ?cntxt' &ne; None &and;  ?cntxt' = Some acquireMtx&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2217 </font></span>  <font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2218 </font></span>    <font color="#006699"><strong>{</strong></font><font color="#0099ff"><strong>assume</strong></font> <font color="#ff00cc">&quot;&not;(?mtx_attr_op = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2219 </font></span><font color="#ff00cc">                &and; &not;(mtx_id = PREEMPT_MUTEX_ID_TYPE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2220 </font></span><font color="#ff00cc">                &and; &not;(nat tout &gt; INVALID_TIMEOUT_VALUE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2221 </font></span><font color="#ff00cc">                &and; &not;(getProcUserPLMtx s (the ?cur_part_id,the ?cur_proc_id) &ne; None &and; the(getProcUserPLMtx s (the ?cur_part_id,the ?cur_proc_id)) &ne; mtx_id)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2222 </font></span><font color="#ff00cc">                &and; &not;((the ?cur_proc_id) = HM_PROC_ID)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2223 </font></span><font color="#ff00cc">                &and; &not;(?procPrio &gt; ?mtxPrio)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2224 </font></span><font color="#ff00cc">                &and; &not;(getUserPLMtxOwner s (the ?cur_part_id,mtx_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2225 </font></span><font color="#ff00cc">                &and; &not;(the(getUserPLMtxOwner s (the ?cur_part_id,mtx_id)) = (the ?cur_proc_id))</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2226 </font></span><font color="#ff00cc">                &and; &not;(tout = 0)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2227 </font></span><font color="#ff00cc">                &and; &not;(tout = -1)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2228 </font></span>      <font color="#006699"><strong>hence</strong></font> <font color="#ff00cc">&quot;?s_r = (schedule_Abs ?s_setCntxt core_id , None)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2229 </font></span>        <font color="#006699"><strong>unfolding</strong></font> ACQUIRE_MUTEX_def <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2230 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?cterRsc' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2231 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> getCterRsc_setCntxt calculation getCterRsc_schedule_Abs getCterRsc_set_NotNone<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2232 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?cterRsc' = Some (Int.int(timer_' ?s_addTimeQ) +  tout)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2233 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> getCterRsc_setCntxt calculation<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> getCterRsc_schedule_Abs setCterRsc_NotNone<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2234 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?cntxt' &ne; None &and;  ?cntxt' = Some acquireMtx&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2235 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>simp add<font color="#000000"><strong>:</strong></font> getCtx_sd calculation<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> setCntxt_notNone<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2236 </font></span>      <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?waitDiff' &ne; None&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2237 </font></span>        <font color="#006699"><strong>by</strong></font> <font color="#000000"><strong>(</strong></font>smt <font color="#000000"><strong>(</strong></font>z3<font color="#000000"><strong>)</strong></font> getWaitDiff_setWaitDiff_NotNone calculation<font color="#000000"><strong>(</strong></font>1<font color="#000000"><strong>)</strong></font> fst_conv getWaitDiff_def getWaitDiff_rscQPush_Eq getWaitDiff_schedule_Abs waitAdd_D waitAdd_D_def waitDiff_setCntxt waitDiff_setCterRsc<font color="#000000"><strong>)</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2238 </font></span>      <font color="#006699"><strong>ultimately</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?s_r = (schedule_Abs ?s_setCntxt core_id , None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2239 </font></span><font color="#ff00cc">        &and; ?waitDiff' &ne; None  &and; ?cterRsc' &ne; None &and; ?cterRsc' = Some (Int.int(timer_' ?s_addTimeQ) +  tout) &and; ?cntxt' &ne; None &and;  ?cntxt' = Some acquireMtx&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2240 </font></span>        <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2241 </font></span>    <font color="#006699"><strong>}</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2242 </font></span>    <font color="#0099ff"><strong>thus</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2243 </font></span>  <font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2244 </font></span>  <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> smt
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2245 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2246 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2247 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2248 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2249 </font></span><font color="#006699"><strong>lemma</strong></font> GET_MUTEX_ID<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2250 </font></span>  <font color="#ff00cc">&quot;let s_r =  GET_MUTEX_ID s cid mtx_name;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2251 </font></span><font color="#ff00cc">       cur_part_id = curPartID s cid;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2252 </font></span><font color="#ff00cc">       mtx_id_op = getUserPLMtxIDByName s (the cur_part_id) mtx_name in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2253 </font></span><font color="#ff00cc">     if mtx_id_op = None then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2254 </font></span><font color="#ff00cc">       s_r = (s , None, INVALID_CONFIG)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2255 </font></span><font color="#ff00cc">     else</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2256 </font></span><font color="#ff00cc">       s_r = (s , mtx_id_op, NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2257 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2258 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_r <font color="#000000"><strong>=</strong></font>  <font color="#ff00cc">&quot;GET_MUTEX_ID s cid mtx_name&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2259 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curPartID s cid&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2260 </font></span>  <font color="#006699"><strong>let</strong></font> ?mtx_id_op <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getUserPLMtxIDByName s (the ?cur_part_id) mtx_name&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2261 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?mtx_id_op = None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2262 </font></span><font color="#ff00cc">      &#10230; ?s_r = (s , None, INVALID_CONFIG)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2263 </font></span>    <font color="#006699"><strong>unfolding</strong></font> GET_MUTEX_ID_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2264 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(?mtx_id_op = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2265 </font></span><font color="#ff00cc">      &#10230;?s_r = (s , ?mtx_id_op, NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2266 </font></span>    <font color="#006699"><strong>unfolding</strong></font> GET_MUTEX_ID_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2267 </font></span>  <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2268 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2269 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2270 </font></span><font color="#006699"><strong>lemma</strong></font> GET_MUTEX_STATUS<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2271 </font></span>  <font color="#ff00cc">&quot;let s_i_r = GET_MUTEX_STATUS s cid mtx_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2272 </font></span><font color="#ff00cc">      cur_part_id = curPartID s cid;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2273 </font></span><font color="#ff00cc">      mtx_attr_op = getUserPLMtxAttrByID s (the cur_part_id,mtx_id) in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2274 </font></span><font color="#ff00cc">   if mtx_attr_op = None  then </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2275 </font></span><font color="#ff00cc">      s_i_r = (s , None , INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2276 </font></span><font color="#ff00cc">   else</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2277 </font></span><font color="#ff00cc">       s_i_r = (s ,Some (getMtxStatus s cid mtx_id) , NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2278 </font></span><font color="#006699"><strong>proof</strong></font> -
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2279 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_i_r <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;GET_MUTEX_STATUS s cid mtx_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2280 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curPartID s cid&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2281 </font></span>  <font color="#006699"><strong>let</strong></font> ?mtx_attr_op <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;getUserPLMtxAttrByID s (the ?cur_part_id,mtx_id)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2282 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;?mtx_attr_op = None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2283 </font></span><font color="#ff00cc">      &#10230; ?s_i_r = (s , None , INVALID_PARAM)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2284 </font></span>    <font color="#006699"><strong>unfolding</strong></font> GET_MUTEX_STATUS_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2285 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(?mtx_attr_op = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2286 </font></span><font color="#ff00cc">        &#10230; ?s_i_r = (s ,Some (getMtxStatus s cid mtx_id) , NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2287 </font></span>    <font color="#006699"><strong>unfolding</strong></font> GET_MUTEX_STATUS_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2288 </font></span>  <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2289 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2290 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2291 </font></span><font color="#006699"><strong>lemma</strong></font> GET_PROCESS_MUTEX_STATE<font color="#000000"><strong>:</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2292 </font></span>  <font color="#ff00cc">&quot;let s_sta_r = GET_PROCESS_MUTEX_STATE s core_id proc_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2293 </font></span><font color="#ff00cc">      cur_part_id = curPartID s core_id;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2294 </font></span><font color="#ff00cc">      cur_proc_id = curProcID_Core s core_id in</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2295 </font></span><font color="#ff00cc">  if getProcAttr s (the cur_part_id,proc_id) = None then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2296 </font></span><font color="#ff00cc">      s_sta_r = (s , None , INVALID_PARAM)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2297 </font></span><font color="#ff00cc">   else if getProcUserPLMtx s (the cur_part_id,proc_id) = Some PREEMPT_MUTEX_ID_TYPE then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2298 </font></span><font color="#ff00cc">      s_sta_r = (s , Some PREEMPT_MUTEX_ID_TYPE , NO_ERROR)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2299 </font></span><font color="#ff00cc">   else if getProcUserPLMtx s (the cur_part_id,proc_id) &ne; None then</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2300 </font></span><font color="#ff00cc">      s_sta_r = (s , getProcUserPLMtx s (the cur_part_id,proc_id) , NO_ERROR)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2301 </font></span><font color="#ff00cc">   else </font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2302 </font></span><font color="#ff00cc">      s_sta_r = (s , None , NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2303 </font></span><font color="#006699"><strong>proof</strong></font>-
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2304 </font></span>  <font color="#006699"><strong>let</strong></font> ?s_sta_r <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;GET_PROCESS_MUTEX_STATE s core_id proc_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2305 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_part_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curPartID s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2306 </font></span>  <font color="#006699"><strong>let</strong></font> ?cur_proc_id <font color="#000000"><strong>=</strong></font> <font color="#ff00cc">&quot;curProcID_Core s core_id&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2307 </font></span>  <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;getProcAttr s (the ?cur_part_id,proc_id) = None</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2308 </font></span><font color="#ff00cc">      &#10230;?s_sta_r = (s , None , INVALID_PARAM)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2309 </font></span>    <font color="#006699"><strong>unfolding</strong></font> GET_PROCESS_MUTEX_STATE_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2310 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getProcAttr s (the ?cur_part_id,proc_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2311 </font></span><font color="#ff00cc">              &and; (getProcUserPLMtx s (the ?cur_part_id,proc_id) = Some PREEMPT_MUTEX_ID_TYPE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2312 </font></span><font color="#ff00cc">            &#10230; ?s_sta_r = (s , Some PREEMPT_MUTEX_ID_TYPE , NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2313 </font></span>    <font color="#006699"><strong>unfolding</strong></font> GET_PROCESS_MUTEX_STATE_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2314 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getProcAttr s (the ?cur_part_id,proc_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2315 </font></span><font color="#ff00cc">              &and; &not;(getProcUserPLMtx s (the ?cur_part_id,proc_id) = Some PREEMPT_MUTEX_ID_TYPE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2316 </font></span><font color="#ff00cc">              &and; (getProcUserPLMtx s (the ?cur_part_id,proc_id) &ne; None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2317 </font></span><font color="#ff00cc">            &#10230; ?s_sta_r = (s , getProcUserPLMtx s (the ?cur_part_id,proc_id) , NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2318 </font></span>    <font color="#006699"><strong>unfolding</strong></font> GET_PROCESS_MUTEX_STATE_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2319 </font></span>  <font color="#006699"><strong>moreover</strong></font> <font color="#006699"><strong>have</strong></font> <font color="#ff00cc">&quot;&not;(getProcAttr s (the ?cur_part_id,proc_id) = None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2320 </font></span><font color="#ff00cc">              &and; &not;(getProcUserPLMtx s (the ?cur_part_id,proc_id) = Some PREEMPT_MUTEX_ID_TYPE)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2321 </font></span><font color="#ff00cc">              &and; &not;(getProcUserPLMtx s (the ?cur_part_id,proc_id) &ne; None)</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2322 </font></span><font color="#ff00cc">            &#10230;?s_sta_r = (s , None , NO_ERROR)&quot;</font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2323 </font></span>    <font color="#006699"><strong>unfolding</strong></font> GET_PROCESS_MUTEX_STATE_def <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2324 </font></span>  <font color="#006699"><strong>ultimately</strong></font> <font color="#0099ff"><strong>show</strong></font> ?thesis <font color="#006699"><strong>by</strong></font> auto
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2325 </font></span><font color="#006699"><strong>qed</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2326 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2327 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2328 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2329 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2330 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2331 </font></span><font color="#009966"><strong>end</strong></font>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2332 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2333 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2334 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2335 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2336 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2337 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2338 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff000000">2339 </font></span>
<span style="background:#ffffffff; border-right:solid 2px black; margin-right:5px; "><font color="#ff990066">2340 </font></span>
</font></pre>
</body>
</html>
